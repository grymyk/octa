(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{354:function(t,e,n){"use strict";n.r(e);var o=n(1285),r=n(780),i=n(121),a=n(0),s=n(14),l=n(57),u=n(15),c=(n(961),n(6)),p=n(3),d=n(75),h=n(25),f=n(7),g=function(){function t(){$("#notifications-modal").on("click",".cart-upsell-go-to-cart-button",this.handleOpenCartButtonClick.bind(this)),$("#notifications-modal").on("click",".cart-upsell-add-to-cart-button",this.handleAddToCartButtonClick.bind(this))}return t.prototype.show=function(t,e,n,o){var r=this;Promise.all([h.a.getCustomersAlsoBoughtProducts(t),f.a.isCurrentlyLoggedIn()?h.a.getUsersLibrary():Promise.resolve([])]).then((function(t){for(var i=t[0],a=t[1],s={},l=0,u=a;l<u.length;l++){var c=u[l];s[c.shortName]=!0}i=i.filter((function(t){return!O.isBookShortNameInShoppingCart(t.externalId)&&!s[t.externalId]})),h.a.getBooksFromCatalog(i.map((function(t){return t.externalId}))).then((function(t){r.renderModalContent(e,n,r.sortProductsThroughBooks(i,t),o)})).catch((function(t){r.renderModalContent(e,n,i,o)}))}))},t.prototype.renderModalContent=function(t,e,n,o){$(document).trigger("cartUpsellShown",t);var r=Mustache.render(m,{title:t,coverPath:e,products:n,isCombo:o});l.a.showNotificationModal("",r,!1),p.a.setTimeout((function(){c.a.replaceBookCoversOnImageLoad($("#notifications-modal"),n.map((function(t){return t.imageUrl})))}),16)},t.prototype.sortProductsThroughBooks=function(t,e){if(null==e||0==e.length)return t;for(var n={},o=0,r=e;o<r.length;o++){var i=r[o];n[i.shortName]=i.lastUpdateDate}return t.sort((function(t,e){return n[e.externalId].getTime()-n[t.externalId].getTime()}))},t.prototype.handleCloseUpsellModal=function(){l.a.hideNotificationModal()},t.prototype.handleOpenCartButtonClick=function(){l.a.hideNotificationModal(),p.a.setTimeout((function(){d.a.requestMenuOpen()}),200)},t.prototype.handleAddToCartButtonClick=function(t){var e=$(t.target).closest(".cart-upsell-carausel-item"),n=e.closest(".cart-upsell-root"),o=e.attr("data-book-short-name"),r=e.attr("data-book-title");$(document).trigger("cartUpsellAddToCartClick",o),n.find(".cart-upsell-processing-notification-container").html("adding <i>"+u.a.cleanBookTitle(r)+"</i>"),n.addClass("upsell-processing"),p.a.setTimeout((function(){d.a.requestAddBookToCartByBookShortName(o)}),500)},t}(),m='<div class="cart-upsell-root">\n    <div class="cart-upsell-top-row">\n        <div class="cart-upsell-current-product-wrapper">\n            <div class="cart-upsell-product-title-commands-container">\n                <div class="cart-upsell-product-title-container">\n                    <i>{{title}}</i> {{#isCombo}}print book{{/isCombo}} {{^isCombo}}eBook{{/isCombo}} added to cart\n                </div>\n                <div class="cart-upsell-cart-button cart-upsell-button cart-upsell-go-to-cart-button">go to cart</div>\n            </div>\n            <div class="cart-upsell-product-cover-container">\n                <img src="{{coverPath}}" alt="cover">\n            </div>\n        </div>\n    </div>\n    <div class="cart-upsell-bottom-row">\n        <div class="cart-upsell-related-products-wrapper">\n            <div class="cart-upsell-related-products-heading">customers also bought these items</div>\n            <div class="cart-upsell-carausel">\n                {{#products}}\n                <div class="cart-upsell-carausel-item" data-product-id="{{id}}" data-book-short-name="{{externalId}}" data-book-title="{{title}}">\n                    <a target="_blank" href="{{link}}" title="open product">\n                        <img class="book-cover" src="'+a.a.getLivebookCdn()+'assets/images/cover.png" data-src="{{imageUrl}}" alt="cover"/>\n                        <div class="cart-upsell-command-overlay" alt="view product"><i class="fa fa-eye"></i></div>\n                    </a>\n                    <div class="cart-upsell-button cart-upsell-add-to-cart-button">\n                        <i class="fa fa-cart-plus"></i>\n                        <span>add to cart</span>\n                    </div>\n                </div>\n                {{/products}}\n            </div>\n        </div>\n    </div>\n    <div class="cart-upsell-processing-container">\n        <i class="fa fa-spin fa-circle-o-notch fa-2x fa-fw"></i>\n        <span class="cart-upsell-processing-notification-container"></span>\n    </div>\n</div>',v=new g,y=n(132),b=n(4),C=new(function(){function t(){}return t.prototype.getCurrentShoppingCartItemsAndDiscount=function(){var t=this;return new Promise((function(e,n){a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/cart/getCart"),(function(n){return t.getShoppingCartItemsAndDiscountFromCart(n).then((function(t){return e(t)})).catch((function(t){return e({shoppingCartItems:[],discountCode:""})}))}),(function(t){return e({shoppingCartItems:[],discountCode:""})}))}))},t.prototype.getShoppingCartItemsAndDiscountFromCart=function(t){var e=this;return new Promise((function(n,o){h.a.getCatalog().then((function(o){var r=e.tryToGetShoppingCartItemsFromLineItems(t&&t.lineItems,o),i=r.shoppingCartItems,a=t.codes&&t.codes[0]&&t.codes[0].name;r.missingProductSlugs.length?e.getShoppingCartItemsFromGeneralProducts(t&&t.lineItems,r.missingProductSlugs).then((function(t){n({shoppingCartItems:i.concat(t),discountCode:a})})):n({shoppingCartItems:i,discountCode:a})})).catch((function(t){n({shoppingCartItems:[],discountCode:""})}))}))},t.prototype.tryToGetShoppingCartItemsFromLineItems=function(t,e){var n={shoppingCartItems:[],missingProductSlugs:[]};if(!t)return n;var o=t.map((function(t){return t.productOffering.lineItem=t,t.productOffering})),i=o.filter((function(t){return"AUDIO"==t.productType&&!t.lineItem.bundle})),s=o.filter((function(t){return"AUDIO"!=t.productType&&!t.lineItem.bundle}));if(0==s.length&&i.length)return n.shoppingCartItems=i.map((function(t){var n=e.find((function(e){return e.manningId==t.productId}));return n?new r.b(t.id,u.a.cleanBookTitle(n.title),n.authors,n.bookCoverPath,a.a.getBookUrlFromBook(n),0,!1,1,[new r.a(t.id,"audio",parseFloat(t.lineItem.unitListPriceString||"0"),!0,parseFloat(t.lineItem.unitAmountDiscountedString||"0"))],0,!0,!1,"",t.productId):null})).filter((function(t){return null!=t})),n;var l={};n.shoppingCartItems=s.map((function(t){if(l[t.id])return null;if("TOKEN"==t.productType)return new r.b(t.id,"Token","","https://s3-us-west-2.amazonaws.com/live-platforms-common-resources/resources/tokens.png","",parseFloat(t.lineItem.unitListPriceString),!1,t.lineItem.quantity,[],0,!1,!0,"",t.productId);var o=e.find((function(e){return e.manningId==t.productId}));if(!o)return n.missingProductSlugs.push(t.lineItem.slug),null;l[t.id]=!0;var s,c,p=parseFloat(t.lineItem.unitListPriceString||"0"),d=parseFloat(t.lineItem.unitAmountDiscountedString||"0"),h=!!(t.lineItem.reduction&&t.lineItem.reduction.discount&&t.lineItem.reduction.discount&&t.lineItem.reduction.discount.enabled);return new r.b(t.id,u.a.cleanBookTitle(o.title),o.authors,o.bookCoverPath,a.a.getBookUrlFromBook(o),h?p-d:p,"COMBO"==t.productType,t.lineItem.quantity,(s=t.productId,(c=i.find((function(t){return t.productId==s})))?[new r.a(c.id,"audio",parseFloat(c.lineItem.unitListPriceString||"0"),!0)]:[]),d,o.userOwnsBook,!1,"",t.productId,!1,!1,h)})).filter((function(t){return null!=t}));var c=b.a.getUniqueEntries(o.filter((function(t){return t.lineItem.bundle})).map((function(t){return t.lineItem.bundle})),"id");return c.length&&(n.shoppingCartItems=n.shoppingCartItems.concat(this.getShoppingCartItemsFromBundles(c))),n.missingProductSlugs=b.a.getUniqueStringItems(n.missingProductSlugs),n},t.prototype.getShoppingCartItemsFromBundles=function(t){var e=this;return t&&t.length?t.map((function(t){return new r.b(t.id,t.title,"",a.a.getMarketplaceProductCoverUrl(t.imageUrl),"",e.getBundlePrice(t)-t.reductionAmount,!1,1,[],0,!1,!1,"",t.id,!1,!0)})):[]},t.prototype.getBundlePrice=function(t){var e=0;if(t&&t.productOfferings&&t.productOfferings.length)for(var n=0,o=t.productOfferings;n<o.length;n++){e+=o[n].price}return e},t.prototype.getShoppingCartItemsFromGeneralProducts=function(t,e){return e&&e.length?new Promise((function(n,o){h.a.getGeneralProducts(e).then((function(e){n(e.map((function(e){var n=t.find((function(t){return null!=t.productOffering&&t.productOffering.productId==e.id}));if(null==n)return null;var o=parseFloat(n.unitListPriceString||"0"),i=parseFloat(n.unitAmountDiscountedString||"0"),s=!!(n.reduction&&n.reduction.discount&&n.reduction.discount&&n.reduction.discount.enabled);return new r.b(n.productOffering.id,e.title,e.authorshipDisplay,a.a.getMarketplaceProductCoverUrl(e.imageUrl),"",s?o-i:o,"COMBO"==n.productOffering.productType,n.quantity,[],i,!1,!1,"",n.productOffering.productId,!1,!1,s)})).filter((function(t){return null!=t})))})).catch((function(t){n([])}))})):Promise.resolve([])},t}()),w=n(17),S="https://www.manning.com",T="https://www.manning.com/cart";var k="We're having problems synchronizing cart data with our server. Please, visit <a href='https://www.manning.com/cart'>manning.com/cart</a> to complete your order",I=$(document),O=new(function(){function t(){var t=this;this.bookShortNameProductOfferingsMap={},this.bookShortNameNewestEditionMap={},this.bookShortNameProductDiscountsMap={},this.bookShortNameProductDiscountPromiseMap={},this.syncAddingCartItem=this.syncAddingCartItem.bind(this),this.syncRemovingCartItem=this.syncRemovingCartItem.bind(this),this.syncReplacingCartItem=this.syncReplacingCartItem.bind(this),this.syncDiscountReset=this.syncDiscountReset.bind(this),I.on("shoppingCartOpened",(function(){return t.handleShoppingCartOpened()})),this.getInitialShoppingCartStore()}return t.prototype.getInitialShoppingCartStore=function(){var t=this;return this.initialShoppingCartStorePromise?this.initialShoppingCartStorePromise:this.initialShoppingCartStorePromise=new Promise((function(e,n){f.a.isLoggedIn().then((function(){C.getCurrentShoppingCartItemsAndDiscount().then((function(n){t.shoppingCartStore=new o.a(n.shoppingCartItems),n.discountCode&&t.shoppingCartStore.updateDiscountCode(n.discountCode),t.shoppingCartStore.marketplaceUrl=S,t.shoppingCartStore.cartUrl=T,t.shoppingCartStore.eventEmitter.on("itemsChanged",(function(){return t.handleItemsChanged()})),t.shoppingCartStore.eventEmitter.on("shoppingCartItemAdded",t.syncAddingCartItem),t.shoppingCartStore.eventEmitter.on("shoppingCartItemRemoved",t.syncRemovingCartItem),t.shoppingCartStore.eventEmitter.on("shoppingCartItemReplaced",t.syncReplacingCartItem),t.shoppingCartStore.eventEmitter.on("discountRequested",(function(){return t.discountRequested()})),t.shoppingCartStore.eventEmitter.on("discountReset",t.syncDiscountReset),t.shoppingCartStore.eventEmitter.on("shopping-cart-busy",(function(){return t.toggleAddToCartButtons(!0)})),t.shoppingCartStore.eventEmitter.on("shopping-cart-not-busy",(function(){return t.toggleAddToCartButtons(!1)})),t.handleItemsChanged(),e(t.shoppingCartStore)})).catch((function(t){n(t)}))})).catch((function(t){return n(t)}))}))},t.prototype.syncAddingCartItem=function(t){var e=this;this.shoppingCartStore.setShoppingCartBusy(),w.a.isShoppingCartBusy=!0,a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/cart/addProductOffering"),(function(t){return e.updateShoppingCartStoreFromCart(t)}),(function(t){w.a.isShoppingCartBusy=!1,e.shoppingCartStore.enterSyncingFail(k)}),{productOfferingId:t.id,quantity:t.quantity,discountCode:t.discountCode||"",audioProductOfferingId:(t.childItems||[]).map((function(t){return t.id}))[0]||0})},t.prototype.syncReplacingCartItem=function(t){var e=this,n=t[0],o=t[1];this.shoppingCartStore.setShoppingCartBusy(),w.a.isShoppingCartBusy=!0,a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/cart/replaceProductOffering"),(function(t){return e.updateShoppingCartStoreFromCart(t)}),(function(t){w.a.isShoppingCartBusy=!1,e.shoppingCartStore.enterSyncingFail(k)}),{existingProductOfferingId:n.id,newProductOfferingId:o.id})},t.prototype.syncRemovingCartItem=function(t){var e=this;this.shoppingCartStore.setShoppingCartBusy(),w.a.isShoppingCartBusy=!0,a.a.getFromOurBackend(a.a.getAbsoluteUrl(t.isBundle?"api/cart/removeBundle":"api/cart/removeProductOffering"),(function(t){return e.updateShoppingCartStoreFromCart(t)}),(function(t){w.a.isShoppingCartBusy=!1,e.shoppingCartStore.enterSyncingFail(k)}),{id:t.id})},t.prototype.discountRequested=function(){var t=this;this.shoppingCartStore.setShoppingCartBusy(),w.a.isShoppingCartBusy=!0,a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/cart/addOrUpdateCoupon"),(function(e){e.error?(t.shoppingCartStore.setDiscountError(e.message),t.shoppingCartStore.setShoppingCartNotBusy(),w.a.isShoppingCartBusy=!1):t.updateShoppingCartStoreFromCart(e)}),(function(e){w.a.isShoppingCartBusy=!1,t.shoppingCartStore.enterSyncingFail(k)}),{code:this.shoppingCartStore.getDiscountCode()})},t.prototype.syncDiscountReset=function(t){var e=this;this.shoppingCartStore.setShoppingCartBusy(),w.a.isShoppingCartBusy=!0,a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/cart/removeCoupon"),(function(t){return e.updateShoppingCartStoreFromCart(t)}),(function(t){w.a.isShoppingCartBusy=!1,e.shoppingCartStore.enterSyncingFail(k)}),{code:t})},t.prototype.updateShoppingCartStoreFromCart=function(t){var e=this;C.getShoppingCartItemsAndDiscountFromCart(t).then((function(t){e.shoppingCartStore.setAsShoppingCartItems(t.shoppingCartItems),e.shoppingCartStore.getDiscountCode()!=t.discountCode&&e.shoppingCartStore.updateDiscountCode(t.discountCode),e.shoppingCartStore.setShoppingCartNotBusy(),w.a.isShoppingCartBusy=!1})).catch((function(t){console.log("Error"),alert("Error:"+t)}))},t.prototype.handleShoppingCartOpened=function(){I.trigger("cc-minicart-viewed",this.buildConvertCartEventData())},t.prototype.getBookPrice=function(t){var e=this;return new Promise((function(n,o){e.getProductOfferings(t).then((function(t){if(t&&t.length){var e=t.find((function(t){return t.isEBookOffering()}));n(e?e.price:0)}else n(0)})).catch((function(t){return o(t)}))}))},t.prototype.getTokenProductOffering=function(){return null!=this.tokenProductOfferingPromise?this.tokenProductOfferingPromise:this.tokenProductOfferingPromise=new Promise((function(t,e){a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/cart/getTokenProduct"),(function(n){if(null!=n&&null!=n.productOfferings&&0!=n.productOfferings.length){var o=n.productOfferings[0],r=new i.b(o.id,n.id,o.price,o.productType,0);r.imageUrl=n.imageUrl&&a.a.getMarketplaceProductCoverUrl(n.imageUrl),r.slug=n.slug,t(r)}else e("No token product offerings")}),(function(t){return e(t)}))}))},t.prototype.getProductSpendingInfo=function(t){return t&&f.a.isCurrentlyLoggedIn()?new Promise((function(e,n){a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/token/getUserProductSpendingInfo"),(function(n){t.spendingInfo=n,I.trigger("bookSpendingInfoArrived"),e(n)}),(function(t){return e({spentTokenAmount:0,spentDollarAmount:0})}),{manningId:t.manningId})})):Promise.resolve({spentTokenAmount:0,spentDollarAmount:0})},t.prototype.getNewestEditionProduct=function(t){var e=this;return t&&t.manningId?this.bookShortNameNewestEditionMap[t.shortName]?Promise.resolve(this.bookShortNameNewestEditionMap[t.shortName]):new Promise((function(n,o){a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/cart/getNewestEditionProduct"),(function(o){o&&o.newestEditionProduct&&o.newestEditionProduct.title?n(e.bookShortNameNewestEditionMap[t.shortName]=o):n(e.bookShortNameNewestEditionMap[t.shortName]=null)}),(function(t){return n(null)}),{manningId:t.manningId})})):Promise.resolve(null)},t.prototype.getProductOfferings=function(t){var e=this;return t&&t.manningId?this.bookShortNameProductOfferingsMap[t.shortName]?Promise.resolve(this.bookShortNameProductOfferingsMap[t.shortName]):new Promise((function(n,o){a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/cart/getProductOfferings"),(function(o){if(o&&o.length){var r=o.filter((function(t){return!!t.productType&&i.b.productTypes.indexOf(t.productType)>=0})).map((function(e){return new i.b(e.id,t.manningId,e.price,e.productType,e.unitAmountDiscounted||0)}));n(e.bookShortNameProductOfferingsMap[t.shortName]=r)}else n(e.bookShortNameProductOfferingsMap[t.shortName]=[])}),(function(t){return o(t)}),{manningId:t.manningId})})):Promise.resolve([])},t.prototype.getProductDiscounts=function(t,e){var n=this;return t?this.bookShortNameProductDiscountsMap[t.shortName]?Promise.resolve(this.bookShortNameProductDiscountsMap[t.shortName]):this.bookShortNameProductDiscountPromiseMap[t.shortName]?this.bookShortNameProductDiscountPromiseMap[t.shortName]:this.bookShortNameProductDiscountPromiseMap[t.shortName]=new Promise((function(o,r){a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/cart/getCampaignDiscounts"),(function(e){o(n.bookShortNameProductDiscountsMap[t.shortName]=e||{})}),(function(e){n.bookShortNameProductDiscountPromiseMap[t.shortName]=null,r(e)}),{manningId:t.manningId,code:e})})):Promise.resolve({})},t.prototype.isDotd=function(t){return t?new Promise((function(e,n){y.a.getDotdProducts().then((function(n){e(!!n.find((function(e){return e.id==t.manningId})))})).catch((function(t){return e(!1)}))})):Promise.resolve(!1)},t.prototype.addNewerEdtionToCart=function(t){var e=this;h.a.getBook("",t).then((function(t){e.addBookToCart(t)}))},t.prototype.addBookToCart=function(t,e,n,o,i){var s=this;void 0===e&&(e=!0),void 0===n&&(n=""),void 0===o&&(o=!1),void 0===i&&(i=!1),t&&(!i&&this.isEbookInShoppingCart(t)||i&&this.isComboInShoppingCart(t)||Promise.all([this.getProductOfferings(t),this.getInitialShoppingCartStore()]).then((function(c){var p=c[0];if(p&&p.length){if(l.a.hideNotification(),(i||!s.isEbookInShoppingCart(t))&&(!i||!s.isComboInShoppingCart(t))){var d=p.find((function(t){return t.isEBookOffering()})),h=p.find((function(t){return t.isAudioOffering()})),f=p.find((function(t){return t.isComboOffering()}));if(!t.userOwnsBook||h){var g=i?f:d,m=g.unitAmountDiscounted>0&&!g.discountCode,y=new r.b(g&&g.id,u.a.cleanBookTitle(t.title),t.authors,t.bookCoverPath,a.a.getBookUrlFromBook(t),g?m?g.price-g.unitAmountDiscounted:g.price:0,i,1,h?[new r.a(h.id,"audio",h.price,e)]:[],null!=g?g.unitAmountDiscounted:0,t.userOwnsBook,!1,"",t.manningId,o,!1,m);if(y.externalId=t.shortName,y.productId=t.manningId,y.discountCode=n||"",i&&s.isEbookInShoppingCart(t)){var b=s.shoppingCartStore.getShoppingCartItems().find((function(e){return e.productId==t.manningId&&!e.isCombo}));null!=b?s.shoppingCartStore.replaceShoppingCartItem(b,y):s.shoppingCartStore.addShoppingCartItem(y)}else s.shoppingCartStore.addShoppingCartItem(y);v.show(t.shortName,u.a.cleanBookTitle(t.title),t.bookCoverPath,i);try{$(document).trigger("productAddedToCart",[t.shortName,s.getCurrentNumberOfShoppingCartItems()])}catch(t){}}}}else l.a.showTemporaryNotification("Cannot add: "+t.title+" to the shopping cart. The book is out of print.")})).catch((function(t){l.a.showTemporaryNotification("Error adding book to shopping cart. Try later.")})))},t.prototype.getCurrentNumberOfShoppingCartItems=function(){if(null==this.shoppingCartStore)return 0;var t=this.shoppingCartStore.getShoppingCartItems();return null==t?0:t.length},t.prototype.addTokensToCart=function(t){var e=this;if(!(t<=0||null==this.shoppingCartStore)){var n=this.shoppingCartStore.getShoppingCartItems().find((function(t){return t.isTokenItem}));null==n?this.getTokenProductOffering().then((function(n){e.shoppingCartStore.addShoppingCartItem(new r.b(n.id,"Tokens","",n.imageUrl||"https://s3-us-west-2.amazonaws.com/live-platforms-common-resources/resources/tokens.png",a.a.getProductionMarketplaceUrl("token/"+n.slug),n.price,!1,t,[],0,!1,!0,"Tokens are used to unlock parts of our products"))})):this.shoppingCartStore.setNewTokenQuantity(n.quantity+t)}},t.prototype.isInShoppingCart=function(t){return!!this.shoppingCartStore&&(!!t&&null!=this.shoppingCartStore.getShoppingCartItems().find((function(e){return e.productId==t.manningId})))},t.prototype.isEbookInShoppingCart=function(t){return!!this.shoppingCartStore&&(!!t&&null!=this.shoppingCartStore.getShoppingCartItems().find((function(e){return e.productId==t.manningId&&!e.isCombo})))},t.prototype.isComboInShoppingCart=function(t){return!!this.shoppingCartStore&&(!!t&&null!=this.shoppingCartStore.getShoppingCartItems().find((function(e){return e.productId==t.manningId&&e.isCombo})))},t.prototype.isBookShortNameInShoppingCart=function(t){return!!this.shoppingCartStore&&(!!t&&null!=this.shoppingCartStore.getShoppingCartItems().find((function(e){return e.externalId==t})))},t.prototype.isBusy=function(){return!!this.shoppingCartStore&&this.shoppingCartStore.isBusy},t.prototype.handleItemsChanged=function(){s.a.setItem("shopping-cart-items",JSON.stringify(this.shoppingCartStore.getShoppingCartItems())),I.trigger("shoppingCartItemsChanged"),I.trigger("cc-minicart-viewed",this.buildConvertCartEventData())},t.prototype.toggleAddToCartButtons=function(t){$(".add-to-cart-button").toggleClass("disabled",t)},t.prototype.buildConvertCartEventData=function(){try{return{totalPrice:this.shoppingCartStore.getTotalPrice(),items:this.shoppingCartStore.getShoppingCartItems()}}catch(t){return{totalPrice:0,items:[]}}},t}()),P=n(357),E=n(360),D=n(363),M=n(1282),x=n(29),L=n(671),H=n.n(L),N=n(1),A=$(document),_=new(function(){function t(){var t=this;this.handleCheckoutInitialized.bind(this),this.$shoppingCartCountContainer=A.find(".shopping-cart-button .header-icon-notification"),A.on("shoppingCartItemsChanged",(function(){return t.handleShoppingCartItemsPossiblyChanged()})),this.handleShoppingCartItemsPossiblyChanged(),p.a.onDescendantEventWithCooldown(A,"click",".shopping-cart-login-button",(function(){a.a.addAdditionalInstructionToExecuteAfterReload("openShoppingCart"),x.a.requestLogin("","shopping")})),p.a.onDescendantEventWithCooldown(A,"click",".shopping-cart-item-open-book",(function(e){t.renderShoppingCartComponent(!1)})),A.on("click",".open-shopping-cart-link",(function(){p.a.setTimeout((function(){return t.openMenu()}),200)})),A.on("initializeRequested",(function(){p.a.setTimeout((function(){t.initialize()}),200)})),A.on("cartCheckoutInitiated",this.handleCheckoutInitialized),$(".shopping-cart-button").on("click",(function(){return t.openMenu()}))}return t.prototype.initialize=function(){this.automaticallyOpenWhenInitialized&&(this.openMenu(),this.automaticallyOpenWhenInitialized=!1)},t.prototype.openMenu=function(){w.a.isShoppingCartDisabledInApp&&N.b.isApp()?$(document).trigger("requestNotification","In app purchases currently disabled."):this.renderShoppingCartComponent(!0)},t.prototype.renderShoppingCartComponent=function(t){var e=this;void 0===t&&(t=!0),t?f.a.isLoggedIn().then((function(n){O.shoppingCartStore.setShoppingCartBusy(),E.render(P.createElement(D.b,{mainContainerClassName:"shopping-cart-modal",isOpen:t,onClose:function(t){return e.renderShoppingCartComponent(!1)},isContentVerticalTop:!0,dontGoFullWidth:!0,hasNoPadding:!0,noWidthLimitation:!0,contentTopOffset:50,additionalModalHeaderClass:"shopping-cart-modal-header",initialOverlayTop:"0px"},P.createElement(M.a,{shoppingCartStore:O.shoppingCartStore,verticalOffset:50})),document.getElementById("full-screen-modal")),f.a.isLoggedIn(!0).then((function(n){e.isMenuOpened=t,O.shoppingCartStore.setShoppingCartNotBusy(),E.render(P.createElement(D.b,{mainContainerClassName:"shopping-cart-modal",isOpen:t,onClose:function(t){return e.renderShoppingCartComponent(!1)},isContentVerticalTop:!0,dontGoFullWidth:!0,hasNoPadding:!0,noWidthLimitation:!0,contentTopOffset:50,additionalModalHeaderClass:"shopping-cart-modal-header",initialOverlayTop:"0px"},P.createElement(M.a,{shoppingCartStore:O.shoppingCartStore,verticalOffset:50})),document.getElementById("full-screen-modal"),(function(){e.isMenuOpened?A.trigger("shoppingCartOpened"):A.trigger("shoppingCartClosed")}))}))})):E.unmountComponentAtNode(document.getElementById("full-screen-modal"))},t.prototype.handleShoppingCartItemsPossiblyChanged=function(){var t=this,e=null!=O.shoppingCartStore?(O.shoppingCartStore.getShoppingCartItems()||[]).length:0,n=this.$shoppingCartCountContainer.text();e+""!=n&&(this.$shoppingCartCountContainer.toggleClass("hidden",0==e),setTimeout((function(){t.$shoppingCartCountContainer.text(e),t.$shoppingCartCountContainer.addClass("appear")}),200))},t.prototype.handleCheckoutInitialized=function(){var t=H()(),e=[];O.shoppingCartStore.showItemsStep.shoppingCartItems.forEach((function(n){var o={id:t,name:n.title,sku:n.productId,category:"book",price:n.price-n.discount,quantity:n.quantity};e.push(o)}));var n=0;e.forEach((function(t){n+=t.price}));var o={id:t,affiliation:"liveBook",revenue:n};A.trigger("startTransactionInGA",o),e.forEach((function(t){A.trigger("addItemToCartInGA",t)})),A.trigger("sendTransactionInGA")},t}());n.d(e,"ShoppingCartManager",(function(){return B}));var B=new(function(){function t(){}return t.prototype.requestMenuOpen=function(){_.openMenu()},t.prototype.requestAddNewerEditionToCart=function(t){O.addNewerEdtionToCart(t)},t.prototype.requestAddBookToCart=function(t,e,n,o,r){void 0===o&&(o=!1),void 0===r&&(r=!1),O.addBookToCart(t,e,n,o,r)},t.prototype.getProductOfferings=function(t){return O.getProductOfferings(t)},t.prototype.isDotd=function(t){return O.isDotd(t)},t.prototype.getNewestEditionProduct=function(t){return O.getNewestEditionProduct(t)},t.prototype.getProductDiscounts=function(t,e){return O.getProductDiscounts(t,e)},t.prototype.getTokenProductOffering=function(){return O.getTokenProductOffering()},t.prototype.automaticallyOpenWhenInitialized=function(){_.automaticallyOpenWhenInitialized=!0},t.prototype.getBookPrice=function(t){return O.getBookPrice(t)},t.prototype.getProductSpendingInfo=function(t){return O.getProductSpendingInfo(t)},t.prototype.addTokensToCart=function(t){O.addTokensToCart(t)},t.prototype.showLoginModal=function(t){void 0===t&&(t=""),x.a.requestOpenModal("signin",t,"shopping")},t.prototype.initializeShoppingCartStore=function(){return O.getInitialShoppingCartStore()},t}())},378:function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},394:function(t,e,n){"use strict";var o=Object.prototype.hasOwnProperty,r="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,o,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,o||t,i),l=r?r+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},u.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,o,i,a){var s=r?r+t:t;if(!this._events[s])return!1;var l,u,c=this._events[s],p=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),p){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,o),!0;case 5:return c.fn.call(c.context,e,n,o,i),!0;case 6:return c.fn.call(c.context,e,n,o,i,a),!0}for(u=1,l=new Array(p-1);u<p;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),p){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,n);break;case 4:c[u].fn.call(c[u].context,e,n,o);break;default:if(!l)for(d=1,l=new Array(p-1);d<p;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return l(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||n&&a.context!==n||l(this,i);else{for(var s=0,u=[],c=a.length;s<c;s++)(a[s].fn!==e||o&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);u.length?this._events[i]=1===u.length?u[0]:u:l(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&l(this,e)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u},398:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var o=!("undefined"==typeof window||!window.document||!window.document.createElement);e.default=o,t.exports=e.default},405:function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var l,u=[],c=!1,p=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):p=-1,u.length&&h())}function h(){if(!c){var t=s(d);c=!0;for(var e=u.length;e;){for(l=u,u=[];++p<e;)l&&l[p].run();p=-1,e=u.length}l=null,c=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||c||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},412:function(t,e,n){"use strict";var o=n(378);e.__esModule=!0,e.default=void 0;var r,i=o(n(398)),a="clearTimeout",s=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-u)),o=setTimeout(t,n);return u=e,o},l=function(t,e){return t+(t?e[0].toUpperCase()+e.substr(1):e)+"AnimationFrame"};i.default&&["","webkit","moz","o","ms"].some((function(t){var e=l(t,"request");if(e in window)return a=l(t,"cancel"),s=function(t){return window[e](t)}}));var u=(new Date).getTime();(r=function(t){return s(t)}).cancel=function(t){window[a]&&"function"==typeof window[a]&&window[a](t)};var c=r;e.default=c,t.exports=e.default},441:function(t,e){t.exports=function(){for(var t=arguments.length,e=[],n=0;n<t;n++)e[n]=arguments[n];if(0!==(e=e.filter((function(t){return null!=t}))).length)return 1===e.length?e[0]:e.reduce((function(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}))}},442:function(t,e,n){"use strict";var o=n(378);e.__esModule=!0,e.default=function(t,e){t.classList?t.classList.add(e):(0,r.default)(t,e)||("string"==typeof t.className?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))};var r=o(n(443));t.exports=e.default},443:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")},t.exports=e.default},444:function(t,e,n){"use strict";function o(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}t.exports=function(t,e){t.classList?t.classList.remove(e):"string"==typeof t.className?t.className=o(t.className,e):t.setAttribute("class",o(t.className&&t.className.baseVal||"",e))}},445:function(t,e,n){"use strict";var o=n(378);e.__esModule=!0,e.default=e.animationEnd=e.animationDelay=e.animationTiming=e.animationDuration=e.animationName=e.transitionEnd=e.transitionDuration=e.transitionDelay=e.transitionTiming=e.transitionProperty=e.transform=void 0;var r,i,a,s,l,u,c,p,d,h,f,g=o(n(398)),m="transform";if(e.transform=m,e.animationEnd=a,e.transitionEnd=i,e.transitionDelay=c,e.transitionTiming=u,e.transitionDuration=l,e.transitionProperty=s,e.animationDelay=f,e.animationTiming=h,e.animationDuration=d,e.animationName=p,g.default){var v=function(){for(var t,e,n=document.createElement("div").style,o={O:function(t){return"o"+t.toLowerCase()},Moz:function(t){return t.toLowerCase()},Webkit:function(t){return"webkit"+t},ms:function(t){return"MS"+t}},r=Object.keys(o),i="",a=0;a<r.length;a++){var s=r[a];if(s+"TransitionProperty"in n){i="-"+s.toLowerCase(),t=o[s]("TransitionEnd"),e=o[s]("AnimationEnd");break}}!t&&"transitionProperty"in n&&(t="transitionend");!e&&"animationName"in n&&(e="animationend");return n=null,{animationEnd:e,transitionEnd:t,prefix:i}}();r=v.prefix,e.transitionEnd=i=v.transitionEnd,e.animationEnd=a=v.animationEnd,e.transform=m=r+"-"+m,e.transitionProperty=s=r+"-transition-property",e.transitionDuration=l=r+"-transition-duration",e.transitionDelay=c=r+"-transition-delay",e.transitionTiming=u=r+"-transition-timing-function",e.animationName=p=r+"-animation-name",e.animationDuration=d=r+"-animation-duration",e.animationTiming=h=r+"-animation-delay",e.animationDelay=f=r+"-animation-timing-function"}var y={transform:m,end:i,property:s,timing:u,delay:c,duration:l};e.default=y},558:function(t,e,n){"use strict";e.__esModule=!0,e.nameShape=void 0,e.transitionTimeout=function(t){var e="transition"+t+"Timeout",n="transition"+t;return function(t){if(t[n]){if(null==t[e])return new Error(e+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof t[e])return new Error(e+" must be a number (in milliseconds)")}return null}};r(n(357));var o=r(n(359));function r(t){return t&&t.__esModule?t:{default:t}}e.nameShape=o.default.oneOfType([o.default.string,o.default.shape({enter:o.default.string,leave:o.default.string,active:o.default.string}),o.default.shape({enter:o.default.string,enterActive:o.default.string,leave:o.default.string,leaveActive:o.default.string,appear:o.default.string,appearActive:o.default.string})])},559:function(t,e,n){(function(e){for(var o=n(670),r="undefined"==typeof window?e:window,i=["moz","webkit"],a="AnimationFrame",s=r["request"+a],l=r["cancel"+a]||r["cancelRequest"+a],u=0;!s&&u<i.length;u++)s=r[i[u]+"Request"+a],l=r[i[u]+"Cancel"+a]||r[i[u]+"CancelRequest"+a];if(!s||!l){var c=0,p=0,d=[];s=function(t){if(0===d.length){var e=o(),n=Math.max(0,1e3/60-(e-c));c=n+e,setTimeout((function(){var t=d.slice(0);d.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(c)}catch(t){setTimeout((function(){throw t}),0)}}),Math.round(n))}return d.push({handle:++p,callback:t,cancelled:!1}),p},l=function(t){for(var e=0;e<d.length;e++)d[e].handle===t&&(d[e].cancelled=!0)}}t.exports=function(t){return s.call(r,t)},t.exports.cancel=function(){l.apply(r,arguments)},t.exports.polyfill=function(t){t||(t=r),t.requestAnimationFrame=s,t.cancelAnimationFrame=l}}).call(this,n(180))},594:function(t,e,n){"use strict";e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},r=u(n(357)),i=u(n(359)),a=u(n(666)),s=u(n(668)),l=n(558);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}l.nameShape.isRequired,i.default.bool,i.default.bool,i.default.bool,(0,l.transitionTimeout)("Appear"),(0,l.transitionTimeout)("Enter"),(0,l.transitionTimeout)("Leave");var p=function(t){function e(){var n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return n=o=c(this,t.call.apply(t,[this].concat(a))),o._wrapChild=function(t){return r.default.createElement(s.default,{name:o.props.transitionName,appear:o.props.transitionAppear,enter:o.props.transitionEnter,leave:o.props.transitionLeave,appearTimeout:o.props.transitionAppearTimeout,enterTimeout:o.props.transitionEnterTimeout,leaveTimeout:o.props.transitionLeaveTimeout},t)},c(o,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(){return r.default.createElement(a.default,o({},this.props,{childFactory:this._wrapChild}))},e}(r.default.Component);p.displayName="CSSTransitionGroup",p.propTypes={},p.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},e.default=p,t.exports=e.default},666:function(t,e,n){"use strict";e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},r=l(n(441)),i=l(n(357)),a=l(n(359)),s=(l(n(428)),n(667));function l(t){return t&&t.__esModule?t:{default:t}}a.default.any,a.default.func,a.default.node;var u=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r));return i.performAppear=function(t,e){i.currentlyTransitioningKeys[t]=!0,e.componentWillAppear?e.componentWillAppear(i._handleDoneAppearing.bind(i,t,e)):i._handleDoneAppearing(t,e)},i._handleDoneAppearing=function(t,e){e.componentDidAppear&&e.componentDidAppear(),delete i.currentlyTransitioningKeys[t];var n=(0,s.getChildMapping)(i.props.children);n&&n.hasOwnProperty(t)||i.performLeave(t,e)},i.performEnter=function(t,e){i.currentlyTransitioningKeys[t]=!0,e.componentWillEnter?e.componentWillEnter(i._handleDoneEntering.bind(i,t,e)):i._handleDoneEntering(t,e)},i._handleDoneEntering=function(t,e){e.componentDidEnter&&e.componentDidEnter(),delete i.currentlyTransitioningKeys[t];var n=(0,s.getChildMapping)(i.props.children);n&&n.hasOwnProperty(t)||i.performLeave(t,e)},i.performLeave=function(t,e){i.currentlyTransitioningKeys[t]=!0,e.componentWillLeave?e.componentWillLeave(i._handleDoneLeaving.bind(i,t,e)):i._handleDoneLeaving(t,e)},i._handleDoneLeaving=function(t,e){e.componentDidLeave&&e.componentDidLeave(),delete i.currentlyTransitioningKeys[t];var n=(0,s.getChildMapping)(i.props.children);n&&n.hasOwnProperty(t)?i.keysToEnter.push(t):i.setState((function(e){var n=o({},e.children);return delete n[t],{children:n}}))},i.childRefs=Object.create(null),i.state={children:(0,s.getChildMapping)(n.children)},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},e.prototype.componentDidMount=function(){var t=this.state.children;for(var e in t)t[e]&&this.performAppear(e,this.childRefs[e])},e.prototype.componentWillReceiveProps=function(t){var e=(0,s.getChildMapping)(t.children),n=this.state.children;for(var o in this.setState({children:(0,s.mergeChildMappings)(n,e)}),e){var r=n&&n.hasOwnProperty(o);!e[o]||r||this.currentlyTransitioningKeys[o]||this.keysToEnter.push(o)}for(var i in n){var a=e&&e.hasOwnProperty(i);!n[i]||a||this.currentlyTransitioningKeys[i]||this.keysToLeave.push(i)}},e.prototype.componentDidUpdate=function(){var t=this,e=this.keysToEnter;this.keysToEnter=[],e.forEach((function(e){return t.performEnter(e,t.childRefs[e])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(e){return t.performLeave(e,t.childRefs[e])}))},e.prototype.render=function(){var t=this,e=[],n=function(n){var o=t.state.children[n];if(o){var a="string"!=typeof o.ref,s=t.props.childFactory(o),l=function(e){t.childRefs[n]=e};s===o&&a&&(l=(0,r.default)(o.ref,l)),e.push(i.default.cloneElement(s,{key:n,ref:l}))}};for(var a in this.state.children)n(a);var s=o({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,i.default.createElement(this.props.component,s,e)},e}(i.default.Component);u.displayName="TransitionGroup",u.propTypes={},u.defaultProps={component:"span",childFactory:function(t){return t}},e.default=u,t.exports=e.default},667:function(t,e,n){"use strict";e.__esModule=!0,e.getChildMapping=function(t){if(!t)return t;var e={};return o.Children.map(t,(function(t){return t})).forEach((function(t){e[t.key]=t})),e},e.mergeChildMappings=function(t,e){function n(n){return e.hasOwnProperty(n)?e[n]:t[n]}t=t||{},e=e||{};var o={},r=[];for(var i in t)e.hasOwnProperty(i)?r.length&&(o[i]=r,r=[]):r.push(i);var a=void 0,s={};for(var l in e){if(o.hasOwnProperty(l))for(a=0;a<o[l].length;a++){var u=o[l][a];s[o[l][a]]=n(u)}s[l]=n(l)}for(a=0;a<r.length;a++)s[r[a]]=n(r[a]);return s};var o=n(357)},668:function(t,e,n){"use strict";e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},r=d(n(442)),i=d(n(444)),a=d(n(412)),s=n(445),l=d(n(357)),u=d(n(359)),c=n(360),p=n(558);function d(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var f=[];s.transitionEnd&&f.push(s.transitionEnd),s.animationEnd&&f.push(s.animationEnd);u.default.node,p.nameShape.isRequired,u.default.bool,u.default.bool,u.default.bool,u.default.number,u.default.number,u.default.number;var g=function(t){function e(){var n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=h(this,t.call.apply(t,[this].concat(i))),o.componentWillAppear=function(t){o.props.appear?o.transition("appear",t,o.props.appearTimeout):t()},o.componentWillEnter=function(t){o.props.enter?o.transition("enter",t,o.props.enterTimeout):t()},o.componentWillLeave=function(t){o.props.leave?o.transition("leave",t,o.props.leaveTimeout):t()},h(o,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},e.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(t){clearTimeout(t)})),this.classNameAndNodeQueue.length=0},e.prototype.transition=function(t,e,n){var o=(0,c.findDOMNode)(this);if(o){var a=this.props.name[t]||this.props.name+"-"+t,l=this.props.name[t+"Active"]||a+"-active",u=null,p=void 0;(0,r.default)(o,a),this.queueClassAndNode(l,o);var d=function(t){t&&t.target!==o||(clearTimeout(u),p&&p(),(0,i.default)(o,a),(0,i.default)(o,l),p&&p(),e&&e())};n?(u=setTimeout(d,n),this.transitionTimeouts.push(u)):s.transitionEnd&&(p=function(t,e){return f.length?f.forEach((function(n){return t.addEventListener(n,e,!1)})):setTimeout(e,0),function(){f.length&&f.forEach((function(n){return t.removeEventListener(n,e,!1)}))}}(o,d))}else e&&e()},e.prototype.queueClassAndNode=function(t,e){var n=this;this.classNameAndNodeQueue.push({className:t,node:e}),this.rafHandle||(this.rafHandle=(0,a.default)((function(){return n.flushClassNameAndNodeQueue()})))},e.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(t){t.node.scrollTop,(0,r.default)(t.node,t.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},e.prototype.render=function(){var t=o({},this.props);return delete t.name,delete t.appear,delete t.enter,delete t.leave,delete t.appearTimeout,delete t.enterTimeout,delete t.leaveTimeout,delete t.children,l.default.cloneElement(l.default.Children.only(this.props.children),t)},e}(l.default.Component);g.displayName="CSSTransitionGroupChild",g.propTypes={},e.default=g,t.exports=e.default},669:function(t,e,n){var o=n(967),r=n(968),i={float:"cssFloat"},a=n(971);function s(t,e,n){var s=i[e];if(void 0===s&&(s=function(t){var e=r(t),n=o(e);return i[e]=i[t]=i[n]=n,n}(e)),s){if(void 0===n)return t.style[s];t.style[s]=a(s,n)}}function l(){2===arguments.length?"string"==typeof arguments[1]?arguments[0].style.cssText=arguments[1]:function(t,e){for(var n in e)e.hasOwnProperty(n)&&s(t,n,e[n])}(arguments[0],arguments[1]):s(arguments[0],arguments[1],arguments[2])}t.exports=l,t.exports.set=l,t.exports.get=function(t,e){return Array.isArray(e)?e.reduce((function(e,n){return e[n]=s(t,n||""),e}),{}):s(t,e||"")}},670:function(t,e,n){(function(e){(function(){var n,o,r,i,a,s;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:null!=e&&e.hrtime?(t.exports=function(){return(n()-a)/1e6},o=e.hrtime,i=(n=function(){var t;return 1e9*(t=o())[0]+t[1]})(),s=1e9*e.uptime(),a=i-s):Date.now?(t.exports=function(){return Date.now()-r},r=Date.now()):(t.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)}).call(this,n(405))},671:function(t,e,n){var o=n(672),r=n(673);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[i+s]=a[s];return e||r(a)}},672:function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var o=new Uint8Array(16);t.exports=function(){return n(o),o}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},673:function(t,e){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);t.exports=function(t,e){var o=e||0,r=n;return[r[t[o++]],r[t[o++]],r[t[o++]],r[t[o++]],"-",r[t[o++]],r[t[o++]],"-",r[t[o++]],r[t[o++]],"-",r[t[o++]],r[t[o++]],"-",r[t[o++]],r[t[o++]],r[t[o++]],r[t[o++]],r[t[o++]],r[t[o++]]].join("")}},961:function(t,e,n){var o=n(962);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(98)(o,r);o.locals&&(t.exports=o.locals)},962:function(t,e,n){(t.exports=n(97)(!1)).push([t.i,".cart-upsell-root{font-size:1.5em;position:relative}.cart-upsell-root.upsell-processing .cart-upsell-processing-container{display:flex}@media screen and (max-width: 750px){.cart-upsell-root .cart-upsell-product-title-commands-container{width:100%}}.cart-upsell-root .cart-upsell-processing-container{display:none;position:absolute;top:0;left:0;right:0;bottom:0;align-items:center;justify-content:center;flex-direction:column;background-color:white}.cart-upsell-root .cart-upsell-top-row{padding-bottom:1em;overflow:hidden;display:flex;align-items:flex-end}@media screen and (max-width: 520px){.cart-upsell-root .cart-upsell-top-row .cart-upsell-button{display:block}.cart-upsell-root .cart-upsell-top-row .cart-upsell-button+.cart-upsell-button{margin-top:0.5em}}@media screen and (max-width: 510px){.cart-upsell-root .cart-upsell-top-row{padding-bottom:0.5em}}.cart-upsell-root .cart-upsell-bottom-row{border-top:solid thin #777777;overflow:hidden}.cart-upsell-root .cart-upsell-current-product-wrapper{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;width:100%}.cart-upsell-root .cart-upsell-carausel{position:relative;width:100%;min-height:50px;white-space:nowrap;overflow-x:auto;padding-bottom:1em}.cart-upsell-root .cart-upsell-carausel-item{display:inline-block;width:103px;width:calc(100%/6.7);max-width:150px}.cart-upsell-root .cart-upsell-carausel-item a,.cart-upsell-root .cart-upsell-carausel-item .cart-upsell-button{display:block}.cart-upsell-root .cart-upsell-carausel-item .cart-upsell-button{margin-top:0.2em}.cart-upsell-root .cart-upsell-carausel-item .cart-upsell-command-overlay{display:none;position:absolute;top:0;left:0;right:0;bottom:0;align-items:center;justify-content:center;align-content:center;align-items:center;background-color:rgba(0,0,0,0.3);color:white}.cart-upsell-root .cart-upsell-carausel-item a{position:relative}.cart-upsell-root .cart-upsell-carausel-item a:hover .cart-upsell-command-overlay{display:flex}.cart-upsell-root .cart-upsell-carausel-item+.cart-upsell-carausel-item{margin-left:0.25em}.cart-upsell-root .cart-upsell-product-title-container{font-size:1.2em;padding-bottom:0.5em}@media screen and (max-width: 700px){.cart-upsell-root .cart-upsell-product-title-container{font-size:1em}}@media screen and (max-width: 450px){.cart-upsell-root .cart-upsell-product-title-container{font-size:0.8em}}.cart-upsell-root .cart-upsell-processing-notification-container i,.cart-upsell-root .cart-upsell-product-title-container i{font-family:Lato;font-style:italic;-webkit-font-smoothing:auto}.cart-upsell-root .cart-upsell-product-cover-container{margin-left:1.5em;width:103px;width:calc(100%/6.7);max-width:150px}@media screen and (max-width: 750px){.cart-upsell-root .cart-upsell-product-cover-container{display:none}}.cart-upsell-root img{border:solid 1px #ccc}.cart-upsell-root .cart-upsell-button{display:inline-block;margin-bottom:0;font-weight:normal;text-align:center;vertical-align:middle;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:5px 10px;font-size:14px;line-height:1.428571429;user-select:none;-webkit-user-select:none}.cart-upsell-root .cart-upsell-cart-button{color:white;background-color:#3C67A2}.cart-upsell-root .cart-upsell-cart-button:hover{background-color:#355b8f}.cart-upsell-root .cart-upsell-cart-button:active{background-color:#2e4f7d}.cart-upsell-root .cart-upsell-add-to-cart-button{color:#333;background-color:#fff;border-color:#ccc}.cart-upsell-root .cart-upsell-add-to-cart-button:hover{color:#333;background-color:#e6e6e6;border-color:#adadad}.cart-upsell-root .cart-upsell-add-to-cart-button:active{box-shadow:inset 0 3px 5px rgba(0,0,0,0.125)}.cart-upsell-root .cart-upsell-related-products-heading{font-weight:300;padding:0.5em 0;font-size:0.9em}@media screen and (max-width: 510px){.cart-upsell-root .cart-upsell-related-products-heading{font-size:0.7em}}@media screen and (max-width: 420px){.cart-upsell-root .cart-upsell-related-products-heading{font-size:0.5em}}.cart-upsell-root .cart-upsell-add-to-cart-button .fa{display:none}@media screen and (max-width: 800px){.cart-upsell-root .cart-upsell-add-to-cart-button{font-size:12px;padding:3px 6px}}@media screen and (max-width: 550px){.cart-upsell-root .cart-upsell-add-to-cart-button span{display:none}.cart-upsell-root .cart-upsell-add-to-cart-button .fa{display:inline-block}}\n",""])},967:function(t,e){var n=null,o=["Webkit","Moz","O","ms"];t.exports=function(t){n||(n=document.createElement("div"));var e=n.style;if(t in e)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),i=o.length;i>=0;i--){var a=o[i]+r;if(a in e)return a}return!1}},968:function(t,e,n){var o=n(969);t.exports=function(t){return o(t).replace(/\s(\w)/g,(function(t,e){return e.toUpperCase()}))}},969:function(t,e,n){var o=n(970);t.exports=function(t){return o(t).replace(/[\W_]+(.|$)/g,(function(t,e){return e?" "+e:""})).trim()}},970:function(t,e){t.exports=function(t){return n.test(t)?t.toLowerCase():o.test(t)?(function(t){return t.replace(i,(function(t,e){return e?" "+e:""}))}(t)||t).toLowerCase():r.test(t)?function(t){return t.replace(a,(function(t,e,n){return e+" "+n.toLowerCase().split("").join(" ")}))}(t).toLowerCase():t.toLowerCase()};var n=/\s/,o=/(_|-|\.|:)/,r=/([a-z][A-Z]|[A-Z][a-z])/;var i=/[\W_]+(.|$)/g;var a=/(.)([A-Z]+)/g},971:function(t,e){var n={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0};t.exports=function(t,e){return"number"!=typeof e||n[t]?e:e+"px"}},972:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scrollbars=void 0;var o,r=n(973),i=(o=r)&&o.__esModule?o:{default:o};e.default=i.default,e.Scrollbars=i.default},973:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(559),a=v(i),s=v(n(669)),l=n(357),u=v(n(359)),c=v(n(974)),p=v(n(975)),d=v(n(976)),h=v(n(977)),f=v(n(978)),g=n(979),m=n(980);function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,r=Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this,t].concat(r)));return a.getScrollLeft=a.getScrollLeft.bind(a),a.getScrollTop=a.getScrollTop.bind(a),a.getScrollWidth=a.getScrollWidth.bind(a),a.getScrollHeight=a.getScrollHeight.bind(a),a.getClientWidth=a.getClientWidth.bind(a),a.getClientHeight=a.getClientHeight.bind(a),a.getValues=a.getValues.bind(a),a.getThumbHorizontalWidth=a.getThumbHorizontalWidth.bind(a),a.getThumbVerticalHeight=a.getThumbVerticalHeight.bind(a),a.getScrollLeftForOffset=a.getScrollLeftForOffset.bind(a),a.getScrollTopForOffset=a.getScrollTopForOffset.bind(a),a.scrollLeft=a.scrollLeft.bind(a),a.scrollTop=a.scrollTop.bind(a),a.scrollToLeft=a.scrollToLeft.bind(a),a.scrollToTop=a.scrollToTop.bind(a),a.scrollToRight=a.scrollToRight.bind(a),a.scrollToBottom=a.scrollToBottom.bind(a),a.handleTrackMouseEnter=a.handleTrackMouseEnter.bind(a),a.handleTrackMouseLeave=a.handleTrackMouseLeave.bind(a),a.handleHorizontalTrackMouseDown=a.handleHorizontalTrackMouseDown.bind(a),a.handleVerticalTrackMouseDown=a.handleVerticalTrackMouseDown.bind(a),a.handleHorizontalThumbMouseDown=a.handleHorizontalThumbMouseDown.bind(a),a.handleVerticalThumbMouseDown=a.handleVerticalThumbMouseDown.bind(a),a.handleWindowResize=a.handleWindowResize.bind(a),a.handleScroll=a.handleScroll.bind(a),a.handleDrag=a.handleDrag.bind(a),a.handleDragEnd=a.handleDragEnd.bind(a),a.state={didMountUniversal:!1},a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"componentDidMount",value:function(){this.addListeners(),this.update(),this.componentDidMountUniversal()}},{key:"componentDidMountUniversal",value:function(){this.props.universal&&this.setState({didMountUniversal:!0})}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"componentWillUnmount",value:function(){this.removeListeners(),(0,i.cancel)(this.requestFrame),clearTimeout(this.hideTracksTimeout),clearInterval(this.detectScrollingInterval)}},{key:"getScrollLeft",value:function(){return this.view?this.view.scrollLeft:0}},{key:"getScrollTop",value:function(){return this.view?this.view.scrollTop:0}},{key:"getScrollWidth",value:function(){return this.view?this.view.scrollWidth:0}},{key:"getScrollHeight",value:function(){return this.view?this.view.scrollHeight:0}},{key:"getClientWidth",value:function(){return this.view?this.view.clientWidth:0}},{key:"getClientHeight",value:function(){return this.view?this.view.clientHeight:0}},{key:"getValues",value:function(){var t=this.view||{},e=t.scrollLeft,n=void 0===e?0:e,o=t.scrollTop,r=void 0===o?0:o,i=t.scrollWidth,a=void 0===i?0:i,s=t.scrollHeight,l=void 0===s?0:s,u=t.clientWidth,c=void 0===u?0:u,p=t.clientHeight,d=void 0===p?0:p;return{left:n/(a-c)||0,top:r/(l-d)||0,scrollLeft:n,scrollTop:r,scrollWidth:a,scrollHeight:l,clientWidth:c,clientHeight:d}}},{key:"getThumbHorizontalWidth",value:function(){var t=this.props,e=t.thumbSize,n=t.thumbMinSize,o=this.view,r=o.scrollWidth,i=o.clientWidth,a=(0,h.default)(this.trackHorizontal),s=Math.ceil(i/r*a);return a===s?0:e||Math.max(s,n)}},{key:"getThumbVerticalHeight",value:function(){var t=this.props,e=t.thumbSize,n=t.thumbMinSize,o=this.view,r=o.scrollHeight,i=o.clientHeight,a=(0,f.default)(this.trackVertical),s=Math.ceil(i/r*a);return a===s?0:e||Math.max(s,n)}},{key:"getScrollLeftForOffset",value:function(t){var e=this.view,n=e.scrollWidth,o=e.clientWidth;return t/((0,h.default)(this.trackHorizontal)-this.getThumbHorizontalWidth())*(n-o)}},{key:"getScrollTopForOffset",value:function(t){var e=this.view,n=e.scrollHeight,o=e.clientHeight;return t/((0,f.default)(this.trackVertical)-this.getThumbVerticalHeight())*(n-o)}},{key:"scrollLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.view&&(this.view.scrollLeft=t)}},{key:"scrollTop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.view&&(this.view.scrollTop=t)}},{key:"scrollToLeft",value:function(){this.view&&(this.view.scrollLeft=0)}},{key:"scrollToTop",value:function(){this.view&&(this.view.scrollTop=0)}},{key:"scrollToRight",value:function(){this.view&&(this.view.scrollLeft=this.view.scrollWidth)}},{key:"scrollToBottom",value:function(){this.view&&(this.view.scrollTop=this.view.scrollHeight)}},{key:"addListeners",value:function(){if("undefined"!=typeof document&&this.view){var t=this.view,e=this.trackHorizontal,n=this.trackVertical,o=this.thumbHorizontal,r=this.thumbVertical;t.addEventListener("scroll",this.handleScroll),(0,p.default)()&&(e.addEventListener("mouseenter",this.handleTrackMouseEnter),e.addEventListener("mouseleave",this.handleTrackMouseLeave),e.addEventListener("mousedown",this.handleHorizontalTrackMouseDown),n.addEventListener("mouseenter",this.handleTrackMouseEnter),n.addEventListener("mouseleave",this.handleTrackMouseLeave),n.addEventListener("mousedown",this.handleVerticalTrackMouseDown),o.addEventListener("mousedown",this.handleHorizontalThumbMouseDown),r.addEventListener("mousedown",this.handleVerticalThumbMouseDown),window.addEventListener("resize",this.handleWindowResize))}}},{key:"removeListeners",value:function(){if("undefined"!=typeof document&&this.view){var t=this.view,e=this.trackHorizontal,n=this.trackVertical,o=this.thumbHorizontal,r=this.thumbVertical;t.removeEventListener("scroll",this.handleScroll),(0,p.default)()&&(e.removeEventListener("mouseenter",this.handleTrackMouseEnter),e.removeEventListener("mouseleave",this.handleTrackMouseLeave),e.removeEventListener("mousedown",this.handleHorizontalTrackMouseDown),n.removeEventListener("mouseenter",this.handleTrackMouseEnter),n.removeEventListener("mouseleave",this.handleTrackMouseLeave),n.removeEventListener("mousedown",this.handleVerticalTrackMouseDown),o.removeEventListener("mousedown",this.handleHorizontalThumbMouseDown),r.removeEventListener("mousedown",this.handleVerticalThumbMouseDown),window.removeEventListener("resize",this.handleWindowResize),this.teardownDragging())}}},{key:"handleScroll",value:function(t){var e=this,n=this.props,o=n.onScroll,r=n.onScrollFrame;o&&o(t),this.update((function(t){var n=t.scrollLeft,o=t.scrollTop;e.viewScrollLeft=n,e.viewScrollTop=o,r&&r(t)})),this.detectScrolling()}},{key:"handleScrollStart",value:function(){var t=this.props.onScrollStart;t&&t(),this.handleScrollStartAutoHide()}},{key:"handleScrollStartAutoHide",value:function(){this.props.autoHide&&this.showTracks()}},{key:"handleScrollStop",value:function(){var t=this.props.onScrollStop;t&&t(),this.handleScrollStopAutoHide()}},{key:"handleScrollStopAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"handleWindowResize",value:function(){this.update()}},{key:"handleHorizontalTrackMouseDown",value:function(t){t.preventDefault();var e=t.target,n=t.clientX,o=e.getBoundingClientRect().left,r=this.getThumbHorizontalWidth(),i=Math.abs(o-n)-r/2;this.view.scrollLeft=this.getScrollLeftForOffset(i)}},{key:"handleVerticalTrackMouseDown",value:function(t){t.preventDefault();var e=t.target,n=t.clientY,o=e.getBoundingClientRect().top,r=this.getThumbVerticalHeight(),i=Math.abs(o-n)-r/2;this.view.scrollTop=this.getScrollTopForOffset(i)}},{key:"handleHorizontalThumbMouseDown",value:function(t){t.preventDefault(),this.handleDragStart(t);var e=t.target,n=t.clientX,o=e.offsetWidth,r=e.getBoundingClientRect().left;this.prevPageX=o-(n-r)}},{key:"handleVerticalThumbMouseDown",value:function(t){t.preventDefault(),this.handleDragStart(t);var e=t.target,n=t.clientY,o=e.offsetHeight,r=e.getBoundingClientRect().top;this.prevPageY=o-(n-r)}},{key:"setupDragging",value:function(){(0,s.default)(document.body,g.disableSelectStyle),document.addEventListener("mousemove",this.handleDrag),document.addEventListener("mouseup",this.handleDragEnd),document.onselectstart=d.default}},{key:"teardownDragging",value:function(){(0,s.default)(document.body,g.disableSelectStyleReset),document.removeEventListener("mousemove",this.handleDrag),document.removeEventListener("mouseup",this.handleDragEnd),document.onselectstart=void 0}},{key:"handleDragStart",value:function(t){this.dragging=!0,t.stopImmediatePropagation(),this.setupDragging()}},{key:"handleDrag",value:function(t){if(this.prevPageX){var e=t.clientX,n=-this.trackHorizontal.getBoundingClientRect().left+e-(this.getThumbHorizontalWidth()-this.prevPageX);this.view.scrollLeft=this.getScrollLeftForOffset(n)}if(this.prevPageY){var o=t.clientY,r=-this.trackVertical.getBoundingClientRect().top+o-(this.getThumbVerticalHeight()-this.prevPageY);this.view.scrollTop=this.getScrollTopForOffset(r)}return!1}},{key:"handleDragEnd",value:function(){this.dragging=!1,this.prevPageX=this.prevPageY=0,this.teardownDragging(),this.handleDragEndAutoHide()}},{key:"handleDragEndAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"handleTrackMouseEnter",value:function(){this.trackMouseOver=!0,this.handleTrackMouseEnterAutoHide()}},{key:"handleTrackMouseEnterAutoHide",value:function(){this.props.autoHide&&this.showTracks()}},{key:"handleTrackMouseLeave",value:function(){this.trackMouseOver=!1,this.handleTrackMouseLeaveAutoHide()}},{key:"handleTrackMouseLeaveAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"showTracks",value:function(){clearTimeout(this.hideTracksTimeout),(0,s.default)(this.trackHorizontal,{opacity:1}),(0,s.default)(this.trackVertical,{opacity:1})}},{key:"hideTracks",value:function(){var t=this;if(!this.dragging&&!this.scrolling&&!this.trackMouseOver){var e=this.props.autoHideTimeout;clearTimeout(this.hideTracksTimeout),this.hideTracksTimeout=setTimeout((function(){(0,s.default)(t.trackHorizontal,{opacity:0}),(0,s.default)(t.trackVertical,{opacity:0})}),e)}}},{key:"detectScrolling",value:function(){var t=this;this.scrolling||(this.scrolling=!0,this.handleScrollStart(),this.detectScrollingInterval=setInterval((function(){t.lastViewScrollLeft===t.viewScrollLeft&&t.lastViewScrollTop===t.viewScrollTop&&(clearInterval(t.detectScrollingInterval),t.scrolling=!1,t.handleScrollStop()),t.lastViewScrollLeft=t.viewScrollLeft,t.lastViewScrollTop=t.viewScrollTop}),100))}},{key:"raf",value:function(t){var e=this;this.requestFrame&&a.default.cancel(this.requestFrame),this.requestFrame=(0,a.default)((function(){e.requestFrame=void 0,t()}))}},{key:"update",value:function(t){var e=this;this.raf((function(){return e._update(t)}))}},{key:"_update",value:function(t){var e=this.props,n=e.onUpdate,o=e.hideTracksWhenNotNeeded,r=this.getValues();if((0,p.default)()){var i=r.scrollLeft,a=r.clientWidth,l=r.scrollWidth,u=(0,h.default)(this.trackHorizontal),c=this.getThumbHorizontalWidth(),d={width:c,transform:"translateX("+i/(l-a)*(u-c)+"px)"},g=r.scrollTop,m=r.clientHeight,v=r.scrollHeight,y=(0,f.default)(this.trackVertical),b=this.getThumbVerticalHeight(),C={height:b,transform:"translateY("+g/(v-m)*(y-b)+"px)"};if(o){var w={visibility:l>a?"visible":"hidden"},S={visibility:v>m?"visible":"hidden"};(0,s.default)(this.trackHorizontal,w),(0,s.default)(this.trackVertical,S)}(0,s.default)(this.thumbHorizontal,d),(0,s.default)(this.thumbVertical,C)}n&&n(r),"function"==typeof t&&t(r)}},{key:"render",value:function(){var t=this,e=(0,p.default)(),n=this.props,r=(n.onScroll,n.onScrollFrame,n.onScrollStart,n.onScrollStop,n.onUpdate,n.renderView),i=n.renderTrackHorizontal,a=n.renderTrackVertical,s=n.renderThumbHorizontal,u=n.renderThumbVertical,d=n.tagName,h=(n.hideTracksWhenNotNeeded,n.autoHide),f=(n.autoHideTimeout,n.autoHideDuration),m=(n.thumbSize,n.thumbMinSize,n.universal),v=n.autoHeight,y=n.autoHeightMin,b=n.autoHeightMax,C=n.style,w=n.children,S=function(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}(n,["onScroll","onScrollFrame","onScrollStart","onScrollStop","onUpdate","renderView","renderTrackHorizontal","renderTrackVertical","renderThumbHorizontal","renderThumbVertical","tagName","hideTracksWhenNotNeeded","autoHide","autoHideTimeout","autoHideDuration","thumbSize","thumbMinSize","universal","autoHeight","autoHeightMin","autoHeightMax","style","children"]),T=this.state.didMountUniversal,k=o({},g.containerStyleDefault,v&&o({},g.containerStyleAutoHeight,{minHeight:y,maxHeight:b}),C),I=o({},g.viewStyleDefault,{marginRight:e?-e:0,marginBottom:e?-e:0},v&&o({},g.viewStyleAutoHeight,{minHeight:(0,c.default)(y)?"calc("+y+" + "+e+"px)":y+e,maxHeight:(0,c.default)(b)?"calc("+b+" + "+e+"px)":b+e}),v&&m&&!T&&{minHeight:y,maxHeight:b},m&&!T&&g.viewStyleUniversalInitial),O={transition:"opacity "+f+"ms",opacity:0},P=o({},g.trackHorizontalStyleDefault,h&&O,(!e||m&&!T)&&{display:"none"}),E=o({},g.trackVerticalStyleDefault,h&&O,(!e||m&&!T)&&{display:"none"});return(0,l.createElement)(d,o({},S,{style:k,ref:function(e){t.container=e}}),[(0,l.cloneElement)(r({style:I}),{key:"view",ref:function(e){t.view=e}},w),(0,l.cloneElement)(i({style:P}),{key:"trackHorizontal",ref:function(e){t.trackHorizontal=e}},(0,l.cloneElement)(s({style:g.thumbHorizontalStyleDefault}),{ref:function(e){t.thumbHorizontal=e}})),(0,l.cloneElement)(a({style:E}),{key:"trackVertical",ref:function(e){t.trackVertical=e}},(0,l.cloneElement)(u({style:g.thumbVerticalStyleDefault}),{ref:function(e){t.thumbVertical=e}}))])}}]),e}(l.Component);e.default=y,y.propTypes={onScroll:u.default.func,onScrollFrame:u.default.func,onScrollStart:u.default.func,onScrollStop:u.default.func,onUpdate:u.default.func,renderView:u.default.func,renderTrackHorizontal:u.default.func,renderTrackVertical:u.default.func,renderThumbHorizontal:u.default.func,renderThumbVertical:u.default.func,tagName:u.default.string,thumbSize:u.default.number,thumbMinSize:u.default.number,hideTracksWhenNotNeeded:u.default.bool,autoHide:u.default.bool,autoHideTimeout:u.default.number,autoHideDuration:u.default.number,autoHeight:u.default.bool,autoHeightMin:u.default.oneOfType([u.default.number,u.default.string]),autoHeightMax:u.default.oneOfType([u.default.number,u.default.string]),universal:u.default.bool,style:u.default.object,children:u.default.node},y.defaultProps={renderView:m.renderViewDefault,renderTrackHorizontal:m.renderTrackHorizontalDefault,renderTrackVertical:m.renderTrackVerticalDefault,renderThumbHorizontal:m.renderThumbHorizontalDefault,renderThumbVertical:m.renderThumbVerticalDefault,tagName:"div",thumbMinSize:30,hideTracksWhenNotNeeded:!1,autoHide:!1,autoHideTimeout:1e3,autoHideDuration:200,autoHeight:!1,autoHeightMin:0,autoHeightMax:200,universal:!1}},974:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return"string"==typeof t}},975:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!1!==a)return a;if("undefined"!=typeof document){var t=document.createElement("div");(0,i.default)(t,{width:100,height:100,position:"absolute",top:-9999,overflow:"scroll",MsOverflowStyle:"scrollbar"}),document.body.appendChild(t),a=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}else a=0;return a||0};var o,r=n(669),i=(o=r)&&o.__esModule?o:{default:o};var a=!1},976:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return!1}},977:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.clientWidth,n=getComputedStyle(t),o=n.paddingLeft,r=n.paddingRight;return e-parseFloat(o)-parseFloat(r)}},978:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.clientHeight,n=getComputedStyle(t),o=n.paddingTop,r=n.paddingBottom;return e-parseFloat(o)-parseFloat(r)}},979:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.containerStyleDefault={position:"relative",overflow:"hidden",width:"100%",height:"100%"},e.containerStyleAutoHeight={height:"auto"},e.viewStyleDefault={position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"scroll",WebkitOverflowScrolling:"touch"},e.viewStyleAutoHeight={position:"relative",top:void 0,left:void 0,right:void 0,bottom:void 0},e.viewStyleUniversalInitial={overflow:"hidden",marginRight:0,marginBottom:0},e.trackHorizontalStyleDefault={position:"absolute",height:6},e.trackVerticalStyleDefault={position:"absolute",width:6},e.thumbHorizontalStyleDefault={position:"relative",display:"block",height:"100%"},e.thumbVerticalStyleDefault={position:"relative",display:"block",width:"100%"},e.disableSelectStyle={userSelect:"none"},e.disableSelectStyleReset={userSelect:""}},980:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};e.renderViewDefault=function(t){return a.default.createElement("div",t)},e.renderTrackHorizontalDefault=function(t){var e=t.style,n=s(t,["style"]),r=o({},e,{right:2,bottom:2,left:2,borderRadius:3});return a.default.createElement("div",o({style:r},n))},e.renderTrackVerticalDefault=function(t){var e=t.style,n=s(t,["style"]),r=o({},e,{right:2,bottom:2,top:2,borderRadius:3});return a.default.createElement("div",o({style:r},n))},e.renderThumbHorizontalDefault=function(t){var e=t.style,n=s(t,["style"]),r=o({},e,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return a.default.createElement("div",o({style:r},n))},e.renderThumbVerticalDefault=function(t){var e=t.style,n=s(t,["style"]),r=o({},e,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return a.default.createElement("div",o({style:r},n))};var r,i=n(357),a=(r=i)&&r.__esModule?r:{default:r};function s(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}}}]);
//# sourceMappingURL=shoppingCartModule.chunk.js.map?e6c66a135af60f56b2bd