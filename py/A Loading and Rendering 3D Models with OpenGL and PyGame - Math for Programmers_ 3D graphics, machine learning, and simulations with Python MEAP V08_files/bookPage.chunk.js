(window.webpackJsonp=window.webpackJsonp||[]).push([[11,6,29],{1187:function(e,t,n){var o=n(1188);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(98)(o,i);o.locals&&(e.exports=o.locals)},1188:function(e,t,n){(e.exports=n(97)(!1)).push([e.i,'#add-to-cart-stripe{text-align:center;background-color:#407fbf;color:white;cursor:pointer;font-size:1rem;position:relative;padding:0.5em;float:right;width:100%;height:40px;transition:width 0.2s ease-in-out;clear:both}#add-to-cart-stripe .close-icon{position:absolute;right:0;top:50%;transform:translate(0, -50%);transition:transform 0.2s ease-in-out;padding:0.5em 0.75em}#add-to-cart-stripe.collapsed{width:55px}#add-to-cart-stripe.collapsed .add-to-cart-stripe-message{opacity:0;display:none}#add-to-cart-stripe.collapsed .add-to-cart-stripe-icon-container{opacity:1}#add-to-cart-stripe.collapsed .close-icon{transform:translate(-50%, -50%) rotate(45deg)}#add-to-cart-stripe .add-to-cart-stripe-message{white-space:nowrap;opacity:1;transition:opacity 0.15s ease-in-out}#add-to-cart-stripe .add-to-cart-stripe-icon-container{position:absolute;top:50%;left:50%;transform:translate(-10%, -50%);transition:opacity 0.15s ease-in-out;opacity:0;white-space:nowrap}@media screen and (max-width: 650px){#add-to-cart-stripe .add-to-cart-stripe-message{font-size:90%}}@media screen and (max-width: 440px){#add-to-cart-stripe .add-to-cart-formats-message{display:none}}#add-to-cart-stripe.added-to-cart{background-color:#67a73d}#add-to-cart-stripe.added-to-cart:hover{background-color:#5b9436}#add-to-cart-stripe.added-to-cart:active{background-color:#50822f}#add-to-cart-stripe.added-to-cart .fa-plus{display:none}#add-to-cart-stripe:hover{background-color:#3a72ac}#add-to-cart-stripe:active{background-color:#369}#add-to-cart-stripe.disappear{display:none}#add-to-cart-stripe .add-to-cart-content-list-book-price{margin:0 0.25em}.add-to-cart-content-list-book-price{margin-right:0.5em;color:#b3b3b3;position:relative}.add-to-cart-content-list-book-price:before{position:absolute;content:"";left:-0.15em;top:calc(50% - 1px);right:-0.15em;border-top:2px solid #777777;transform:rotate(-5deg)}#add-to-cart-box{position:fixed;right:1.2rem;top:130px;max-width:225px;z-index:97;transition:right 0.2s ease-in-out}#add-to-cart-box .__react_component_tooltip{max-width:290px;font-size:80%}#add-to-cart-box .__react_component_tooltip i{font-style:italic;font-family:inherit;font-size:100%}#add-to-cart-box .add-to-cart-close-button{position:absolute;top:0;right:0.3em;z-index:1;color:gray;cursor:pointer;opacity:1;transition:opacity 0.25s ease-in-out}#add-to-cart-box .add-to-cart-discount-title{color:white;text-decoration:none;display:block;text-align:left;font-weight:normal}#add-to-cart-box .add-to-cart-dotd-discount-title{font-size:1.25em}#add-to-cart-box .add-to-cart-dotd-discount-title:visited{color:white}#add-to-cart-box .add-to-cart-dotd-discount-title:hover{text-decoration:underline}#add-to-cart-box .add-to-cart-discount-subtitle{color:#9fbfdf;text-align:left;font-size:0.8em;font-weight:300}#add-to-cart-box.collapsed{max-width:55px;right:0}#add-to-cart-box.collapsed .add-to-cart-close-button{opacity:0}#add-to-cart-box.collapsed .add-to-cart{max-height:0}#add-to-cart-box:not(.collapsed) .add-to-cart-collapsed-icons-container{display:none}#add-to-cart-box label{cursor:default}#add-to-cart-box .add-to-cart{background-color:#eaeaea;max-height:340px;overflow:hidden}#add-to-cart-box .add-to-cart.deal-of-the-day .add-to-cart-title-container{background-color:#407fbf;padding:10px 15px}#add-to-cart-box .add-to-cart-choices-container{padding:10px 10px 0 10px;border:none;margin:0;max-height:130px;transition:max-height 0.3s ease-in-out}#add-to-cart-box .add-to-cart-choices-container.add-to-cart-ebook-container{padding-top:0}#add-to-cart-box .add-to-cart-choices-container.add-to-cart-ebook-container .add-to-cart-choices-title-container{margin-top:10px}#add-to-cart-box .add-to-cart-choices-container.disabled{opacity:0.8}#add-to-cart-box .add-to-cart-choices-container.collapsed{max-height:0}#add-to-cart-box .add-to-cart-token-deduction-info-container{font-size:65%;color:#a6a6a6;text-align:right}#add-to-cart-box .add-to-cart-audio-upgrade-only-container{margin-top:10px}#add-to-cart-box .add-to-cart-audio-upgrade-only-container label{color:black !important}#add-to-cart-box .add-to-cart-title-container{background-color:#4d4d4d;color:white;padding:10px 25px;font-weight:bolder;text-align:center;position:relative;margin-top:0;margin-bottom:0}#add-to-cart-box .add-to-cart-title-container h5{color:white;margin:0;font-size:0.9rem;line-height:20px;max-height:40px;overflow:hidden}#add-to-cart-box .add-to-cart-title-container .minimize-button{cursor:pointer;position:absolute;top:0;right:5px;color:#a6a6a6;font-weight:300}#add-to-cart-box .add-to-cart-product-title{font-style:italic;font-weight:300}#add-to-cart-box .add-to-cart-choices-title-container{font-size:90%;overflow:auto}#add-to-cart-box .add-to-cart-content-title{display:inline-block;margin-right:0.5em;font-weight:bolder}#add-to-cart-box .add-to-cart-content-book-price{font-weight:bold;text-align:right}#add-to-cart-box .add-to-cart-content-subtitle{display:inline-block;cursor:default;font-size:80%;font-style:italic;color:#aeaeae}#add-to-cart-box .add-to-cart-choice-container{overflow:auto}#add-to-cart-box .add-to-cart-choice-container input{margin-bottom:0.3rem}#add-to-cart-box .add-to-cart-choice-container label{color:#b1b1b1}#add-to-cart-box .add-to-cart-choice-container.active label{color:#505050}#add-to-cart-box .add-to-cart-choice-check-container{float:left;clear:left;user-select:none;-webkit-user-select:none;cursor:pointer}#add-to-cart-box .add-to-cart-choice-price-container{float:right;clear:right;margin-left:0.2rem}#add-to-cart-box .add-to-cart-add-show-button{font-size:90%;white-space:nowrap;overflow:hidden;display:block;text-overflow:ellipsis}#add-to-cart-box .add-to-cart-add-show-button,#add-to-cart-box .add-to-cart-collapsed-icons-container{display:block;position:relative;color:white;background-color:#407fbf;text-align:center;padding:10px;margin:10px -10px 0 -10px;transition:background-color 0.2s linear;user-select:none;-webkit-user-select:none;cursor:pointer}#add-to-cart-box .add-to-cart-add-show-button:hover,#add-to-cart-box .add-to-cart-collapsed-icons-container:hover{background-color:#3a72ac}#add-to-cart-box .add-to-cart-add-show-button:active,#add-to-cart-box .add-to-cart-collapsed-icons-container:active{background-color:#369}#add-to-cart-box .add-to-cart-add-show-button.added-to-cart,#add-to-cart-box .add-to-cart-collapsed-icons-container.added-to-cart{background-color:#67a73d}#add-to-cart-box .add-to-cart-add-show-button.added-to-cart:hover,#add-to-cart-box .add-to-cart-collapsed-icons-container.added-to-cart:hover{background-color:#5b9436}#add-to-cart-box .add-to-cart-add-show-button.added-to-cart:active,#add-to-cart-box .add-to-cart-collapsed-icons-container.added-to-cart:active{background-color:#50822f}#add-to-cart-box .add-to-cart-collapsed-icons-container{padding:10px;margin:0}@keyframes addToCartGlow{from{box-shadow:0 0 0 #407fbf}to{box-shadow:0 0 30px #407fbf}}@keyframes viewInCartGlow{from{box-shadow:0 0 0 #67a73d}to{box-shadow:0 0 30px #67a73d}}.cart-glow{animation-duration:2s;animation-iteration-count:infinite;animation-direction:alternate;animation-timing-function:ease-in-out}.cart-glow.can-add-to-cart{animation-name:addToCartGlow}.cart-glow.can-view-in-cart{animation-name:viewInCartGlow}\n',""])},1189:function(e,t,n){var o=n(1190);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(98)(o,i);o.locals&&(e.exports=o.locals)},1190:function(e,t,n){(e.exports=n(97)(!1)).push([e.i,"#free-preview-point{position:sticky;display:flex;align-items:center;justify-content:center;top:150px;background:#333333;color:white;border-radius:50%;transition:transform 0.2s ease-in-out;transform:translate(-15px, 0) scale(0)}#free-preview-point.show{visibility:visible;transform:translate(-15px, 0) scale(1);transform-origin:300px 400px}.free-preview-header-notification{transition:transform 0.2s ease-in-out;transform:translateY(-100%);font-size:16px}.free-preview-header-notification a{font-size:inherit !important}.free-preview-header-notification.shown{transform:translateY(0)}.free-preview-header-notification.expanding-free-preview{transform:scaleX(0);transform-origin:50%}.free-preview-header-notification.expanding-free-preview.shownÂ {transform:translateY(0%) scaleX(1)}.scrambled-notifier{position:absolute;color:#3C3C3C;font-weight:300;font-family:Lato;cursor:pointer;z-index:96}.scrambled-notifier .scrambled-arrow-container{position:absolute;top:95%;border-style:solid}.scrambled-notifier.unlock-notifier{top:0;left:-3%;z-index:96;height:2em;display:flex;align-items:center;background-color:#fc0;font-style:italic;padding:0.1em 1.4em 0.1em 3.5em;transform:translateY(35%)}.scrambled-notifier.unlock-notifier .scrambled-arrow-container{right:4px;border-color:#fc0 transparent transparent transparent;border-width:10px 0 0 10px}@media only screen and (max-width: 690px){.scrambled-notifier.unlock-notifier{left:-0.7%;height:1.2em;padding-right:0.4em}}@media only screen and (max-width: 450px){.scrambled-notifier.unlock-notifier{left:-8px}}@media only screen and (max-width: 690px){h1+.scrambled-notifier.unlock-notifier{transform:translateY(65%)}}h2+.scrambled-notifier.unlock-notifier{transform:translateY(15%)}@media only screen and (max-width: 690px){h2+.scrambled-notifier.unlock-notifier{transform:translateY(30%)}}h3+.scrambled-notifier.unlock-notifier{transform:translateY(10%)}@media only screen and (max-width: 690px){h3+.scrambled-notifier.unlock-notifier{transform:translateY(25%)}}h4+.scrambled-notifier.unlock-notifier{transform:translateY(0)}@media only screen and (max-width: 690px){h4+.scrambled-notifier.unlock-notifier{transform:translateY(25%)}}p+.scrambled-notifier.unlock-notifier{transform:translateY(-90%)}li+.scrambled-notifier.unlock-notifier{transform:translateY(-90%)}li>.scrambled-notifier.unlock-notifier{transform:translateY(-100%)}@media only screen and (max-width: 690px){.scrambled-notifier.unlock-notifier{padding-left:2em;padding-right:0}.scrambled-notifier.unlock-notifier .scramble-message-container{font-size:90%;padding-right:0.5em;padding-left:0.5em}}.scrambled-notifier.unlock-notifier:before{content:'';position:absolute;bottom:0;left:0;width:0;height:0;border-style:solid;border-width:0 4px 2em 0;border-color:transparent transparent #f4f4f4 transparent}.scrambled-notifier.contains-double-digit-tokens{padding-left:4em}.scrambled-notifier .token-icon-container{position:absolute;top:1em;left:0.85em;transform:translateY(-50%);display:flex;align-items:center;height:2em}@media only screen and (max-width: 690px){.scrambled-notifier .token-icon-container{top:.6em;height:1.2em;left:0.6em}}.scrambled-notifier .token-icon-container .price-container{font-family:Lato;font-weight:700;font-style:normal;margin-left:0.5em;user-select:none}.scrambled-notifier .token-icon-container svg{transform-style:preserve-3d;width:16px}@media only screen and (max-width: 690px){.scrambled-notifier .token-icon-container svg{width:14px}}.callout-container .scrambled-notifier:before{border-color:transparent transparent #e8e8e8 transparent}.heading-scrambled-notifier-hidden .heading-scrambled-notifier{display:none}.heading-scrambled-notifier.heading-scrambled-notifier-hidden{display:none}.heading-scrambled-notifier:hover .token-icon-container svg{transform:rotateY(360deg);transition-duration:1.2s}\n",""])},1296:function(e,t,n){"use strict";n.r(t);var o,i=n(708),a=n(1182),r=n(1),s=n(3),l=n(128),d=n(15),c=n(6),h=n(0),u=n(65),p=n(63),g=n(64),m=new(function(){function e(){this.periodsNumbers=[60,60,24,7,4.35,12,10],this.periodsDescriptions=["second","minute","hour","day","week","month","year","decade"]}return e.prototype.convertToRelativeHumanReadable=function(e){var t;e/=1e3;for(var n=0;n<this.periodsDescriptions.length&&(t=this.periodsDescriptions[n],e>this.periodsNumbers[n]);n++)e/=this.periodsNumbers[n],6==n&&(t=this.periodsDescriptions[7]);return(e=Math.round(e))>1&&(t+="s"),e+" "+t},e}()),f=n(58),b=n(9),k=n(78),v=n(57),x=n(431),y=n(22),w=n(4),C=n(133),S=n(7),E=$(document),T=new(function(){function e(){var e=this;this.$textAddonsMenuButton=$(".text-addons-menu-button"),this.$textAddonsMenu=$("#text-addons-menu"),this.$textAddonsContainer=this.$textAddonsMenu.find(".items-container ul"),this.$searchBox=this.$textAddonsMenu.find(".search-input"),this.$sortByTimeButton=this.$textAddonsMenu.find(".sort-by-time-button"),this.$sortByBookButton=this.$textAddonsMenu.find(".sort-by-book-button"),this.$highlightsTab=this.$textAddonsMenu.find(".highlights-tab"),this.$bookmarksTab=this.$textAddonsMenu.find(".bookmarks-tab"),this.$notesTab=this.$textAddonsMenu.find(".notes-tab"),this.paginationMaxPages=6,this.paginationMaxItems=10,this.paginationActivePage=0,this.$paginationTarget=$("#text-addons-menu"),this.$paginationWrapper=$("#text-addons-pagination"),this.$textAddonsNotificationIcon=$(".text-addons-menu-button .header-icon-notification"),this.slideMenu=new k.a(this.$textAddonsMenuButton,this.$textAddonsMenu,(function(){return e.getTextAddonsData((function(){e.fillUsersAutocompleteIfNeeded(),e.fillSortedByTime()}))}),(function(){return e.isMenuOpened=!0}),void 0,(function(){return e.isMenuOpened=!1})),s.a.onEventWithCooldown(this.$sortByTimeButton,"click touchstart",(function(){return e.fillSortedByTime()})),s.a.onEventWithCooldown(this.$sortByBookButton,"click touchstart",(function(){return e.fillSortedByBook()})),s.a.onEventWithCooldown(this.$highlightsTab,"click touchstart",(function(){e.$highlightsTab.toggleClass("selected"),e.renderTextAddons()})),s.a.onEventWithCooldown(this.$bookmarksTab,"click touchstart",(function(){e.$bookmarksTab.toggleClass("selected"),e.renderTextAddons()})),s.a.onEventWithCooldown(this.$notesTab,"click touchstart",(function(){e.$notesTab.toggleClass("selected"),e.renderTextAddons()})),s.a.onDescendantEventWithCooldown(this.$textAddonsMenu,"click",".delete-text-addon-icon",(function(t){var n=$(t.target).closest(".text-addon-item"),o=n.attr("data-id");o&&(n.is(".waiting-for-deletion")||(n.is(".bookmark-item")?confirm("Delete bookmark?")&&e.deleteBookmark(n,o):n.is(".note-item")?confirm("Delete note?")&&e.deleteNote(n,o):n.is(".highlight-item")&&confirm("Delete highlight?")&&e.deleteHighlight(n,o)))})),this.$searchBox.typeWatch&&this.$searchBox.typeWatch({callback:function(t){return e.filterBookmarks(t)},wait:200,highlight:!0,captureLength:2}),E.on("highlightAdded",(function(){e.$textAddonsNotificationIcon.html("<i class='highlight-icon-font icon-highlighter-full'></i>"),e.visuallyShowAddition()})),E.on("bookmarkAdded",(function(){e.$textAddonsNotificationIcon.html("<i class='fa fa-bookmark'></i>"),e.visuallyShowAddition()})),E.on("noteAdded",(function(){e.$textAddonsNotificationIcon.html("<i class='fa fa-sticky-note'></i>"),e.visuallyShowAddition()})),E.on("requestTextAddonsMenuOpen",(function(){return e.open()}))}return e.prototype.initialize=function(e,t){var n=this;this.$textAddonsMenuButton.toggleClass("hidden",!e||!S.a.isCurrentlyLoggedIn()),this.$notesTab.find(".notes-tab-title").text(null!=t&&t.reviewVersion?"review notes":"notes"),S.a.isCurrentlyLoggedIn()&&(this.book=e,this.bookElement=t,this.getTextAddonsData((function(){n.fillUsersAutocompleteIfNeeded(),n.fillSortedByTime()})))},e.prototype.clean=function(){this.isMenuOpened||this.$textAddonsMenuButton.addClass("hidden"),this.book=null,this.bookElement=null,$("#reviewer-list").empty()},e.prototype.open=function(){this.slideMenu&&this.slideMenu.openMenu()},e.prototype.getTextAddonsData=function(e){var t=this;this.book&&this.bookElement&&S.a.isCurrentlyLoggedIn()&&C.a.fetchTextAddons(this.bookElement).then((function(n){E.trigger("text-addons-data-ready"),t.textAddonsData=n,e&&e()}))},e.prototype.fillUsersAutocompleteIfNeeded=function(){if(this.textAddonsData&&this.textAddonsData.notes&&this.textAddonsData.notes.bookNotes&&null!=this.bookElement&&this.bookElement.reviewVersion){for(var e={},t=0,n=this.textAddonsData.notes.bookNotes;t<n.length;t++){var o=n[t];o.user&&(e[o.user]=o.user)}$("#reviewer-list").html(w.a.mapToArray(e).sort().map((function(e){return'<option value="'+e+'">'})).join(""))}else $("#reviewer-list").empty()},e.prototype.fillSortedByTime=function(){return this.textAddonsData&&(this.$sortByBookButton.removeClass("selected"),this.$sortByTimeButton.addClass("selected"),this.renderTextAddons()),!1},e.prototype.fillSortedByBook=function(){this.textAddonsData&&(this.$sortByTimeButton.removeClass("selected"),this.$sortByBookButton.addClass("selected"),this.renderTextAddons())},e.prototype.renderTextAddons=function(){this.fillTextAddons(),this.$searchBox.val(""),this.paginationInit()},e.prototype.fillTextAddons=function(){var e=this;if(this.book){var t=this.getCurrentItems();this.$sortByBookButton.is(".selected")?t=this.sortByBook(t):this.$sortByTimeButton.is(".selected")&&(t=this.sortByTime(t)),this.$textAddonsContainer.empty();var n="",o=this.$highlightsTab.is(".selected"),i=this.$bookmarksTab.is(".selected"),a=this.$notesTab.is(".selected");t.forEach((function(t){!o&&t instanceof g.b||!i&&t instanceof u.a||!a&&t instanceof p.a||(n+=Mustache.render(P,{link:h.a.getBookElementUrl(e.book.slug,t.bookElementShortName,t.meapVersion,t.reviewVersion)+e.getContentId(t),bookElementShortName:t.bookElementShortName,bookElementTitle:f.a.pretifyShortName(t.bookElementShortName),text:t instanceof p.a&&e.bookElement.reviewVersion?e.getItemText(t):e.trimText(e.getItemText(t)),id:t.id,timeStamp:m.convertToRelativeHumanReadable(Date.now()-+t.timestamp),isMeap:t.meapVersion&&t.meapVersion>0,isReview:t.reviewVersion&&t.reviewVersion>0,meapVersion:t.meapVersion,reviewVersion:t.reviewVersion,isBookmark:t instanceof u.a,isNote:t instanceof p.a,user:t.user||"",isHighlight:t instanceof g.b,highlightColor:t instanceof g.b?t.color:"",canDelete:!(t instanceof p.a)||t.userId==y.a.getUserId()}))})),this.$textAddonsContainer.append(n)}},e.prototype.trimText=function(e){return!e||""==e||e.length<100?e:e.substr(0,100)+" ..."},e.prototype.getItemText=function(e){return e instanceof p.a?e.noteText:e instanceof u.a?e.bookmarkedText:e instanceof g.b?e.highlightedParagraphs&&e.highlightedParagraphs[0]&&e.highlightedParagraphs[0].selectedText:""},e.prototype.getContentId=function(e){return e instanceof p.a?"note-"+e.contentID:e instanceof u.a?e.contentID:e instanceof g.b?e.highlightedParagraphs&&e.highlightedParagraphs[0]&&e.highlightedParagraphs[0].ordinal:""},e.prototype.getCurrentItems=function(){var e=this.textAddonsData.notes.bookNotes,t=this.textAddonsData.bookmarks.bookBookmarks,n=this.textAddonsData.highlights.bookHighlights;return[].concat(e).concat(t).concat(n)},e.prototype.filterBookmarks=function(e){if(!(e=e.trim().toLowerCase()))return this.$textAddonsContainer.find(".hidden").removeClass("hidden"),void this.paginationInit();this.$textAddonsContainer.children().each((function(t,n){var o=$(n);o.toggleClass("hidden",-1===o.text().toLowerCase().indexOf(e))})),this.paginationInit()},e.prototype.sortByTime=function(e){return e.sort((function(e,t){return+t.timestamp-+e.timestamp}))},e.prototype.sortByBook=function(e){var t=this;return e.sort((function(e,n){return e.bookElementOrdinal<n.bookElementOrdinal?-1:e.bookElementOrdinal>n.bookElementOrdinal?1:+t.getContentId(e)-+t.getContentId(n)}))},e.prototype.paginationInit=function(){var e=$(".items-container li",this.$paginationTarget).not(".hidden").length;if(this.$paginationWrapper.empty(),this.$paginationWrapper.removeClass("has-items"),e>this.paginationMaxItems){this.$paginationWrapper.addClass("has-items");for(var t=Math.ceil(e/this.paginationMaxItems),n='<li data-page="1"><i class="fa fa-angle-double-left"></i></li>\n                                  <li data-page="-"><i class="fa fa-angle-left"></i></li>',o=1;o<=t;o++){n+='<li data-page="'+o+'" class="pagination-item">'+o+"</li>"}n+='<li data-page="+"><i class="fa fa-angle-right"></i></li>\n                               <li data-page="'+t+'"><i class="fa fa-angle-double-right"></i></li>',this.$paginationWrapper.append(n),this.paginationShowPage(1);var i=this;this.$paginationWrapper.children().on("click",(function(){i.paginationShowPage($(this).attr("data-page"))}))}return!1},e.prototype.paginationShowPage=function(e){var t=this,n=this.$paginationWrapper.find(".pagination-item"),o=n.length;if(e<1||e>o)return!1;var i=e*this.paginationMaxItems,a=i-this.paginationMaxItems;this.paginationActivePage=parseInt(e),this.$paginatedItems=this.$textAddonsContainer.children(),this.$paginatedItems.each((function(e,t){var n=$(t);e>=a&&e<i?n.removeClass("hidden"):n.addClass("hidden")})),n.each((function(n,i){var a=$(i),r=Math.round(t.paginationMaxPages/2);t.paginationActivePage+r>o?r+=t.paginationActivePage+r-o:t.paginationActivePage<r&&(r+=t.paginationActivePage),n+1>t.paginationActivePage-r&&n+1<=t.paginationActivePage+r?a.removeClass("hidden"):a.addClass("hidden"),a.toggleClass("active",e==n+1)})),$(":nth-child(2)",this.$paginationWrapper).attr("data-page",this.paginationActivePage-1),$(":nth-child("+(o+3)+")",this.$paginationWrapper).attr("data-page",this.paginationActivePage+1)},e.prototype.visuallyShowAddition=function(){var e=this;this.$textAddonsNotificationIcon.removeClass("hidden disappear").addClass("appear"),b.a.addIconButtonGlow(this.$textAddonsMenuButton),setTimeout((function(){e.$textAddonsNotificationIcon.removeClass("appear").addClass("disappear"),b.a.removeIconButtonGlow(e.$textAddonsMenuButton)}),2e3)},e.prototype.deleteBookmark=function(e,t){e.addClass("waiting-for-deletion"),C.a.removeBookmarkById(this.bookElement,t).then((function(n){if(!n)return e.removeClass("waiting-for-deletion"),void v.a.showTemporaryNotification("error deleting bookmark");e.remove();var o=document.querySelector(".bookmark-bubble[data-id='"+t+"']");if(null!=o){var i=$(o).closest(".paragraph-bubble");i.removeAttr("data-bookmark-active"),x.a.visuallyMarkBookmark(i.get(0))}})).catch((function(t){e.removeClass("waiting-for-deletion"),v.a.showTemporaryNotification("error deleting bookmark")}))},e.prototype.deleteNote=function(e,t){e.addClass("waiting-for-deletion"),C.a.removeNote(this.bookElement,parseInt(t)).then((function(n){if(!n)return e.removeClass("waiting-for-deletion"),void v.a.showTemporaryNotification("error deleting note");e.remove();for(var o=document.querySelectorAll(".note-bubble.bubble-active"),i=0;i<o.length;i++){var a=$(o[i]).closest(".paragraph-bubble");x.a.removeNoteBubbleNote(a.get(0),t)}})).catch((function(t){e.removeClass("waiting-for-deletion"),v.a.showTemporaryNotification("error deleting note")}))},e.prototype.deleteHighlight=function(e,t){e.addClass("waiting-for-deletion"),C.a.removeHighlight(this.bookElement,parseInt(t)).then((function(n){if(!n)return e.removeClass("waiting-for-deletion"),void v.a.showTemporaryNotification("error deleting highlight");e.remove(),b.a.unwrapIntoParent($(".highlight-"+t))})).catch((function(t){e.removeClass("waiting-for-deletion"),v.a.showTemporaryNotification("error deleting highlight")}))},e}()),P='\n<li class="item text-addon-item {{#isBookmark}}bookmark-item{{/isBookmark}} {{#isNote}}note-item{{/isNote}} {{#isHighlight}}highlight-item{{/isHighlight}}" data-id="{{id}}">\n<i class="fa {{#isBookmark}}fa-bookmark{{/isBookmark}} {{#isNote}}fa-sticky-note{{/isNote}} {{#isHighlight}}highlight-icon-font icon-highlighter-full{{/isHighlight}} text-addon-icon {{highlightColor}}" title="{{#isBookmark}}bookmark{{/isBookmark}}{{#isNote}}note{{/isNote}}{{#isHighlight}}highlight{{/isHighlight}} "/>\n<a href="{{link}}" class="text-addon-item-link" contentItemID="{{contentItemID}}" bookElementShortName="{{bookElementShortName}}" meapVersion="{{meapVersion}}">\n    <span class="livetimestamp">{{timeStamp}} ago in</span> <span class="book-element-short-name">{{bookElementTitle}}</span>\n    {{#isMeap}}<span class="meap-label">MEAP v{{meapVersion}}</span>{{/isMeap}}\n    {{#isReview}}<span class="review-label">RW {{reviewVersion}}</span>{{/isReview}}\n    <div class="text-addon-item-content">{{#user}}<span class="text-addon-item-username-container">{{user}}: </span>{{/user}}<span class="text-addon-item-text">{{text}}</span></div>\n</a>\n{{#canDelete}}\n<i class="fa fa-trash-o delete-text-addon-icon" aria-hidden="true" title="delete {{#isBookmark}}bookmark{{/isBookmark}}{{#isNote}}note{{/isNote}}{{#isHighlight}}highlight{{/isHighlight}} "></i>\n{{/canDelete}}\n</li>',M=n(135),I=n(711),B=n(410),N=n(455),A=function(){function e(){var e=this;this.$bookResourcesButton=$(".book-resources-menu-button"),this.$bookResourcesMenu=$("#book-resources-menu"),this.slideMenu=new k.a(this.$bookResourcesButton,this.$bookResourcesMenu),$(document).on("requestBookResourceMenuOpen",(function(){return e.open()}))}return e.prototype.initialize=function(e,t){var n=this;e&&(this.currentBook=e,this.currentBookElement=t,this.currentBook&&this.currentBookElement&&(this.currentBook.manningId?Promise.all([N.a.getAccessibleResources(this.currentBook.shortName),B.a.getTokenLedgerItems(!0)]).then((function(e){var t=e&&e[0],o=e&&e[1];if(t){var i="",a=t.productUrls||[],r=t.meapVersions||[],s=t.reviewVersions||[];if(a=a.filter((function(e){return"FORUM"!=(e.type||"")})),n.currentBook){for(var l=function(e){if(e&&e.version>0){var t="MEAP V"+e.version;if(null==a.find((function(e){return e.linkText==t}))){var i=n.tokenLedgerContains(o,n.currentBook.slug,e.version);a.push({linkText:t,url:h.a.getBookElementUrl(n.currentBook.slug,"chapter-1",e.version),isStarred:i,title:i?"contains owned content":""})}}},d=0,c=r;d<c.length;d++){l(c[d])}for(var u=function(e){if(e&&e.version>0){var t="REVIEW R"+e.version;if(null==a.find((function(e){return e.linkText==t}))){var i=n.tokenLedgerContains(o,n.currentBook.slug,e.version);a.push({linkText:t,url:h.a.getBookElementUrl(n.currentBook.slug,"chapter-1",null,e.version),isStarred:i,title:i?"contains owned content":""})}}},p=0,g=s;p<g.length;p++){u(g[p])}}for(var m=t.downloads||[],f=t.restrictedDownloads||[],b=0,k=f;b<k.length;b++){var v=k[b];v.url&&v.productFormat&&(v.linkText="download "+v.linkText+" from dashboard",v.url="https://www.manning.com/dashboard")}null!=m&&m.length>0&&(i+=Mustache.render(z,{label:"downloads",items:m.concat(f.filter((function(e){return e.url})))})),a&&a.length&&(i+=Mustache.render(z,{label:"links",items:a})),n.$bookResourcesMenu.find(".slide-in-menu-container").html(i)}})):$(".book-resources-menu-button").addClass("hidden")))},e.prototype.clean=function(){this.currentBook=null,this.currentBookElement,$(".book-resources-menu-button").removeClass("hidden")},e.prototype.open=function(){this.slideMenu&&this.slideMenu.openMenu()},e.prototype.close=function(){this.slideMenu&&this.slideMenu.closeMenu()},e.prototype.tokenLedgerContains=function(e,t,n){return null!=e&&0!=e.length&&null!=e.find((function(e){return null!=e.link&&-1!=e.link.indexOf("/"+t+"/")&&-1!=e.link.indexOf("/v-"+n)}))},e}(),z='<label class="section-menu-header">{{label}}</label> \n<div class="book-resources-links-container">\n    {{#items}}\n        <a class="book-resource-link" href="{{url}}" target="_blank" title="{{title}}">\n            {{linkText}} {{#isStarred}}<i class="fa fa-star" aria-hidden="true"></i>{{/isStarred}}\n        </a>\n    {{/items}}\n</div>',L=new A,O=n(131),R=n(130),D=(n(1183),$(window),$(document)),H=new(function(){function e(){}return e.prototype.initialize=function(e,t){this.book=e,this.bookElement=t,this.adjustIFrames()},e.prototype.clean=function(){this.book=null,this.bookElement=null},e.prototype.adjustIFrames=function(){var e=this;$(".interactive-container iframe").each((function(t,n){var o=$(n),i=o.attr("data-src")||o.attr("src");(i||"").indexOf("webdesignplayground")&&o.closest(".interactive-container").addClass("web-design-playground"),o.attr("src",h.a.isAbsoluteUrl(i)?i:h.a.getInteractiveCodeUrl(e.book.shortName,i)),o.on("load",(function(){return D.trigger("textLayoutModified")})),o.iFrameResize([{checkOrigin:!1,autoResize:!0}])}))},e}()),F=n(631),j=n(56),J=n(773),U=n(575),W=n(634),G=n(615),Y=n(465),Z=n(469),V=n(139),q=n(450),_=n(77),X=n(584),K=n(464),Q=n(716),ee=n(67),te=n(576),ne=n(79),oe=n(94),ie=(n(616),n(720),n(1187),n(1189),n(5)),ae=new(function(){function e(){}return e.prototype.initialize=function(){this.getSource().then((function(e){return e.AudioManager.initialize()}))},e.prototype.loadBookContent=function(e,t){this.getSource().then((function(n){return n.AudioManager.loadBookContent(e,t)}))},e.prototype.clean=function(){this.sourcePromise&&this.sourcePromise.then((function(e){return e.AudioManager.clean()}))},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=ie.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return n.e(10).then(n.bind(null,1297))},e}()),re=n(76),se=n(17),le=n(129),de=n(141),ce=n(357),he=n(360),ue=n(75),pe=n(358),ge=n(376),me=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),fe=function(){return(fe=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},be=function(e){function t(t){var n=e.call(this,t)||this;return n.handleAudioSelectionChange=n.handleAudioSelectionChange.bind(n),n.handleClick=n.handleClick.bind(n),n.state={isComboAudioSelected:!1,isEbookAudioSelected:!1},n}return me(t,e),t.prototype.render=function(){var e=(this.props.productOfferings||[]).find((function(e){return e.isComboOffering()})),t=(this.props.productOfferings||[]).find((function(e){return e.isEBookOffering()})),n=this.props.isComboInCart||this.props.isEbookInCart;return ce.createElement(ce.Fragment,null,ce.createElement("div",{className:pe("add-to-cart",{"deal-of-the-day":!1})},this.props.canBeMinimized&&ce.createElement("div",{className:"add-to-cart-close-button",title:"close",onClick:this.props.onCloseClick},ce.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),ce.createElement("div",{className:pe("add-to-cart-title-container")},ce.createElement("h5",null,this.generateAddToCartTitleMessage())),e&&!this.props.userOwnsBook&&ce.createElement("fieldset",{className:pe("add-to-cart-choices-container add-to-cart-combo-container",{disabled:this.props.isComboInCart}),disabled:this.props.isComboInCart},this.props.userOwnsBook?this.generateAudioChoice(e):this.generateBuyContent(e),this.createAddToCartShowButton(e)),t&&ce.createElement("fieldset",{className:pe("add-to-cart-choices-container add-to-cart-ebook-container",{disabled:this.props.isEbookInCart},{collapsed:this.props.isComboInCart}),disabled:this.props.isEbookInCart},this.props.userOwnsBook?this.generateAudioChoice(t):this.generateBuyContent(t),this.createAddToCartShowButton(t)),ce.createElement(ge,{html:!0,effect:"solid"})),ce.createElement("span",{className:pe("add-to-cart-collapsed-icons-container",{"added-to-cart":n}),onClick:this.props.onMaxmizeClick,title:n?"view in cart":"add to cart"},!n&&ce.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}),ce.createElement("i",{className:"fa fa-shopping-cart","aria-hidden":"true"})))},t.prototype.createAddToCartShowButton=function(e){var t=this,n=e.isComboOffering()?this.props.isComboInCart:this.props.isEbookInCart;return ce.createElement("div",{className:pe("add-to-cart-add-show-button",{"added-to-cart":n,disabled:this.props.userOwnsBook&&!(e.isComboOffering()?this.state.isComboAudioSelected:this.state.isEbookAudioSelected)}),onClick:function(n){return t.handleClick(e)}},this.generateButtonMessage(e))},t.prototype.generateButtonMessage=function(e){if(e.isComboOffering()){if(this.props.isEbookInCart){var t=this.getPriceDifferenceBetweenPbookAndEbook();return this.props.isComboInCart||0==t?"checkout":"get print book for $"+w.a.formatMoney(t)+" more"}return this.props.isComboInCart?"checkout":"add print book to cart"}return this.props.isEbookInCart?"checkout":this.props.userOwnsBook&&!this.props.userOwnsAudio?"upgrade":"add eBook to cart"},t.prototype.getPriceDifferenceBetweenPbookAndEbook=function(){var e=this.props.productOfferings.find((function(e){return e.isComboOffering()})),t=this.props.productOfferings.find((function(e){return e.isEBookOffering()}));return null!=e&&null!=t?e.price-t.price:0},t.prototype.handleClick=function(e){var t=e.isComboOffering()?this.state.isComboAudioSelected:this.state.isEbookAudioSelected;this.props.userOwnsBook&&!this.props.userOwnsAudio&&(t=!0),this.props.onAddShowClick&&this.props.onAddShowClick(e,t)},t.prototype.generateAddToCartTitleMessage=function(){var e=d.a.cleanBookTitle(this.props.productTitle,!0);return this.props.isEbookInCart?ce.createElement("span",{className:"add-to-cart-product-title"},e):ce.createElement(ce.Fragment,null,this.props.userOwnsBook?"upgrade":"buy"," ",ce.createElement("span",{className:"add-to-cart-product-title"},e))},t.prototype.generateBuyContent=function(e){return ce.createElement("div",null,this.generateBuyProductOfferingContent(e),this.generateAudioChoice(e))},t.prototype.generateBuyProductOfferingContent=function(e){return ce.createElement("div",{className:"add-to-cart-choices-title-container"},ce.createElement("span",{className:"add-to-cart-content-title",style:{float:"left"}},e.isComboOffering()?ce.createElement("span",null," print book "):ce.createElement("span",null," eBook "),ce.createElement("i",{className:"fa fa-info-circle","data-place":"left","aria-hidden":"true","data-tip":this.generateTooltipMessage(e.isComboOffering())})),ce.createElement("span",{className:"add-to-cart-content-book-price",style:{float:"right"}},e.unitAmountDiscounted>0?ce.createElement(ce.Fragment,null,ce.createElement("span",{className:"add-to-cart-content-list-book-price"},"$",w.a.formatMoney(e.price)),ce.createElement("span",{className:"add-to-cart-content-book-price-with-discount"},"$",w.a.formatMoney(e.price-e.unitAmountDiscounted))):ce.createElement("span",null,"$",w.a.formatMoney(e.price))),ce.createElement("div",{className:"add-to-cart-content-subtitle",style:{clear:"both"}},e.isComboOffering()?ce.createElement(ce.Fragment,null,ce.createElement("span",{"data-tip":this.generatePBookMessageHTMLString()},"pBook")," + ",ce.createElement("span",{"data-tip":this.generateEBookMessageHTMLString()},"eBook")," + ",ce.createElement("span",{"data-tip":this.generateLiveBookMessageHTMLString()},"liveBook")):ce.createElement(ce.Fragment,null,ce.createElement("span",{"data-tip":this.generatePdfMessageHTMLString()},"pdf")," + ",ce.createElement("span",{"data-tip":this.generateEpubMessageHTMLString()},"ePub")," + ",ce.createElement("span",{"data-tip":this.generateKindleMessageHTMLString()},"kindle")," + ",ce.createElement("span",{"data-tip":this.generateLiveBookMessageHTMLString()},"liveBook"))))},t.prototype.generateTooltipMessage=function(e){return e?"<div>\n                        "+this.generatePBookMessageHTMLString()+" \n                        "+this.generateEBookMessageHTMLString()+" \n                        "+this.generateLiveBookMessageHTMLString()+"\n                    </div>":"<div>\n                        "+this.generatePdfMessageHTMLString()+"\n                        "+this.generateEpubMessageHTMLString()+"\n                        "+this.generateKindleMessageHTMLString()+"\n                        "+this.generateLiveBookMessageHTMLString()+"\n                    </div>"},t.prototype.generatePBookMessageHTMLString=function(){return"<div><strong><i>pBook</i></strong> - Print book </div>"},t.prototype.generateEBookMessageHTMLString=function(){return"<div><strong><i>eBook</i></strong> - Electronic Book (includes kindle, epub, pdf, and liveBook formats) </div>"},t.prototype.generateLiveBookMessageHTMLString=function(){return"<div><strong><i>liveBook</i></strong> - liveBooks are enchanced eBooks accessible from any browser. liveBook access is free with any purchase.</div>"},t.prototype.generatePdfMessageHTMLString=function(){return"<div><strong><i>pdf</i></strong> - A digital file containing a drm free copy of your book.</div>"},t.prototype.generateEpubMessageHTMLString=function(){return"<div><strong><i>epub</i></strong> - The EPUB is the most popular format for digital books. You can read EPUB files on your smartphone, tablet, eReader, or computer.</div>"},t.prototype.generateKindleMessageHTMLString=function(){return"<div><strong><i>kindle</i></strong> - The kindle format enables reading on eReaders such as the Amazon Kindle.</div>"},t.prototype.generateAudioChoice=function(e){var t=this;if(!Ce.hasAudioOffering())return null;var n=e.isComboOffering()?this.state.isComboAudioSelected:this.state.isEbookAudioSelected,o=e.isComboOffering()?this.props.isComboInCart:this.props.isEbookInCart;return o&&!n?null:ce.createElement("div",{className:pe("add-to-cart-choice-container",{active:n,"add-to-cart-audio-upgrade-only-container":!o&&this.props.userOwnsBook})},ce.createElement("label",{className:"add-to-cart-choice-check-container"},o||this.props.userOwnsBook?null:ce.createElement("input",{type:"checkbox",checked:n,onChange:function(n){return t.handleAudioSelectionChange(n,e)}}),o?" audio":" with audio "),ce.createElement("label",{className:"add-to-cart-choice-price-container"},"$",Ce.getAudioPrice()))},t.prototype.handleAudioSelectionChange=function(e,t){t.isComboOffering()?this.setState(fe({},this.state,{isComboAudioSelected:e.currentTarget.checked})):this.setState(fe({},this.state,{isEbookAudioSelected:e.currentTarget.checked}))},t}(ce.Component),ke=n(132),ve=n(14),xe=$(document),ye=$(window),we=ye.width(),Ce=new(function(){function e(){var e=this;this.$addToCartBox=$("#add-to-cart-box"),this.$addToCartStripe=$("#add-to-cart-stripe"),this.$addToCartStripeMessage=this.$addToCartStripe.find(".add-to-cart-stripe-message"),this.$addToCartStripeCloseIcon=this.$addToCartStripe.find(".close-icon"),this.handleResizeStart=this.handleResizeStart.bind(this),this.handleResizeStop=this.handleResizeStop.bind(this),this.handleStripeCloseToggleClick=this.handleStripeCloseToggleClick.bind(this),this.handleStripeClick=this.handleStripeClick.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this),this.handleMaximizeClick=this.handleMaximizeClick.bind(this),this.handleAddShowClick=this.handleAddShowClick.bind(this),this.textSlideMenuBeginOpening=this.textSlideMenuBeginOpening.bind(this),this.handleSlideMenuClosed=this.handleSlideMenuClosed.bind(this),xe.on("bookSpendingInfoArrived shoppingCartItemsChanged",(function(){return e.renderForCurrentBook()})),xe.on("slideMenuStartOpening",this.textSlideMenuBeginOpening),xe.on("slideMenuClosed",this.handleSlideMenuClosed)}return e.prototype.initialize=function(e){var t=this;se.a.isShoppingCartDisabledInApp&&r.b.isApp()||(this.book=e,this.addToCartShouldBeShown=!1,this.book&&(this.book.userOwnsBook&&this.book.userOwnsAudio||this.book.hasBeenDownloaded||(Promise.all([ue.a.getProductOfferings(e),ue.a.getProductDiscounts(e,ke.a.getNewUserDiscountCode()),ue.a.initializeShoppingCartStore()]).then((function(n){var o=n[0],i=n[1];t.productOfferings=o,t.productOfferings&&t.productOfferings.length&&(e.newerEditionId||(!e.userOwnsBook||t.hasAudioOffering()&&t.shouldOfferAudioPurchaseToBookOwner())&&(t.associateProductOfferingsWithDiscounts(o,i),ye.on("resizestart",t.handleResizeStart),ye.on("resizestop",t.handleResizeStop),t.$addToCartStripeCloseIcon.on("click",t.handleStripeCloseToggleClick),t.$addToCartStripe.on("click",t.handleStripeClick),t.addToCartShouldBeShown=!0,t.renderForCurrentBook(),t.minimizeMaximizeAddToCart(!1),null!=t.productOfferings.find((function(e){return e.discountCode}))&&t.$addToCartBox.addClass("cart-glow")))})),ue.a.getProductSpendingInfo(e))))},e.prototype.associateProductOfferingsWithDiscounts=function(e,t){if(t&&e&&e.length)try{for(var n in t){var o=function(o){var i=e.find((function(e){return+e.id==+o}));i&&(i.discountCode=n,i.unitAmountDiscounted=t[n][o])};for(var i in t[n])o(i)}}catch(e){}},e.prototype.renderForCurrentBook=function(){this.book&&this.addToCartShouldBeShown&&(this.canBoxFit()?(this.$addToCartStripe.addClass("disappear"),this.renderAddToCartBox()):this.showAddToCartStripe())},e.prototype.clean=function(){r.b.isApp()||(this.book=null,this.addToCartShouldBeShown=!1,this.$addToCartBox.removeClass("cart-glow"),this.cleanAddToCartBox(),this.cleanStripe(),this.productOfferings=null,ye.off("resizestart",this.handleResizeStart),ye.off("resizestop",this.handleResizeStop),this.$addToCartBox.removeClass("collapsed"),this.$addToCartStripeCloseIcon.off("click",this.handleStripeCloseToggleClick),this.$addToCartStripe.off("click",this.handleStripeClick))},e.prototype.openCartMenu=function(){ue.a.requestMenuOpen()},e.prototype.renderAddToCartBox=function(){if(this.$addToCartBox[0]){this.$addToCartBox.css("top","135px");var e=ue.a.isEbookInShoppingCart(this.book),t=ue.a.isComboInShoppingCart(this.book),n=ue.a.isAudioInShoppingCart(this.book);this.$addToCartBox.toggleClass("can-add-to-cart",!(e||t)),this.$addToCartBox.toggleClass("can-view-in-cart",e||t),he.render(ce.createElement(be,{userOwnsBook:this.book.userOwnsBook,userOwnsAudio:this.book.userOwnsAudio,productOfferings:this.productOfferings,productTitle:d.a.cleanBookTitle(this.book.title),isEbookInCart:e,isComboInCart:t,isAudioInCart:n,canBeMinimized:this.canAddToCartBeMinimized(),onAddShowClick:this.handleAddShowClick,onCloseClick:this.handleCloseClick,onMaxmizeClick:this.handleMaximizeClick,isMeap:this.book.isMeap}),this.$addToCartBox[0])}},e.prototype.canAddToCartBeMinimized=function(){return!(!this.book.userOwnsBook||!this.hasAudioOffering()||this.book.userOwnsAudio)||!!(this.book.spendingInfo&&this.book.spendingInfo.spentDollarAmount>0)},e.prototype.cleanAddToCartBox=function(){this.$addToCartBox[0]&&he.unmountComponentAtNode(this.$addToCartBox[0])},e.prototype.showAddToCartStripe=function(){this.$addToCartStripe.removeClass("disappear"),ue.a.isEbookInShoppingCart(this.book)?(this.$addToCartStripe.addClass("added-to-cart"),this.$addToCartStripeMessage.text("view in cart"),this.$addToCartStripe.attr("title","view in cart")):(this.$addToCartStripe.removeClass("added-to-cart"),this.$addToCartStripeMessage.html(this.book.userOwnsBook?"upgrade with audio for $"+this.getAudioPrice():this.getAddToCartMessage()),this.$addToCartStripe.attr("title","add to cart")),this.$addToCartStripe.addClass("collapsed")},e.prototype.cleanStripe=function(){this.$addToCartStripe.addClass("disappear").removeClass("collapsed")},e.prototype.textSlideMenuBeginOpening=function(e,t,n){this.canBoxFit()?this.canBoxFit(n)||this.$addToCartBox.addClass("collapsed"):this.book&&this.addToCartShouldBeShown?this.showAddToCartStripe():this.hideAddToCart()},e.prototype.handleSlideMenuClosed=function(){this.showAddToCart()},e.prototype.handleCloseClick=function(){this.$addToCartBox.is(".collapsed")||(this.cleanAddToCartBox(),this.cleanStripe())},e.prototype.minimizeMaximizeAddToCart=function(e){e?this.$addToCartBox.removeClass("collapsed"):this.$addToCartBox.addClass("collapsed")},e.prototype.handleMaximizeClick=function(){this.maximizeAddToCartBoxIfNecessary()},e.prototype.handleAddShowClick=function(e,t){this.maximizeAddToCartBoxIfNecessary()||this.book.userOwnsBook&&!t||(e.isEBookOffering()&&ue.a.isEbookInShoppingCart(this.book)||e.isComboOffering()&&ue.a.isComboInShoppingCart(this.book)?this.openCartMenu():ue.a.requestAddBookToCart(this.book,t,this.getDiscountCode(e),!1,e.isComboOffering()))},e.prototype.maximizeAddToCartBoxIfNecessary=function(){var e=this;return!!this.$addToCartBox.is(".collapsed")&&(0==c.a.getCurrentMainContentTranslateX()?this.minimizeMaximizeAddToCart(!0):($(document).trigger("slideMenuCloseRequested"),s.a.setTimeout((function(){e.minimizeMaximizeAddToCart(!0)}),300)),!0)},e.prototype.handleResizeStart=function(){we!=ye.width()&&this.hideAddToCart(),we=ye.width()},e.prototype.handleResizeStop=function(){this.showAddToCart(),we=ye.width()},e.prototype.hideAddToCart=function(){this.$addToCartBox.css({display:"none"}),this.cleanAddToCartBox(),this.cleanStripe()},e.prototype.showAddToCart=function(){this.$addToCartBox.css({display:"block"}),this.canBoxFit()&&this.$addToCartBox.removeClass("collapsed"),this.renderForCurrentBook()},e.prototype.handleStripeCloseToggleClick=function(){this.$addToCartStripe.is(".collapsed")?this.$addToCartStripe.removeClass("collapsed"):this.$addToCartStripe.addClass("collapsed")},e.prototype.handleStripeClick=function(e){e.target!==this.$addToCartStripeCloseIcon[0]&&(ue.a.isEbookInShoppingCart(this.book)?ue.a.requestMenuOpen():this.$addToCartStripe.is(".collapsed")?this.$addToCartStripe.removeClass("collapsed"):(ue.a.requestAddBookToCart(this.book,this.hasAudioOffering(),this.getDiscountCode(this.getEBookOffering())),this.renderForCurrentBook()))},e.prototype.getAddToCartMessage=function(){var e='<strong style="text-decoration: underline;">add</strong> to cart for '+this.getPriceMessageHTML()+" ";return this.book.spendingInfo&&this.book.spendingInfo.spentDollarAmount||(e+='<em class="add-to-cart-formats-message">(pdf + ePub + kindle + liveBook '+(this.hasAudioOffering()?" + audio":"")+")</em>"),e},e.prototype.getPriceMessageHTML=function(){var e=this.getEBookOffering(),t=this.getAudioOffering(),n="<span>",o=(e&&e.price||0)+(t&&t.price||0),i=(e&&e.unitAmountDiscounted||0)+(t&&t.unitAmountDiscounted||0);return n+=i>0?'<span class="add-to-cart-content-list-book-price">$'+w.a.formatMoney(o)+'</span>\n                          <span class="add-to-cart-content-book-price-with-discount"><strong>$'+w.a.formatMoney(o-i)+"</strong></span>":"<strong>$"+w.a.formatMoney(o)+"</strong>",n+="</span>"},e.prototype.canBoxFit=function(e){void 0===e&&(e=0);var t=$(document.querySelector(".readable-text"));if(0==t.length)return!1;var n=t.offset().left+t.width()+e-c.a.getComputedTranslateX($("#book-main-content-container")[0]),o=2.5*parseFloat(this.$addToCartBox.css("right"));return n+Math.max(this.$addToCartBox.width(),225)+o+110<ye.width()},e.prototype.getAudioPrice=function(){var e=this.productOfferings;if(!e||!e.length)return 0;var t=e.find((function(e){return e.isAudioOffering()}));return t?w.a.roundToTwoDecimalPoints(t.price):0},e.prototype.getEBookOffering=function(){return(this.productOfferings||[]).find((function(e){return e.isEBookOffering()}))},e.prototype.getAudioOffering=function(){return this.productOfferings&&this.productOfferings.length?this.productOfferings.find((function(e){return e.isAudioOffering()})):null},e.prototype.hasAudioOffering=function(){return!!this.getAudioOffering()},e.prototype.getDiscountCode=function(e){return e?e.discountCode:""},e.prototype.requestOpenLogin=function(){ue.a.requestOpenLogin()},e.prototype.shouldOfferAudioPurchaseToBookOwner=function(){var e=this.getLastBookAccessTime();return(null==e||w.a.getDifferenceInDays(e,new Date)>14)&&(this.storeBookLastAccessTime(),!0)},e.prototype.getLastBookAccessTime=function(){try{var e=JSON.parse(ve.a.getItem("audio_access")||"{}");return e[this.book.shortName]?new Date(e[this.book.shortName]):null}catch(e){return null}},e.prototype.storeBookLastAccessTime=function(){try{var e=JSON.parse(ve.a.getItem("audio_access")||"{}");e[this.book.shortName]=Date.now(),ve.a.setItem("audio_access",JSON.stringify(e))}catch(e){}},e}()),$e=new(function(){function e(){this.shouldBeShownWhenAppropriate=!1,this.textSlideMenuBeginOpening=this.textSlideMenuBeginOpening.bind(this),this.textSlideMenuEndClosing=this.textSlideMenuEndClosing.bind(this),$(document).on("textSlideMenuBeginOpening slideMenuStartOpening",this.textSlideMenuBeginOpening).on("slideMenuClosed",this.textSlideMenuEndClosing)}return e.prototype.initialize=function(e){var t=this;this.book=e,ue.a.getNewestEditionProduct(e).then((function(n){null!=n&&n.newestEditionProduct&&n.newestEditionProduct.slug?(e.newerEditionId=n.newestEditionProduct.id,t.shouldBeShownWhenAppropriate=!0,t.renderNewestEditionNotification(e,n)):t.shouldBeShownWhenAppropriate=!1}))},e.prototype.clean=function(){this.book=null,$("#newest-edition-box").css("display","none"),this.shouldBeShownWhenAppropriate=!1},e.prototype.renderNewestEditionNotification=function(e,t){if(!e.userOwnsBook){var n=$("#newest-edition-box");n.css("display","block"),n.find(".newest-edition-available-link").attr("href",h.a.getBookElementUrl(t.newestEditionProduct.slug,"")),n.find(".newest-edition-available-book-title").text(t.newestEditionProduct.title),n.find(".newest-edition-available-this-included").css("display",t.isCurrentProductTheFreeEdition?"block":"none")}},e.prototype.textSlideMenuBeginOpening=function(){$("#newest-edition-box").css("display","none")},e.prototype.textSlideMenuEndClosing=function(){null!=this.book&&!this.book.userOwnsBook&&this.shouldBeShownWhenAppropriate&&$("#newest-edition-box").css("display","block")},e}()),Se=n(555),Ee=n(144),Te=n(16),Pe=n(25),Me=function(){function e(){this.handleResizeStart=this.handleResizeStart.bind(this),this.handleResizeStop=this.handleResizeStop.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this),this.handleAddToCartClick=this.handleAddToCartClick.bind(this),this.handleCommandsWrapperClick=this.handleCommandsWrapperClick.bind(this)}return e.prototype.initialize=function(e){this.book=e,this.loadAndDisplayRelatedProducts(this.book.shortName),this.$freeEbooksUpsellRoot=$("#free-ebooks-upsell-root"),this.$carausel=this.$freeEbooksUpsellRoot.find(".free-ebooks-upsell-carausel")},e.prototype.clean=function(){this.book=null,this.$freeEbooksUpsellRoot&&this.$freeEbooksUpsellRoot.css("display","none"),this.$carausel&&this.$carausel.is(".slick-initialized")&&this.$carausel.slick("unslick"),this.unsubscribeFromEvents(),this.$carausel=null,this.$freeEbooksUpsellRoot=null,this.discountCode=""},e.prototype.handleResizeStart=function(){this.$freeEbooksUpsellRoot&&this.$freeEbooksUpsellRoot.css("display","none"),this.$carausel&&this.$carausel.is(".slick-initialized")&&this.$carausel.slick("unslick")},e.prototype.handleResizeStop=function(){var e=this;s.a.setTimeout((function(){e.$carausel&&e.$carausel.is(".slick-initialized")&&e.$carausel.slick("unslick"),e.$freeEbooksUpsellRoot&&e.$freeEbooksUpsellRoot.css("display","block"),e.slick()}),100)},e.prototype.loadAndDisplayRelatedProducts=function(e){var t=this;Promise.all([ie.a.loadSlickSliderCode(),Pe.a.getRelatedProducts(e)]).then((function(n){n[0];var o=n[1],i=ke.a.getNewUserDiscountCode();t.discountCode=i,ke.a.getNewUserProductDiscounts(o.map((function(e){return e.id})),i).then((function(n){t.book&&t.book.shortName==e&&t.fillCarausel(n,o)})).catch((function(n){t.book&&t.book.shortName==e&&t.fillCarausel([],o)}))})).catch((function(e){console.log(e)}))},e.prototype.fillCarausel=function(e,t){var n=this.generateCarauselHtml(e,t);if(!n)return this.$freeEbooksUpsellRoot.css("display","none"),void this.unsubscribeFromEvents();this.$freeEbooksUpsellRoot.css("display","block"),this.$carausel.is(".slick-initialized")&&this.$carausel.slick("unslick"),this.$carausel.html(n),null!=e&&e.length>0?c.a.replaceBookCoversOnImageLoad(this.$carausel,e.map((function(e){return h.a.getMarketplaceProductCoverUrl(e.imageUrl)})),!0):c.a.replaceBookCoversOnImageLoad(this.$carausel,t.map((function(e){return e.imageUrl})),!0),this.slick(),this.subscribeToEvents()},e.prototype.slick=function(){this.$freeEbooksUpsellRoot&&this.$freeEbooksUpsellRoot.find(".free-ebooks-upsell-carausel").slick($(window).width()<=970?Be:Ie)},e.prototype.generateCarauselHtml=function(e,t){return null!=e&&e.length>0?e.filter((function(e){return e.isLivebook})).map((function(e){var t=e.productOfferings.find((function(e){var t=(e.productType||"").toLowerCase();return"ebook"==t||"livebook"==t||"livevideo"==t}));return null==t?"":Mustache.render(Ne,{externalId:e.externalId,imageUrl:h.a.getMarketplaceProductCoverUrl(e.imageUrl),price:null!=t?t.price:0,hasPrice:null!=t&&t.price>0,hasAdditionalCommands:!0,discountedPrice:null!=t?w.a.roundToTwoDecimalPoints(t.price-t.discount):0,productPath:h.a.getBookUrl(e.slug)})})).join(""):(t||[]).map((function(e){return Mustache.render(Ne,{externalId:e.externalId,productPath:e.link,imageUrl:e.imageUrl})})).join("")},e.prototype.subscribeToEvents=function(){$(window).on("resizestart",this.handleResizeStart).on("resizestop",this.handleResizeStop),this.$freeEbooksUpsellRoot.find(".free-ebooks-upsell-close").on("click",this.handleCloseClick),this.$freeEbooksUpsellRoot.on("click",".book-cover-add-to-cart-command",this.handleAddToCartClick),this.$freeEbooksUpsellRoot.on("click",".book-cover-commands-wrapper",this.handleCommandsWrapperClick)},e.prototype.unsubscribeFromEvents=function(){$(window).off("resizestart",this.handleResizeStart).off("resizestop",this.handleResizeStop),null!=this.$freeEbooksUpsellRoot&&(this.$freeEbooksUpsellRoot.find(".free-ebooks-upsell-close").off("click",this.handleCloseClick),this.$freeEbooksUpsellRoot.off("click",".book-cover-add-to-cart-command",this.handleAddToCartClick),this.$freeEbooksUpsellRoot.off("click",".book-cover-commands-wrapper",this.handleCommandsWrapperClick))},e.prototype.handleCloseClick=function(){this.$freeEbooksUpsellRoot.css("display","none"),this.clean()},e.prototype.handleAddToCartClick=function(e){var t=$(e.target).closest(".free-ebooks-upsell-carausel-item").attr("data-book-short-name");t&&($(document).trigger("addToCartFromFreeEbookUpsell",t),$(document).trigger("requestNotification","adding book to cart"),ue.a.requestAddBookToCartByBookShortName(t,this.discountCode).then((function(){$(document).trigger("hideNotification")})).catch((function(e){$(document).trigger("requestNotification","error adding book to cart")})))},e.prototype.handleCommandsWrapperClick=function(e){$(e.target).is(".book-cover-command-wrapper, .fa")||l.a.openLinkInNewTab($(e.target).attr("data-product-path"))},e}(),Ie={arrows:!1,dots:!0,infinite:!1,rows:3,slidesToShow:2,slidesToScroll:2},Be={dots:!1,infinite:!1,arrows:!0,slidesToShow:6,slidesToScroll:6,responsive:[{breakpoint:860,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:600,settings:{slidesToShow:5,slidesToScroll:5}},{breakpoint:530,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:400,settings:{slidesToShow:3,slidesToScroll:3}}]},Ne='<div class="free-ebooks-upsell-carausel-item book-cover-item" data-book-short-name="{{externalId}}">\n    <a href="{{productPath}}" target="_blank">\n        <img alt="book cover" class="book-cover" src="'+h.a.getLivebookCdn()+'assets/images/cover.png" data-src="{{imageUrl}}">\n    </a>\n    {{#hasPrice}}\n    <div class="carausel-price-container">\n        <span class="carausel-original-price-container">${{price}}</span>\n        <span class="carausel-discounted-price-container">${{discountedPrice}}</span>\n    </div>\n    {{/hasPrice}}\n    {{#hasAdditionalCommands}}\n        <div class="book-cover-commands-wrapper" data-product-path="{{productPath}}">\n            <div class="book-cover-command-wrapper" title="view product">\n                <a href="{{productPath}}" target="_blank" class="dont-propagate-click">\n                    <i class="fa fa-eye" aria-hidden="true"/>\n                </a>\n            </div>\n            <div class="book-cover-command-wrapper book-cover-add-to-cart-command dont-propagate-click" title="add to cart"><i class="fa fa-shopping-cart" aria-hidden="true"/></div>\n        </div>\n    {{/hasAdditionalCommands}}\n</div>',Ae=new Me,ze=n(460),Le=new(function(){function e(){var e=this;this.$dogEarsContainer=$(".dog-ears-container"),this.handleClick=this.handleClick.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.$dogEarsContainer.on("click",this.handleClick),this.$dogEarsContainer.on("mouseenter",this.handleMouseEnter),this.$dogEarsContainer.on("mouseleave",this.handleMouseLeave),$(document).on("slideMenuStartOpening",(function(t,n){null!=e.bookElement&&n.is("#settings-menu, #book-resources-menu, #text-addons-menu")&&e.$dogEarsContainer.addClass("hidden")})).on("slideMenuClosed",(function(t){null!=e.bookElement&&e.$dogEarsContainer.removeClass("hidden")}))}return e.prototype.initialize=function(e,t){this.$dogEarsContainer.removeClass("hidden"),this.book=e,this.bookElement=t,null!=this.getCurrentBookDogEarLink()?(this.$dogEarsContainer.addClass("dog-ears-active"),this.updateTooltip("go to marked location")):this.updateTooltip("mark location")},e.prototype.clean=function(){this.$dogEarsContainer.addClass("hidden").removeClass("dog-ears-active"),this.book=null,this.bookElement=null},e.prototype.handleClick=function(){if($(document).trigger("dogEarsClick"),this.$dogEarsContainer.toggleClass("dog-ears-active"),this.$dogEarsContainer.removeClass("dog-ears-mouse-over"),this.$dogEarsContainer.is(".dog-ears-active"))this.storeCurrentLocation(),this.updateTooltip("go to marked location");else{var e=this.getCurrentBookDogEarLink();if(null!=e){var t=null,n=e.link;if(-1!=n.indexOf(this.book.slug+"/")&&-1!=n.indexOf(this.bookElement.shortName+"/")){var o=n.lastIndexOf("/");if(-1!=o){var i=n.substr(o+1);try{(t=document.getElementById(i))&&_.a.scrollToElement(t)}catch(e){}}}!t&&e&&l.a.openLink(n)}this.updateTooltip("mark location"),this.clearCurrentBookLocation()}},e.prototype.handleMouseEnter=function(){this.$dogEarsContainer.addClass("dog-ears-mouse-over")},e.prototype.handleMouseLeave=function(){this.$dogEarsContainer.removeClass("dog-ears-mouse-over")},e.prototype.storeCurrentLocation=function(){try{var e=q.a.getTopMostReadableElement();if(null==e||!e.length)return;var t=JSON.parse(ve.a.getItem("DOG_EARS")||"{}");t[this.book.shortName]={link:l.a.formLink(this.book,this.bookElement,e.attr("refid")),book:this.book.cleanTitle,bookElement:Te.a.beautifyBookElementShortName(this.bookElement.shortName)},ve.a.setItem("DOG_EARS",JSON.stringify(t))}catch(e){console.log(e)}},e.prototype.getCurrentBookDogEarLink=function(){try{return JSON.parse(ve.a.getItem("DOG_EARS")||"{}")[this.book.shortName]}catch(e){return console.log(e),null}},e.prototype.clearCurrentBookLocation=function(){try{var e=q.a.getTopMostReadableElement();if(null==e||!e.length)return;var t=JSON.parse(ve.a.getItem("DOG_EARS")||"{}");delete t[this.book.shortName],ve.a.setItem("DOG_EARS",JSON.stringify(t))}catch(e){console.log(e)}},e.prototype.updateTooltip=function(e){this.$dogEarsContainer.attr("title",e)},e}()),Oe=n(671),Re=n.n(Oe),De=n(138),He=n.n(De),Fe=n(179),je=new(function(){function e(){this.readLoggingInterval=3e4,this.logReading=this.logReading.bind(this),this.handleOnActive=this.handleOnActive.bind(this),this.handleOnIdle=this.handleOnIdle.bind(this),$(document).on("appActivated",this.handleOnActive),$(document).on("appIdle",this.handleOnIdle)}return e.prototype.initialize=function(e,t){var n=!this.book&&null!=e||null!=e&&null!=this.book&&this.book.shortName!=e.shortName;this.book=e,this.bookElement=t,clearTimeout(this.bookReadLogTimer),n&&(this.sessionId=Re()(),this.isLoggingEnabled="visible"==He.a.state(),this.logReading())},e.prototype.clean=function(){this.book=null,this.bookElement=null,this.sessionId=null,clearTimeout(this.bookReadLogTimer),$(".header-item").remove()},e.prototype.logReading=function(){var e=this;if(null!=this.book&&null!=this.bookElement){if(this.isLoggingEnabled){var t=q.a.getTopMostReadableElement(),n=$(".current-header-item"),o=null!=t&&t.attr("refid")||"1",i="";if(n.length>0){var a=(n.text()||"").trim(),r=Te.a.extractNumbering(a);if(r){var l=r.split(".");i=l[0]+"."+(l[1]?l[1]+".":"")}}Fe.a.logReading(this.book.shortName,this.bookElement.shortName,o,i,this.book.userOwnsBook,this.bookElement.isOpen,this.bookElement.meapVersion,this.book.manningId,this.sessionId,this.readLoggingInterval).then((function(t){if(e.book&&t&&t.success&&t.todaysReadingTime){var n="";n=e.book.userOwnsBook?"user-action-reading-owned-book":e.bookElement.isOpen?"user-action-reading-open-chapter":"user-action-reading-free-preview",$(document).trigger(n,[e.book.manningId,t.todaysReadingTime,!1])}}))}this.bookReadLogTimer=s.a.setTimeout(this.logReading,this.readLoggingInterval)}},e.prototype.handleOnIdle=function(){this.isLoggingEnabled=!1},e.prototype.handleOnActive=function(){this.isLoggingEnabled=!0},e}()),Je=n(846),Ue=n(80),We=new(function(){function e(){}return e.prototype.initialize=function(e,t){null!=e&&e.hasKnowledgeGraph&&(e.isKnowledgeGraphAccessible||e.userIsEditor)&&this.getSource().then((function(n){n.TermViewerManager.initialize(e,t)}))},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=ie.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(44),n.e(53),n.e(33)]).then(n.bind(null,1294))},e}()),Ge=n(73);n.d(t,"BookPage",(function(){return Ve}));var Ye=$(document),Ze=$(window),Ve=new(function(){function e(){var e=this;this.pageClass="book-page",i.a.fillWithNecessaryHtmlElements(),this.$mainPageContent=$("#main-page-content"),this.$meapStickerContainer=$("#meap-sticker-container"),this.$meapStickerContainer.find("#meap-sticker").on("click",this.handleShowMeapClick.bind(this)),this.adjustSizeRelatedBehaviors=this.adjustSizeRelatedBehaviors.bind(this),this.handleAppReactivated=this.handleAppReactivated.bind(this),Ye.on("bookElementUnlocked",(function(t,n,o,i){s.a.setTimeout((function(){return e.handlePurchaseSuccessful(i)}),5)}))}return e.prototype.initialize=function(e,t,n,o,i){this.isActive=!0;var a=c.a.getCurrentMainContentTranslateX();this.$mainPageContent.html(oe.a),c.a.translateMainContent(a),this.meapVersion=o,this.additional=i,this.adjustSizeRelatedBehaviors(),this.adaptUI(),_.a.initialize(),F.a.initialize(),this.loadBookContent(e,n),Ze.on("orientationchange resizestop",this.adjustSizeRelatedBehaviors),$(document).trigger("hideNumOnlineUsersRequested",t),$(document).on("appActivatedAfterLongTime",this.handleAppReactivated)},e.prototype.getBook=function(){return this.book},e.prototype.loadBookContent=function(e,t){var n=this;if(this.isActive){var o=e.book,i=e.bookElement;this.book=o,this.bookElement=i,se.a.book=o,se.a.bookElement=i,se.a.shouldImmediatelyPlayLiveaudio=-1!=document.location.href.indexOf("liveaudio=true"),this.trackContentBuildingProcess(this.additional),this.handleBookElementDataRecieved(e),this.processPointingLinkIfNecessary(this.book,this.bookElement,this.additional),o&&i&&(d.a.updateTitle((i.title||"")+" - "+(o.title||"")),d.a.updateMetaContent(this.getThisChapterCoversContent()),d.a.updateMetaImage(o.bookCoverPath),d.a.updateCanonicalLink(o.slug,i.shortName,i.meapVersion),this.fillBookElementStructurePricingInfoIfNecessary()),M.a.initialize(),Ee.a.initialize(o,i),G.a.initialize(o,i),o.hasAudio&&i.audioLocation&&i.subtitlesLocation&&(ae.initialize(),ae.loadBookContent(o,i)),o.userOwnsBook||i.isOpen||s.a.setTimeout((function(){re.a.initialize(o,i,n.initialElement)}),250),s.a.setTimeout((function(){return je.initialize(o,i)}),1e4),s.a.setTimeout((function(){return W.a.initialize(o,i)}),10),s.a.setTimeout((function(){return J.a.initialize(o,i)}),5),s.a.setTimeout((function(){return U.a.initialize(o,i)}),5),s.a.setTimeout((function(){return Z.a.initialize()}),5),s.a.setTimeout((function(){return V.a.initialize()}),5),s.a.setTimeout((function(){return H.initialize(o,i)}),10),s.a.setTimeout((function(){return X.a.initialize(o,i)}),250),s.a.setTimeout((function(){return j.a.initialize(o,i)}),250),s.a.setTimeout((function(){return T.initialize(o,i)}),300),s.a.setTimeout((function(){return L.initialize(o,i)}),300),s.a.setTimeout((function(){return Y.a.initialize(o,i)}),300),s.a.setTimeout((function(){return x.a.initialize(o,i)}),400),s.a.setTimeout((function(){return K.a.initialize(o,i)}),500),s.a.setTimeout((function(){return q.a.initialize(o,i,!0)}),500),s.a.setTimeout((function(){return I.a.initialize(o,i,t)}),510),s.a.setTimeout((function(){return n.initializeAutomaticDownloadIfNecessary()}),500),s.a.setTimeout((function(){return We.initialize(o,i)}),700),i.reviewVersion||(s.a.setTimeout((function(){return $e.initialize(o)}),520),s.a.setTimeout((function(){return Le.initialize(o,i)}),260),s.a.setTimeout((function(){return Ce.initialize(o)}),500),ze.a.initialize(o,i),Je.PromoManager.promote()),s.a.setTimeout((function(){return Se.a.initialize(o)}),550),o.hasExercises&&te.a.load(o,i),$(document).trigger("initializeRequested",[o,i,t]),o.isMeap&&this.$meapStickerContainer.removeClass("hidden"),o.isFreeEbook&&Ae.initialize(o),o.userIsEditor&&($(".settings-editor-section .edit-book-link").attr("href",l.a.formEditLinkFromBookSlugAndBookElementShortName(o.slug,i.shortName)),$(".settings-editor-section .back-to-regular-book-link").attr("href",l.a.formLinkFromBookSlugAndBookElementShortName(o.slug,i.shortName))),s.a.setTimeout((function(){ee.a.load(t),de.a.load(),Te.a.isSpecialDiscussionPart(t)||Te.a.isDiscussionErrata(t)?(v.a.showNotification("Opening discussion"),s.a.setTimeout((function(){ee.a.requestOpen(),v.a.hideNotification()}),2100)):Te.a.isSpecialCommentPart(t)&&(v.a.showNotification("Opening discussion"),s.a.setTimeout((function(){0==t.indexOf("comment-")&&ee.a.requestShowCommentWhenReady(t.replace("comment-",""))}),2100))}),2e3)}},e.prototype.clean=function(){$("#book-content-main-row").css("padding-top",""),U.a.clean(),I.a.clean(),T.clean(),L.clean(),re.a.clean(),M.a.clean(),F.a.clean(),Se.a.clean(),Ae.clean(),ze.a.clean(),Le.clean(),Ce.clean(),je.clean(),Je.PromoManager.clean(),k.a.isSideMenuOpened&&this.isActive&&Ye.trigger("slideMenuCloseRequested"),$("body").removeClass(this.pageClass).removeClass("book-review"),this.partialClean()},e.prototype.retryImageLoading=function(){this.$mainPageContent.find("img").on("error",(function(e){var t=e.target;t.src&&t.src.indexOf("/v-")>=0&&(t.src=t.src.replace(/\/v-[0-9]+/i,""))}))},e.prototype.partialClean=function(){this.isActive=!1,this.initialElement=null,this.book=null,this.bookElement=null,se.a.book=null,se.a.bookElement=null,se.a.shouldImmediatelyPlayLiveaudio=!1,this.meapVersion="",this.additional="",$("#header-notification-container").addClass("hidden"),$("#meap-sticker-container").addClass("hidden");var e=$("#footer");e.find(".previous-element-link, .next-element-link").addClass("invisible"),e.find(".footer-book-title-label").addClass("hidden"),e.find(".copyright-label").removeClass("hidden"),$("body").removeClass("subtitles-loaded user-owns-book user-owns-audio user-doesnt-own-book book-meap user-is-editor free-ebook review-book book-edit"),$(".summary-wrapper").remove(),$("#track-point-column").removeClass("shown").addClass("hidden"),$("#audio-loader").removeClass("shown"),$(".second-row-top-bar-section").addClass("hidden"),k.a.isSideMenuOpened&&k.a.$openedMenu&&c.a.closeMenuIfTakesTooMuchSpace(k.a.$openedMenu),ne.a.clean(),ae.clean(),x.a.clean(),K.a.clean(),q.a.clean(),G.a.clean(),Y.a.clean(),_.a.clean(),W.a.clean(),Z.a.clean(),te.a.clean(),X.a.clean(),F.a.clean(),l.a.clean(),j.a.clean(),H.clean(),I.a.partialClean(),re.a.clean(),$e.clean(),se.a.isUnlockingWholeContentThroughPointingLink=!1,ee.a.clean(),Ze.off("orientationchange resizestop",this.adjustSizeRelatedBehaviors),$(document).off("appActivated",this.handleAppReactivated)},e.prototype.processAdditional=function(e){if(e){var t=e;if(0===t.indexOf("search-")){var n=t.substring(t.lastIndexOf("search-")+"search-".length),o=$(document.getElementById(n)).closest(".readable-text, .browsable-container");this.initialElement=o[0],o.addClass("paragraph-selected")}else if(0===t.indexOf("note-"));else{if(0===t.indexOf("section-"))return void(this.initialElement=c.a.getSectionHeading(t));if(0===t.indexOf("point-")){var i=t.substring("point-".length).split("-");2===i.length?e=i[0]:i.length>2&&(e=i[1])}}var a=document.getElementById(e);a&&(this.initialElement=$(a).closest(".readable-text, .browsable-container")[0])}},e.prototype.adaptUI=function(){$("body").addClass(this.pageClass).removeClass("landing-page"),null!=this.bookElement&&this.bookElement.reviewVersion>0&&$("body").addClass("book-review"),$(".second-row-top-bar-section").removeClass("hidden")},e.prototype.handleBookElementDataRecieved=function(e){var t=e.book,n=e.bookElement;$("#book-markup-container").html(e.bookElement.content),$("#track-point-column").removeClass("hidden").addClass("shown"),$("body").toggleClass("user-owns-book",t.userOwnsBook).toggleClass("user-doesnt-own-book",!t.userOwnsBook).toggleClass("user-owns-audio",t.userOwnsAudio).toggleClass("book-meap",t.isMeap).toggleClass("user-is-editor",t.userIsEditor).toggleClass("free-ebook",t.isFreeEbook).toggleClass("review-book",n.reviewVersion>0),this.updatePreviousNextBookElement(e.previousBookElement,e.nextBookElement),this.updatePageTitle(t.title,t.shortName),Q.a.insertNextChapterSummary(e.nextBookElement),r.b.isApp()&&e&&e.book&&e.book.hasBeenDownloaded&&this.retryImageLoading(),s.a.triggerDocumentEventAsync("bookContentLoaded",[t,e,S.a.isCurrentlyLoggedIn()]),this.adjustContentStartPosition(),this.adjustZoomableImages(),this.loadHighQualityBookCoverIfNecessary(),c.a.loadPlaceholderImages();var o=null!=document.querySelector(".scrambled");Ye.trigger("openedChapter",{scrambled:o,loggedIn:S.a.isCurrentlyLoggedIn()})},e.prototype.fillBookElementStructurePricingInfoIfNecessary=function(){var e=this;this.book&&this.bookElement&&!this.bookElement.isOpen&&this.book.shortName&&this.bookElement.shortName&&Pe.a.getCompleteBookElementPriceInfo(this.book.shortName,this.bookElement.shortName,this.bookElement.meapVersion).then((function(t){null!=t&&0!=t.tokenPrice&&null!=e.bookElement&&(e.bookElement.bookElementPriceInfo=t,re.a.initialize(e.book,e.bookElement,null))})).catch((function(e){console.log("Cannot get book element price info")}))},e.prototype.adjustSizeRelatedBehaviors=function(){var e=this;s.a.setTimeout((function(){e.adjustContentStartPosition(),r.b.isSmallScreenSize()?(O.a.enableHiding(),null==e.book||e.book.isFreeEbook||R.a.enableHiding()):(O.a.disableAndRevert(),R.a.disableAndRevert())}),5)},e.prototype.adjustContentStartPosition=function(){var e=$("#book-content-main-row");if(0!==e.length){var t=c.a.getTopNavBarHeight(),n=e.offset().top;t>n?e.css("padding-top",1.2*(t-n)+"px"):e.css("padding-top","")}},e.prototype.adjustZoomableImages=function(){$(".figure-container[data-high-resolution-path]").each((function(e,t){var n=$(t);n.find("img").attr("data-action","zoom").attr("data-zoom-src",n.attr("data-high-resolution-path"))})),Object(a.a)('[data-action="zoom"]',{margin:10,background:"rgba(25, 18, 25, 0.9)"})},e.prototype.updatePreviousNextBookElement=function(e,t){var n=$("#footer");e&&this.updateLink(n.find(".previous-element-link"),e,!0),t&&this.updateLink(n.find(".next-element-link"),t)},e.prototype.updateLink=function(e,t,n){e.removeClass("invisible"),e.attr("title",t.title),e.attr("href",l.a.adjustBookLink(t.link));var o=n?"Prev ":"Next ",i=t.shortName.toLowerCase();0==i.indexOf("part")?o+="Part":0==i.indexOf("chapter")?o+="Chapter":0==i.indexOf("appendix")&&(o+="Appendix"),e.find(".book-element-label").text(o)},e.prototype.updatePageTitle=function(e,t){var n=d.a.cleanBookTitle(e);$("#footer .copyright-label").addClass("hidden"),$("#footer .footer-book-title-label").removeClass("hidden"),$("#footer .footer-book-title-label .book-title-label-text").attr("title",e).text(n).attr("data-book-short-name",t),$(".title-section-container").find(".book-title-label-text").attr("title",e).text(n)},e.prototype.getBookTitleAndPotentialHeartHtml=function(e){var t="";return null==this.book||this.book.userOwnsBook||(t+="<i class='fa fa-heart-o wish-list-icon' title='wishlist'/>"),t+=d.a.cleanBookTitle(e)},e.prototype.trackContentBuildingProcess=function(e){var t=this;void 0===e&&(e="");var n=!this.book.hasExercises,o=!1,i=!1,a=!1,r=!1,l=document.location.href;""!=e&&"1"!=e&&v.a.showNotification('<div class="jumping-dots" title="scrolling to the exact position">\n                    <span class="dot"></span>\n                    <span class="dot"></span>\n                    <span class="dot"></span>\n                </div>'),!e&&null!=this.bookElement&&this.bookElement.location&&(e=this.bookElement.location+"");var d=function(){if(t.isActive){var d=!1,c=!1,h=!1,u=!1,p=!1,g=!1,m=!1;if(e&&(d=0===e.indexOf("search-"),c=0===e.indexOf("point-"),h=0===e.indexOf("section-"),p=0===e.indexOf("note-"),g=0===e.indexOf("comment-"),m=0===e.indexOf("discussion"),t.processAdditional(e)),t.initialElement&&!t.bookElement.isBookOverview||(t.initialElement=t.getFirstElement(),u=!0),$(t.initialElement).find("h1").length>0&&(u=!0),n&&o&&i&&a&&r){if(Ye.trigger("contentFullyConstructed",[t.book,t.bookElement,t.initialElement,l]),d&&Ye.trigger("searchHighlightRequested",[t.book,t.bookElement]),p){var f=e.substring("note-".length);return K.a.openNotes(f,(function(){return Ye.trigger("initialElementInView")})),void v.a.hideNotification()}if(g)return ee.a.requestShowCommentWhenReady(e.substring("comment-".length),0,(function(){return Ye.trigger("initialElementInView")})),void v.a.hideNotification();if(m)return v.a.showNotification("Opening discussion"),void s.a.setTimeout((function(){ee.a.requestOpen(),v.a.hideNotification()}),2100);s.a.setTimeout((function(){return Ye.trigger("playingTextFragmentChange",t.initialElement)}),100),t.initialElement?s.a.setTimeout((function(){v.a.hideNotification(),(_.a.shouldAutomaticallyScroll||d||c||!u||h)&&_.a.scrollToElement(t.initialElement,(function(){var n=$(t.initialElement);if(Ye.trigger("initialElementInView"),d&&n.is(".scrambled"))re.a.unlockFragments(t.book,t.bookElement,le.a.Search,"",[n],l).then((function(){return Ye.trigger("searchHighlightRequested",[t.book,t.bookElement])})).catch((function(e){}));else if(c){var o=e.substring("point-".length).split("-");re.a.tryToUnlockPointedParagraph(t.book,t.bookElement,o,l)}}))}),400):(Ye.trigger("initialElementInView"),v.a.hideNotification())}}};Ye.one("initialExercisesCreated",(function(){n=!0,d()})),Ye.one("initialTextAddendumsCreated",(function(){r=!0,d()})),Ye.one("videoSectionsInserted",(function(){o=!0,d()})),Ye.one("annotatedListingsLoaded",(function(){i=!0,d()})),Ye.one("progressLoaded",(function(){a=!0,d()}))},e.prototype.processPointingLinkIfNecessary=function(e,t,n){if(e&&t&&n){var o=n.substring("point-".length).split("-"),i=le.b.getDataFromPointingLink(e,t,o);i&&(se.a.isUnlockingWholeContentThroughPointingLink=le.b.isEncompassingWholeContent(i.startParagraphId,i.endParagraphId))}},e.prototype.getFirstElement=function(){var e=$(".book-overview-cover-container");if(0!=e.length)return e[0];var t=$("#book-markup-container h1").parents(".readable-text");return t.length<=1?t[0]:void 0},e.prototype.handlePurchaseSuccessful=function(e){var t=this;null!=e&&null!=this.book&&-1!==e.indexOf(this.book.title)&&(v.a.showTemporaryNotification("Unlocking content and reloading book!"),s.a.setTimeout((function(){var e=t.book&&t.book.slug,n=t.bookElement&&t.bookElement.shortName;t.clean(),-1!=(document.location.hash||document.location.pathname).indexOf("/payment-confirmation")?document.location.href=h.a.getBookElementUrl(e,n):h.a.reloadPage()}),6e3))},e.prototype.handleShowMeapClick=function(){ne.a.renderMeapInfoModal(this.book,this.meapVersion)},e.prototype.getThisChapterCoversContent=function(){var e=$(".introduction-summary li"),t="";return e.each((function(e,n){t+=$(n).text().trim()+"; "})),t},e.prototype.loadHighQualityBookCoverIfNecessary=function(){var e=this.book.highResolutionCover;e=e?h.a.getMarketplaceHiqhQualityProductCoverUrl(e):this.book.bookCoverPath,$(".book-overview-cover-container img").attr("onload-image-src",e)},e.prototype.initializeAutomaticDownloadIfNecessary=function(){r.b.isApp()&&this.book&&this.book.userOwnsBook&&!this.book.hasBeenDownloaded&&(this.hasBookDownloadBeenAutomaticallyOffered(this.book.shortName)||(this.logBookDownloadAutomaticOffering(this.book.shortName),Ue.a.requestBookDownload(this.book)))},e.prototype.hasBookDownloadBeenAutomaticallyOffered=function(e){try{return!!JSON.parse(ve.a.getItem("AUTOMATIC_BOOK_DOWNLOADS")||"{}")[e]}catch(e){return!0}},e.prototype.logBookDownloadAutomaticOffering=function(e){try{var t=JSON.parse(ve.a.getItem("AUTOMATIC_BOOK_DOWNLOADS")||"{}");t[e]=!0,ve.a.setItem("AUTOMATIC_BOOK_DOWNLOADS",JSON.stringify(t))}catch(e){}},e.prototype.handleAppReactivated=function(e,t){var n=this;S.a.isCurrentlyLoggedIn()&&null!=this.book&&Ge.a.getBookProgress(this.book.shortName).then((function(e){if(null!=e&&null!=n.bookElement)if(e.bookElementShortName==n.bookElement.shortName){var t=q.a.getTopMostReadableElement(),o=$("[data-hash="+e.contentItemID+"], [refid='"+e.contentItemID+"']");parseInt(o.attr("refid"))>parseInt(t.attr("refid"))&&$(document).trigger("requestNotification",'<a href="'+l.a.formLink(n.book,n.bookElement,e.contentItemID)+'">click here to jump to your latest position</a>')}else N.a.getTocAndIndex(n.book.shortName,n.book,n.bookElement).then((function(t){if(t&&t.toc){var o=Te.a.getBookElementOrdinalFromToc(t.toc,n.bookElement.shortName),i=Te.a.getBookElementOrdinalFromToc(t.toc,e.bookElementShortName);-1!=o&&-1!=i&&i>o&&$(document).trigger("requestNotification",'<a href="'+h.a.getBookElementUrl(n.book.slug,e.bookElementShortName)+e.contentItemID+'">click here to jump to your latest position</a>')}}))}))},e}())},343:function(e,t,n){"use strict";n.r(t),n.d(t,"LoginManager",(function(){return b}));var o=n(357),i=n(360),a=n(1),r=n(9),s=n(57),l=n(409),d=n(22),c=n(363),h=n(0),u=n(136),p=n(14),g=n(7),m=$(document),f=!1;a.b.loadDeviceInfo().then((function(e){f=e.isTouchDevice}));var b=new(function(){function e(){var e=this;this.$loginModal=$("#login-modal"),this.$loginModal.html('<span class="close-reveal-modal">&times;</span>\n<div class="row">\n    <div class="small-12 columns">\n        <div class="login-notification-message-container"></div>\n    </div>\n</div>\n<div class="tab-title-container">\n    <div class="tab-title tab-signin">sign in</div>\n    <div class="tab-title tab-register">register</div>\n</div>\n<div class="tabs-container">\n    <div class="tab-container tab-signin">\n        <form method="GET" onsubmit="return false">\n            <div class="row">\n                <div class="small-12 columns">\n                    <label class="first" for="email">email</label>\n                    <input type="email" id="email" name="username" placeholder="email" autocomplete="email"/>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-12 columns">\n                    <label class="first" for="password">password</label>\n                    <input type="password" id="password" name="password" placeholder="password" autocomplete="current-password"/>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-12 columns">\n                    <div data-alert class="error-message-login"></div>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-12 columns">\n                    <div style="display: flex; justify-content: space-between; align-items: center">\n                        <a class="pull-left" href="https://www.manning.com/user/forgotPassword" target="_blank">forgot password</a>\n                        <button type="submit" id="login-button" class="emphasized-button pull-right login-button">sign in</button>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="tab-container tab-register">\n        <form onsubmit="return false">\n            <div class="row">\n                <div class="small-12 columns">\n                    <label class="first" for="first-name">first name</label>\n                    <input type="text" id="first-name" placeholder="first name" autocomplete="name"/>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-12 columns">\n                    <label class="first" for="last-name">last name</label>\n                    <input type="text" id="last-name" placeholder="last name" autocomplete="family-name"/>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-12 columns">\n                    <label class="first" for="email-register">email</label>\n                    <input type="email" id="email-register" placeholder="email" autocorrect="off" autocapitalize="off" spellcheck="false" autocomplete="email"/>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-12 columns">\n                    <label class="first" for="password-register">password</label>\n                    <input type="password" id="password-register" placeholder="password" autocorrect="off" autocapitalize="off" spellcheck="false" autocomplete="new-password"/>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-12 columns">\n                    <label class="first" for="password-register-confirm">confirm password</label>\n                    <input type="password" id="password-register-confirm" placeholder="password" autocorrect="off" autocapitalize="off" spellcheck="false" autocomplete="new-password"/>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-12 columns">\n                    <label class="error-message-register"></label>\n                </div>\n            </div>\n\n            <div class="register-subscribe-container">\n                <div title="subscribe now for great discounts and news about upcoming titles" data-tooltip aria-haspopup="true" data-options="disable_for_touch:true">\n                    <input id="subscribe-me-checkbox" type="checkbox" checked><label for="subscribe-me-checkbox">subscribe to emails (*)</label>\n                </div>\n                <div>\n                    <button type="submit" class="emphasized-button pull-right register-button">register</a>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n</div>'),this.$inputMail=$("#email"),this.$inputPassword=$("#password"),this.$labelMail=this.$inputMail.siblings("label"),this.$labelPassword=this.$inputPassword.siblings("label"),this.$errorMessageLogin=this.$loginModal.find(".error-message-login"),this.$inputRegisterFirstName=this.$loginModal.find("#first-name"),this.$inputRegisterLastName=this.$loginModal.find("#last-name"),this.$inputRegisterEmail=this.$loginModal.find("#email-register"),this.$inputRegisterPassword=this.$loginModal.find("#password-register"),this.$inputRegisterConfirmPassword=this.$loginModal.find("#password-register-confirm"),this.$labelRegisterFirstName=this.$inputRegisterFirstName.siblings("label"),this.$labelRegisterLastName=this.$inputRegisterLastName.siblings("label"),this.$labelRegisterEmail=this.$inputRegisterEmail.siblings("label"),this.$labelRegisterPassword=this.$inputRegisterPassword.siblings("label"),this.$labelRegisterConfirmPassword=this.$inputRegisterConfirmPassword.siblings("label"),this.$inputPassword.on("keyup",(function(t){13===t.which&&e.initiateLoginIfAllFilled()})),this.$inputMail.on("keyup",(function(t){13===t.which&&e.initiateLoginIfAllFilled()})),this.tabs=new l.a(this.$loginModal,(function(e){1==e&&m.trigger("registrationModalShown")})),m.on("click","#login-modal .login-button",(function(t){return e.initiateLoginIfAllFilled(),t.preventDefault(),!1})),m.on("click","#login-modal .register-button",(function(t){return e.initiateRegisterIfAllFilled(),t.preventDefault(),!1}));var t=0;m.on("click",".request-activation-email-link",(function(e){g.a.lastEmail&&($(document).trigger("requestNotification","sending activation email"),m.trigger("activationRequested",++t),h.a.postToOurBackend(h.a.getAbsoluteUrl("user/requestAccountActivationEmail"),(function(e){$(document).trigger("requestNotification","Account activation mail sent. Check your inbox.")}),(function(e){return $(document).trigger("requestNotification","Error requesting account activation. Contact our support at support@manning.com")}),{emailAddress:g.a.lastEmail}))})),m.on("logInUnsuccessful",(function(t,n){e.$errorMessageLogin.html('Error logging in, \n                    <a href="https://www.manning.com/user/forgotPassword" target="_blank">reset password</a> \n                    or \n                    <a href=\'mailto:support@manning.com\' target="_blank">contact support</a>')})),m.on("registrationUnsuccessful",(function(t){e.$errorMessageLogin.text("Error: "+t.data)}))}return e.prototype.requestLogin=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t=""),this.isPerformingLogin||(m.trigger("slideMenuCloseRequested"),g.a.isLoggedIn().then((function(o){"fully"!==o.status&&n.openModal("",e,!0,t)})))},e.prototype.initiateLoginIfAllFilled=function(){var e=this.$inputMail.val(),t=this.$inputPassword.val();e&&t&&this.performLogin(e,t),this.toggleLoginErrorMessages()},e.prototype.initiateRegisterIfAllFilled=function(){var e=this,t=this.$inputRegisterFirstName.val(),n=this.$inputRegisterLastName.val(),o=this.$inputRegisterEmail.val(),i=this.$inputRegisterPassword.val(),a=(this.$inputRegisterConfirmPassword.val(),$("#subscribe-me-checkbox").is(":checked"));return this.$loginModal.find(".register-button").attr("disabled","true"),s.a.showTemporaryNotification("Registering.."),g.a.getUserAccountStatus(o).then((function(r){if("ACTIVE"===r)e.$loginModal.find(".register-button").attr("disabled",null),e.showError(e.$labelRegisterEmail,'This account already exists. If you forgot your password you can <a target="_blank" href="https://www.manning.com/user/forgotPassword">reset it</a>.');else if("DISABLED"===r)e.$loginModal.find(".register-button").attr("disabled",null),e.showError(e.$labelRegisterEmail,'This account has been disabled. Please contact our <a target="_blank" href="mailto:support@manning.com">support</a>.');else{if(e.checkRegisterDataForValidity())return g.a.registerUser(t,n,o,i,a).then((function(){p.a.setItem("email",o),e.$loginModal.find(".register-button").attr("disabled",null),e.closeModal(),s.a.showTemporaryNotification("One more step! Please confirm your email and login."),e.renderRegistrationSuccessfulModal(),m.trigger("registrationSuccessful")})).catch((function(t){e.$loginModal.find(".register-button").attr("disabled",null),s.a.hideNotification(),e.showError(e.$labelRegisterEmail,'Registration was unsuccessful. Please contact our <a target="_blank" href="mailto:support@manning.com">support</a>.'),m.trigger("registrationUnsuccessful",t),console.log("Couldn't register new user",t)}));e.$loginModal.find(".register-button").attr("disabled",null)}})),!1},e.prototype.openModal=function(e,t,n,o,i){var a=this;void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=!1),void 0===i&&(i=""),s.a.hideNotificationModal(),r.a.showFoundationModal(this.$loginModal),this.tabs&&this.tabs.selectTab("register"===e?1:0),this.$errorMessageLogin.text("");var l=this.$loginModal.find(".login-notification-message-container");if(l.toggleClass("hidden",!t),l.text(t),f||setTimeout((function(){return a.$inputMail.focus()}),200),n||i){var c=function(e){e&&(a.$inputMail.val(e),f||setTimeout((function(){return a.$inputPassword.focus()}),300))};i?c(i):d.a.getUserEmail().then(c)}o&&m.trigger("signInRequested",o)},e.prototype.closeModal=function(){r.a.hideFoundationModal(this.$loginModal)},e.prototype.toggleLoginErrorMessages=function(){this.$inputMail.val()?this.hideError(this.$labelMail):this.showError(this.$labelMail),this.$inputPassword.val()?this.hideError(this.$labelPassword):this.showError(this.$labelPassword)},e.prototype.checkRegisterDataForValidity=function(){var e=this.validateRegisterFirstName();!0===e?this.hideError(this.$labelRegisterFirstName):this.showError(this.$labelRegisterFirstName,e);var t=this.validateRegisterLastName();!0===t?this.hideError(this.$labelRegisterLastName):this.showError(this.$labelRegisterLastName,t);var n=this.validateRegisterEmail();!0===n?this.hideError(this.$labelRegisterEmail):this.showError(this.$labelRegisterEmail,n);var o=this.validateRegisterPassword(this.$inputRegisterPassword);!0===o?this.hideError(this.$labelRegisterPassword):this.showError(this.$labelRegisterPassword,o);var i=this.validateRegisterPassword(this.$inputRegisterConfirmPassword);!0===i?this.hideError(this.$labelRegisterConfirmPassword):this.showError(this.$labelRegisterConfirmPassword,i);var a=this.$inputRegisterPassword.val()==this.$inputRegisterConfirmPassword.val();return!0===i&&(a?this.hideError(this.$labelRegisterConfirmPassword):this.showError(this.$labelRegisterConfirmPassword,"passwords should match")),!0===e&&!0===t&&!0===n&&!0===o&&!0===i&&a},e.prototype.showError=function(e,t){e.addClass("error"),e.siblings("input").addClass("has-error"),this.removeErrorMessageFromLabel(e),e.html(e.text()+" ("+(t||"*")+")")},e.prototype.hideError=function(e){e.removeClass("error"),e.siblings("input").removeClass("has-error"),this.removeErrorMessageFromLabel(e)},e.prototype.removeErrorMessageFromLabel=function(e){var t=e.text(),n=t.indexOf("(");-1!=n&&(t=t.substring(0,n)),e.text(t)},e.prototype.validateRegisterFirstName=function(){var e=this.$inputRegisterFirstName.val().trim();return e?!(e.length<2)||"at least 2 characters":"*"},e.prototype.validateRegisterLastName=function(){var e=this.$inputRegisterLastName.val().trim();return!!e&&(!(e.length<2)||"at least 2 characters")},e.prototype.validateRegisterEmail=function(){var e=this.$inputRegisterEmail.val().trim();if(!e)return!1;return!!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"invalid email"},e.prototype.validateRegisterPassword=function(e){var t=e.val().trim();return!!t&&(!(t.length<6)||"at least 6 characters")},e.prototype.performLogin=function(e,t){var n=this;this.isPerformingLogin=!0,m.trigger("requestPermanentNotification","Logging in..."),g.a.attemptLogin(e,t).then((function(t){if(n.isPerformingLogin=!1,t.loggedIn)try{n.closeModal(),m.trigger("requestNotification","Welcome: "+e),p.a.setItem("email",e),setTimeout((function(){return h.a.reloadPage()}),1500)}catch(e){console.log("Error when processing successful login",e)}else t.accountNotActive&&(n.renderAccountNotActivatedModal(),n.closeModal())})).catch((function(e){n.isPerformingLogin=!1,m.trigger("requestNotification","Error when logging in. Try again later or reset your password. If you've just registered, please activate your account first."),m.trigger("logInUnsuccessful"),u.a.modifyUIWithLogout(),console.log("Error when logging in",e)}))},e.prototype.performLogout=function(){m.trigger("requestPermanentNotification","Logging out..."),p.a.setItem("USER_BOOKS_COVERS","[]"),p.a.setItem("latestUserFirstName",""),g.a.logout().then((function(){p.a.setItem("email",""),setTimeout((function(){return h.a.reloadPage()}),1e3)})).catch((function(){setTimeout((function(){return h.a.reloadPage()}),1e3)}))},e.prototype.renderRegistrationSuccessfulModal=function(e){var t=this;void 0===e&&(e=!0),i.render(o.createElement(c.b,{isOpen:e,title:"Just one more step",mainContainerClassName:"registration-activation-modal",onClose:function(){return t.renderRegistrationSuccessfulModal(!1)},isContentVerticalTop:!1},o.createElement("p",null,"You must activate your account by clicking the link in the confirmation email we just sent you. If there is no activation email in your inbox, check your spam folder. You can also ",o.createElement("a",{href:"javascript:void(0)",className:"request-activation-email-link"},"request another one")," or ",o.createElement("a",{href:"mailto:support@manning.com",target:"_blank"},"contact our support"),".")),document.getElementById("full-screen-modal"))},e.prototype.renderAccountNotActivatedModal=function(e){var t=this;void 0===e&&(e=!0),m.trigger("registrationAccountNotActivated"),i.render(o.createElement(c.b,{isOpen:e,title:"Please activate your account to sign in",mainContainerClassName:"registration-activation-modal",onClose:function(){return t.renderAccountNotActivatedModal(!1)},isContentVerticalTop:!1},o.createElement("p",null,'Your account is not yet activated. Please click the activation link we emailed you (subject line "Activate your livebook account"). If there is no activation email in your inbox, check your spam folder. If you can\'t find it, you can can ',o.createElement("a",{href:"javascript:void(0)",className:"request-activation-email-link"},"request another one")," or ",o.createElement("a",{href:"mailto:support@manning.com",target:"_blank"},"contact our support"),".")),document.getElementById("full-screen-modal"))},e}())},409:function(e,t,n){"use strict";var o=n(3),i=function(){function e(e,t){var n=this;this.currentIndex=0,this.$mainContainer=e,this.afterTabSwitchCallback=t,o.a.onDescendantEventWithCooldown(this.$mainContainer,"click touchstart",".tab-title",(function(e){var t=n.$mainContainer.find(".tab-title").index(e.currentTarget);n.selectTab(t),n.afterTabSwitchCallback&&n.afterTabSwitchCallback(t)})),this.selectTab(this.currentIndex)}return e.prototype.selectTab=function(e){var t=this.$mainContainer.find(".tab-title"),n=this.$mainContainer.find(".tab-container");t.removeClass("selected"),n.removeClass("selected"),t.eq(e).length?t.eq(e).addClass("selected"):t.eq(0).addClass("selected"),n.eq(e).length?(n.eq(e).addClass("selected"),this.currentIndex=e):(n.eq(0).addClass("selected"),this.currentIndex=0)},e.prototype.getCurrentlySelectedTabIndex=function(){return this.currentIndex},e}();t.a=i},410:function(e,t,n){"use strict";var o=n(0),i=n(22),a=n(76),r=n(4),s=n(7),l=n(1),d=n(128),c=function(){function e(){}return e.prototype.getTokenCountInfo=function(e){var t=this;return void 0===e&&(e=!1),e||null==this.currentTokenCountInfo?e||null==this.currentTokenCountInfoPromise?this.currentTokenCountInfoPromise=new Promise((function(n,o){s.a.isLoggedIn(e).then((function(e){e.loggedIn&&e.userDetails.tokenInfo?(t.currentTokenCountInfo=e.userDetails.tokenInfo,n(e.userDetails.tokenInfo)):(t.currentTokenCountInfoPromise=null,o("No token count info"))})).catch((function(e){return o(e)}))})):this.currentTokenCountInfoPromise:Promise.resolve(this.currentTokenCountInfo)},e.prototype.setTokenCountInfo=function(e){this.currentTokenCountInfo=e,i.a.setTokenInfo(e)},e.prototype.getTokenLedgerItems=function(e){var t=this;return void 0===e&&(e=!1),l.b.isApp()&&!l.b.isConnected()?Promise.resolve([]):s.a.isCurrentlyLoggedIn()?e&&this.lastTokenLedger?Promise.resolve(this.lastTokenLedger):new Promise((function(e,n){o.a.getFromOurBackend(o.a.getAbsoluteUrl("api/token/getTokenLedger"),(function(n){var o=n.map((function(e){return{date:r.a.getDateFromString(e.date),quantity:e.quantity,description:e.description,notes:e.notes,link:d.a.adjustBookLink(e.link),isFreeTokensRedemption:"COMPED"==e.type}}));t.lastTokenLedger=o,e(o)}),(function(e){n("Error getting token ledger")}))})):Promise.resolve([])},e.prototype.getTokenCashoutInfo=function(){var e=this;return new Promise((function(t,n){o.a.getFromOurBackend(o.a.getAbsoluteUrl("api/token/getCashoutInfo"),(function(n){n&&n.tokenCount&&(e.setTokenCountInfo(n.tokenCount),a.a.refreshTokenStateInToolbar(n.tokenCount)),t(n)}),(function(e){return n("Error getting token ledger")}))}))},e.prototype.cashout=function(){var e=this;return new Promise((function(t,n){o.a.getFromOurBackend(o.a.getAbsoluteUrl("api/token/cashout"),(function(n){n&&n.tokenCount&&(e.setTokenCountInfo(n.tokenCount),a.a.refreshTokenStateInToolbar(n.tokenCount)),t(n)}),(function(e){return n("Error performing token cashout")}))}))},e}();t.a=new c},415:function(e,t,n){"use strict";var o=n(9),i=function(){function e(){}return e.prototype.highlight=function(e,t,n,i,a){if(void 0===i&&(i=""),void 0===a&&(a=""),e){var r=$(e);r.is(".fragment-played")&&(i="");var s=o.a.getAllDescendantTextNodes(e),l=o.a.createTextNodeTextRanges(s),d=this.getStartIndex(l.value,t,a),c=d+t.length;if(-1!==d||(c=(d=l.value.indexOf(t.replace("<","&lt;").replace(">","&gt;")))+t.length,-1!=d)){var h=o.a.splitRanges(l,d,c);if(this.markVisibleParentNodeElements(e,h.followingRanges,i),this.liftWordsInMatchingRanges(h.matchingRanges,d,c,n,i),this.liftWordsInFollowingRanges(h.followingRanges,i),""!=i.trim()){var u="."+i.trim().replace(/\s+/,".");r.find(u).each((function(e,t){var n=$(t.nextSibling);n.is("img")&&n.addClass(i)}))}}}},e.prototype.liftWordsInMatchingRanges=function(e,t,n,i,a){for(var r=0,s=e.length;r<s;r++){var l=e[r],d=l.textNode.nodeValue;if(0==r){var c=t-l.start,h=n-l.start,u=d.substring(0,c),p=d.substring(c,h),g=d.substring(h,l.end);$(l.textNode).replaceWith(u+o.a.wrapToHtmlElement("span",{class:i},p)+(""!=g&&""!=a?o.a.wrapToHtmlElement("span",{class:a},g):g))}else if(r==s-1){var m=n-l.start;p=d.substring(0,m),g=d.substring(m,d.length);$(l.textNode).replaceWith(o.a.wrapToHtmlElement("span",{class:i},p)+(""!=g&&""!=a?o.a.wrapToHtmlElement("span",{class:a},g):g))}else $(l.textNode).replaceWith(o.a.wrapToHtmlElement("span",{class:i},d))}},e.prototype.liftWordsInFollowingRanges=function(e,t){if(t)for(var n=0;n<e.length;n++){var i=e[n];i.textNode.nodeValue&&i.textNode.nodeValue.trim()&&$(i.textNode).replaceWith(o.a.wrapToHtmlElement("span",{class:t},i.textNode.nodeValue))}},e.prototype.markVisibleParentNodeElements=function(e,t,n){if(e&&t&&0!=t.length&&n)for(var o=0;o<t.length;o++){var i=t[o].textNode;"KBD"==i.parentNode.nodeName&&$(i.parentNode).addClass(n)}},e.prototype.getAllIndexesOf=function(e,t){for(var n,o=0,i=[];(n=e.indexOf(t,o))>-1;)i.push(n),o=n+t.length;return i},e.prototype.getStartIndex=function(e,t,n){var o=this.getAllIndexesOf(e,t);if(0==o.length)return-1;if(1==o.length)return o[0];if(!n)return o[0];var i=e.indexOf(n);if(-1==i)return o[0];i+=n.length;for(var a=0;a<o.length;a++)if(o[a]>=i)return o[a];return o[0]},e}();t.a=new i},431:function(e,t,n){"use strict";var o=n(3),i=n(15),a=n(464),r=n(67),s=n(343),l=(n(709),n(1)),d=n(7),c=n(133),h=($(window),$(document)),u=function(){function e(){var e=this;this.bookmarkedTextLimit=80,this.paragraphBubbleTemplate=' <div class="paragraph-bubble">\n    <div aria-haspopup="true" class="text-margin-icon-bubble bookmark-bubble" title="bookmark"><i class="fa fa-bookmark"></i></div>\n    <div aria-haspopup="true" class="text-margin-icon-bubble note-bubble" title="open notes"><i class="fa fa-sticky-note"></i><span class="note-count-container"></span></div>\n    <div aria-haspopup="true" class="text-margin-icon-bubble forums-bubble" title="open discussion"><i class="fa fa-comments" aria-hidden="true"></i><span class="comment-count-container"></span></div>\n    <div aria-haspopup="true" class="text-margin-icon-bubble paragraph-notification-bubble" title="show text addons"><i class="fa fa-dot-circle-o" aria-hidden="true"></i></div>\n    <div class="text-margin-icon-bubble editor-bubble"><i class="fa fa-pencil-square fa-2x"></i></div>\n</div>',o.a.onDescendantEventWithCooldown(h,l.b.isCordova()?"touchstart":"click",".bookmark-bubble",(function(t){e.handleBookmarkBubbleClick(t.currentTarget.parentElement)})),o.a.onDescendantEventWithCooldown(h,l.b.isCordova()?"touchstart":"click",".note-bubble",(function(t){e.handleNoteBubbleClick(t.currentTarget.parentElement)})),o.a.onDescendantEventWithCooldown(h,l.b.isCordova()?"touchstart":"click",".forums-bubble",(function(t){e.handleForumBubbleClick(t.currentTarget.parentElement)})),h.on("requestShowNoteBubble",(function(t,n){return e.showNoteBubble(n)})),h.on("requestHideNoteBubble",(function(t,n){return e.hideNoteBubble(n)})),h.on("paragraphButtonsSetForumCount",(function(t,n,o){return e.setForumCount(n,o)})),h.on("requestSelectForumsBubble",(function(t,n){return e.selectForumsBubble(n)})),h.on("requestDeselectForumsBubble",(function(t,n){return e.deselectForumsBubble(n)}))}return e.prototype.initialize=function(e,t,n){var i=this;void 0===n&&(n=!1),this.clean(),this.book=e,this.bookElement=t,e&&(this.paragraphs=Array.prototype.slice.call(document.querySelectorAll("[refid]")),this.createParagraphBubbles(),d.a.isCurrentlyLoggedIn()&&(n||c.a.fetchBookmarks(this.bookElement).then((function(e){i.updateBookmarkData(e.bookElementBookmarks)})),(!n||t&&t.reviewVersion>0)&&c.a.fetchNotes(this.bookElement).then((function(e){i.updateNotesData(e.bookElementNotes)}))),o.a.setTimeout((function(){$(".paragraph-notification-bubble").on("mouseenter touchstart click",(function(e){$(e.currentTarget).closest(".paragraph-bubble").addClass("activated")}))}),10))},e.prototype.clean=function(){this.book=null,this.bookElement=null,$(".text-margin-icon-bubble").off().remove(),this.paragraphBubbles=[],this.paragraphs=null},e.prototype.createParagraphBubbles=function(){this.paragraphBubbles=[];for(var e=0;e<this.paragraphs.length;e++){var t=this.paragraphs[e],n=$(this.paragraphBubbleTemplate).get(0);n.paragraph=t,t.paragraphBubble=n,this.paragraphBubbles.push(n),$(t).append(n)}},e.prototype.toggleBookmark=function(e){null!=e.paragraphBubble&&this.handleBookmarkBubbleClick(e.paragraphBubble)},e.prototype.handleBookmarkBubbleClick=function(e){d.a.isCurrentlyLoggedIn()?($(e).addClass("activated"),e.hasAttribute("data-bookmark-active")?e.removeAttribute("data-bookmark-active"):e.setAttribute("data-bookmark-active","true"),this.visuallyMarkBookmark(e),this.syncBookmark(e),$(e.paragraph).toggleClass("has-bookmark",e.hasAttribute("data-bookmark-active"))):s.LoginManager.requestLogin("sign in to add a bookmark","bookmark")},e.prototype.visuallyMarkBookmark=function(e,t){if(e){var n=e.hasAttribute("data-bookmark-active"),o=$(e).find(".bookmark-bubble");o.toggleClass("selected",n),o.attr("title",n?"remove bookmark":"bookmark"),t&&o.attr("data-id",t),$(e.paragraph).toggleClass("has-bookmark",n)}},e.prototype.syncBookmark=function(e){if(e&&e.paragraph){var t=$(e.paragraph);e.hasAttribute("data-bookmark-active")?c.a.addBookmark(this.bookElement,t.attr("refid"),t.attr("data-hash"),this.cutText(t.text()),this.getSection(t)).then((function(t){$(e).find(".bookmark-bubble").attr("data-id",t),h.trigger("bookmarkAdded")})):c.a.removeBookmarkByContentID(this.bookElement,t.attr("refid"))}},e.prototype.updateBookmarkData=function(e){if(e){for(var t=[],n=0,o=e;n<o.length;n++){var i=o[n],a=i.contentHash?document.querySelector("[data-hash='"+i.contentHash+"']"):document.getElementById(i.contentID);a&&a.paragraphBubble&&(a.paragraphBubble.setAttribute("data-bookmark-active","true"),this.visuallyMarkBookmark(a.paragraphBubble,i.id),t.push(a.paragraphBubble))}$(t).show()}},e.prototype.updateNotesData=function(e){if(e){for(var t={},n=0;n<e.length;n++){var o=e[n],i=t[o.contentID]||(o.contentHash?document.querySelector("[data-hash='"+o.contentHash+"']"):document.getElementById(o.contentID));if(i){t[o.contentID]=i;var r=a.a.getNotes(i.paragraphBubble);r&&r.push(o)}}for(var s in t)if(t.hasOwnProperty(s)){var l=t[s].paragraphBubble,d=$(l);this.updateNotesButtonState(l),""!=d.find(".note-count-container").text()&&d.find("note-bubble").addClass("bubble-active")}}},e.prototype.handleNoteBubbleClick=function(e){var t=this;d.a.isCurrentlyLoggedIn()?this.currentParagraphBubble==e?(a.a.closeNotesMenu(),this.unbindCurrentNoteBubble()):a.a.closeNotesMenu((function(){t.currentParagraphBubble=e,a.a.showNotesMenu($(e))})):s.LoginManager.requestLogin("sign in to add a personal note","note")},e.prototype.updateNotesButtonState=function(e){var t=a.a.getNotes(e),n=t?t.length:0,o=$(e);o.find(".note-count-container").text(0!=n?n:""),0!=n?o.attr("data-notes-active","true"):o.removeAttr("data-notes-active"),0!=n||o.is(".selected")?this.showNoteBubble(e):this.hideNoteBubble(e)},e.prototype.showNoteBubble=function(e){e&&($(e).show(),e.paragraph&&$(e.paragraph).addClass("matching-text-bubble-shown"))},e.prototype.hideNoteBubble=function(e){e&&($(e).hide(),e.paragraph&&$(e.paragraph).removeClass("matching-text-bubble-shown"))},e.prototype.unbindCurrentNoteBubble=function(){this.currentParagraphBubble&&$(this.currentParagraphBubble.paragraph).removeClass("matching-note-hovered being-annotated"),this.currentParagraphBubble=null},e.prototype.updateCurrentNotesCount=function(){this.updateNotesButtonState(this.currentParagraphBubble)},e.prototype.removeNoteBubbleNote=function(e,t){for(var n=a.a.getNotes(e),o=!1,i=0;i<n.length;i++)if(n[i].id==t){o=!0,n.splice(i,1);break}o&&this.updateNotesButtonState(e)},e.prototype.selectNoteBubble=function(e){if(e){var t=$(e);t.attr("data-notes-active","true"),t.addClass("selected"),t.find(".note-bubble").addClass("bubble-active"),$(".being-annotated").removeClass("being-annotated"),$(e.paragraph).addClass("being-annotated")}},e.prototype.deselectNoteBubble=function(e){if(e){var t=$(e);t.removeClass("selected"),""==t.find(".note-count-container").text()&&(t.find(".note-bubble").remove("bubble-active"),t.removeAttr("data-notes-active")),$(".being-annotated").removeClass("being-annotated")}},e.prototype.selectForumsBubble=function(e){if(e){var t=$(e);t.addClass("selected"),t.find(".forums-bubble").addClass("bubble-active"),t.attr("data-forums-active","true"),$(".being-annotated").removeClass("being-annotated"),$(e.paragraph).addClass("being-annotated"),$(e.paragraph).addClass("matching-text-bubble-shown")}},e.prototype.deselectForumsBubble=function(e){if(e){var t=$(e);t.removeClass("selected"),t.find(".forums-bubble").removeClass("bubble-active"),t.find(".comment-count-container").text().trim()||t.removeAttr("data-forums-active"),$(".being-annotated").removeClass("being-annotated"),$(e.paragraph).removeClass("matching-text-bubble-shown")}},e.prototype.setForumCount=function(e,t){if(e){var n=$(e);n.find(".comment-count-container").text(t||""),t?(n.attr("data-forums-active","true"),n.show()):n.removeAttr("data-forums-active")}},e.prototype.handleForumBubbleClick=function(e){r.a.requestOpenParagraphSideMenu(e)},e.prototype.getSection=function(e){var t=i.a.figureOutSectionOrSubsectionFromRefId(e.attr("refid"));if(t)return t;var n=this.bookElement.shortName.match(/(part\s+\d)|\w+\s+(\d+)/i);if(n){if(n[1])return n[1];if(n[2])return n[2]}return this.book.shortName},e.prototype.cutText=function(e){return e.length<this.bookmarkedTextLimit?e:e.substring(0,this.bookmarkedTextLimit)+"..."},e}();t.a=new u},450:function(e,t,n){"use strict";var o=n(6),i=n(9),a=n(15),r=n(128),s=n(77),l=n(3),d=n(1),c=n(4),h=n(137),u=$(window),p=$(document),g=function(){function e(){var e=this;this.$titleSectionContainers=$(".title-section-container"),this.handleChapterTitleClick=this.handleChapterTitleClick.bind(this),this.adjustVisibleHeadingTitle=this.adjustVisibleHeadingTitle.bind(this),this.trackScrolling=this.trackScrolling.bind(this),this.handleHeaderItemTextClick=this.handleHeaderItemTextClick.bind(this),this.renderAndRepeatWithDelay=this.renderAndRepeatWithDelay.bind(this),this.handleTextSlideMenuOpened=this.handleTextSlideMenuOpened.bind(this),this.handleTextSlideMenuHidden=this.handleTextSlideMenuHidden.bind(this),p.on("requestUpdateHistoryOnScroll",(function(t,n){return e.rewriteUrlOnScroll=n}))}return e.prototype.initialize=function(e,t,n){u.on("scrollstop",this.trackScrolling),u.on("scrollstop",this.adjustVisibleHeadingTitle),u.on("resizestop",this.adjustVisibleHeadingTitle),p.on("click",".header-item-text",this.handleHeaderItemTextClick),p.on("textSlideMenuOpened",this.handleTextSlideMenuOpened),p.on("textSlideMenuClosed",this.handleTextSlideMenuHidden),p.on("contentFullyConstructed subtitlesLoaded audio-controls-built text-addons-data-ready",this.renderAndRepeatWithDelay),this.$trackPointColumn=$("#track-point-column"),this.rewriteUrlOnScroll=h.a.rewriteUrlOnScroll&&n,this.$bookChapterTitleContainer=$("#top-bar-container .title-label"),this.$bookChapterTitleContainer.on("click",this.handleChapterTitleClick),this.book=e,this.bookElement=t,this.$headerElements=a.a.getHeadings(),this.fillWithHeadings(),this.renderAndRepeatWithDelay()},e.prototype.clean=function(){u.off("scrollstop",this.adjustVisibleHeadingTitle),u.off("scrollstop",this.trackScrolling),p.off("contentFullyConstructed",this.adjustVisibleHeadingTitle),p.off("click",".header-item-text",this.handleHeaderItemTextClick),p.off("textSlideMenuOpened",this.handleTextSlideMenuOpened),p.off("textSlideMenuClosed",this.handleTextSlideMenuHidden),p.off("contentFullyConstructed subtitlesLoaded audio-controls-built text-addons-data-ready",this.renderAndRepeatWithDelay),this.$bookChapterTitleContainer&&this.$bookChapterTitleContainer.off("click",this.handleChapterTitleClick),this.$headerElements=null,this.$bookChapterTitleContainer=null,this.rewriteUrlOnScroll=!1,this.book=null,this.bookElement=null,$(".title-section-container").addClass("hidden")},e.prototype.fillWithHeadings=function(){if(null!=this.$headerElements){var e="";this.$headerElements.each((function(t,n){var o=$(n),i=n.querySelector("h1, h2, h3, h4, h5"),a=$(i).text().trim();a=c.a.escapeHtml(a);var r=o.attr("refid"),s=null!=i?i.id:"";e+="<div class='header-item' data-refid="+r+" data-id="+s+">\n                        <span class='header-item-text'>"+a+"</span>\n                     </div>"})),this.$titleSectionContainers.find(".title-section-inner-container").append(e)}},e.prototype.getTopReadableElement=function(e,t){for(var n=e.eq(0),o=0;o<e.length;o++){if(null!=(a=e.eq(o).offset())&&a.top>=t&&o>0){n=e.eq(o-1);break}}var i=parseInt(n.attr("refid"));if(Number.isNaN(i))return e.eq(0);i>0&&(i-=1);for(o=i;o<i+60;o++){var a;if(null!=(a=$("[refid='"+o+"']").offset())&&a.top>=t)return $("[refid='"+(o-1)+"']")}return n},e.prototype.renderAndRepeatWithDelay=function(){this.adjustVisibleHeadingTitle(),l.a.setTimeout(this.adjustVisibleHeadingTitle,16),l.a.setTimeout(this.adjustVisibleHeadingTitle,100)},e.prototype.handleChapterTitleClick=function(e){$(e.target).is(".wish-list-icon")||s.a.scrollToElement(this.$headerElements[0])},e.prototype.handleTextSlideMenuHidden=function(){var e=this;l.a.setTimeout((function(){return e.updateHeaderTitleContainersPositions()}),100)},e.prototype.handleTextSlideMenuOpened=function(){var e=this;l.a.setTimeout((function(){return e.updateHeaderTitleContainersPositions()}),100)},e.prototype.adjustVisibleHeadingTitle=function(){var e=u.scrollTop(),t=0;if($(".current-header-item").removeClass("current-header-item"),e>0){var n=this.getLastHeader(e+o.a.getTopNavBarHeight()+40).filter("[refid!='1']").attr("refid")||"1";if(n){var i=$(".header-item[data-refid="+n+"]");i.addClass("current-header-item"),t=i.index()*i.height()}}this.$titleSectionContainers.find(".title-section-inner-container").css("transform","translateY(-"+t+"px)"),this.updateHeaderTitleContainersPositions()},e.prototype.updateHeaderTitleContainersPositions=function(){var e=this.$titleSectionContainers.filter(":not(.second-row-top-bar-section .title-section-container)"),t=this.$titleSectionContainers.filter(".second-row-top-bar-section .title-section-container");d.b.isSmallScreenSize()?(e.addClass("hidden"),t.removeClass("hidden"),this.updateSizeAndPositionForSmallTitleContainer(t)):(t.addClass("hidden"),e.removeClass("hidden"),this.updateSizeAndPositionForMediumLargeTitleContainer(e))},e.prototype.updateSizeAndPositionForSmallTitleContainer=function(e){var t=$(".second-row-top-bar-section.top-bar-section.pull-left"),n=$(".second-row-top-bar-section.top-bar-section.pull-right"),o=t.find("li:first-of-type"),a=o.offset().left+o.width()+i.a.getMarginRight(o),r=this.getTextReferentLeftPosition(),s=n.offset().left,l=Math.max(a,r),d=s-l-10;e.css("left",l==r?Math.abs(r-a)+"px":"0px"),e.width(d)},e.prototype.updateSizeAndPositionForMediumLargeTitleContainer=function(e){var t=$(".top-bar-section.pull-right:not(.second-row-top-bar-section)"),n=e.prev(),o=n.offset()||{left:0},a=t.offset()||{left:0},r=o.left+n.width()+i.a.getMarginRight(n),s=a.left,l=this.getTextReferentLeftPosition(),d=Math.max(r,l),c=$(document.querySelector("#book-main-content-container p")||document.querySelector("#book-main-content-container")).width(),h=Math.min(s-d-10,c);e.css("left",d==l?Math.abs(l-r)+"px":"0px"),e.width(h)},e.prototype.getTextReferentLeftPosition=function(){if(null==this.$headerElements)return 0;var e=this.$headerElements.first().find("h1, h2, h3, h4, h5"),t=parseInt(e.css("padding-left"));return null==e||0==e.length?0:e.offset().left+(Number.isNaN(t)?0:t)},e.prototype.getTrackPointPosition=function(){return(this.$trackPointColumn.offset()||{left:0}).left},e.prototype.getTopMostReadableElement=function(){return null==this.$headerElements||0==this.$headerElements.length?$(null):this.getTopReadableElement(this.$headerElements,u.scrollTop()+o.a.getTopNavBarHeight())},e.prototype.trackScrolling=function(){var e=this;clearTimeout(this.urlUpdateTimerID),this.urlUpdateTimerID=l.a.setTimeout((function(){var t=e.getTopMostReadableElement();window.history.replaceState&&e.rewriteUrlOnScroll&&window.history.replaceState({},"livebook - "+e.book.title+" - "+e.bookElement.title,r.a.formLink(e.book,e.bookElement,t.attr("refid"))),p.trigger("readableElementScrolled",[t.attr("refid")])}),1e3)},e.prototype.getLastHeader=function(e){return null==this.$headerElements?$(null):this.$headerElements.filter((function(t,n){return o.a.isHeadingVisible($(n),e)})).last()},e.prototype.handleHeaderItemTextClick=function(e){var t=$(e.target).closest(".header-item").attr("data-refid");s.a.scrollToElement(document.querySelector("[refid='"+t+"']"))},e}();t.a=new g},455:function(e,t,n){"use strict";var o=n(0),i=function(){function e(){}return e.prototype.getAccessibleResources=function(e){return new Promise((function(t,n){o.a.postToOurBackend(o.a.getAbsoluteUrl("api/catalog/getAccessibleResources"),(function(n){var i=n.downloads||[];i&&i.length&&(i.sort((function(e,t){return e.ordinal-t.ordinal})),i.forEach((function(e){e.url&&!e.url.startsWith("http")&&(e.url=o.a.getMarketplaceS3Url(e.url))})));var a=n.restrictedDownloads||[];a&&a.length&&a.forEach((function(t){t.linkText=t.restrictedDownloadType||t.description||t.productFormat,"SOURCE_CODE"==t.linkText&&(t.linkText="Source Code"),(!t.url||t.url.indexOf("restrictedDownload")>=0)&&(t.url=o.a.getProductionMarketplaceUrl("dashboard/download?restrictedDownloadId="+t.id),t.url+="&productExternalId="+e,t.licenseId&&(t.url+="&licenseId="+t.licenseId))})),t(n)}),(function(e){return t(null)}),{bookShortName:e})}))},e.prototype.getTocAndIndex=function(e,t,n){var i="";return i=t?"/"+e.shortName+"/v-"+t+"/tocAndIndex.json":n?"/"+e.shortName+"/r-"+n+"/tocAndIndex.json":"/"+e.shortName+"/tocAndIndex.json",new Promise((function(e,t){$.ajax({url:o.a.getAwsUrl(i),dataType:"json"}).then((function(t){"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof t.index&&(t.index=JSON.parse(t.index)),"string"==typeof t.toc&&(t.toc=JSON.parse(t.toc)),e(t)})).fail((function(e){return t(e)}))}))},e}(),a=n(24),r=n(1),s=function(){function e(){this.webService=new i}return e.prototype.getTocAndIndex=function(e,t,n){return e&&e.hasBeenDownloaded?a.a.loadTocAndIndex(e):this.webService.getTocAndIndex(e,t,n)},e.prototype.getAccessibleResources=function(e){return r.b.isConnected()?this.webService.getAccessibleResources(e):Promise.resolve({downloads:[],restrictedDownloads:[],productUrls:[{linkText:"Manning book page",url:"https://manning.com/"+e}]})},e}();n.d(t,"a",(function(){return l}));var l=new(function(){function e(){this.tocAndIndexPromiseMap={},this.bookResourcesServicePromise=new Promise((function(e,t){r.b.loadDeviceInfo().then((function(t){e(function(e){switch(e){case r.a.Browser:return new i;case r.a.Cordova:case r.a.Electron:return new s}}(t.platform))})).catch((function(e){return t(e)}))}))}return e.prototype.getTocAndIndex=function(e,t,n){var o=this;if(!e)return Promise.reject({});var i=t&&n&&n.meapVersion||0,a=t&&n&&n.reviewVersion||0,r=e+"-"+i+"-"+a;return this.tocAndIndexPromiseMap[r]?this.tocAndIndexPromiseMap[r]:this.tocAndIndexPromiseMap[r]=new Promise((function(e,n){o.bookResourcesServicePromise.then((function(o){o.getTocAndIndex(t,i,a).then((function(t){return e(t)})).catch((function(e){return n(e)}))})).catch((function(e){return n(e)}))}))},e.prototype.getAccessibleResources=function(e){var t=this;return e?this.previousResourcesBookShortName==e&&this.bookResourcesPromise?this.bookResourcesPromise:(this.previousResourcesBookShortName="",this.bookResourcesPromise=new Promise((function(n,o){t.bookResourcesServicePromise.then((function(i){i.getAccessibleResources(e).then((function(o){t.previousResourcesBookShortName=e,n(o)})).catch((function(e){t.bookResourcesPromise=null,o(e)}))})).catch((function(e){return o(e)}))}))):Promise.resolve(null)},e.prototype.reset=function(){this.bookResourcesPromise=null,this.previousResourcesBookShortName=""},e}())},458:function(e,t,n){"use strict";var o=n(3),i=n(1),a=n(6),r=(n(548),n(17)),s=$(document),l=$(window),d=function(){function e(e,t,n){var i=this;this.$menu=e,this.$menuButton=t,this.optionalArguments=n||{},this.$topBar=$("#top-bar-container"),this.$footer=$("#footer"),this.handleMenuButtonClick=this.handleMenuButtonClick.bind(this),this.handleResize=this.handleResize.bind(this),this.handleSideMenuOpened=this.handleSideMenuOpened.bind(this),this.handleTextSlideMenuBeginOpening=this.handleTextSlideMenuBeginOpening.bind(this),o.a.onEventWithCooldown(this.$menuButton,"click",this.handleMenuButtonClick),s.on("slideMenuOpened",this.handleSideMenuOpened),s.on("slideMenuCloseRequested notesMenuShowStart",(function(){return i.close()})),s.on("textSlideMenuBeginOpening",this.handleTextSlideMenuBeginOpening),this.$menu.css({width:this.determineSlideMenuWidth()})}return e.prototype.handleMenuButtonClick=function(){this.$menu.is(".text-slide-menu-shown")?this.close():this.open()},e.prototype.adjustMainBookContentContainerPosition=function(){var e=this.$menu.is(".text-slide-menu-shown"),t=$("#book-main-content-container"),n=$(".summary-wrapper"),o=$("#in-page-discussion-wrapper");if(null!=t&&0!=t.length&&null!=n&&0!=n.length&&e)if(!i.b.isLargeScreenSize()||null!=r.a.book&&r.a.book.isFreeEbook)t.css("transform",""),n.css("transform",""),o.css("transform",""),s.trigger("textSlideMenuOpened",[this.$menu]),s.trigger("slideMenuStartOpening",[this.$menu,0]),s.trigger("slideMenuOpened",[this.$menu]);else{var l=a.a.getComputedTranslateX(t[0]),d=Math.max(this.$menu.width()-(t.length?t.offset().left:0)+l+(this.optionalArguments.sidePadding||0),0);d=this.$menu.is(".text-slide-menu-right")?-d:d,s.trigger("slideMenuStartOpening",[this.$menu,d]),this.adjustBookMainContentAndSummaryPosition(t,n,o,d)}},e.prototype.adjustBookMainContentAndSummaryPosition=function(e,t,n,o){var i=this;e.velocity({translateX:o},{duration:250,complete:function(){s.trigger("textSlideMenuOpened",[i.$menu]),s.trigger("slideMenuOpened",[i.$menu])}}),t.velocity({translateX:o},{duration:250}),n.velocity({translateX:o},{duration:250})},e.prototype.handleResize=function(){var e=this;o.a.setTimeout((function(){e.adjustMenuPosition(),e.adjustMainBookContentContainerPosition()}),50)},e.prototype.handleSideMenuOpened=function(e,t){null!=t&&0!=t.length&&t!=this.$menu&&t.offset().left<l.width()/2&&this.close()},e.prototype.handleTextSlideMenuBeginOpening=function(e,t){null!=t&&0!=t.length&&t!=this.$menu&&this.close()},e.prototype.adjustMenuPosition=function(){var e=this.$topBar.height()+a.a.getComputedTranslateY(this.$topBar.get(0))-($("#header-notification-container").height()||0),t=e+this.$footer.height();i.b.isApp()||!i.b.isAndroid()&&!i.b.isIOS()||(t+=70),this.$menu.css({top:e,height:"calc(100vh - "+t+"px)",width:this.determineSlideMenuWidth()})},e.prototype.open=function(){this.optionalArguments.dontOpenWhenDisconnected&&i.b.isConnected(),this.isOpened()||(this.$menu.addClass("text-slide-menu-shown"),this.$menuButton.addClass("selected"),s.trigger("textSlideMenuBeginOpening",[this.$menu]),this.optionalArguments.beforeOpenCallback&&this.optionalArguments.beforeOpenCallback(),this.adjustMenuPosition(),this.adjustMainBookContentContainerPosition(),l.on("resizestop orientationchange",this.handleResize),s.trigger("tocMenuOpen"),$(document.body).addClass("has-text-slide-menu-shown"))},e.prototype.close=function(e){if(void 0===e&&(e=!0),this.isOpened()){l.off("resizestop orientationchange",this.handleResize),this.$menu.removeClass("text-slide-menu-shown"),$(document.body).removeClass("has-text-slide-menu-shown"),this.$menuButton.removeClass("selected");var t=$("#book-main-content-container"),n=$(".summary-wrapper"),o=$("#in-page-discussion-wrapper");e&&(null!=t&&t.length&&t.velocity({translateX:0},{duration:250,complete:function(){s.trigger("textSlideMenuClosed"),s.trigger("slideMenuClosed"),t.css("transform","")}}),null!=n&&n.length&&n.velocity({translateX:0},{duration:250,complete:function(){n&&n.css("transform","")}}),null!=o&&o.length&&o.velocity({translateX:0},{duration:250,complete:function(){o&&o.css("transform","")}}))}},e.prototype.isOpened=function(){return this.$menu.is(".text-slide-menu-shown")},e.prototype.determineSlideMenuWidth=function(){var e=l.width()-$("#book-main-content-container").width();return Math.min(this.optionalArguments.maxWidth||650,Math.max(e,this.optionalArguments.targetWidth||450))},e}();t.a=d},460:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var o=n(0),i=n(75),a=(n(556),n(29)),r=n(3),s=n(17),l=n(58),d=n(6),c=n(7),h=new(function(){function e(){var e=this;this.$headerNotificationContainer=$("#header-notification-container"),this.$headerNotificationContainer.on("click",".free-ebook-sign-in",(function(){a.a.requestOpenModal("signin","sign in to read this free ebook","free-ebook-sign-in")})),this.$headerNotificationContainer.on("click",".free-preview-sign-in",(function(e){$(e.target).is(".add-dotd-book-to-cart")||a.a.requestOpenModal("signin","sign in to unlock this book","free-preview-sign-in")})),this.$headerNotificationContainer.on("click",".fa-close",(function(){e.hideHeaderNotifier(),$(document).trigger("headerNotifierHidden")})),this.$headerNotificationContainer.on("click",".add-dotd-book-to-cart",(function(){null!=e.dotdPromoInfo&&i.a.requestAddBookToCartByBookShortName(e.book.shortName,e.dotdPromoInfo.discountCode),e.dotdPromoInfo=null,e.hideHeaderNotifier()})),this.$headerNotificationContainer.on("click",".free-preview-start",(function(e){$(e.target).is(".newer-version-link")?document.location=e.target.href:$(document).trigger("freePreviewRequested")})),$(document).on("freePreviewModeActivated freePreviewModeDeactivated",(function(){r.a.setTimeout((function(){e.renderFreePreviewMessaging()}),16)})),$(document).on("freePreviewModeExpired",(function(){c.a.isCurrentlyLoggedIn()&&e.hideHeaderNotifier()}))}return e.prototype.setPromotion=function(e){this.dotdPromoInfo=e,this.initialize(this.book,this.bookElement)},e.prototype.initialize=function(e,t){var n=this;if(this.book=e,this.bookElement=t,null!=e||null!=t){if(e.latestMeapVersion!=t.meapVersion&&0!=e.latestMeapVersion&&null!=t.meapVersion)return this.$headerNotificationContainer.html('<a href="'+o.a.getBookElementUrl(this.book.slug,this.bookElement.shortName)+"\"> Newer version available! <span class='action-label'>Access the latest version</span></a>"),void this.showHeaderNotifier();i.a.getNewestEditionProduct(e).then((function(t){null!=t&&t.newestEditionProduct&&t.newestEditionProduct.slug&&(e.newerEditionId=t.newestEditionProduct.id,n.$headerNotificationContainer.html('<a href="'+o.a.getBookElementUrl(t.newestEditionProduct.slug,"")+"\"> Newer edition available! <span class='action-label'>Access the latest version</span></a>"),n.showHeaderNotifier())})),this.renderPromoMessage()}else this.renderPromoMessage()},e.prototype.clean=function(){this.hideHeaderNotifier(),this.book=null,this.bookElement=null},e.prototype.renderPromoMessage=function(){if(null!=this.dotdPromoInfo){var e=null!=this.book&&this.book.shortName==this.dotdPromoInfo.productExternalId;if(null==this.book||e){if(null!=this.book&&this.book.userOwnsBook)return;this.showHeaderNotifier(),this.$headerNotificationContainer.html("\n                <div class='promo-header'>\n                    <a class=\"single-line "+(e?"add-dotd-book-to-cart":"")+'" href="'+(e?"javascript:void(0)":this.dotdPromoInfo.productLink)+'" data-product-external-id='+this.dotdPromoInfo.productExternalId+">"+(e?this.dotdPromoInfo.shortMessage:this.dotdPromoInfo.headerMessage)+'</a>\n                    <i class="fa fa-close close-promo-button" data-product-external-id="'+this.dotdPromoInfo.productExternalId+'"/>\n                </div>\n            ')}}},e.prototype.renderFreePreviewMessaging=function(){var e=this;if((null==this.bookElement||!this.bookElement.isOpen)&&d.a.hasScrambledParagraphs()){var t=this.getHeadingAndDescription(this.book,c.a.isCurrentlyLoggedIn());null!=t?(this.showHeaderNotifier(),this.$headerNotificationContainer.html('<div class="free-preview-notifier '+(t.additionalClass||"")+'">\n                <span class="free-preview-heading-wrapper">'+t.heading+"</span>\n                "+(t.description?'<i class="fa fa-question-circle dont-propagate-click" data-tooltip aria-haspopup="true" data-options="disable_for_touch:true;" title="'+t.description+'" aria-hidden="true"></i>':"")+"\n                <a class=\"newer-version-link dont-propagate-click hidden\" style='display: inline;' href=\"\">(access the <span style='text-decoration: underline'>latest</span> version)</a>\n             </div>"),"free-preview-starting"==t.additionalClass&&this.countDownToAutoStartFreePreview(),this.$headerNotificationContainer.foundation("tooltip"),"free-preview-start"!=t.additionalClass&&"free-preview-running"!=t.additionalClass&&"free-preview-sign-in"!=t.additionalClass||(this.book.latestMeapVersion!=this.bookElement.meapVersion?this.updateNewerVersionLink(o.a.getBookElementUrl(this.book.slug,this.bookElement.shortName)):i.a.getNewestEditionProduct(this.book).then((function(t){null!=t&&t.newestEditionProduct&&t.newestEditionProduct.slug&&e.updateNewerVersionLink(o.a.getBookElementUrl(t.newestEditionProduct.slug,""))})))):this.hideHeaderNotifier()}},e.prototype.updateNewerVersionLink=function(e){this.$headerNotificationContainer.find(".newer-version-link").attr("href",e).removeClass("hidden")},e.prototype.countDownToAutoStartFreePreview=function(){var e=this;0!=this.$headerNotificationContainer.find(".free-preview-auto-start-countdown").length&&r.a.setTimeout((function(){e.$headerNotificationContainer.find(".free-preview-count-down-wrapper").addClass("activate-1"),r.a.setTimeout((function(){e.$headerNotificationContainer.find(".free-preview-count-down-wrapper").removeClass("activate-1").addClass("activate-2"),r.a.setTimeout((function(){e.$headerNotificationContainer.find(".free-preview-count-down-wrapper").removeClass("activate-2").addClass("activate-3"),r.a.setTimeout((function(){$(document).trigger("anonymousFreePreviewStartRequested")}),1e3)}),1e3)}),1e3)}),1)},e.prototype.getHeadingAndDescription=function(e,t){return e.isFreeEbook?t?null:{heading:"<span class='action-label'>sign in</span> to access this free eBook",description:"This eBook is free after you log in",additionalClass:"free-ebook-sign-in"}:s.a.isFreePreviewActive()?{heading:this.hasAdditionalPriceMessage()?"in free preview"+this.getAdditionalPriceMessage():"freely previewing "+this.book.cleanTitle,description:"",additionalClass:"free-preview-running"}:l.a.isFreePreviewAtBeginningAndNotStarted(e)||l.a.isFreePreviewAvailable(e)?t?e.isOpen?{heading:"<span class='action-label'>start</span> your 24h free preview",description:"The text will unlock so you can read this book for 24 hours.",additionalClass:"free-preview-start"}:{heading:"<span class='action-label'>start</span> your free preview",description:"The text will unlock so you can read each liveBook for a couple of minutes per day.",additionalClass:"free-preview-start"}:{heading:"starting free preview in <span class='free-preview-auto-start-countdown'><div class='free-preview-count-down-wrapper'><div class='free-preview-count-down-3'>3</div><div class='free-preview-count-down-2'>2</div><div class='free-preview-count-down-1'>1</div><div class='free-preview-count-down-0'>0</div></div></span>",additionalClass:"free-preview-starting",description:""}:l.a.hasFreePreviewExpired(e)&&!t?e.isOpen?{heading:"<span class='action-label'>sign in</span> to unlock the whole book for 24h"+this.getAdditionalPriceMessage(),description:"The text will unlock so you can read this book for 24 hours.",additionalClass:"free-preview-sign-in"}:{heading:"<span class='action-label'>sign in</span> to unlock the whole book"+this.getAdditionalPriceMessage(),description:"The text will unlock so you can read each liveBook for a total of 5 minutes per day.",additionalClass:"free-preview-sign-in"}:void 0},e.prototype.getAdditionalPriceMessage=function(){return this.hasAdditionalPriceMessage()?' <span class="action-label add-dotd-book-to-cart" data-product-external-id='+this.dotdPromoInfo.productExternalId+">(get the book for "+this.dotdPromoInfo.priceMessage+")</span>":""},e.prototype.hasAdditionalPriceMessage=function(){return null!=this.dotdPromoInfo&&null!=this.book&&this.dotdPromoInfo.productExternalId==this.book.shortName},e.prototype.hideHeaderNotifier=function(){this.$headerNotificationContainer.addClass("hidden"),$(document).trigger("headerNotifierHidden")},e.prototype.showHeaderNotifier=function(){this.$headerNotificationContainer.removeClass("hidden"),$(document).trigger("headerNotifierShown")},e}())},464:function(e,t,n){"use strict";var o=n(63),i=n(3),a=n(6),r=n(57),s=n(15),l=n(465),d=n(615),c=n(431),h=n(77),u=n(9),p=n(22),g=n(133),m=n(7),f=$(window),b=$(document),k=function(){function e(){this.handleEditNoteClickTouch=this.handleEditNoteClickTouch.bind(this),this.handleDeleteNoteClickTouch=this.handleDeleteNoteClickTouch.bind(this),this.handleSaveNoteClickTouch=this.handleSaveNoteClickTouch.bind(this),this.handleCloseNoteClickTouch=this.handleCloseNoteClickTouch.bind(this),this.handleNoteDblClick=this.handleNoteDblClick.bind(this),this.handleNoteMouseEnter=this.handleNoteMouseEnter.bind(this),this.handleNoteMouseLeave=this.handleNoteMouseLeave.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleContentFullyConstructed=this.handleContentFullyConstructed.bind(this),this.handleOpenNoteRequested=this.handleOpenNoteRequested.bind(this),this.handleCloseMenuEvent=this.handleCloseMenuEvent.bind(this),this.handleAddNoteButtonClick=this.handleAddNoteButtonClick.bind(this),this.handleNoteInputBoxKeyDown=this.handleNoteInputBoxKeyDown.bind(this)}return e.prototype.initialize=function(e,t){this.clean(),e&&m.a.isCurrentlyLoggedIn()&&(this.book=e,this.bookElement=t,this.$notesMenu=$("#notes-menu"),this.$notesList=this.$notesMenu.find(".notes-list"),this.$noteInputBox=$("#note-input-box"),this.$addNoteButton=$("#add-note-button"),i.a.onDescendantEventWithCooldown(this.$notesMenu,"click touchstart",".note-edit-icon",this.handleEditNoteClickTouch),i.a.onDescendantEventWithCooldown(this.$notesMenu,"click touchstart",".note-delete-icon",this.handleDeleteNoteClickTouch),i.a.onDescendantEventWithCooldown(this.$notesMenu,"click touchstart",".note-input-save",this.handleSaveNoteClickTouch),i.a.onDescendantEventWithCooldown(this.$notesMenu,"click touchstart",".note-close-icon, .note-input-cancel",this.handleCloseNoteClickTouch),i.a.onDescendantEventWithCooldown(this.$notesMenu,"click touchstart",".notes-menu-close",this.handleCloseMenuEvent),this.$notesMenu.on("dblclick",".note-content-container",this.handleNoteDblClick),this.$notesMenu.on("mouseenter",".note-item-container",this.handleNoteMouseEnter),this.$notesMenu.on("mouseleave",this.handleNoteMouseLeave),b.on("contentFullyConstructed",this.handleContentFullyConstructed),b.on("noteOpenRequested",this.handleOpenNoteRequested),b.on("mousedown touchstart",this.handleDocumentClick),f.on("orientationchange",this.handleCloseMenuEvent),i.a.onEventWithCooldown(this.$addNoteButton,"click touchstart",this.handleAddNoteButtonClick),this.$noteInputBox.on("keydown",this.handleNoteInputBoxKeyDown),this.$notesMenu.find(".notes-menu-heading").text(this.bookElement.reviewVersion>0?"review notes":"notes"))},e.prototype.clean=function(){this.book=null,this.bookElement=null},e.prototype.handleNoteInputBoxKeyDown=function(e){(e.ctrlKey||e.metaKey)&&13==e.keyCode&&this.addNote(this.$noteInputBox.val().trim())},e.prototype.handleAddNoteButtonClick=function(){this.addNote(this.$noteInputBox.val().trim())},e.prototype.handleCloseMenuEvent=function(){this.closeNotesMenu()},e.prototype.handleOpenNoteRequested=function(e,t){this.openNotes(t)},e.prototype.handleContentFullyConstructed=function(){this.openCurrentNote()},e.prototype.handleNoteDblClick=function(e){this.handleEnterEditNote(e)},e.prototype.handleEditNoteClickTouch=function(e){this.handleEnterEditNote(e)},e.prototype.handleDeleteNoteClickTouch=function(e){this.handleDeleteNoteClick(e)},e.prototype.handleSaveNoteClickTouch=function(e){this.handleLeaveEditNoteAndSave(e)},e.prototype.handleCloseNoteClickTouch=function(e){this.handleLeaveEditNoteWithoutSave(e)},e.prototype.handleDocumentClick=function(e){var t=$(e.target);this.$notesMenu.is(t)||0!=this.$notesMenu.find(t).length||0!=t.parents(".tooltip, .text-margin-icon-bubble, #text-addons-menu").length||t.is(".text-margin-icon-bubble")||this.closeNotesMenu()},e.prototype.openCurrentNote=function(){},e.prototype.openNotes=function(e,t){if(e){try{var n=document.getElementById(e);if(n&&b.trigger("slideMenuCloseRequested"),n&&n.paragraphBubble&&c.a.currentParagraphBubble!=n.paragraphBubble)return a.a.isElementVisible(n)?(c.a.handleNoteBubbleClick(n.paragraphBubble),void(t&&t())):void h.a.scrollToElement(n,(function(){c.a.handleNoteBubbleClick(n.paragraphBubble),t&&t()}))}catch(e){}t&&t()}else t&&t()},e.prototype.addNote=function(e){var t=this;if(!this.isAddingNoteDisabled&&(e=(e||"").trim(),c.a.currentParagraphBubble&&e&&!(e.length<1))){var n=c.a.currentParagraphBubble.paragraph,i=$(n),a=$(n).attr("refid"),s=d.a.currentTextSelection||"",l=this.getSection(i);this.isAddingNoteDisabled=!0,this.$addNoteButton.append("<i class='fa fa-spinner fa-spin'/>");var h=i.attr("data-hash");g.a.addNote(this.bookElement,a,h,s,e,l,this.bookElement.meapVersion,this.bookElement.reviewVersion).then((function(n){t.isAddingNoteDisabled=!1,t.$addNoteButton.find(".fa").remove();var i=t.createNoteElement(e),r=t.getNotes(c.a.currentParagraphBubble);i.attr("noteID",n),t.$notesList.append(i),r.push(new o.a(n,t.bookElement.shortName,t.bookElement.ordinal,a,h,s,e,l,Date.now(),t.bookElement.meapVersion,t.bookElement.reviewVersion)),c.a.updateCurrentNotesCount(),t.$noteInputBox.val(""),b.trigger("noteAdded")})).catch((function(e){t.isAddingNoteDisabled=!1,t.$addNoteButton.find(".fa").remove(),r.a.showTemporaryNotification("Error when trying to store note. Please try later")}))}},e.prototype.handleEnterEditNote=function(e){var t=$(e.currentTarget).parents(".note-item-container"),n=t.find(".note-input-container"),o=t.find(".note-content-container");o.is(".note-content-container-can-edit")&&(n.text(o.text()),n.val(o.text()),t.addClass("edit-mode"))},e.prototype.handleDeleteNoteClick=function(e){var t=$(e.currentTarget).parents(".note-item-container"),n=t.find(".note-content-container"),o=t.attr("noteID");n.is(".waiting-for-deletion")||(n.addClass("waiting-for-deletion"),this.removeNote(o,(function(){c.a.removeNoteBubbleNote(c.a.currentParagraphBubble,o),t.remove()}),(function(){n.removeClass("waiting-for-deletion"),r.a.showTemporaryNotification("Error when deleting note, try again later")})))},e.prototype.handleLeaveEditNoteAndSave=function(e){var t=$(e.currentTarget).parents(".note-item-container"),n=t.find(".note-input-container"),o=t.find(".note-content-container"),i=t.attr("noteID");t.removeClass("edit-mode");var a=n.val();o.text(a);var r=this.getCurrentNoteWithID(i);null!=r&&(r.noteText=a),g.a.editNote(this.bookElement,parseInt(i),a)},e.prototype.handleLeaveEditNoteWithoutSave=function(e){$(e.currentTarget).parents(".note-item-container").removeClass("edit-mode")},e.prototype.showNotesMenu=function(e){var t=this;e.addClass("activated"),jQuery.expr.filters.hidden(e[0])&&c.a.showNoteBubble(e.get(0)),c.a.selectNoteBubble(e.get(0)),this.updateNotesList(),b.trigger("notesMenuShowStart"),u.a.showTextSideMenu(this.$notesMenu,e,(function(){t.$noteInputBox.focus()}))},e.prototype.closeNotesMenu=function(e){var t=c.a.currentParagraphBubble;jQuery.expr.filters.visible(this.$notesMenu[0])?this.animateClosingCommentsMenu(t,e):(c.a.deselectNoteBubble(t),c.a.updateNotesButtonState(t),this.$notesMenu.removeClass("open").addClass("closed"),c.a.unbindCurrentNoteBubble(),e&&e())},e.prototype.animateClosingCommentsMenu=function(e,t){u.a.closeTextSideMenu(this.$notesMenu,(function(){c.a.deselectNoteBubble(e),c.a.updateNotesButtonState(e),c.a.unbindCurrentNoteBubble(),t&&t()}))},e.prototype.updateNotesList=function(){var e=this.getNotes(c.a.currentParagraphBubble);if(this.$notesList.empty(),e)for(var t=0;t<e.length;t++){var n=e[t],o=this.createNoteElement(n.noteText,n.user,n.userId);o.attr("noteID",n.id),this.$notesList.append(o)}},e.prototype.createNoteElement=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=void 0),$(Mustache.render(v,{note:e,user:t,canEdit:null==n||n==p.a.getUserId()}))},e.prototype.getCurrentNoteWithID=function(e){var t=this.getNotes(c.a.currentParagraphBubble);if(!t)return null;for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null},e.prototype.getNotes=function(e){if(!e)return[];var t=e.paragraph;return t?(t.notes||(t.notes=[]),t.notes):[]},e.prototype.removeNote=function(e,t,n){e&&g.a.removeNote(this.bookElement,parseInt(e)).then((function(e){return e?t():n()})).catch((function(e){return n()}))},e.prototype.handleNoteMouseEnter=function(e){var t=this.getCurrentNoteWithID($(e.currentTarget).attr("noteID"));if(t){var n=$(c.a.currentParagraphBubble.paragraph);l.a.deleteCurrentNoteHighlight(),n.removeClass("matching-note-hovered"),t.annotatedText?l.a.highlightNoteSelection(n,t.annotatedText):n.addClass("matching-note-hovered")}},e.prototype.handleNoteMouseLeave=function(){l.a.deleteCurrentNoteHighlight(),c.a.currentParagraphBubble&&$(c.a.currentParagraphBubble.paragraph).removeClass("matching-note-hovered")},e.prototype.annotate=function(e){var t=this;if(e&&e.paragraphBubble){if(c.a.currentParagraphBubble!=e.paragraphBubble)return c.a.currentParagraphBubble?void this.closeNotesMenu((function(){c.a.currentParagraphBubble=e.paragraphBubble,t.showNotesMenu($(e.paragraphBubble))})):(c.a.currentParagraphBubble=e.paragraphBubble,void this.showNotesMenu($(e.paragraphBubble)));this.$noteInputBox.focus()}},e.prototype.getSection=function(e){var t=s.a.figureOutSectionOrSubsectionFromRefId(e.attr("refid"));if(t)return t;var n=this.bookElement.shortName.match(/(part\s+\d)|\w+\s+(\d+)/i);if(n){if(n[1])return n[1];if(n[2])return n[2]}return this.book.shortName},e}();t.a=new k;var v='<li class="note-item-container">\n    <div class="note-content-container {{#canEdit}}note-content-container-can-edit{{/canEdit}}">{{#user}}<span class="note-item-username-container">{{user}}</span>: {{/user}}{{note}}</div>\n    <textarea class="note-input-container">{{note}}</textarea>\n    <a href="javascript:void(0)" class="note-input-save">Save</a>\n    <a href="javascript:void(0)" class="note-input-cancel">Cancel</a>\n    {{#canEdit}}\n    <i class="fa note-edit-icon fa-pencil"></i><i class="fa note-delete-icon fa-trash-o"></i><i class="fa note-close-icon fa-times"></i>\n    {{/canEdit}}\n</li>'},465:function(e,t,n){"use strict";var o=n(415),i=n(64),a=n(8),r=n(57),s=n(9),l=n(3),d=n(133),c=n(7),h=n(1),u=$(document),p=/highlight-(\d+)/i,g=function(){function e(){var e=this;this.handleHighlightMouseEnter=this.handleHighlightMouseEnter.bind(this),this.handleHighlightMouseLeave=this.handleHighlightMouseLeave.bind(this),u.on("textSideMenuClosed",(function(){return e.deleteCurrentNoteHighlight()})),u.on(h.b.isCordova()?"touchstart":"click",".delete-highlight-button",(function(){return e.handleDeleteButtonClick()})),u.on(h.b.isCordova()?"touchstart":"click",".highlight-tooltip-container .color-selector",(function(t){return e.handleColorSelectorClick(t)}))}return e.prototype.initialize=function(e,t){var n=this;if(this.book=e,this.bookElement=t,this.book&&c.a.isCurrentlyLoggedIn()){this.$menuReferenceElement=$("#highlight-tooltip-menu-reference-node");try{this.$menuReferenceElement.foundation("tooltip")}catch(e){}d.a.fetchHighlights(t).then((function(e){e.bookElementHighlights.forEach((function(e){e.highlightedParagraphs.forEach((function(t){var o=t.hash?$("[data-hash="+t.hash+"]"):$(document.getElementById(t.ordinal));o.length&&n.highlight(o,t.selectedText,"highlighted-text",e.color,e.id,e.offset)}))}))}))}},e.prototype.clean=function(){this.book=null,this.bookElement=null},e.prototype.createHighlightSelection=function(e,t,n){var o=this;if(void 0===n&&(n=-1),e&&e.length&&t&&this.bookElement){var s=this.getAssociatedReadableTextFragmentAndSelectedText(e,t);if(s&&s.length&&this.bookElement&&this.bookElement.shortName&&this.bookElement.book&&this.bookElement.book.shortName){d.a.addHighlight(this.bookElement,s.map((function(e){return new i.a(e.$readableTextFragment.attr("id"),e.$readableTextFragment.attr("data-hash"),e.selectedText)})),a.a.getHighlightColor(),n).then((function(e){o.deleteDummyHighlights();for(var t=0,i=s;t<i.length;t++){var r=i[t];o.highlight(r.$readableTextFragment,r.selectedText,"highlighted-text",a.a.getHighlightColor(),e,n)}u.trigger("highlightAdded")})).catch((function(e){o.deleteDummyHighlights(),r.a.showTemporaryNotification("Error when saving highlight!")}));for(var l=0;l<s.length;l++){var c=s[l];this.highlight(c.$readableTextFragment,c.selectedText,"dummy-highlighted-text",a.a.getHighlightColor(),"",0==l?n:-1)}}}},e.prototype.getAssociatedReadableTextFragmentAndSelectedText=function(e,t){for(var n=e.filter((function(e){return e.is(".readable-text")})),o=(t||"").split(/(\r)?\n/).filter((function(e){return""!=e})),i=[],a=0,r=0;a<n.length&&r<o.length;){var s=n[a],l=o[r];-1!=s.text().indexOf(l)?(i.push({$readableTextFragment:s,selectedText:l}),a++,r++):r++}return i},e.prototype.highlightNoteSelection=function(e,t){this.highlight(e,t,"highlighted-note-text","")},e.prototype.highlight=function(e,t,n,i,a,r){if(void 0===a&&(a=""),void 0===r&&(r=-1),e&&t){var s=e.get(0),l=n+(a?" highlight-"+a:"")+(i?" highlight-color-"+i:"");if(o.a.highlight(s,t,l,"",r>0?s.textContent.substring(0,r):""),"dummy-highlighted-text"!=n){this.storeHighlightToOriginalHTML(s,t,l);var d=e.find("."+n);h.b.isCordova()?d.on("touchstart",this.handleHighlightMouseEnter):d.hover(this.handleHighlightMouseEnter,this.handleHighlightMouseLeave)}}},e.prototype.deleteCurrentNoteHighlight=function(){s.a.unwrapIntoParent($(".highlighted-note-text"))},e.prototype.deleteDummyHighlights=function(){s.a.unwrapIntoParent($(".dummy-highlighted-text"))},e.prototype.storeHighlightToOriginalHTML=function(e,t,n){if(e){var i=$("<div>"+e.originalInnerHTML+"</div>");o.a.highlight(i.get(0),t,n),e.originalInnerHTML=i.get(0).innerHTML}},e.prototype.handleHighlightMouseEnter=function(e){var t=this,n=$(e.target);clearTimeout(this.mouseLeaveTimer),clearTimeout(this.mouseEnterTimer),this.mouseEnterTimer=l.a.setTimeout((function(){(s.a.isHover(n)||h.b.isCordova())&&(t.openHighlightTooltip(n),t.selectHeighlight(n),t.$currentlySelectedHighlight=n)}),100)},e.prototype.handleHighlightMouseLeave=function(e){var t=this;clearTimeout(this.mouseLeaveTimer),this.mouseLeaveTimer=l.a.setTimeout((function(){t.isMouseOverTooltip()||s.a.isHover($(e.target))?t.handleHighlightMouseLeave(e):(clearTimeout(t.mouseLeaveTimer),t.unselectHighlights(),t.closeHighlightTooltip())}),500)},e.prototype.openHighlightTooltip=function(e){if(window.Foundation&&(!this.$currentlySelectedHighlight||!e||this.$currentlySelectedHighlight[0]!=e[0])){var t=e[0].getBoundingClientRect();this.$menuReferenceElement.css({top:t.bottom+u.scrollTop()+40,left:t.left+t.width/2});var n=window.Foundation.libs.tooltip.getTip(this.$menuReferenceElement);n.velocity({translateY:5},{duration:0}),n.removeClass("tip-top tip-bottom"),n.find(".selected").removeClass("selected"),n.addClass("tip-bottom"),e.is(".highlight-color-yellow")?n.find(".color-selector.yellow").addClass("selected"):e.is(".highlight-color-red")?n.find(".color-selector.red").addClass("selected"):e.is(".highlight-color-green")?n.find(".color-selector.green").addClass("selected"):e.is(".highlight-color-blue")?n.find(".color-selector.blue").addClass("selected"):e.is(".highlight-color-pink")&&n.find(".color-selector.pink").addClass("selected"),window.Foundation.libs.tooltip.reposition(this.$menuReferenceElement,n,this.$menuReferenceElement.attr("class")),n.stop(),n.velocity("fadeIn"),n.velocity({translateY:0},{duration:100}),u.trigger("tooltipOpened")}},e.prototype.closeHighlightTooltip=function(){window.Foundation.libs.tooltip.hide(this.$menuReferenceElement),u.trigger("tooltipClosed"),this.$currentlySelectedHighlight=null},e.prototype.selectHeighlight=function(e){if(e&&e.length){this.unselectHighlights();var t=s.a.getClassNameMatchingRegEx(e[0],p);t&&$("."+t).addClass("selected-highlight")}},e.prototype.unselectHighlights=function(){$(".selected-highlight").removeClass("selected-highlight")},e.prototype.isMouseOverTooltip=function(){return s.a.isHover($("#highlight-tooltip-menu-reference-node.tooltip"))},e.prototype.handleDeleteButtonClick=function(){if(this.$currentlySelectedHighlight){var e=this.getCurrentlySelectedHighlightClassAndId();null!=e&&this.deleteHighlight(e.classId,e.id)}},e.prototype.deleteHighlight=function(e,t){d.a.removeHighlight(this.bookElement,t).catch((function(){return r.a.showTemporaryNotification("Error syncing highlight with server.")})),this.unselectHighlights(),this.closeHighlightTooltip(),s.a.unwrapIntoParent($("."+e))},e.prototype.handleColorSelectorClick=function(e){if(this.$currentlySelectedHighlight){var t=$(e.currentTarget),n=a.a.getHighlightColor();t.is(".red")?n="red":t.is(".green")?n="green":t.is(".yellow")?n="yellow":t.is(".blue")?n="blue":t.is(".pink")&&(n="pink");var o=this.getCurrentlySelectedHighlightClassAndId();null!=o&&this.changeHighlightColor(o.classId,o.id,n)}},e.prototype.changeHighlightColor=function(e,t,n){d.a.changeHighlightColor(this.bookElement,t,n).catch((function(){return r.a.showTemporaryNotification("Error syncing highlight with server.")})),$("."+e).removeClass("highlight-color-green highlight-color-yellow highlight-color-red highlight-color-pink highlight-color-blue").addClass("highlight-color-"+n),a.a.setHighlightColor(n),this.closeHighlightTooltip()},e.prototype.getCurrentlySelectedHighlightClassAndId=function(){var e=s.a.getClassNameMatchingRegEx(this.$currentlySelectedHighlight[0],p);if(!e)return null;var t=e.match(p);return t&&t[1]?{classId:e,id:+t[1]}:null},e}();t.a=new g},469:function(e,t,n){"use strict";var o=n(4),i=n(3),a=n(1),r=n(415),s=n(140),l=n(6),d=n(17),c=$("#video-mode-overlay"),h=$("#code-annotation-container"),u=$("#additional-code-annotation-container"),p=/^\#([A-Z]|\d{1,2}):?\s+-?/,g=/#([0-9]{1,2}|[A-Z])\s*$/,m={"Python 2.7":"python","Python 3.6":"python",Java:"java",JavaScript:"javascript"},f=function(){function e(e,t,n){var o="",i=e.querySelector(".code-area");i&&(o=(i.value||i.textContent).trim()),this.rawSourceCode=o,this.listingContainer=e,this.additionalListingContainer=null,this.listingContainer.annotatedListing=this,this.$listingContainer=$(e),this.$additionalListingContainer=$(null),this.sourceLines=[],this.source="",this.annotations={},this.annotatedLines=[],this.references=[],this.annotationsLinesMap={},this.styles=[],t?(this.highlightWhenInView(i),n&&n()):this.highlightCodeArea(i,n)}return e.prototype.clean=function(){this.unsubscribeEvents(),this.unsubscribeAdditionalListingEvents(),this.listingContainer=null,this.$listingContainer=null,this.additionalListingContainer=null,this.$additionalListingContainer=null,this.$codeArea=null,this.annotations=null,this.annotatedLines=null,this.annotationsLinesMap=null},e.prototype.highlightWhenInView=function(e,t){var n=this;s(e,(function(){return n.highlightCodeArea(e,t)}))},e.prototype.highlightCodeArea=function(e,t){var n=this;this.processLines(),this.buildReferenceAnnotatedLinesMap();try{var o=new Worker(a.b.isApp()?"highlightJsWorker.js":"/assets/highlightJsWorker.js");o.onmessage=function(a){try{var r=$('<pre class="code-area"><code class="hljs">'+a.data+"</code></pre>");r.find(".hljs-meta").each((function(e,t){var n=$(t);"#"===n.text().trim()&&n.text("#")})),$(e).replaceWith(r),n.$codeArea=r,t&&t()}catch(e){console.log("Error when text highlighting code",e)}i.a.setTimeout((function(){return n.createLineNumbers()}),5),i.a.setTimeout((function(){return n.createAnnotationsAndLines()}),7),i.a.setTimeout((function(){return n.updateTextStyle()}),10),o.terminate()},o.onerror=function(e){console.log("Error when highlighting code",e),t&&t()};var r=(this.source||"").replace(/\r/g,"").trim();o.postMessage({source:r,language:this.getCurrentProgrammingLanguage()})}catch(e){console.log("Error loading highlight worker",e)}},e.prototype.getCurrentProgrammingLanguage=function(){try{if(null!=d.a.book&&""!=d.a.book.programmingLanguage&&"N/A"!=d.a.book.programmingLanguage&&m[d.a.book.programmingLanguage])return[m[d.a.book.programmingLanguage]]}catch(e){}},e.prototype.processLines=function(){if(this.rawSourceCode){var e=this.rawSourceCode.trim(),t=this.$listingContainer.find(".code-annotations-overlay-container");t.attr("data-annotations")&&(e+="\n"+o.a.b64DecodeUnicode(t.attr("data-annotations")));for(var n,i=e.split(/\r\n|\r|\n/g),a=!1,r=!1,s=!1,l=0;l<i.length;l++){var d=i[l];if(s=d.indexOf("!@%STYLE%@!")>-1,a&&!s)this.styles.push(JSON.parse(d));else if(d.match(p))r=!0,(h=d.match(p))&&h.length>=2&&(n=h[1],this.annotations[n]={reference:n,descriptions:[d.substr(h[0].length).replace(/^:(\s)+/,"")]});else r&&n&&this.annotations[n]&&d.trim()?this.annotations[n].descriptions.push(d.trim().replace("!@%STYLE%@!","")):s||(this.sourceLines.push(d),this.annotatedLines.push({line:d,lineNumber:l,annotation:null,annotationElement:null}));d.indexOf("!@%STYLE%@!")>-1&&(a=!a)}for(var c in this.annotations)this.annotations[c].description=this.annotations[c].descriptions.join(" ").trim();for(l=0;l<this.sourceLines.length;l++){var h,u=this.sourceLines[l];if(h=u.match(g)){var m=h[1];this.sourceLines[l]=o.a.trimEnd(u.substr(0,u.indexOf(h[0]))),this.annotations[m]||(this.annotations[m]={reference:m,description:""}),this.annotatedLines[l].annotation=this.annotations[m]}}this.source=this.sourceLines.join("\r\n")}},e.prototype.buildReferenceAnnotatedLinesMap=function(){this.annotationsLinesMap={};for(var e=0;e<this.annotatedLines.length;e++){var t=(u=this.annotatedLines[e]).annotation;if(t){var n=t.reference;this.annotationsLinesMap[n]||(this.annotationsLinesMap[n]={annotatedLines:[],groups:[]}),this.annotationsLinesMap[n].annotatedLines.push(u)}}for(var n in this.annotationsLinesMap)if(this.annotationsLinesMap.hasOwnProperty(n)){var o=this.annotationsLinesMap[n],i=o.annotatedLines,a=o.groups=[];if(!(i.length<=0))if(1!==i.length){for(var r=[],s=0;s<i.length-1;s++){for(var l=i[s],d=i[s+1],c=[],h=l.lineNumber+1;h<d.lineNumber;h++){var u;if(u=this.annotatedLines[h]){if(u.annotation){c=[];break}c.push(u)}}for(h=0;h<c.length;h++)c[h].annotation=l.annotation;r.push.apply(r,c)}i.push.apply(i,r),i.sort((function(e,t){return e.lineNumber-t.lineNumber})),a.push([i[0]]);for(s=1;s<i.length;s++){var p=i[s-1];l=i[s];p.lineNumber+1===l.lineNumber?a[a.length-1].push(l):a.push([l])}}else a.push([i[0]])}},e.prototype.createLineNumbers=function(){var e=this.getCountLines(this.source);if(e>0){for(var t="",n=0;n<e;n++)t+='<div class="line-number line-number-'+(n+1)+'">'+(n+1)+"</div>";this.$codeArea.prepend('<code class="hljs hljs-line-numbers" style="float:left">'+t+"</code>")}},e.prototype.getCountLines=function(e){return 0===e.length?0:e.trim().split(/\r\n|\r|\n/g).length},e.prototype.createAnnotationsAndLines=function(){if(this.$listingContainer){var e=this.$listingContainer.find(".code-annotations-overlay-container"),t="",n={};for(var o in this.annotationsLinesMap){var i=this.annotationsLinesMap[o];n[o]={};for(var a=0;a<i.groups.length;a++){var r=(h=i.groups[a])[0],s=h[h.length-1],l=this.$codeArea.find(".line-number-"+(r.lineNumber+1)),d=this.$codeArea.find(".line-number-"+(s.lineNumber+1));l.length&&d.length?n[o][a]={firstLineOffset:l.position().top,lastLineEnd:d.position().top+d.height()}:console.log("Couldn't build all lines in listing",this.source)}}for(var o in this.annotationsLinesMap){var c=(i=this.annotationsLinesMap[o]).annotatedLines[0].annotation;for(a=0;a<i.groups.length;a++){var h;r=(h=i.groups[a])[0],s=h[h.length-1];if(n[o]){var u=n[o][a];if(u){t+='<div class="line-container listing-line-group group'+o+'" \n                                   style="top: '+u.firstLineOffset+"px; height:"+(u.lastLineEnd-u.firstLineOffset-1)+"px; line-height:"+(u.lastLineEnd-u.firstLineOffset-1)+'px;"></div>';var p=$("<div class='annotation-container'\n                                                     style='top:"+u.firstLineOffset+"px; height:"+(u.lastLineEnd-u.firstLineOffset-1)+"px; line-height:"+(u.lastLineEnd-u.firstLineOffset-1)+"px'>\n                                                    <span class='annotation-label'>"+c.reference+"</span>\n                                                </div>");p.attr("title",c.description),e.append(p),c.labels||(c.labels=[]),c.labels.push(p.get(0));for(var g=0;g<h.length;g++)h[g].annotationElement=p.get(0)}}}}this.$codeArea.prepend(t),this.registerAnnotationEvents()}},e.prototype.registerAnnotationEvents=function(){var e=this,t=this.$listingContainer.find(".code-annotations-overlay-container").children(),n=this.$listingContainer.find(".line-container");i.a.onEventWithCooldown(t,"click touchstart",(function(t){e.goToAnimationStep($(t.currentTarget).text().trim(),!1,t.currentTarget)})),i.a.onEventWithCooldown(n,"click touchstart",(function(t){var n=$(t.currentTarget),o=C.getLineGroupReference(n);o&&e.goToAnimationStep(o)})),n.mouseenter((function(t){return e.handleLineWrapperEnter($(t.currentTarget))})),t.hover((function(t){var n=$(t.currentTarget);if(!n.is(".selected")){var o=e.getWholeLineGroup(n);null!=o&&o.length>0&&e.handleLineWrapperEnter(o.eq(0))}}),(function(t){var n=$(t.currentTarget);if(!n.is(".selected")){var o=e.getWholeLineGroup(n);null!=o&&o.length>0&&e.handleLineWrapperLeave(o.eq(0))}}))},e.prototype.handleLineWrapperLeave=function(e){var t=C.getLineGroupClass(e);if(t){this.$listingContainer.find("."+t).removeClass("highlighted");var n=C.getLineGroupReference(e);this.annotations[n]&&this.$listingContainer.find(".hovered").removeClass("hovered")}},e.prototype.removeHighlighted=function(e){if(e&&0!=e.length){var t=e.find(".listing-line-group.highlighted");0!=t.length&&this.handleLineWrapperLeave(t.eq(0))}},e.prototype.handleLineWrapperEnter=function(e){this.removeHighlighted(e.parents(".browsable-container"));var t=C.getLineGroupClass(e);t&&($(document).trigger("code-lines-group-hovered",[this.$listingContainer.find("."+t),this.$additionalListingContainer.find("."+t)]),e.is(".selected")||this.highlight(C.getLineGroupReference(e)))},e.prototype.getWholeLineGroup=function(e){return e?this.$listingContainer.find(".group"+e.text().trim()):null},e.prototype.goToAnimationStep=function(e,t,n){var o=this;void 0===t&&(t=!1),void 0===n&&(n=null),this.listingContainer.runnableScript&&this.listingContainer.runnableScript.leaveEditMode();var a=this.annotations[e];if(a){var r=$(a.labels),s=($(a.additionalLabels),r.is(".selected"));if(C.hideAll(),!s){0==l.a.getCurrentMainContentTranslateX()?this.showTipWithAnimation(r,h,n):($(document).trigger("slideMenuCloseRequested"),i.a.setTimeout((function(){o.showTipWithAnimation(r,h,n)}),300));var d=this.$listingContainer.find(".group"+e).addClass("selected"),c=this.$additionalListingContainer.find(".group"+e).addClass("selected");t&&$(document).trigger("requestPlayPointPosition",[d,c,!0])}}},e.prototype.unsubscribeEvents=function(){var e=this.$listingContainer.find(".code-annotations-overlay-container").children(),t=this.$listingContainer.find(".line-container");e.off(),t.off()},e.prototype.unsubscribeAdditionalListingEvents=function(){var e=this.$additionalListingContainer.find(".code-annotations-overlay-container").children(),t=this.$additionalListingContainer.find(".line-container");e.off("click"),e.off("mouseenter"),e.off("mouseleave"),e.off("touchstart"),t.off("click"),t.off("mouseenter"),t.off("touchstart")},e.prototype.preselect=function(e,t){var n=this.$listingContainer.find(".group"+e);n.addClass("pre-selected");var o=this.$additionalListingContainer.find(".group"+e);o.addClass("pre-selected");var i=this.annotations[e];i&&($(i.labels).addClass("hovered"),$(i.additionalLabels).addClass("hovered"),t&&$(document).trigger("requestPlayPointPosition",[n,o]))},e.prototype.highlight=function(e){var t=this.$listingContainer.find(".group"+e);this.$additionalListingContainer.find(".group"+e).addClass("highlighted"),t.addClass("highlighted");var n=this.annotations[e];n&&($(n.labels).addClass("hovered"),$(n.additionalLabels).addClass("hovered"))},e.prototype.showTipWithAnimation=function(e,t,n){if(e&&0!=e.length){e.text().trim();var o=e.attr("title"),i=t==u,a=e.parents(".code-area-container"),r=t.find(".annotation-description");t.find(".annotation-container").find(".annotation-label").text(e.text()),r.width("auto"),r.text(o);var s=this.willAnnotationFitInScreen(e),l=null;if(l=null!=n&&e.index(n)>=0?$(n).offset():e.offset(),i&&(l.top-=c.offset().top),s?(l.left+=e.width(),t.removeClass("vertical"),e.removeClass("vertical")):(l.top-=1.1*t.height(),l.left=a.width()/2-t.width()/3,t.addClass("vertical"),e.addClass("vertical")),!e.is(".selected")){t.velocity("stop");var d=t.width();o&&(s&&(t.width(0),r.css({opacity:0}),r.text("")),t.addClass("shown"),t.css({top:l.top,opacity:1,left:l.left})),e.addClass("selected"),o&&(s?(t.css({minHeight:e.height()}),t.find(".annotation-container").css({height:e.height()}),t.animate({width:d},300,(function(){e.addClass("show-tip"),r.text(e.attr("title")),r.animate({opacity:1},300),t.css({left:parseFloat(t.css("left"))+2})}))):t.addClass("show-tip")),C.currentAnnotatedListing=this,$(document).trigger("codeAnnotationShown",this.listingContainer)}}},e.prototype.willAnnotationFitInScreen=function(e){return e.offset().left+e.width()+h.width()<document.documentElement.clientWidth},e.prototype.setAdditionalListingContainer=function(e){this.unsubscribeAdditionalListingEvents(),this.additionalListingContainer=e,this.$additionalListingContainer=$(e);var t=this.$additionalListingContainer.find(".annotation-container"),n=function(e){var n=o.annotationsLinesMap[e];if(!n||void 0===n[0])return console.log("breakout",n),"continue";var i=n[0].annotation,a=t.filter((function(t,n){return $(n).find(".annotation-label").text()==e}));if(0==a.length)return"continue";i.additionalLabels||(i.additionalLabels=[]),i.additionalLabels.push(a.get(0))},o=this;for(var i in this.annotationsLinesMap)n(i)},e.prototype.updateTextStyle=function(){var e=this;if(this.styles){var t=this.$codeArea.find(".hljs:not(.hljs-line-numbers)"),n=t[0],o=t.text().split(/\r\n|\r|\n/g);this.styles.forEach((function(t){JSON.parse(t.target).forEach((function(i){var a=i[0],s=i[1],l=(t.css,t.css&&-1!=t.css.indexOf("font-weight")),d=e.getSubstring(o,a,s);d&&l&&r.a.highlight(n,d,"bold")}))}))}},e.prototype.getSubstring=function(e,t,n){var o=e[t.line],i=e[n.line];if(!o||!i)return"";if(t.line===n.line)return o.substring(t.ch,n.ch);if(n.line>t.line){for(var a=o.substring(t.ch),r=t.line+1;r<n.line-1;r++)a+=e[r];return a+i.substring(0,n.ch)}return""},e}(),b=n(5),k=$("#code-annotation-container"),v=$("#additional-code-annotation-container"),x=$(document),y=$(window);b.a.loadCodeMirrorCode(),b.a.loadHighlightCode(),b.a.loadClipboardCode();var w=new(function(){function e(){this.lineGroupReferenceRegEx=/group([0-9]{1,2}|[A-Z])/,this.annotatedCodeListings=[]}return e.prototype.initialize=function(){var e=this;this.isInVideoMode=!1;var t=$(".listing-container"),n=0,i=$(".code-annotations-overlay-container[data-annotations]").length>0;0===t.length?x.trigger("annotatedListingsLoaded"):o.a.asyncEach(t,(function(o){return e.annotatedCodeListings.push(new f(o,i,(function(){++n>=t.length&&x.trigger("annotatedListingsLoaded")})))}),(function(){}))},e.prototype.clean=function(){this.hideAll(),this.currentAnnotatedListing=null,this.activeCue=null,this.currentPausedAtCueball=null,this.lastPausedAtCueball=null,this.annotatedCodeListings&&this.annotatedCodeListings.length&&this.annotatedCodeListings.forEach((function(e){return e.clean()})),this.annotatedCodeListings=[]},e.prototype.registerGlobalEventHandlers=function(){var e=this;y.on("resizestart",(function(){return e.hideAll()})),x.on("cueballWillBeReached",(function(e,t,n){t.listingContainer.annotatedListing.preselect(n,!1)})),x.on("cueballReached",(function(t,n,o,i){e.currentPausedAtCueball={textFragment:n,cueballReference:i||o},e.lastPausedAtCueball=e.currentPausedAtCueball,e.hasAnnotatedListing(n)&&(n.listingContainer.annotatedListing.goToAnimationStep(o,null==i),null!=i&&n.listingContainer.annotatedListing.preselect(i,!0))})),x.on("runnableScriptEditModeEntered",(function(){return e.hideAll()})),x.on("runnableScriptEditModeLeft",(function(e,t){})),x.on("audioBookCueChange",(function(t){e.activeCue=t})),x.on("mouseup touchstart",(function(t){var n=$(t.target).parents(".listing-container"),o=$(t.target).parents("#play-point");n.length||o.length||e.hideAll()})),x.on("videoModeEntered",(function(){e.isInVideoMode=!0})),x.on("videoModeLeft",(function(){e.isInVideoMode=!1})),x.on("playingTextFragmentChange",(function(){return e.hideAll()}))},e.prototype.hideAll=function(){this.hideAnnotations(),this.clearCodeHighlights()},e.prototype.consumePausedCueball=function(){this.currentPausedAtCueball=null},e.prototype.hideAnnotations=function(){$(".annotation-container.selected").removeClass("selected"),$(".annotation-container.show-tip").removeClass("show-tip"),k.removeClass("show-tip"),v.removeClass("show-tip"),k.removeClass("shown"),k.css("opacity:0"),v.removeClass("shown"),v.css("opacity:0")},e.prototype.clearCodeHighlights=function(){null!=this.currentAnnotatedListing&&(this.currentAnnotatedListing.$listingContainer.find(".listing-line-group").removeClass("selected highlighted pre-selected"),this.currentAnnotatedListing.$listingContainer.find(".hovered").removeClass("hovered"),this.currentAnnotatedListing.$additionalListingContainer&&(this.currentAnnotatedListing.$additionalListingContainer.find(".listing-line-group").removeClass("selected highlighted pre-selected"),this.currentAnnotatedListing.$additionalListingContainer.find(".hovered").removeClass("hovered")))},e.prototype.hasAnnotatedListing=function(e){return!!(e&&e.listingContainer&&e.listingContainer.annotatedListing)},e.prototype.unsubscribeEvents=function(e){e&&e.annotatedListing&&e.annotatedListing.unsubscribeEvents()},e.prototype.getLineGroupReference=function(e){var t=this.getLineGroupClassMatch(e);return t?t[1]:""},e.prototype.getLineGroupClass=function(e){var t=this.getLineGroupClassMatch(e);return t?t[0]:""},e.prototype.getLineGroupClassMatch=function(e){if(!e)return null;var t=e.attr("class").match(this.lineGroupReferenceRegEx);return t&&t.length>=2?t:null},e.prototype.isCurrentlyStoppedCue=function(e){return!(!this.lastPausedAtCueball||!e)&&(e.matchingTextFragment==this.lastPausedAtCueball.textFragment&&e.cueballReference==this.lastPausedAtCueball.cueballReference)},e}());w.registerGlobalEventHandlers();var C=t.a=w},548:function(e,t,n){var o=n(549);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(98)(o,i);o.locals&&(e.exports=o.locals)},549:function(e,t,n){(e.exports=n(97)(!1)).push([e.i,".text-slide-menu{position:fixed;z-index:1007;max-width:100vw;transition:transform 0.35s ease-in-out}.text-slide-menu.text-slide-menu-left{left:0;transform:translateX(-100%)}.text-slide-menu.text-slide-menu-right{right:0;transform:translateX(100%)}.text-slide-menu.text-slide-menu-shown{transform:translateX(0)}\n",""])},555:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(5),i=new(function(){function e(){this.shouldWishListABeShown=!0}return e.prototype.initialize=function(e){this.getWishListManagerSource().then((function(t){return t.WishListManager.initalize(e)}))},e.prototype.clean=function(){this.getWishListManagerSource().then((function(e){return e.WishListManager.clean()}))},e.prototype.addCurrentBookToWishList=function(){this.getWishListManagerSource().then((function(e){return e.WishListManager.addCurrentBookToWishList()}))},e.prototype.getWishListManagerSource=function(){return this.wishListManagerSourcePromise||(this.wishListManagerSourcePromise=o.a.importWebpackModuleWithRetry(this.constructWishListManagerSourcePromise)),this.wishListManagerSourcePromise},e.prototype.constructWishListManagerSourcePromise=function(){return n.e(54).then(n.bind(null,767))},e}())},556:function(e,t,n){var o=n(557);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(98)(o,i);o.locals&&(e.exports=o.locals)},557:function(e,t,n){(e.exports=n(97)(!1)).push([e.i,"#header-notification-container{background-color:#5facbe;line-height:1.8;color:white;text-align:center;margin:0 auto;user-select:none;-webkit-user-select:none}@media screen and (max-width: 689px){#header-notification-container{font-size:0.75rem}}#header-notification-container a{color:white;font-weight:350;display:block;width:100%;font-size:13px;padding:2px}#header-notification-container .action-label{text-decoration:underline;display:inline-block}#header-notification-container .free-preview-notifier{cursor:pointer;font-weight:300;user-select:none;-webkit-user-select:none;background-color:#ffcc00;color:#3c3c3c;transition:background-color 0.5s ease-in;white-space:nowrap;padding:0 1em;overflow:hidden;text-overflow:ellipsis}#header-notification-container .free-preview-notifier.free-preview-starting .free-preview-heading-wrapper{display:flex;justify-content:center}#header-notification-container .free-preview-notifier.free-preview-running{background-color:#5cb85c;color:white;cursor:initial}#header-notification-container .free-preview-notifier spanÂ {font-size:90%;font-weight:300}#header-notification-container .free-preview-notifier i{display:inline-block;margin-left:0.25em}#header-notification-container .free-preview-notifier .free-preview-auto-start-countdown{position:relative;overflow:hidden;display:inline-block;height:1.4em;margin-left:0.3em;font-weight:bold}#header-notification-container .free-preview-notifier .free-preview-count-down-wrapper{transition:transform 1s ease-in-out}#header-notification-container .free-preview-notifier .free-preview-count-down-wrapper.activate-1{transform:translateY(-25%)}#header-notification-container .free-preview-notifier .free-preview-count-down-wrapper.activate-2{transform:translateY(-50%)}#header-notification-container .free-preview-notifier .free-preview-count-down-wrapper.activate-3{transform:translateY(-75%)}#header-notification-container .free-preview-notifier .free-preview-count-down-3{display:block}#header-notification-container .free-preview-notifier .free-preview-count-down-2{display:block}#header-notification-container .free-preview-notifier .free-preview-count-down-1{display:block}.promo-header{padding:0 0.5em;display:flex;align-items:center}.promo-header a{font-weight:normal}.promo-header a:hover{text-decoration:underline}.promo-header .fa{margin:0 0.5em;cursor:pointer}.add-dotd-book-to-cart{cursor:pointer}\n",""])},574:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(5),i=new(function(){function e(){}return e.prototype.getSupportedLanguagesInfo=function(){var e=this;return new Promise((function(t,n){e.getSource().then((function(e){var n=e.TryItManager;return t(n.getSupportedLanguagesInfo())}))}))},e.prototype.executeCode=function(e,t,n,o,i){var a=this;return new Promise((function(r,s){a.getSource().then((function(a){var s=a.TryItManager;return r(s.executeCode(e,t,n,o,i))}))}))},e.prototype.renderTryItCreator=function(e){this.getSource().then((function(t){return t.TryItManager.renderTryItCreator(e)}))},e.prototype.unmountAtNode=function(e){this.getSource().then((function(t){return t.TryItManager.unmountAtNode(e)}))},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=o.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(4),n.e(0),n.e(8),n.e(34)]).then(n.bind(null,768))},e}())},575:function(e,t,n){"use strict";var o=n(0),i=function(){function e(){}return e.prototype.initialize=function(e,t){if(this.book=e,this.bookElement=t,null!=this.bookElement.videos&&0!=this.bookElement.videos.length){for(var n=0,o=this.bookElement.videos;n<o.length;n++){var i=o[n],a=(i.referentItemID||"").split("-"),r=a[0],s=a[1];this.insertVideoNextToParagraph(i.id,r,s,i.videoUrl)}$(document).trigger("videoSectionsInserted")}else $(document).trigger("videoSectionsInserted")},e.prototype.insertVideoNextToParagraph=function(e,t,n,o){var i=$(Mustache.render(a,{id:e,refId:t,videoLocation:o})),r=$("[data-hash='"+n+"']");0==r.length&&(r=$("#"+t));var s=r.closest(".callout-container");s.length>0&&(r=s.next()),i.insertAfter(r),r[0].videoElement=i[0]},e.prototype.clean=function(){this.book=null,this.bookElement=null},e.prototype.addVideo=function(e,t,n){var i=this;o.a.postToOurBackend(o.a.getAbsoluteUrl("api/videos/addVideo"),(function(o){i.insertVideoNextToParagraph(o.id,e,t,n)}),(function(e){alert("Error adding video. Try later")}),{bookShortName:this.book&&this.book.shortName,bookElementShortName:this.bookElement&&this.bookElement.shortName,referentItemID:t?e+"-"+t:e,videoUrl:n})},e.prototype.removeVideo=function(e){o.a.postToOurBackend(o.a.getAbsoluteUrl("api/videos/removeVideo"),(function(t){var n=$("[data-video-id='"+e+"']"),o=n.prev();o&&o.length&&(o[0].videoElement=null),n.remove()}),(function(e){alert("Error removing video. Try later")}),{bookShortName:this.book&&this.book.shortName,videoId:e})},e}();t.a=new i;var a='<div class="browsable-container video-section-container row" data-video-id="{{{id}}}">\n    <div class="video-container flex-video">\n        <video class="section-videos" id="section-video-{{{refId}}}" src="{{{videoLocation}}}" controls="true"></video>\n    </div>\n</div>'},576:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(5),i=new(function(){function e(){}return e.prototype.load=function(e,t,n){void 0===n&&(n=!1),Promise.all([this.getSource()]).then((function(o){o[0].Exercises.initialize(e,t,n)}))},e.prototype.clean=function(){this.sourcePromise&&this.getSource().then((function(e){return e.Exercises.clean()}))},e.prototype.paragraphHasExercise=function(e){var t=this;return new Promise((function(n,o){t.getSource().then((function(t){var o=t.Exercises;return n(o.paragraphHasExercise(e))}))}))},e.prototype.deleteExerciseGroup=function(e){this.getSource().then((function(t){return t.Exercises.deleteExerciseGroup(e)}))},e.prototype.createExerciseGroup=function(e){this.getSource().then((function(t){return t.Exercises.createExerciseGroup(e)}))},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=o.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(3),n.e(4),n.e(7),n.e(8),n.e(19)]).then(n.bind(null,877))},e}())},584:function(e,t,n){"use strict";var o=function(e,t,n,o,i){this.id=e,this.paragraphOrdinal=t,this.paragraphHash=n,this.html=o,this.color=i},i=n(1),a=n(0),r=function(){function e(){}return e.prototype.getTextAddendums=function(e,t){return new Promise((function(n,i){a.a.getFromOurBackend(a.a.getAbsoluteUrl("api/textAddendum/get"),(function(e){e&&0!=e.length?n(e.map((function(e){return new o(e.id,e.paragraphOrdinal,e.paragraphHash,e.html,e.color)}))):n([])}),(function(e){console.log("Error when updating exercise group"),i(e)}),{bookShortName:e,bookElementShortName:t})}))},e.prototype.addTextAddendum=function(e,t,n){return new Promise((function(o,i){a.a.postToOurBackend(a.a.getAbsoluteUrl("api/textAddendum/add"),(function(e){e&&e.id?(n.id=e.id,o(!0)):o(!1)}),(function(e){return o(!1)}),{bookShortName:e,bookElementShortName:t,paragraphOrdinal:n.paragraphOrdinal,paragraphHash:n.paragraphHash,html:n.html,color:n.color})}))},e.prototype.deleteTextAddendum=function(e,t,n){return new Promise((function(o,i){a.a.postToOurBackend(a.a.getAbsoluteUrl("api/textAddendum/delete"),(function(e){return o(!0)}),(function(e){return o(!1)}),{id:n.id,bookShortName:e,bookElementShortName:t})}))},e}(),s=new(function(){function e(){this.textAddendumsPromiseMap={}}return e.prototype.getTextAddendums=function(e,t){var n=this,o=e+"-"+t;return this.textAddendumsPromiseMap[o]?this.textAddendumsPromiseMap[o]:this.textAddendumsPromiseMap[o]=new Promise((function(o,i){n.getAppropriateService().then((function(n){n.getTextAddendums(e,t).then((function(e){return o(e)})).catch((function(e){return i(e)}))})).catch((function(e){return i(e)}))}))},e.prototype.addTextAddendum=function(e,t,n){var o=this;return new Promise((function(i,a){o.getAppropriateService().then((function(o){o.addTextAddendum(e,t,n).then((function(e){return i(e)})).catch((function(e){return a(e)}))})).catch((function(e){return a(e)}))}))},e.prototype.deleteTextAddendum=function(e,t,n){var o=this;return new Promise((function(i,a){o.getAppropriateService().then((function(o){o.deleteTextAddendum(e,t,n).then((function(e){return i(e)})).catch((function(e){return a(e)}))})).catch((function(e){return a(e)}))}))},e.prototype.getAppropriateService=function(){var e=this;return new Promise((function(t,n){i.b.loadDeviceInfo().then((function(n){t(e.getService(n.platform))})).catch((function(e){return n(e)}))}))},e.prototype.getService=function(e){switch(e){case i.a.Browser:return new r;case i.a.Cordova:case i.a.Electron:return new r}},e}()),l=n(57),d=n(4),c=n(9),h=n(3),u=$(document),p=function(){function e(){var e=this;this.$modal=$("#text-addendum-modal"),u.on("modalClosed",(function(){u.off("click","#text-addendum-modal .text-addendum-save-button"),e.$modal.find("textarea").off("change keyup"),e.$modal.find("select").off("change"),e.$modal.off("mouseup touchend selectionchange"),e.$modal.find(".text-addendum-create-link").off("click")}))}return e.prototype.initialize=function(){this.hasBeenInitialized||(this.$modal=$("#text-addendum-modal"),this.$modal.html(g),this.hasBeenInitialized=!0)},e.prototype.show=function(e){var t=this;this.initialize(),this.$modal.find("textarea").val("Enter text/HTML"),c.a.showFoundationModal(this.$modal),u.on("click","#text-addendum-modal .text-addendum-save-button",(function(){var n=$("#text-addendum-modal textarea").val();n&&e&&e(n,t.$modal.find("select").val())})),this.$modal.find("textarea").on("keyup",(function(){t.updatePreview(),t.handlePointerPressEnd()})),this.$modal.find("select").on("change",(function(){return t.updatePreview()})),this.$modal.find(".text-addendum-create-link").on("click",(function(){return t.handleCreateLinkClick()})),this.$modal.on("mouseup touchend selectionchange",(function(e){return t.handlePointerPressEnd()})),this.updatePreview()},e.prototype.hide=function(){c.a.hideFoundationModal(this.$modal)},e.prototype.updatePreview=function(){this.$modal.find(".text-addendum-modal-preview-container").html('<div class="text-addendum-container text-addendum-'+this.$modal.find("select").val()+'">'+(this.$modal.find("textarea").val()||"&nbsp;")+"</div>")},e.prototype.handleCreateLinkClick=function(){var e=this.getCurrentlySelectedText();this.getSelectionStartIndex();if(e){var t=prompt("Enter link");if(t){var n=this.$modal.find("textarea");n.val(n.val().replace(e,'<a href="'+t+'">'+e+"</a>")),this.updatePreview()}}},e.prototype.handlePointerPressEnd=function(){var e=this;return clearTimeout(this.pressEndTimerId),this.pressEndTimerId=h.a.setTimeout((function(){e.hasSelectedText=!!e.getCurrentlySelectedText(),e.$modal.find(".text-addendum-create-link").css("display",e.hasSelectedText?"block":"none")}),200),!0},e.prototype.getCurrentlySelectedText=function(){var e=this.$modal.find("textarea").get(0);return e.value.substring(e.selectionStart,e.selectionEnd)},e.prototype.getSelectionStartIndex=function(){return this.$modal.find("textarea").get(0).selectionStart||0},e}(),g='\n<span class="close-reveal-modal">&times;</span>\n<div class="row"><div class="small-12 columns">&nbsp;</div></div>\n<div class="row">\n    <div class="small-12 columns">    \n        <div class="text-addendum-header-container">\n            <h4>Text addendum</h4>\n            <label> Box color: <br>\n                <select>\n                    <option value="white">white</option>\n                    <option value="red">red</option>\n                    <option value="blue">blue</option>\n                    <option value="yellow">yellow</option>\n                    <option value="green">green</option>\n                </select>\n            </label>\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="small-12 columns">    \n        <textarea rows="4"></textarea>\n        <small>(* select a piece of text to make it a link)</small>\n    </div>\n</div>\n<div class="row">\n    <div class="small-12 columns">\n        <hr>\n        <a href="javascript:void(0)" class="pull-left text-addendum-create-link" style="display: none;">create link</a>\n        <a href="javascript:void(0)" class="pull-right emphasized-button text-addendum-save-button">save</a>\n    </div>\n</div>\n<div class="row">\n    <div class="small-12 columns">\n        Preview\n        <div class="text-addendum-modal-preview-container"></div>\n    </div>\n</div>',m=new p,f=function(){function e(){this.handleDeleteTextAddendumClick=this.handleDeleteTextAddendumClick.bind(this)}return e.prototype.initialize=function(e,t,n){var o=this;this.book=e,this.bookElement=t,this.isEditMode=n,this.isEditMode||this.book.hasTextAddendums?s.getTextAddendums(e.shortName,t.shortName).then((function(e){o.textAddendums=e,o.createTextAddendums(),$(document).trigger("initialTextAddendumsCreated")})).catch((function(){$(document).trigger("initialTextAddendumsCreated")})):$(document).trigger("initialTextAddendumsCreated"),this.isEditMode&&$(document).on("click",".text-addendum-container .text-addendum-delete-button",this.handleDeleteTextAddendumClick)},e.prototype.clean=function(){this.book=null,this.bookElement=null,this.isEditMode=!1,this.textAddendums=null,$(document).off("click",".text-addendum-container .text-addendum-delete-button",this.handleDeleteTextAddendumClick)},e.prototype.createTextAddendums=function(){var e=this;this.textAddendums&&this.textAddendums.length&&this.textAddendums.forEach((function(t){return e.createTextAddendum(t)}))},e.prototype.createTextAddendum=function(e){if(null!=e){var t=e.paragraphHash&&$(".readable-text[data-hash='"+e.paragraphHash+"']");t||(t=$(".readable-text[refid='"+e.paragraphOrdinal+"']")),t&&t.length&&(t.after('<div class="text-addendum-container text-addendum-'+e.color+'" data-id="'+e.id+'">\n                                '+e.html+'\n                                <span class="text-addendum-delete-button">\n                                    <i class="fa fa-2x fa-trash"></i>\n                                </span>\n                            </div>'),$(document).trigger("textLayoutModified"))}},e.prototype.addNewTextAddendum=function(e,t){var n=this;null==this.textAddendums&&(this.textAddendums=[]),m.show((function(i,a){m.hide();var r=new o(-1,e,t,i,a);s.addTextAddendum(n.book.shortName,n.bookElement.shortName,r).then((function(e){e?(n.textAddendums.push(r),n.createTextAddendum(r)):l.a.showNotification("Error saving. Try later.")})).catch((function(e){l.a.showNotification("Error saving. Try later.")}))}))},e.prototype.removeTextAddendum=function(e,t,n){var o=this;if(this.textAddendums&&this.textAddendums.length){var i=null;e&&(i=this.textAddendums.find((function(t){return t.id==e}))),!i&&n&&(i=this.textAddendums.find((function(e){return e.paragraphHash==n}))),!i&&t&&(i=this.textAddendums.find((function(e){return e.paragraphOrdinal==t}))),i&&s.deleteTextAddendum(this.book.shortName,this.bookElement.shortName,i).then((function(e){e?(d.a.removeItemFromArray(o.textAddendums,i),$(".text-addendum-container[data-id='"+i.id+"']").remove(),$(document).trigger("textLayoutModified")):l.a.showNotification("Error saving. Try later.")})).catch((function(e){return l.a.showNotification("Error saving. Try later.")}))}},e.prototype.paragraphHasTextAddendum=function(e,t){return null!=this.textAddendums.find((function(n){return n.paragraphHash==t||n.paragraphOrdinal==e}))},e.prototype.handleDeleteTextAddendumClick=function(e){var t=$(e.target).closest(".text-addendum-container"),n=parseInt(t.attr("data-id"));n&&confirm("Delete?")&&this.removeTextAddendum(n)},e}();t.a=new f},615:function(e,t,n){"use strict";var o=n(3),i=n(128),a=n(1),r=n(465),s=n(631),l=n(464),d=n(67),c=n(9),h=n(79),u=n(4),p=n(431),g=$(document),m=a.b.isTouchDevice(),f=function(){function e(){var e=this;this.isTextSelectionActionEnabled=!0,this.handlePointerPressStart=this.handlePointerPressStart.bind(this),this.handlePointerPressEnd=this.handlePointerPressEnd.bind(this),this.handlePointerOnHover=this.handlePointerOnHover.bind(this),g.on("requestShowTooltip",(function(){return e.showTooltip()}))}return e.prototype.initializeUiElementsIfNecessary=function(){if(null==this.$menuReferenceElement||0==this.$menuReferenceElement.length){this.$menuReferenceElement=$("#text-selection-menu-reference-node");try{this.$menuReferenceElement.foundation("tooltip")}catch(e){}if(window.Foundation){var e=window.Foundation.libs.tooltip.getTip(this.$menuReferenceElement);e&&e.length&&(this.initialTooltipTitle=e.html())}}},e.prototype.initialize=function(e,t){this.currentBook=e,this.currentBookElement=t,this.currentBookElement.reviewVersion>0||(this.initializeUiElementsIfNecessary(),g.on("mousedown touchstart",this.handlePointerPressStart),a.b.isTouchDevice()?o.a.onEventWithCooldown(g,"mouseup touchend selectionchange",this.handlePointerPressEnd):o.a.onEventWithCooldown(g,"mouseup touchend",this.handlePointerPressEnd))},e.prototype.clean=function(){this.$selectedFragments=[],this.currentBook=null,this.currentBookElement=null,g.off("mousedown touchstart",this.handlePointerPressStart),g.off("mouseup touchend selectionchange",this.handlePointerPressEnd);try{this.hideToolTips()}catch(e){}$(".scrambled").off()},e.prototype.handlePointerOnHover=function(e){if(!window.getSelection().toString().trim().length){var t=$(e);this.$selectedFragments&&0!==this.$selectedFragments.length&&this.$selectedFragments.find((function(e){return e.attr("refid")==t.attr("refid")}))||(this.$selectedFragments=[t])}},e.prototype.handlePointerPressStart=function(e){var t=this,n=$(e.target);if(n.closest(".tooltip").length<=0)this.hideTextSelectionTooltip();else if(this.isTextSelectionActionEnabled){if(n.is(".note-button"))this.highlightCurrentNoteSelection(),this.annotateCurrentSelection(),this.hideToolTips(),this.isTextSelectionActionEnabled=!1;else if(n.is(".highlight-button"))this.highlightCurrentSelection(),this.hideToolTips(),this.isTextSelectionActionEnabled=!1;else if(n.is(".bookmark-button"))this.bookmarkCurrentSelection(),this.hideToolTips(),this.isTextSelectionActionEnabled=!1;else if(n.is(".link-button"))this.hideToolTips(),this.currentBook&&this.$selectedFragments&&(g.trigger("paragraphsSelected",[this.$selectedFragments]),s.a.createPointingSelection(this.currentBook,this.currentBookElement,this.$selectedFragments)),this.isTextSelectionActionEnabled=!1;else if(n.is(".forum-button")){if(this.hideToolTips(),this.currentBook&&this.$selectedFragments)(i=this.$selectedFragments[0])&&i[0]&&($(i[0].paragraphBubble).add("activated"),d.a.requestOpenParagraphSideMenu(i[0].paragraphBubble));this.isTextSelectionActionEnabled=!1}else if(n.is(".error-report")){var i;if(this.hideToolTips(),this.currentBook&&this.$selectedFragments)if((i=this.$selectedFragments[0])&&i[0]){var a=$("#modal-feedback");h.a.getSource().then((function(){o.a.setTimeout((function(){return c.a.showFoundationModal(a)}),300),a.find("#feedback-subject").val("Content Error Report").change(),a.find("#feedback-content").val("Found an error:\n"+t.currentTextSelection),a.find(".paragraph-location-input").val(t.$selectedFragments[0].attr("data-hash")||t.$selectedFragments[0].attr("refId"))}))}this.isTextSelectionActionEnabled=!1}this.isTextSelectionActionEnabled||setTimeout((function(){t.isTextSelectionActionEnabled=!0}),300)}},e.prototype.handlePointerPressEnd=function(e){var t=this,n=null,i=null,a=!1;$(e.target).closest("#text-selection-menu-reference-node").length||o.a.setTimeout((function(){var e=window.getSelection();if(0!==e.rangeCount){var o=e.getRangeAt(0);if(n=$(o.startContainer).parents(".readable-text"),i=$(o.endContainer).parents(".readable-text"),0===o.endOffset&&n.attr("id")!=i.attr("id")&&(i=i.prev()),0!==n.length){t.currentTextSelection=e.toString().trim(),t.currentTextSelectionStartOffset=-1,a=t.currentTextSelection.length>3;var r=parseInt(n.attr("id")),s=parseInt(i.attr("id"));if(!Number.isNaN(r)&&!Number.isNaN(s)){t.$selectedFragments=[];for(var l=r;l<=s;l++){var d=$(document.getElementById(l+""));d.length&&t.$selectedFragments.push(d)}r==s&&u.a.countOccurences(t.currentTextSelection,n.text())>1&&(t.currentTextSelectionStartOffset=t.getCurrentlySelectedOffset()),!!!t.$selectedFragments.find((function(e){return e.is(".scrambled, .temp-unscrambled")}))&&a&&t.showTooltip(t.isBackwardSelection(e))}}}}),150)},e.prototype.getCurrentlySelectedOffset=function(){var e=window.getSelection(),t=e.anchorNode,n=c.a.getFirstBlockAncestor(t);if(null==n||null==t)return-1;for(var o=c.a.getAllDescendantTextNodes(n),i=e.anchorOffset,a=0;a<o.length;a++){var r=o[a];if(r==t)return i;i+=r.textContent.length}return-1},e.prototype.isBackwardSelection=function(e){var t=!1;try{var n=e.anchorNode.compareDocumentPosition(e.focusNode);(!n&&e.anchorOffset>e.focusOffset||n===Node.DOCUMENT_POSITION_PRECEDING)&&(t=!0)}catch(e){console.log("Error when determining backward selection",e)}return t},e.prototype.showTooltip=function(e){if(void 0===e&&(e=!1),window.Foundation){var t,n=this.$menuReferenceElement;t=window.getSelection().getRangeAt(0).getBoundingClientRect();var o=(e&&!m?t.top:t.bottom)+g.scrollTop()+(e?60:40)+(m?20:0),i=t.left+t.width/2,a=$(window).width();i+220>=a&&(i-=Math.abs(a-i-220)),i<0&&(i=0),n.css({top:o,left:i});var r=window.Foundation.libs.tooltip.getTip(n);if(0==r.length){if(console.log("Cannot find text selection tip:",this.initialTooltipTitle),!this.initialTooltipTitle)return;if(n.attr("title",this.initialTooltipTitle),window.Foundation.libs.tooltip.create(n),null==(r=window.Foundation.libs.tooltip.getTip(n)))return}r.velocity({translateY:5},{duration:0}),r.removeClass("tip-top tip-bottom"),r.addClass("tip-bottom"),window.Foundation.libs.tooltip.reposition(n,r,n.attr("class")),r.stop(),r.velocity("fadeIn"),r.velocity({translateY:0},{duration:100}),g.trigger("tooltipOpened")}},e.prototype.hideToolTips=function(){this.hideTextSelectionTooltip()},e.prototype.hideTextSelectionTooltip=function(){window.Foundation&&(window.Foundation.libs.tooltip.hide(this.$menuReferenceElement),g.trigger("tooltipClosed"))},e.prototype.highlightCurrentNoteSelection=function(){this.$selectedFragments[0]&&0!=this.$selectedFragments[0].length&&this.currentTextSelection&&r.a.highlightNoteSelection(this.$selectedFragments[0],this.currentTextSelection)},e.prototype.highlightCurrentSelection=function(){this.$selectedFragments[0]&&0!=this.$selectedFragments[0].length&&this.currentTextSelection&&(r.a.createHighlightSelection(this.$selectedFragments,this.currentTextSelection,this.currentTextSelectionStartOffset),this.clearTextSelection())},e.prototype.bookmarkCurrentSelection=function(){this.$selectedFragments[0]&&0!=this.$selectedFragments[0].length&&this.currentTextSelection&&(p.a.toggleBookmark(this.$selectedFragments[0][0]),this.clearTextSelection())},e.prototype.annotateCurrentSelection=function(){this.$selectedFragments[0]&&0!=this.$selectedFragments[0].length&&l.a.annotate(this.$selectedFragments[0].get(0))},e.prototype.getCurrentlySelectedParagraphSimpleLink=function(){if(this.$selectedFragments[0]){var e=this.$selectedFragments[0].attr("refid");if(this.currentBook&&this.currentBookElement)return i.a.formLink(this.currentBook,this.currentBookElement,e)}},e.prototype.getCurrentSelectionReadableText=function(){return $(window.getSelection().anchorNode).parents(".readable-text")},e.prototype.clearTextSelection=function(){window.getSelection&&(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges())},e}();t.a=new f},616:function(e,t,n){var o=n(719);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(98)(o,i);o.locals&&(e.exports=o.locals)},631:function(e,t,n){"use strict";var o,i,a=n(357),r=n(360),s=n(3),l=n(15),d=n(6),c=n(57),h=n(0),u=n(128),p=new(function(){function e(){}return e.prototype.createSimpleLink=function(e,t,n){return""},e.prototype.createPointingLink=function(e,t,n,o){void 0===o&&(o=!0);var i=this.createSimpleLink(e,t,n);return new Promise((function(a,r){h.a.getFromOurBackend(h.a.getAbsoluteUrl("api/pointing/create"),(function(e){e.link=u.a.adjustBookLink(e.link||"");var t=h.a.getClientAbsoluteUrl(e.link);o?$.ajax({url:"https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyBX77QKufqi8RxQeDQ4ziGbcl1XuZ9Uayw",method:"post",contentType:"application/json; charset=utf-8",data:'{ longUrl: "'+t+'"}'}).done((function(e){a(e&&e.id?e.id:t)})).fail((function(e){a(t)})):a(t)}),(function(e){console.log("Error when producing the pointing link",e),a(i)}),{bookShortName:e.shortName,bookElementShortName:t.shortName,meapVersion:t.meapVersion,paragraphIds:n.join(",")})}))},e}()),g=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=$(document),f=$(window);!function(e){e[e.Default=0]="Default",e[e.DisplayingActionResult=1]="DisplayingActionResult"}(i||(i={}));var b=function(){function e(){this.dragStartPosition=0,this.$draggedPoint=null,this.pointingInfoBox=document.getElementById("pointing-info-box"),null==this.pointingInfoBox&&($(document.body).append('<div id="pointing-info-box"></div>'),this.pointingInfoBox=document.getElementById("pointing-info-box")),this.$pointingInfoBox=$(this.pointingInfoBox),this.handleBoxClose=this.handleBoxClose.bind(this),this.handleParagraphClick=this.handleParagraphClick.bind(this),this.handleActionClick=this.handleActionClick.bind(this),this.handlePositionPointMouseDown=this.handlePositionPointMouseDown.bind(this),this.handleDocumentMouseMove=this.handleDocumentMouseMove.bind(this),this.handleDocumentMouseUp=this.handleDocumentMouseUp.bind(this),this.handleDragPaused=this.handleDragPaused.bind(this),this.handleResizeStop=this.handleResizeStop.bind(this),m.on("mouseup",this.handleDocumentMouseUp)}return e.prototype.initialize=function(){this.clean()},e.prototype.clean=function(){this.startSectionParagraph=null,this.endSectionParagraph=null,this.$draggedPoint=null,this.book=null,this.bookElement=null,this.error="",this.pointingLink="",this.state=i.Default,this.renderCurrentState(),this.$pointingInfoBox.is(".shown")&&this.hideBox(),m.off("mousemove",this.handleDocumentMouseMove),f.off("resizestop",this.handleResizeStop),clearTimeout(this.dragPauseTimeoutId)},e.prototype.onStartParagraphSelected=function(e){this.startSectionParagraph=e,this.renderCurrentState()},e.prototype.onEndParagraphSelected=function(e){this.endSectionParagraph=e,this.renderCurrentState()},e.prototype.createPointingSelection=function(e,t,n){if(n&&n.length){this.startSectionParagraph=n[0][0],this.endSectionParagraph=n[n.length-1][0],this.$pointingStartPoint=$("#pointing-start-point"),this.$pointingEndPoint=$("#pointing-end-point"),this.$pointingStartPoint.off("mousedown",this.handlePositionPointMouseDown),this.$pointingEndPoint.off("mousedown",this.handlePositionPointMouseDown),this.$pointingStartPoint.on("mousedown",this.handlePositionPointMouseDown),this.$pointingEndPoint.on("mousedown",this.handlePositionPointMouseDown);var o=l.a.getTextFragmentElements();o&&o[o.length-1]?this.lastParagraphId=o[o.length-1].id:this.lastParagraphId=1e3,this.book=e,this.bookElement=t,this.state=i.Default,this.error="",this.pointingLink="",this.renderCurrentState(),this.showBox(),this.makeParagraphsClickable()}},e.prototype.handlePositionPointMouseDown=function(e){var t=$(e.currentTarget);return this.$draggedPoint=t,m.on("mousemove",this.handleDocumentMouseMove),this.dragStartPosition=e.pageY,e.preventDefault(),e.stopImmediatePropagation(),!1},e.prototype.handleDocumentMouseMove=function(e){if(this.$draggedPoint){clearTimeout(this.dragPauseTimeoutId);var t=e.pageY-this.dragStartPosition,n=d.a.getComputedTranslateY(this.$draggedPoint[0]);this.$draggedPoint.css("transform","translateY("+(n+t)+"px)"),this.dragStartPosition=e.pageY,this.dragPauseTimeoutId=setTimeout(this.handleDragPaused,100)}},e.prototype.handleDocumentMouseUp=function(e){m.off("mousemove",this.handleDocumentMouseMove),this.handleDragPaused(e,!0),this.dragStartPosition=0,this.$draggedPoint=null},e.prototype.handleDragPaused=function(e,t){if(this.$draggedPoint){var n=$(this.startSectionParagraph),o=$(this.endSectionParagraph),a=this.$draggedPoint.is("#pointing-start-point"),r=(a?this.startSectionParagraph:this.endSectionParagraph,d.a.getComputedTranslateY(this.$draggedPoint[0])),s=this.getStartIconPosition(),l=this.getEndIconPosition(),c=parseInt(n.attr("id")),h=parseInt(o.attr("id")),u=null;if(r<s)for(var p=c;p>=0;p--){var g=document.getElementById(p+"");if(this.isReferentParagraph(g,r)){u=g;break}}else if(r>l){var m=this.lastParagraphId;for(p=h;p<=m;p++){g=document.getElementById(p+"");if(this.isReferentParagraph(g,r)){u=g;break}}}else for(p=c;p<=h;p++){g=document.getElementById(p+"");if(this.isReferentParagraph(g,r)){u=g;break}}if(u){var f=parseInt(u.id);a?f<=h?this.startSectionParagraph=u:(this.startSectionParagraph=this.endSectionParagraph,this.endSectionParagraph=u):f>=c?this.endSectionParagraph=u:(this.endSectionParagraph=this.startSectionParagraph,this.startSectionParagraph=u),!0===t?(this.error="",this.state=i.Default,this.pointingLink="",this.renderCurrentState()):this.highlightSelectedParagraphs()}else!0===t&&(this.error="",this.state=i.Default,this.pointingLink="",this.renderStartEndIcons())}},e.prototype.handleResizeStop=function(){this.$pointingInfoBox&&this.$pointingInfoBox.is(".shown")&&this.renderStartEndIcons()},e.prototype.isReferentParagraph=function(e,t){if(!e)return!1;var n=this.getStartIconPositionForParagraph(e),o=this.getEndIconPositionForParagraph(e);return n<=t&&t<=o},e.prototype.renderCurrentState=function(){(this.startSectionParagraph||this.endSectionParagraph)&&(this.highlightSelectedParagraphs(),this.renderStartEndIcons(),r.render(a.createElement(k,{startParagraph:this.startSectionParagraph,endParagraph:this.endSectionParagraph,state:this.state,error:this.error,pointingLink:this.pointingLink,onClose:this.handleBoxClose,onActionClick:this.handleActionClick}),this.pointingInfoBox))},e.prototype.hideBox=function(e){var t=this;f.off("resizestop",this.handleResizeStop),this.$pointingInfoBox.removeClass("shown"),this.$pointingStartPoint.removeClass("shown"),this.$pointingEndPoint.removeClass("shown"),s.a.setTimeout((function(){r.unmountComponentAtNode(t.pointingInfoBox),t.$pointingInfoBox.css("display","none"),e&&e()}),250)},e.prototype.showBox=function(){this.renderCurrentState(),this.$pointingInfoBox.css("display","block"),this.$pointingInfoBox.addClass("shown"),f.off("resizestop",this.handleResizeStop),f.on("resizestop",this.handleResizeStop)},e.prototype.handleBoxClose=function(){var e=this;this.unmakeParagraphsClickable(),$(".paragraph-selected").removeClass("paragraph-selected"),this.hideBox((function(){return e.clean()}))},e.prototype.makeParagraphsClickable=function(){$(".readable-text").addClass("clickable"),m.off("click",".readable-text",this.handleParagraphClick),m.on("click",".readable-text",this.handleParagraphClick)},e.prototype.unmakeParagraphsClickable=function(){$(".readable-text").removeClass("clickable"),m.off("click",".readable-text",this.handleParagraphClick)},e.prototype.handleParagraphClick=function(e){var t=e.currentTarget;if(null!=this.startSectionParagraph&&null!=this.endSectionParagraph){var n=parseInt(t.id),o=parseInt(this.startSectionParagraph.id),a=parseInt(this.endSectionParagraph.id),r=!1;return o+1!=a||n!==o&&n!==a?n===o||n===a?(this.startSectionParagraph=t,this.endSectionParagraph=t,r=!1):(n<=o&&(this.startSectionParagraph=t,r=!1),n>=a&&(this.endSectionParagraph=t,r=!1)):(this.startSectionParagraph=t,this.endSectionParagraph=t,r=!1),o<n&&n<a&&(Math.abs(o-n)<Math.abs(a-n)?(this.startSectionParagraph=t,r=!1):(this.endSectionParagraph=t,r=!1)),r&&(this.state=i.Default,this.error="",this.pointingLink=""),this.renderCurrentState(),e.preventDefault(),e.stopImmediatePropagation(),!1}},e.prototype.handleActionClick=function(){var e=this;this.error="",this.pointingLink="",this.unmakeParagraphsClickable(),this.state=i.DisplayingActionResult,p.createPointingLink(this.book,this.bookElement,this.getSelectedParagraphs().map((function(e){return e.attr("id")})),!1).then((function(t){t=t||"",e.pointingLink=t,e.renderCurrentState()})).catch((function(t){e.error="Error when creating pointing link",e.pointingLink="",e.renderCurrentState()})),this.renderCurrentState()},e.prototype.highlightSelectedParagraphs=function(){$(".paragraph-selected").removeClass("paragraph-selected"),this.getSelectedParagraphs().forEach((function(e){return e.addClass("paragraph-selected")}))},e.prototype.renderStartEndIcons=function(){this.$pointingStartPoint.addClass("shown"),this.$pointingEndPoint.addClass("shown");$(this.startSectionParagraph),$(this.endSectionParagraph);this.$pointingStartPoint.is(".velocity-animating")||(this.$pointingStartPoint.velocity({translateY:[this.getStartIconPosition(),d.a.getComputedTranslateY(this.$pointingStartPoint[0])]},250),this.$pointingEndPoint.velocity({translateY:[this.getEndIconPosition(),d.a.getComputedTranslateY(this.$pointingEndPoint[0])]},250))},e.prototype.getStartIconPosition=function(){return this.getStartIconPositionForParagraph(this.startSectionParagraph)},e.prototype.getStartIconPositionForParagraph=function(e){return l.a.getTextElementPositionPointTop($(e))-this.$pointingStartPoint.height()/2},e.prototype.getEndIconPosition=function(){return this.getEndIconPositionForParagraph(this.endSectionParagraph)},e.prototype.getEndIconPositionForParagraph=function(e){var t=$(e);return l.a.getTextElementPositionPointTop(t)+t.height()-.4*this.$pointingEndPoint.height()},e.prototype.getSelectedParagraphs=function(){if(this.startSectionParagraph||this.endSectionParagraph){if(this.startSectionParagraph&&this.endSectionParagraph){var e=parseInt(this.startSectionParagraph.id),t=parseInt(this.endSectionParagraph.id);if(Number.isNaN(e)||Number.isNaN(t))return[];for(var n=[],o=e;o<=t;o++){var i=document.getElementById(o+"");i&&n.push($(i))}return n}return this.startSectionParagraph&&!this.endSectionParagraph?[$(this.startSectionParagraph)]:!this.startSectionParagraph&&this.endSectionParagraph?[$(this.endSectionParagraph)]:(console.log("Shouldn't be here"),[])}return[]},e}(),k=function(e){function t(t){var n=e.call(this,t)||this;return n.handleActionClick=n.handleActionClick.bind(n),n.handleCopyToCliboardElementCreated=n.handleCopyToCliboardElementCreated.bind(n),n.handleCloseClick=n.handleCloseClick.bind(n),n}return g(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.startParagraph!==e.startParagraph||this.props.endParagraph!==e.endParagraph||this.props.state!==e.state||this.props.error!==e.error||this.props.pointingLink!==e.pointingLink},t.prototype.render=function(){return a.createElement("div",null,a.createElement("div",{className:"pointing-info-left-container"},this.renderPointingInfoLeftContent()),a.createElement("div",{className:"pointing-info-middle-container"},this.renderPoingintIfoMiddleContent()),a.createElement("div",{className:"pointing-info-right-container"},a.createElement("i",{className:"fa fa-close",onClick:this.handleCloseClick})))},t.prototype.renderPointingInfoLeftContent=function(){return this.props.state===i.Default?a.createElement("i",{className:"fa fa-fw fa-link","aria-hidden":"true",title:"create link",onClick:this.handleActionClick}):this.props.error?a.createElement("i",{className:"fa fa-fw fa-undo","aria-hidden":"true",title:"try again",onClick:this.handleActionClick}):this.props.pointingLink?a.createElement("i",{className:"fa fa-fw fa-clipboard copy-to-clipboard",title:"copy to clipboard","aria-hidden":"true",ref:this.handleCopyToCliboardElementCreated}):a.createElement("i",{className:"fa fa-fw fa-spinner fa-spin",title:"loading...","aria-hidden":"true"})},t.prototype.renderPoingintIfoMiddleContent=function(){return this.props.state===i.Default?a.createElement("a",{href:"javascript:void(0)",onClick:this.handleActionClick},"create link"):this.props.error?a.createElement("span",{className:"error-message"}," ",this.props.error," "):this.props.pointingLink?a.createElement("input",{readOnly:!0,type:"text",value:this.props.pointingLink,ref:function(e){return e&&e.select&&e.select()}}):a.createElement("span",null,"Creating link ...")},t.prototype.handleCloseClick=function(){this.props.onClose&&this.props.onClose()},t.prototype.handleActionClick=function(){this.props.onActionClick&&this.props.onActionClick()},t.prototype.handleCopyToCliboardElementCreated=function(){var e=this,t=new window.Clipboard("#pointing-info-box .copy-to-clipboard",{text:function(){return e.props.pointingLink}});t.on("success",(function(e){return c.a.showTemporaryNotification("Link copied to clipboard")})),t.on("error",(function(e){c.a.showTemporaryNotification("Unfortunatly your environment doesn't support copying to clipboard")}))},t}(a.Component);t.a=new b},634:function(e,t,n){"use strict";var o=n(3),i=n(18),a=n(73),r=n(7),s=n(1),l=$(window),d=$(document),c=function(){function e(){var e=this;this.noOfUnsyncedItems=0,this.noOfUnsyncedItemsLimit=5,this.isDataSynced=!0,this.progressMap={},d.on("readableTextListened",(function(t,n){return e.handleParagraphListened(n)})),d.on("readableElementScrolled",(function(t,n){return e.handleParagraphScrolled(n)})),l.on("beforeunload",(function(){e.isDataSynced||e.storeProgress(!0)})),d.on("progressSavedRequested",(function(){null!=e.bookElement&&(e.isDataSynced||e.storeProgress(!0))}))}return e.prototype.initialize=function(e,t){this.clean(),this.book=e,this.bookElement=t,this.fetchAudioProgress(),this.periodicallySyncProgressIfNecessary()},e.prototype.clean=function(){this.isDataSynced||this.storeProgressIfBookChanges(),this.book=null,this.bookElement=null,this.completedContentItemIDs=null,this.lastContentItemID=null,this.noOfUnsyncedItems=0,this.isDataSynced=!0},e.prototype.storeProgressIfBookChanges=function(){if(r.a.isCurrentlyLoggedIn()){this.updateInternalProgressCache();var e=null!=this.book?this.book.shortName:"",t=null!=this.book?this.book.slug:"",n=this.bookElement,o=this.completedContentItemIDs,s=this.lastContentItemID;setTimeout((function(){var r=i.a.getCurrentRouteInfo(),l=null==r;l||(l=r.book!==e&&r.book!==t),l&&a.a.storeProgress(n,o,s,!1)}),250)}},e.prototype.periodicallySyncProgressIfNecessary=function(){var e=this;o.a.setTimeout((function(){e.isDataSynced||(e.storeProgress(),e.isDataSynced=!0),e.periodicallySyncProgressIfNecessary()}),6e4*(s.b.isApp()?1:5))},e.prototype.storeProgress=function(e){void 0===e&&(e=!1),r.a.isCurrentlyLoggedIn()&&(this.updateInternalProgressCache(),a.a.storeProgress(this.bookElement,this.completedContentItemIDs,this.lastContentItemID,e))},e.prototype.fetchAudioProgress=function(){var e=this;this.book&&this.book.userOwnsBook&&this.book.userOwnsAudio&&this.book.hasAudio&&r.a.isCurrentlyLoggedIn()?a.a.fetchAudioProgress(this.bookElement).then((function(t){t||(t={}),e.completedContentItemIDs=t,e.lastContentItemID=e.getLastCompletedContentItemId(t),d.trigger("progressLoaded",t)})).catch((function(e){return d.trigger("progressLoaded",{})})):d.trigger("progressLoaded",{})},e.prototype.syncData=function(){this.timerId=null,this.isDataSynced||(this.noOfUnsyncedItems++,this.noOfUnsyncedItems>=this.noOfUnsyncedItemsLimit&&(this.storeProgress(),this.noOfUnsyncedItems=0,this.isDataSynced=!0))},e.prototype.handleParagraphListened=function(e){var t=this;if(this.completedContentItemIDs&&this.book&&this.book.userOwnsBook&&this.book.userOwnsAudio&&e){if(this.completedContentItemIDs&&!this.completedContentItemIDs[e]&&(this.completedContentItemIDs[e]=1,this.isDataSynced=!1),this.lastContentItemID!=e)$(document.getElementById(e)).is(".readable-text")&&(this.lastContentItemID=e,this.isDataSynced=!1);this.timerId||(this.timerId=o.a.setTimeout((function(){return t.syncData()}),1e3))}},e.prototype.handleParagraphScrolled=function(e){this.book&&e&&(this.book.lastBookElementItem=e,this.lastContentItemID=e,this.isDataSynced=!1)},e.prototype.getLastCompletedContentItemId=function(e){if(!e)return"";try{var t=-1;for(var n in e)if(e.hasOwnProperty(n)){var o=parseInt(n);!isNaN(o)&&o>t&&(t=o)}return-1!=t?t:""}catch(e){return""}},e.prototype.updateInternalProgressCache=function(){this.progressMap[this.book.shortName]={bookElement:this.bookElement.shortName,position:this.lastContentItemID,lastAccessTime:Date.now(),meapVersion:this.bookElement.meapVersion}},e}();t.a=new c},708:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o='\n<div id="text-addendum-modal" class="reveal-modal" data-reveal data-options="close_on_background_click: false; close_on_esc:false;"></div>\n<div id="pointing-modal" class="reveal-modal" data-reveal>\n    <span class="close-reveal-modal">&times;</span>\n    \n    <div class="row">\n        <div class="small-12 columns">\n            <h3 class="pointing-modal-title">Pointing</h3>\n            <div class="pointing-modal-message">\n                You can share this paragraph with anyone by using the following link:\n            </div>\n            <div class="pointing-modal-input-container">\n                <input type="text" class="pointing-modal-textbox" autocorrect="off" autocapitalize="off" spellcheck="false"/>\n                <a href="javascript:void(0)" data-tooltip class="button-copy button radius">\n                    <span class="show-medium-up">copy</span>\n                    <i class="fa fa-clipboard show-small" aria-hidden="true"></i>\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="video-mode-overlay">\n    <div style="display:flex; flex-direction: column" class="video-mode-content-wrapper">\n        <div class="video-mode-title-container"></div>\n        <div style="display: flex; align-items: center; flex-grow: 1; height: 100%">\n            <div class="video-mode-content-container"></div>\n            <div style="flex-grow: 1; flex-basis: 40%" class="video-mode-text-content-container"></div>\n        </div>\n    </div>\n    <div id="additional-code-annotation-container" lang="en">\n        <div class="annotation-description"></div>\n    </div>\n    <div class="track-point-wrapper" id="additional-listing-play-point">\n        <div class="track-point track-point-play">\n            <i class="icon-i-play-triangle"></i>\n        </div>\n    </div>\n</div>\n<div id="volume-menu" class="slide-in-menu closed">\n    <div class="slide-in-menu-container">\n        <div id="volume-menu-container" unselectable="on" onselectstart="return false;">\n            <div class="volume-line-container">\n                <div class="volume-line">\n                    <div class="volume-line-full"></div>\n                </div>\n                <div class="volume-control-current-position-container">\n                    <div class="toolbar-current-position-outer-point">\n                        <div class="toolbar-current-position-inner-point"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="text-addons-menu" class="slide-in-menu closed">\n    <div class="slide-in-menu-container">\n        <div class="tab-title-container">\n            <div class="tab-title selected highlights-tab" style="margin-right:3px;"><i class="highlight-icon-font icon-highlighter-full"></i> highlights</div>\n            <div class="tab-title selected bookmarks-tab" style="margin-right:3px;"><i class="fa fa-bookmark"></i> bookmarks</div>\n            <div class="tab-title selected notes-tab"><i class="fa fa-sticky-note"></i> <span class="notes-tab-title">notes</span></div>\n        </div>\n        <div class="search-input-container">\n            <input type="text" class="search-input" placeholder="filter" list="reviewer-list">\n            <datalist id="reviewer-list"></datalist>\n            <span class="sort-command-container">\n                <a href="javascript:void(0)" class="sort-by-time-button selected"><i class="fa fa-long-arrow-down"></i><i class="fa fa-clock-o"></i></a>\n                <a href="javascript:void(0)" class="sort-by-book-button"><i class="fa fa-sort-numeric-asc"></i></a>\n            </span>\n        </div>\n        <div class="items-container">\n            <ul></ul>\n        </div>\n        <div>\n            <ul id="text-addons-pagination"></ul>\n        </div>\n    </div>\n</div>\n\n<div id="newest-edition-box" style="display:none;">\n    <a href="" class="newest-edition-available-link">\n        <div class="newest-edition-available-heading">new edition available</div>\n        <div class="newest-edition-available-book-title"></div>\n        <div class="newest-edition-available-this-included">This edition is included with the purchase of the revised book.</div>\n    </a>\n</div>\n<div id="add-to-cart-box"></div>\n<div id="free-ebooks-upsell-root" style="display:none">\n      <div class="free-ebooks-upsell-close"><i class="fa fa-close close-icon" aria-hidden="true"></i></div>\n      <div class="free-ebooks-upsell-title">related <span>products</span></div>\n      <div class="free-ebooks-upsell-carausel"></div>\n  </div>\n  <div id="link-preview-popup" class="closed" style="display:none">\n      <div class="arrow-up"></div>\n      <div class="chapter-preview-container">\n          <img class="book-cover" src="'+n(0).a.getLivebookCdn()+'assets/images/cover.png" alt="link book cover"/>\n          <span class="chapter-preview-title"></span>\n          <span class="chapter-preview-paragraphs-container"></span>\n      </div>\n      <div class="browsable-preview-container">\n      </div>\n      <div class="arrow-down"></div>\n  </div>\n  <div id="notes-menu" class="closed">\n      <span class="notes-menu-heading">notes</span>\n      <span class="notes-menu-close"><i class="fa fa-close"/></span>\n      <ul class="notes-list"></ul>\n      <textarea id="note-input-box" type="text" placeholder="new note..."></textarea>\n      <a href="javascript:void(0)" id="add-note-button" class="button main-action"> add note </a>\n  </div>\n  <div id="code-annotation-container" lang="en">\n      <div class="annotation-description"></div>\n  </div>\n  <div id="highlight-tooltip-menu-reference-node" class="highlight-tooltip-reference-node tip-top radius" data-tooltip aria-haspopup="true"\n        title="<div class=\'highlight-tooltip-container\'><i class=\'color-selector yellow highlight-icon-font icon-highlighter-full\'></i><i class=\'color-selector green highlight-icon-font icon-highlighter-full\'></i><i class=\'color-selector red highlight-icon-font icon-highlighter-full\'></i><i class=\'color-selector pink highlight-icon-font icon-highlighter-full\'></i><i class=\'color-selector blue highlight-icon-font icon-highlighter-full\'></i> | <i class=\'fa fa-trash delete-highlight-button\' aria-hidden=\'true\' title=\'delete highlight\'></i></div>">\n  </div> \n  <div id="text-selection-menu-reference-node" class="text-selection-reference-node tip-top radius"  data-tooltip aria-haspopup="true" \n        title="<div class=\'text-selection-tooltip-container\'><i class=\'highlight-icon-font icon-highlighter-full highlight-button\' aria-hidden=\'true\' title=\'highlight\'></i><i class=\'fa fa-bookmark bookmark-button\' title=\'bookmark\'></i><i class=\'fa fa-sticky-note note-button\' title=\'annotate\'></i><i class=\'fa fa-link link-button\' title=\'create link\'></i><i class=\'fa fa-comments forum-button\' title=\'discussion\'></i><i class=\'fa fa-exclamation-triangle error-report\' title=\'report error\'></i></div></div>"></div>\n  <div id="audio-loader" class="loader"></div>\n  <div id="toc-index-menu" class="text-slide-menu text-slide-menu-left hidden">\n      <div class="loading-container">\n          <i class="fa fa-spin fa-circle-o-notch fa-3x fa-fw"></i>\n      </div>\n  </div>\n  <div id="indexed-terms-slide-menu" class="text-slide-menu text-slide-menu-right"></div>\n  <div id="book-resources-menu" class="slide-in-menu closed">\n      <div class="slide-in-menu-container"></div>\n  </div>\n  <audio id="audio-player" preload="metadata" crossorigin="anonymous"></audio>',i=new(function(){function e(){this.fillWithNecessaryHtmlElements()}return e.prototype.fillWithNecessaryHtmlElements=function(){null==document.getElementById("text-addendum-modal")&&$(document.body).append(o)},e}())},709:function(e,t,n){var o=n(710);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(98)(o,i);o.locals&&(e.exports=o.locals)},710:function(e,t,n){(e.exports=n(97)(!1)).push([e.i,"body.book-edit .bookmark-bubble,body.book-edit .note-bubble,body.book-edit .forums-bubble{display:none}body.book-edit .editor-bubble{display:block}body:not(.book-edit) .editor-bubble{display:none}body.book-review .forums-bubble,body.book-review .bookmark-bubble{display:none}.paragraph-bubble{position:absolute;top:0.3em;right:1%}.paragraph-bubble i{font:normal normal normal 18px/1 FontAwesome !important}@media screen and (min-width: 870px){.paragraph-bubble{display:flex}}.paragraph-bubble[data-notes-active] .note-bubble{display:block}.paragraph-bubble[data-bookmark-active] .bookmark-bubble{display:block}.paragraph-bubble[data-forums-active] .forums-bubble{display:block}.text-margin-icon-bubble{position:relative;width:1.5rem;height:1.9rem;text-align:center;cursor:pointer;color:#9a9aa2;transition:transform 0.25s ease-out;-webkit-transform-origin:50% 50%;-moz-transform-origin:50% 50%;-o-transform-origin:50% 50%;transform-origin:50% 50%;display:none;margin:1px}.text-margin-icon-bubble:hover i,.text-margin-icon-bubble.bubble-active i{transform:scale(1.1)}.text-margin-icon-bubble .note-count-container,.text-margin-icon-bubble .comment-count-container{display:none}\n",""])},711:function(e,t,n){"use strict";var o=n(3),i=n(6),a=n(4),r=n(0),s=n(409),l=n(128),d=n(16),c=n(15),h=n(458),u=n(1),p=(n(712),n(714),n(17)),g=n(25),m=n(455),f=n(7),b=$(window),k=$(document),v=void 0,x=function(){function e(){var e=this;this.defaultMainRoute=(v?"#!":"")+"/book/",this.mainRoute=(v?"#!":"")+"/book/",this.$menu=$("#toc-index-menu"),this.$tocMenuButtons=$(".toc-menu-button"),this.handleScrollStop=this.handleScrollStop.bind(this),this.textSlideMenu=new h.a(this.$menu,this.$tocMenuButtons,{sidePadding:20,targetWidth:380,maxWidth:450}),new s.a(this.$menu,(function(t){e.textSlideMenu.adjustMenuPosition(),1==t&&e.adjustSymbolsPosition()})),o.a.onDescendantEventWithCooldown(this.$menu,"click touchstart",".index-symbol-container",(function(t){return e.handleIndexSymbolClick(t.currentTarget)})),o.a.onDescendantEventWithCooldown(this.$menu,"click",".book-chapter, .book-element-link",(function(t){return e.handleTocChapterClick(t.target,t.currentTarget)})),k.on("unlockSectionSubsectionSuccess",(function(t,n,i,a){o.a.setTimeout((function(){var t=e.$menu.find("[data-short-name='"+a+"']");t.removeClass("user-not-owned"),t.addClass("user-owned"),t.next().is("ul")&&t.next().find(".book-element-link").removeClass("user-not-owned").addClass("user-owned")}),100)})),k.on("unlockBookElementSuccess",(function(t,n,o,i){var a=e.$menu.find("[data-short-name='"+o+"']");a.removeClass("user-not-owned"),a.addClass("user-owned"),a.siblings("ul").find(".user-not-owned").removeClass("user-not-owned").addClass("user-owned")})),k.on("contentFullyConstructed",(function(){return e.handleContentConstructed()})),k.on("requestTocIndexMenuOpen",(function(){return e.open()})),this.$menu.on("click",".index-content-container",(function(){k.trigger("tocIndexClick")}))}return e.prototype.initialize=function(e,t,n,o){var i=this;this.$menu.removeClass("hidden"),this.bookElement=t,this.mainRoute=o||this.defaultMainRoute,this.bookElementShortName=n,this.markCurrentBookElementAsSelectedInToc(e,t),this.$headerElements=c.a.getHeadings(),this.$tocMenuButtons.filter(":not(.second-row-top-bar-section .toc-menu-button)").removeClass("hidden"),b.on("scrollstop",this.handleScrollStop),null==this.book||null==e||this.book.shortName!=e.shortName?(this.book=e,m.a.getTocAndIndex(e.shortName,e,t).then((function(e){return i.handleDataArrived(e.toc,e.index)})),this.textSlideMenu.isOpened()&&this.textSlideMenu.handleResize()):this.textSlideMenu.adjustMainBookContentContainerPosition()},e.prototype.handleContentConstructed=function(){var e=this;o.a.setTimeout((function(){e.bookElement&&(e.bookElement.isBookOverview||p.a.isFirstTimeBookVisit())&&u.b.isExtraLargeScreenSize()&&!d.a.isSpecialPathPartInsteadOfBookElement(e.bookElementShortName)&&!$(document.body).hasClass("has-text-slide-menu-shown")&&e.textSlideMenu.open(),p.a.markCurrentBookAsVisited()}),500)},e.prototype.clean=function(){this.toc=null,this.index=null,this.book=null,this.bookElement=null,this.bookElementShortName="",this.partialClean(),this.$tocMenuButtons.filter(":not(.second-row-top-bar-section .toc-menu-button)").addClass("hidden"),this.textSlideMenu.close(),m.a.reset(),this.$menu.html('<div class="loading-container">\n            <i class="fa fa-spin fa-circle-o-notch fa-3x fa-fw"></i>\n        </div>')},e.prototype.partialClean=function(){this.unselectHeadings(),null!=this.$bookMainContentContainer&&this.$bookMainContentContainer.length&&this.$bookMainContentContainer.velocity("stop",!0),this.$headerElements=null,b.off("scrollstop",this.handleScrollStop)},e.prototype.open=function(){this.textSlideMenu.open()},e.prototype.isOpened=function(){return this.textSlideMenu.isOpened()},e.prototype.handleDataArrived=function(e,t){var n=this;this.toc=e,this.index=this.fixIndexLinks(t),null!=this.book&&(this.fillTocSummaryWithHtmlIfNecessary(),this.book.userOwnsBook||this.book.isReview?this.fillTocMenuHtml():f.a.isCurrentlyLoggedIn()?g.a.getTocOwnership(this.book.shortName).then((function(e){n.fillTocMenuHtml(e)})).catch((function(e){console.log("Error filling TOC with ownership info",e),n.fillTocMenuHtml()})):this.fillTocMenuHtml({partialChapterOwnership:[]}))},e.prototype.fixIndexLinks=function(e){try{if(!e||!e.length)return;for(var t=0,n=e;t<n.length;t++){var o=n[t];if(o&&o.links&&o.links.length)for(var i=0,a=o.links;i<a.length;i++){var r=a[i];r.link&&(r.link=r.link.replace("#!/","/"))}}}catch(e){}return e},e.prototype.fillTocSummaryWithHtmlIfNecessary=function(){try{var e=$(".toc-summary-container");if(0==e.length)return;if(0==e.find(".toc-summary-loading-container").length)return;var t="";if(null!=this.toc){if(null!=this.toc.frontMatter&&this.toc.frontMatter.length>0)for(var n=0,o=this.toc.frontMatter;n<o.length;n++){var i=o[n];t+='<a class="toc-summary-front-back-matter-link" href="'+l.a.adjustBookLink(i.link)+'">'+i.title+"</a>"}if(null!=this.toc.parts&&this.toc.parts.length>0)for(var a=0,r=this.toc.parts;a<r.length;a++){var s=r[a];if(s.link&&(t+='<a class="toc-summary-part-link" href="'+l.a.adjustBookLink(s.link)+'">'+s.title+"</a>"),null!=s.chapters&&s.chapters.length>0)for(var d=0,c=s.chapters;d<c.length;d++){var h=c[d];t+='<a class="toc-summary-chapter-link" href="'+l.a.adjustBookLink(h.link)+'">'+h.title+"</a>"}}if(null!=this.toc.backMatter&&this.toc.backMatter.length>0){t+="<br/>";for(var u=0,p=this.toc.backMatter;u<p.length;u++){var g=p[u];t+='<a class="toc-summary-front-back-matter-link" href="'+l.a.adjustBookLink(g.link)+'">'+g.title+"</a>"}}}t?e.find(".toc-summary-content").html(t):e.remove()}catch(e){console.error(e)}},e.prototype.fillTocMenuHtml=function(e){void 0===e&&(e=null),this.adjustCurrentToc(this.toc,e),this.adjustLinkLayout(this.index),this.$menu.html(Mustache.render(y,{toc:this.toc,index:this.index,title:this.book?(this.book.title||"").replace(/\s*MEAP\s*(V\d+)?/i,""):""}))},e.prototype.handleTocChapterClick=function(e,t){var n=$(e),o=$(t);this.$menu.find(".current-book-element").remove("current-book-element");var a=n.closest(".book-chapter");if(a.addClass("current-book-element"),k.trigger("tocMenuClick"),n.is(".book-element-link"))return this.unselectHeadings(),n.addClass("selected-heading"),i.a.closeMenuIfTakesTooMuchSpace(this.$menu),!1;var r=a.find(".book-sections-list");a.is(".opened")?(o.find(".toc-toggle-button i").removeClass("fa-caret-down").addClass("fa-caret-right"),$.Velocity.animate(r,"slideUp","normal").then((function(){a.removeClass("opened")}))):(o.find(".toc-toggle-button i").removeClass("fa-caret-right").addClass("fa-caret-down"),$.Velocity.animate(r,"slideDown","fast").then((function(){a.addClass("opened")})))},e.prototype.adjustCurrentToc=function(e,t){var n=this;if(void 0===t&&(t=null),e){if(e&&e.frontMatter&&e.frontMatter.length>0){var o=e.frontMatter.find((function(e){return"Copyright"==e.title}));null!=o&&a.a.removeItemFromArray(e.frontMatter,o)}var i={};null!=t&&t.partialChapterOwnership.forEach((function(e){i[e.shortName]=e.userOwned,null!=e.partialSectionOwnership&&e.partialSectionOwnership.forEach((function(e){i[e.shortName]=e.userOwned,e.partialSubsectionOwnership&&e.partialSubsectionOwnership.forEach((function(e){i[e.shortName]=e.userOwned}))}))}));var s=this.bookElement.shortName,c=function(e,o){if(void 0===o&&(o=!1),e){if(e.chapters&&!e.link&&(e.link=r.a.getBookElementUrl(n.book.slug,"chapter-1",n.bookElement.meapVersion,n.bookElement.reviewVersion)),e.cleanTitle=e.title,e.title&&"Chapters"!=e.title&&"Appendixes"!=e.title&&(e.cleanTitle=e.title.replace("Chapter","Ch").replace("Appendix","App")),e.id){if(e.shortName===s?e.chapters?e.isCurrentPart=!0:e.isCurrent=!0:e.chapters?e.isCurrentPart=!1:e.isCurrent=!1,"isFree"in e&&(e.isFree=e.link&&n.shouldFreeFlagBeShown(e.link),e.hasAudio=n.book.hasAudio&&!n.book.userOwnsAudio,e.isFree)){var h=e.cleanTitle||e.title;e.cleanTitle=a.a.getWithoutLastWordOrFullIfSingleWord(h),e.lastWord=a.a.getLastWordOrEmptyIfSingleWord(h)}e.userDoesntOwn=!e.isFree&&!n.book.userOwnsBook}for(var u in e.shortName||(e.shortName=d.a.extractNumbering(e.title||"")),t&&(e.userOwns=!!i[e.shortName]||o,e.userDoesntOwn=!e.userOwns),n.book.userOwnsBook&&(e.userOwns=!0),e.link=l.a.adjustBookLink(e.link),e.link&&n.mainRoute!==n.defaultMainRoute&&(e.link=e.link.replace(n.defaultMainRoute,n.mainRoute)),e)e.hasOwnProperty(u)&&e[u]&&"object"==typeof e[u]&&c(e[u],e.userOwns)}};c(e)}},e.prototype.shouldFreeFlagBeShown=function(e){return!!this.book&&(!(this.book.userOwnsBook||!a.a.endsWithOneOf(e,this.book.openChapters,!0))||!(!this.book.userOwnsBook||!this.book.hasAudio||this.book.userOwnsAudio||!a.a.endsWithOneOf(e,this.book.openChapters)))},e.prototype.adjustLinkLayout=function(e){if(e)for(var t=0;t<e.length;t++){"Symbol"!=e[t].letter&&"Symbols"!=e[t].letter||(e[t].letter="$");for(var n=e[t].letter,o=n.match(/[a-z]/i),i=e[t].links,a="",r=0,s=0;s<i.length;s++){var l=i[s];l.content=$.trim((l.content||"").replace(/â/g," "));var d=l.content;"2nd"==d||"3rd"==d||"4th"==d||"5th"==d||"6th"==d||"7th"==d||"8th"==d||"9th"==d||d==a?(l.content=d==a?"<sup>"+(r+2)+"</sup>":d.slice(0,1)+"<sup>"+d.slice(1)+"</sup>",d==a?r++:r=0,l.isSuperScript=!0,a=d):(l.additionalClass="",a=d,r=0,d=d.toUpperCase().replace(/\W+/g,""),o&&0!==d.indexOf(n)&&(l.additionalClass+=" indented",l.isLetter=!0),l.isNewLine=s>0)}}},e.prototype.handleScrollStop=function(){var e=this;o.a.setTimeout((function(){return e.selectCurrentHeadersInToc()}),16)},e.prototype.selectCurrentHeadersInToc=function(){if(this.unselectHeadings(),null!=this.$headerElements&&0!=this.$headerElements.length){var e=this.getStructurallyImportantHeadersForPosition(b.scrollTop()+i.a.getTopNavBarHeight()+40);if(e.length>0){var t=$(e[0]);this.$menu.find("[data-short-name='"+d.a.extractNumbering(t.text().trim())+"']").addClass("selected-heading")}}},e.prototype.markCurrentBookElementAsSelectedInToc=function(e,t){this.$menu.find(".current-book-element").removeClass("current-book-element"),this.unselectHeadings();var n=l.a.formHash(e,t),o=this.$menu.find(".book-element-link[href='"+n+"'], .book-element-link[href='"+l.a.trimLastSlash(n)+"']");o.addClass("current-book-element opened"),o.closest(".book-chapter").addClass("opened")},e.prototype.unselectHeadings=function(){this.$menu.find(".selected-heading").removeClass("selected-heading")},e.prototype.getStructurallyImportantHeadersForPosition=function(e){var t=[],n=this.$headerElements.filter((function(t,n){return i.a.isHeadingVisible($(n),e)})).last();n.length>0&&t.push(n);var o=c.a.getOwnerSectionHeading(n,this.$headerElements);return null!=o&&t.push(o),t},e.prototype.adjustSymbolsPosition=function(){var e=this.$menu.find(".index-symbols-container"),t=parseFloat(e.css("line-height"))/parseFloat(e.css("font-size")),n=(this.$menu.height()-40)/e.find(".index-symbol-container").length,o=Math.max(Math.min(Math.floor(n/t),15),8);e.css("font-size",o+"px")},e.prototype.handleIndexSymbolClick=function(e){k.trigger("tocIndexClick");var t=$(e),n=this.$menu.find(".index-content-container").closest(".tabs-container"),o=t.text(),i=n.find("h5").filter((function(e,t){return $(t).text()===o}));console.log(n.scrollTop(),i.position().top),n.animate({scrollTop:i.position().top},1e3)},e}();t.a=new x;var y='<div class="tab-title-container">\n<div class="tab-title selected">table of contents</div>\n{{#index.length}}\n<div class="tab-title">index</div>\n{{/index.length}}\n</div>\n<div class="tabs-container">\n<div class="tab-container selected">\n    <ul class="toc-book-elements-container">\n        {{#toc.frontMatter.length}}\n        {{#toc.frontMatter}}\n        <li class=\'{{#sections.length}}intro-chapter book-chapter has-dropdown {{/sections.length}}\'>\n            {{#sections.length}}\n            {{/sections.length}}\n            <a class="book-element-link {{#isCurrent}}current-book-element{{/isCurrent}} {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}">{{cleanTitle}} {{#isFree}} <span class="no-wrap">{{lastWord}}<span class="free-flag">free {{#hasAudio}}audio{{/hasAudio}}</span></span>{{/isFree}}</a>\n            {{#sections.length}} \n            <a href="javascript:void(0)" class=\'toc-interaction-icon toc-toggle-button {{#isCurrent}}current-book-element{{/isCurrent}}\'>\n                <i class=\'fa {{#isCurrent}}current-book-element fa-caret-down{{/isCurrent}} {{^isCurrent}}fa-caret-right{{/isCurrent}}\'></i>\n            </a>\n            <ul class=\'dropdown book-sections-list {{#isCurrent}}current-book-element-sections{{/isCurrent}}\'>\n                {{#sections}}\n                <li class=\'book-section\'>\n                    <a class="book-element-link {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}</a>\n                    {{#subsections.length}}\n                        <ul>\n                        {{#subsections}}\n                            <li><a class="book-element-link {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}</a></li>\n                        {{/subsections}}\n                        </ul>\n                    {{/subsections.length}}\n                </li>\n                {{/sections}}\n            </ul>\n            {{/sections.length}}\n        </li>\n        {{/toc.frontMatter}}\n        {{/toc.frontMatter.length}}\n\n        {{#toc.parts}}\n        <a class="container-link book-element-link {{#isCurrentPart}}current-book-element{{/isCurrentPart}}" href="{{link}}">{{cleanTitle}}</a>\n        {{#chapters}}\n        <li class=\'book-chapter has-dropdown {{#isCurrent}}opened contains-current-section{{/isCurrent}}\'>\n            <a class="book-element-link {{#isCurrent}}current-book-element{{/isCurrent}} {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}{{#isFree}} <span class="no-wrap">{{lastWord}}<span class="free-flag">free {{#hasAudio}}audio{{/hasAudio}}</span></span>{{/isFree}}</a>\n            <a href="javascript:void(0)" class=\'toc-interaction-icon toc-toggle-button {{#isCurrent}}current-book-element{{/isCurrent}}\'>\n                <i class=\'fa {{#isCurrent}}current-book-element fa-caret-down{{/isCurrent}} {{^isCurrent}}fa-caret-right{{/isCurrent}}\'></i>\n            </a>\n            <ul class=\'dropdown book-sections-list {{#isCurrent}}current-book-element-sections{{/isCurrent}}\'>\n                {{#sections}}\n                <li class=\'book-section\'>\n                    <a class="book-element-link {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}</a>\n                    {{#subsections.length}}\n                        <ul>\n                        {{#subsections}}\n                            <li><a class="book-element-link {{#userOwns}}user-owned{{/userOwns}} {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" href="{{link}}" data-short-name="{{shortName}}">{{cleanTitle}}</a></li>\n                        {{/subsections}}\n                        </ul>\n                    {{/subsections.length}}\n                </li>\n                {{/sections}}\n            </ul>\n        </li>\n        {{/chapters}}\n        {{/toc.parts}}\n\n        {{#toc.backMatter.length}}\n        {{#toc.backMatter}}\n        <li class="book-chapter">\n            <a class="book-element-link {{#isCurrent}}current-book-element{{/isCurrent}} {{#userOwns}}user-owned{{/userOwns}}  {{#userDoesntOwn}}user-not-owned{{/userDoesntOwn}}" data-short-name="{{shortName}}" href="{{link}}">\n                {{cleanTitle}} {{#isFree}}<span class="free-flag">free {{#hasAudio}}audio{{/hasAudio}}</span>{{/isFree}}\n            </a>\n        </li>\n        {{/toc.backMatter}}\n        {{/toc.backMatter.length}}\n    </ul>\n</div>\n<div class="tab-container">\n    <div class="index-container">\n        <div class="index-symbols-container">\n            {{#index}}\n            <span class="index-symbol-container">{{letter}}</span><br>\n            {{/index}}\n        </div>\n        <div class="index-content-container">\n            {{#index}}\n            <h5>{{letter}}</h5>\n            <div>\n                {{#links}}\n                {{#isNewLine}}<br/>{{/isNewLine}}\n                <a href="{{link}}" class="index-link {{additionalClass}}">\n                    {{#isSuperScript}} {{{content}}} {{/isSuperScript}}\n                    {{^isSuperScript}} {{content}} {{/isSuperScript}}\n                </a>\n                {{/links}}\n            </div>\n            {{/index}}\n        </div>\n    </div>\n</div>\n</div>'},712:function(e,t,n){var o=n(713);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(98)(o,i);o.locals&&(e.exports=o.locals)},713:function(e,t,n){(e.exports=n(97)(!1)).push([e.i,"#toc-index-menu{left:0;background-color:#e8e8e8;border-right:1px solid #d0cdcd;border-bottom:1px solid #d0cdcd;color:#443}#toc-index-menu .loading-container{text-align:center;margin-top:1em}@media screen and (max-width: 689px){#toc-index-menu{font-size:13px}}#toc-index-menu .tab-title{color:inherit}#toc-index-menu .toc-book-elements-container{margin:0;padding:0 1em}#toc-index-menu .container-link{display:block;cursor:default;user-select:none}#toc-index-menu .book-element-link{display:block;cursor:pointer}#toc-index-menu .book-element-link.user-not-owned{color:#6d6d61 !important}#toc-index-menu a{color:inherit}#toc-index-menu ul,#toc-index-menu ol,#toc-index-menu li{font-size:1em;list-style-type:none}#toc-index-menu .book-part{margin-top:5px;padding:0 4px;font-size:0.9em;text-transform:uppercase}#toc-index-menu .free-flag{color:white}#toc-index-menu .free-flag:after{border-color:transparent #e8e8e8 transparent transparent}#toc-index-menu .toc-interaction-icon{position:absolute;display:block;top:0.45em;min-height:2rem;min-width:2rem;font-size:small;cursor:pointer}@media screen and (min-width: 690px){#toc-index-menu .toc-interaction-icon{top:0.7em}}#toc-index-menu .toc-toggle-button{right:0;text-align:center}#toc-index-menu .book-chapter{position:relative;border:1px solid transparent;margin-top:1px;padding:0 1.2em 0 0.5em}#toc-index-menu .book-chapter .book-element-link{display:inline-block;padding:0.3em 1.5em 0 0.3em}#toc-index-menu .book-chapter .toc-interaction-icon i{font-size:1.1em}#toc-index-menu .book-chapter.opened .book-sections-list{display:block}#toc-index-menu .book-chapter.opened .toc-interaction-icon{display:inline-block}#toc-index-menu .intro-chapter:not(.buyable-intro-chapter){padding-left:0}#toc-index-menu .intro-chapter:not(.buyable-intro-chapter) .book-element-link{padding-left:0}#toc-index-menu .book-sections-list{margin-left:1rem;display:none}#toc-index-menu .book-section{line-height:1.2rem}#toc-index-menu .book-section a{padding:2px;display:inline-block}#toc-index-menu .book-section .book-element-link.selected-heading{font-weight:900}#toc-index-menu .current-book-element.book-element-link{font-weight:900}#toc-index-menu a,#toc-index-menu span{color:inherit}#toc-index-menu .container-link{color:inherit}#toc-index-menu .toc-interaction-icon{color:inherit}.tab-container.selected .index-symbols-container{display:block}.index-container{padding:5px;padding-bottom:0;color:inherit;position:relative}.index-container .index-symbols-container{background-color:#484848;color:white;padding-left:0;width:25px;text-align:center;position:fixed;display:none}.index-container .index-symbol-container{cursor:pointer;width:25px;display:inline-block;user-select:none}.index-container .index-content-container{margin-left:35px}.index-container h5{font-weight:bolder;color:inherit}.index-container .index-link{padding:2px;text-decoration:underline;font-size:12px}.index-container .index-link{display:inline-block}.index-container .index-link.indented{padding-left:1rem}\n",""])},714:function(e,t,n){var o=n(715);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(98)(o,i);o.locals&&(e.exports=o.locals)},715:function(e,t,n){(e.exports=n(97)(!1)).push([e.i,"body.unlock-supported .readable-text{position:relative}body.unlock-supported #book-markup-container ul,body.unlock-supported #book-markup-container ol{position:relative}body.unlock-supported .readable-text.scrambled{cursor:pointer}body.unlock-supported .readable-text.scrambled:hover .token-icon-container svg,body.unlock-supported .readable-text.scrambled .unscramble-target .token-icon-container svg{transform:rotateY(360deg);transition-duration:1.2s}.unscramble-target p,li.unscramble-target{background-color:rgba(218,218,218,0.7)}.unscrambling p,li.unscrambling{background-color:rgba(218,218,218,0.25)}body.unlock-supported:not(.free-preview-mode) .scrambled p:hover,body.unlock-supported:not(.free-preview-mode) li.scrambled:hover{background-color:rgba(218,218,218,0.7)}.callout-container .unscramble-target p,.callout-container li.unscramble-target,.callout-container .unscrambling p,.callout-container li.unscrambling{background-color:#ececec}.readable-text.scrambled{color:#747474}.unlock-confirm-modal .unlock-confirm-root .unlock-confirm-price-container{font-size:16px}\n",""])},716:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(717);var o={insertNextChapterSummary:function(e){if(null!=e){var t=$(Mustache.render(i,e)),n=t.find(".next-button span");0==(e.shortName||"").indexOf("Part")&&n.text("Go to next part"),$("body").append(t)}}},i='<div class="summary-wrapper">\n<div class="summary-container">\n    <div class="summary-box-container">\n        <div><div class="summary-label">Up next...</div></div>\n        <div class="summary-next-heading">\n            <a class="heading-link" href="{{link}}">{{title}}</a>\n        </div>\n        <div>\n            <div class="summary-next-points">\n                <ul>{{#introItems}}<li>{{.}}</li>{{/introItems}}</ul>\n            </div>\n        </div>\n        {{^noNextElement}}\n        <div class="rt footer-button-next">\n            <a class="next-button button radius" href="{{link}}" title="{{title}}"><span>Go to next chapter</span> <i class="fa fa-angle-right"></i></a>\n        </div>\n        {{/noNextElement}}\n    </div>\n</div>\n<div class="summary-copyright-container text-label">\n    &copy; 2019 Manning Publications Co.\n</div>\n</div>'},717:function(e,t,n){var o=n(718);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(98)(o,i);o.locals&&(e.exports=o.locals)},718:function(e,t,n){(e.exports=n(97)(!1)).push([e.i,".summary-wrapper .summary-copyright-container{margin:2em 0 2em 0;text-align:center;color:rgba(0,0,0,0.5);font-size:90%}@media only screen and (max-width: 690px){.summary-wrapper .summary-copyright-container{font-size:0.7rem}}.summary-container{margin:0 auto;box-shadow:0 0 10px 0 rgba(0,0,0,0.15);border:1px solid #e5e5e5;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIGNvdW50PScxMDAlJyBoZWlnaHQ9JzEwMCUnPgoJPGNpcmNsZSBjeD0nNTAlJyBjeT0nNTAlJyByPSc1JScgZmlsbC1vcGFjaXR5PScuMycgZmlsbD0nI2ZmZicgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9JzUwJScgcj0nMTAlJyBmaWxsLW9wYWNpdHk9Jy4zJyBmaWxsPScjZmZmJyAvPgoJPGNpcmNsZSBjeD0nNTAlJyBjeT0nNTAlJyByPScxNSUnIGZpbGwtb3BhY2l0eT0nLjMnIGZpbGw9JyNmZmYnIC8+Cgk8Y2lyY2xlIGN4PSc1MCUnIGN5PSc1MCUnIHI9JzIwJScgZmlsbC1vcGFjaXR5PScuMycgZmlsbD0nI2ZmZicgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9JzUwJScgcj0nMjUlJyBmaWxsLW9wYWNpdHk9Jy4zJyBmaWxsPScjZmZmJyAvPgoJPGNpcmNsZSBjeD0nNTAlJyBjeT0nNTAlJyByPSczMCUnIGZpbGwtb3BhY2l0eT0nLjMnIGZpbGw9JyNmZmYnIC8+Cgk8Y2lyY2xlIGN4PSc1MCUnIGN5PSc1MCUnIHI9JzM1JScgZmlsbC1vcGFjaXR5PScuMycgZmlsbD0nI2ZmZicgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9JzUwJScgcj0nNDAlJyBmaWxsLW9wYWNpdHk9Jy4zJyBmaWxsPScjZmZmJyAvPgoJPGNpcmNsZSBjeD0nNTAlJyBjeT0nNTAlJyByPSc0NSUnIGZpbGwtb3BhY2l0eT0nLjMnIGZpbGw9JyNmZmYnIC8+Cgk8Y2lyY2xlIGN4PSc1MCUnIGN5PSc1MCUnIHI9JzUwJScgZmlsbC1vcGFjaXR5PScuMycgZmlsbD0nI2ZmZicgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9Jy0xMCUnIHI9JzIwJScgZmlsbC1vcGFjaXR5PScuMicgZmlsbD0nI2NjYycgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9Jy0xMCUnIHI9JzMwJScgZmlsbC1vcGFjaXR5PScuMicgZmlsbD0nI2NjYycgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9Jy0xMCUnIHI9JzQwJScgZmlsbC1vcGFjaXR5PScuMicgZmlsbD0nI2NjYycgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9Jy0xMCUnIHI9JzUwJScgZmlsbC1vcGFjaXR5PScuMicgZmlsbD0nI2NjYycgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9Jy0xMCUnIHI9JzYwJScgZmlsbC1vcGFjaXR5PScuMicgZmlsbD0nI2NjYycgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9Jy0xMCUnIHI9JzcwJScgZmlsbC1vcGFjaXR5PScuMicgZmlsbD0nI2NjYycgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9Jy0xMCUnIHI9JzgwJScgZmlsbC1vcGFjaXR5PScuMicgZmlsbD0nI2NjYycgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9Jy0xMCUnIHI9JzkwJScgZmlsbC1vcGFjaXR5PScuMicgZmlsbD0nI2NjYycgLz4KCTxjaXJjbGUgY3g9JzUwJScgY3k9Jy0xMCUnIHI9JzEwMCUnIGZpbGwtb3BhY2l0eT0nLjInIGZpbGw9JyNjY2MnIC8+Cgk8Y2lyY2xlIGN4PScwJyBjeT0nMCcgcj0nMTAlJyBmaWxsLW9wYWNpdHk9Jy4yJyBmaWxsPScjZmZmJyAvPgoJPGNpcmNsZSBjeD0nMCcgY3k9JzAnIHI9JzIwJScgZmlsbC1vcGFjaXR5PScuMicgZmlsbD0nI2ZmZicgLz4KCTxjaXJjbGUgY3g9JzAnIGN5PScwJyByPSczMCUnIGZpbGwtb3BhY2l0eT0nLjInIGZpbGw9JyNmZmYnIC8+Cgk8Y2lyY2xlIGN4PScwJyBjeT0nMCcgcj0nNDAlJyBmaWxsLW9wYWNpdHk9Jy4yJyBmaWxsPScjZmZmJyAvPgoJPGNpcmNsZSBjeD0nMCcgY3k9JzAnIHI9JzUwJScgZmlsbC1vcGFjaXR5PScuMicgZmlsbD0nI2ZmZicgLz4KCTxjaXJjbGUgY3g9JzAnIGN5PScwJyByPSc2MCUnIGZpbGwtb3BhY2l0eT0nLjInIGZpbGw9JyNmZmYnIC8+Cgk8Y2lyY2xlIGN4PScwJyBjeT0nMCcgcj0nNzAlJyBmaWxsLW9wYWNpdHk9Jy4yJyBmaWxsPScjZmZmJyAvPgoJPGNpcmNsZSBjeD0nMTAwJScgY3k9JzAnIHI9JzEwJScgZmlsbC1vcGFjaXR5PScuMScgZmlsbD0nI2VlZScgLz4KCTxjaXJjbGUgY3g9JzEwMCUnIGN5PScwJyByPScyMCUnIGZpbGwtb3BhY2l0eT0nLjEnIGZpbGw9JyNlZWUnIC8+Cgk8Y2lyY2xlIGN4PScxMDAlJyBjeT0nMCcgcj0nMzAlJyBmaWxsLW9wYWNpdHk9Jy4xJyBmaWxsPScjZWVlJyAvPgoJPGNpcmNsZSBjeD0nMTAwJScgY3k9JzAnIHI9JzQwJScgZmlsbC1vcGFjaXR5PScuMScgZmlsbD0nI2VlZScgLz4KCTxjaXJjbGUgY3g9JzEwMCUnIGN5PScwJyByPSc1MCUnIGZpbGwtb3BhY2l0eT0nLjEnIGZpbGw9JyNlZWUnIC8+Cgk8Y2lyY2xlIGN4PScxMDAlJyBjeT0nMCcgcj0nNjAlJyBmaWxsLW9wYWNpdHk9Jy4xJyBmaWxsPScjZWVlJyAvPgoJPGNpcmNsZSBjeD0nMTAwJScgY3k9JzAnIHI9JzcwJScgZmlsbC1vcGFjaXR5PScuMScgZmlsbD0nI2VlZScgLz4KCTxjaXJjbGUgY3g9JzEwMCUnIGN5PScxMDAlJyByPScxMCUnIGZpbGwtb3BhY2l0eT0nLjEnIGZpbGw9JyNmMmYyZjInIC8+Cgk8Y2lyY2xlIGN4PScxMDAlJyBjeT0nMTAwJScgcj0nMjAlJyBmaWxsLW9wYWNpdHk9Jy4xJyBmaWxsPScjZjJmMmYyJyAvPgoJPGNpcmNsZSBjeD0nMTAwJScgY3k9JzEwMCUnIHI9JzMwJScgZmlsbC1vcGFjaXR5PScuMScgZmlsbD0nI2YyZjJmMicgLz4KCTxjaXJjbGUgY3g9JzEwMCUnIGN5PScxMDAlJyByPSc0MCUnIGZpbGwtb3BhY2l0eT0nLjEnIGZpbGw9JyNmMmYyZjInIC8+Cgk8Y2lyY2xlIGN4PScxMDAlJyBjeT0nMTAwJScgcj0nNTAlJyBmaWxsLW9wYWNpdHk9Jy4xJyBmaWxsPScjZjJmMmYyJyAvPgoJPGNpcmNsZSBjeD0nMTAwJScgY3k9JzEwMCUnIHI9JzYwJScgZmlsbC1vcGFjaXR5PScuMScgZmlsbD0nI2YyZjJmMicgLz4KCTxjaXJjbGUgY3g9JzEwMCUnIGN5PScxMDAlJyByPSc3MCUnIGZpbGwtb3BhY2l0eT0nLjEnIGZpbGw9JyNmMmYyZjInIC8+Cgk8Y2lyY2xlIGN4PScwJScgY3k9JzEwMCUnIHI9JzEwJScgZmlsbC1vcGFjaXR5PScuMScgZmlsbD0nI2VlZScgLz4KCTxjaXJjbGUgY3g9JzAlJyBjeT0nMTAwJScgcj0nMjAlJyBmaWxsLW9wYWNpdHk9Jy4xJyBmaWxsPScjZWVlJyAvPgoJPGNpcmNsZSBjeD0nMCUnIGN5PScxMDAlJyByPSczMCUnIGZpbGwtb3BhY2l0eT0nLjEnIGZpbGw9JyNlZWUnIC8+Cgk8Y2lyY2xlIGN4PScwJScgY3k9JzEwMCUnIHI9JzQwJScgZmlsbC1vcGFjaXR5PScuMScgZmlsbD0nI2VlZScgLz4KCTxjaXJjbGUgY3g9JzAlJyBjeT0nMTAwJScgcj0nNTAlJyBmaWxsLW9wYWNpdHk9Jy4xJyBmaWxsPScjZWVlJyAvPgoJPGNpcmNsZSBjeD0nMCUnIGN5PScxMDAlJyByPSc2MCUnIGZpbGwtb3BhY2l0eT0nLjEnIGZpbGw9JyNlZWUnIC8+Cgk8Y2lyY2xlIGN4PScwJScgY3k9JzEwMCUnIHI9JzcwJScgZmlsbC1vcGFjaXR5PScuMScgZmlsbD0nI2VlZScgLz4KPC9zdmc+)}.summary-container .summary-next-heading{max-width:360px}.summary-container .summary-next-heading a{color:#e71e21;font-weight:bold}.summary-container .footer-button-next{position:absolute;top:35px;right:0}body.night-mode .summary-container{border-color:transparent;background-image:none;background:#515556;color:#b9b9ad}body.night-mode .summary-container .summary-box-container .summary-next-points,body.night-mode .summary-container .summary-box-container .summary-label{color:inherit}body.night-mode .summary-container .summary-next-heading a{color:inherit}@media only screen and (min-width: 320px){.summary-container .summary-box-container{width:300px;padding:20px 10px 10px;margin:20px auto 0 auto;position:relative}.summary-container .summary-box-container a{font-size:larger}.summary-container .summary-box-container .summary-label{font-size:0.8rem;font-weight:300;color:#333}.summary-container .summary-box-container .summary-next-points{padding-left:10px;max-width:360px;color:#333}.summary-container a{font-size:1.1rem}.summary-container p,.summary-container ul,.summary-container ol{font-size:0.8rem}}@media only screen and (min-width: 320px) and (max-width: 689px){.summary-container .summary-box-container{width:90%}.summary-container .rt.footer-button-next{top:-10px;right:0}}@media only screen and (min-width: 690px){.summary-container{width:750px}.summary-container .summary-box-container{width:600px;padding:20px 40px 40px;margin:20px auto 0 auto}.summary-container .summary-box-container a{font-size:larger}.summary-container .summary-box-container .summary-label{font-size:20px;display:inline-block;font-style:italic;font-weight:300}.summary-container .summary-box-container .summary-next-points{padding-left:20px;max-width:360px}.summary-container p,.summary-container ul,.summary-container ol{font-size:1rem}.summary-container a{font-size:larger}}\n",""])},719:function(e,t,n){(e.exports=n(97)(!1)).push([e.i,'@font-face{font-family:\'highlight-font-icon\';src:url("/assets/fonts/highlight-font-icon.eot");src:url("/assets/fonts/highlight-font-icon.eot") format("embedded-opentype"),url("/assets/fonts/highlight-font-icon.woff") format("woff"),url("/assets/fonts/highlight-font-icon.ttf") format("truetype"),url("/assets/fonts/highlight-font-icon.svg") format("svg");font-weight:normal;font-style:normal}.highlight-icon-font:before{font-family:"highlight-font-icon" !important;content:attr(data-icon);font-style:normal !important;font-weight:normal !important;font-variant:normal !important;text-transform:none !important;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-highlighter-full:before{content:"\\e908"}.introduction-summary{margin:0 8%;margin-top:1em;margin-bottom:1em}#book-markup-container{word-wrap:break-word}#book-markup-container pre{white-space:normal}#book-markup-container .browsable-container pre,#book-markup-container .code-area-container pre{white-space:pre !important}@media only screen and (min-width: 320px){.introduction-summary ul{padding-left:1em !important}.callout-container,.text-addendum-container{padding:5px}#book-markup-container p,#book-markup-container ul,#book-markup-container ol,#book-markup-container table,#book-markup-container .toc-summary-content{font-size:0.8rem}#book-markup-container p i,#book-markup-container ul i,#book-markup-container ol i,#book-markup-container table i,#book-markup-container .toc-summary-content i{font-size:1rem}#book-markup-container h1,#book-markup-container .head1{font-weight:bold;font-size:1.25rem}#book-markup-container h2,#book-markup-container .head2{font-size:.9375rem}#book-markup-container h3,#book-markup-container .head3{font-size:.875rem}#book-markup-container h4{font-size:.8125rem}#book-markup-container h5{font-size:.75rem}#book-markup-container kbd{font-size:.75rem}#book-markup-container .head2,#book-markup-container .head3{margin-top:7px}.text-size-small #book-markup-container p,.text-size-small #book-markup-container ul,.text-size-small #book-markup-container ol,.text-size-small #book-markup-container table,.text-size-small #book-markup-container i,.text-size-small #book-markup-container .toc-summary-content{font-size:0.6rem}.text-size-small #book-markup-container h1,.text-size-small #book-markup-container .head1{font-weight:bold;font-size:1.125rem}.text-size-small #book-markup-container h2,.text-size-small #book-markup-container .head2{font-size:.8125rem}.text-size-small #book-markup-container h3,.text-size-small #book-markup-container .head3{font-size:.6875rem}.text-size-small #book-markup-container h4{font-size:.6875rem}.text-size-small #book-markup-container h5{font-size:.625rem}.text-size-small #book-markup-container kbd{font-size:.625rem}.text-size-small #book-markup-container .head2,.text-size-small #book-markup-container .head3{margin-top:5px}.text-size-standard #book-markup-container p,.text-size-standard #book-markup-container ul,.text-size-standard #book-markup-container ol,.text-size-standard #book-markup-container table,.text-size-standard #book-markup-container i,.text-size-standard #book-markup-container .toc-summary-content{font-size:0.8rem}.text-size-standard #book-markup-container h1,.text-size-standard #book-markup-container .head1{font-weight:bold;font-size:1.25rem}.text-size-standard #book-markup-container h2,.text-size-standard #book-markup-container .head2{font-size:.9375rem}.text-size-standard #book-markup-container h3,.text-size-standard #book-markup-container .head3{font-size:.875rem}.text-size-standard #book-markup-container h4{font-size:.8125rem}.text-size-standard #book-markup-container h5{font-size:.75rem}.text-size-standard #book-markup-container kbd{font-size:.75rem}.text-size-standard #book-markup-container .head2,.text-size-standard #book-markup-container .head3{margin-top:7px}.text-size-large #book-markup-container p,.text-size-large #book-markup-container ul,.text-size-large #book-markup-container ol,.text-size-large #book-markup-container table,.text-size-large #book-markup-container i,.text-size-large #book-markup-container .toc-summary-content{font-size:1rem}.text-size-large #book-markup-container h1,.text-size-large #book-markup-container .head1{font-size:2rem}.text-size-large #book-markup-container h2,.text-size-large #book-markup-container .head2{font-size:1.25rem}.text-size-large #book-markup-container h3,.text-size-large #book-markup-container .head3{font-size:1.125rem}.text-size-large #book-markup-container h4{font-size:1rem}.text-size-large #book-markup-container h5{font-size:.875rem}.text-size-large #book-markup-container .head2,.text-size-large #book-markup-container .head3{margin-top:7px}.text-size-large #book-markup-container kbd,.text-size-large #book-markup-container .listing-container .code-area{font-size:.875rem}.text-size-extra-large #book-markup-container p,.text-size-extra-large #book-markup-container ul,.text-size-extra-large #book-markup-container ol,.text-size-extra-large #book-markup-container table,.text-size-extra-large #book-markup-container i,.text-size-extra-large #book-markup-container .toc-summary-content{font-size:1.2rem}.text-size-extra-large #book-markup-container h1,.text-size-extra-large #book-markup-container .head1{font-size:2.25rem}.text-size-extra-large #book-markup-container h2,.text-size-extra-large #book-markup-container .head2{font-size:1.5rem}.text-size-extra-large #book-markup-container h3,.text-size-extra-large #book-markup-container .head3{font-size:1.25rem}.text-size-extra-large #book-markup-container h4{font-size:1.75rem}.text-size-extra-large #book-markup-container h5{font-size:1rem}.text-size-extra-large #book-markup-container .head2,.text-size-extra-large #book-markup-container .head3{margin-top:7px}.text-size-extra-large #book-markup-container kbd,.text-size-extra-large #book-markup-container .listing-container .code-area{font-size:1rem}#book-markup-container .browsable-container{overflow:auto}#book-markup-container .figure-container{overflow:initial}#book-markup-container pre.prettyprint{font-size:10px}.introduction-summary h3{font-size:.8125rem}}@media only screen and (min-width: 360px){.introduction-summary ul{padding-left:1em !important}}@media only screen and (min-width: 480px){.introduction-summary ul{padding-left:1em !important}}@media only screen and (min-width: 690px){#book-markup-container p,#book-markup-container ul,#book-markup-container ol,#book-markup-container table,#book-markup-container .toc-summary-content{font-size:16px;line-height:30px}#book-markup-container p{padding:5px}#book-markup-container pre.prettyprint{font-size:13px}#book-markup-container p,#book-markup-container ul,#book-markup-container ol,#book-markup-container table,#book-markup-container i,#book-markup-container .toc-summary-content{font-size:16px;line-height:30px}#book-markup-container h1,#book-markup-container .head1{font-size:2rem}#book-markup-container h2,#book-markup-container .head2{font-size:1.25rem}#book-markup-container h3,#book-markup-container .head3{font-size:1.125rem}#book-markup-container h4{font-size:1rem}#book-markup-container h5{font-size:.875rem}#book-markup-container .head2,#book-markup-container .head3{margin-top:7px}#book-markup-container kbd{font-size:.875rem}.text-size-standard #book-markup-container p,.text-size-standard #book-markup-container ul,.text-size-standard #book-markup-container ol,.text-size-standard #book-markup-container table,.text-size-standard #book-markup-container i,.text-size-standard #book-markup-container .toc-summary-content{font-size:16px;line-height:30px}.text-size-standard #book-markup-container h1,.text-size-standard #book-markup-container .head1{font-size:2rem}.text-size-standard #book-markup-container h2,.text-size-standard #book-markup-container .head2{font-size:1.25rem}.text-size-standard #book-markup-container h3,.text-size-standard #book-markup-container .head3{font-size:1.125rem}.text-size-standard #book-markup-container h4{font-size:1rem}.text-size-standard #book-markup-container h5{font-size:.875rem}.text-size-standard #book-markup-container .head2,.text-size-standard #book-markup-container .head3{margin-top:7px}.text-size-standard #book-markup-container kbd{font-size:.875rem}.text-size-large #book-markup-container p,.text-size-large #book-markup-container ul,.text-size-large #book-markup-container ol,.text-size-large #book-markup-container table,.text-size-large #book-markup-container i,.text-size-large #book-markup-container .toc-summary-content{font-size:18px;line-height:34px}.text-size-large #book-markup-container h1,.text-size-large #book-markup-container .head1{font-size:2.25rem}.text-size-large #book-markup-container h2,.text-size-large #book-markup-container .head2{font-size:1.5rem}.text-size-large #book-markup-container h3,.text-size-large #book-markup-container .head3{font-size:1.375rem}.text-size-large #book-markup-container h4{font-size:1.125rem}.text-size-large #book-markup-container h5{font-size:1rem}.text-size-large #book-markup-container .head2,.text-size-large #book-markup-container .head3{margin-top:10px}.text-size-large #book-markup-container kbd{font-size:1rem}.text-size-small #book-markup-container p,.text-size-small #book-markup-container ul,.text-size-small #book-markup-container ol,.text-size-small #book-markup-container table,.text-size-small #book-markup-container i,.text-size-small #book-markup-container .toc-summary-content{font-size:14px;line-height:26px}.text-size-small #book-markup-container h1,.text-size-small #book-markup-container .head1{font-size:1.75rem}.text-size-small #book-markup-container h2,.text-size-small #book-markup-container .head2{font-size:1.125rem}.text-size-small #book-markup-container h3,.text-size-small #book-markup-container .head3{font-size:1rem}.text-size-small #book-markup-container h4{font-size:.9375rem}.text-size-small #book-markup-container h5{font-size:.875rem}.text-size-small #book-markup-container .head2,.text-size-small #book-markup-container .head3{margin-top:7px}.text-size-small #book-markup-container kbd{font-size:.875rem}.introduction-summary h3{font-size:1.125rem}}@media only screen and (min-width: 800px){.show-small,.show-medium-down{display:none !important}.show-medium-up{display:inline-block !important}.show-large-up:not(.hidden){display:inherit !important}.callout-container:not(.interactive-container),.text-addendum-container{padding:15px}}.introduction-summary i,.readable-text i{font-family:Merriweather,"serif";font-style:italic}#book-main-content-container ul{margin-left:0}#book-main-content-container table ul,#book-main-content-container li ul,#book-main-content-container li ol{margin-left:1.25rem}#book-main-content-container table td{padding-left:0.5em;padding-right:0.5em}#book-main-content-container table td pre{font-size:80%;line-height:normal}#book-main-content-container h1,#book-main-content-container .head1,#book-main-content-container h2,#book-main-content-container .head2,#book-main-content-container h3,#book-main-content-container .head3,#book-main-content-container h4,#book-main-content-container h5{font-weight:bold}#book-main-content-container .head2,#book-main-content-container .head3{margin-top:7px}#book-main-content-container kbd{font-family:Consolas, Courier, monospace;padding:3px 5px;border:1px solid #DCDCDC;border-radius:3px;background-color:#F5F5F5}#book-main-content-container .callout-container,#book-main-content-container .text-addendum-container{margin:0 8%;margin-top:1em;margin-bottom:1em;border-radius:5px}#book-main-content-container .callout-container>.readable-text>h5,#book-main-content-container .callout-container>h5,#book-main-content-container .text-addendum-container>.readable-text>h5,#book-main-content-container .text-addendum-container>h5{text-transform:uppercase}#book-main-content-container .callout-container .readable-text,#book-main-content-container .text-addendum-container .readable-text{padding:0 1em}#book-main-content-container .callout-container.collapsed,#book-main-content-container .text-addendum-container.collapsed{border:0}#book-main-content-container .callout-container>ul,#book-main-content-container .callout-container>ol,#book-main-content-container .text-addendum-container>ul,#book-main-content-container .text-addendum-container>ol{padding-left:3rem}#book-main-content-container .callout-container>ul>.readable-text,#book-main-content-container .callout-container>ol>.readable-text,#book-main-content-container .callout-container ul .readable-text,#book-main-content-container .callout-container ol .readable-text,#book-main-content-container .text-addendum-container>ul>.readable-text,#book-main-content-container .text-addendum-container>ol>.readable-text,#book-main-content-container .text-addendum-container ul .readable-text,#book-main-content-container .text-addendum-container ol .readable-text{padding-top:0;padding-left:1em}#book-main-content-container .callout-container .browsable-container,#book-main-content-container .text-addendum-container .browsable-container{padding:1em}#book-main-content-container .callout-container iframe,#book-main-content-container .text-addendum-container iframe{width:100%;border:none}#book-main-content-container .readable-text{position:relative;padding:0 8%;word-wrap:break-word}#book-main-content-container .readable-text p[definition-title]{font-weight:bolder}#book-main-content-container .readable-text p[data-is-quote]{font-style:italic}#book-main-content-container .readable-text p[data-is-cite]{text-align:right;font-weight:bolder}#book-main-content-container .readable-text p[definition-content]{margin-left:1em}#book-main-content-container .readable-text .xref{text-decoration:underline}#book-main-content-container .readable-text.clickable{cursor:pointer}#book-main-content-container .readable-text h5{margin-bottom:1.25rem}#book-main-content-container .readable-text pre{white-space:normal}#book-main-content-container ul .readable-text,#book-main-content-container ol .readable-text{padding-top:0;padding-left:1em}#pointing-start-point,#pointing-end-point{cursor:move;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab;left:15px;font-size:24px;color:gray}#pointing-start-point:active,#pointing-end-point:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}@media screen and (max-width: 500px){#pointing-start-point,#pointing-end-point{left:8px}}#book-markup-container{font-family:Merriweather,"serif";position:relative}#book-markup-container h1,#book-markup-container h2,#book-markup-container h3,#book-markup-container h4,#book-markup-container h5,#book-markup-container h6{font-family:Lato}#book-markup-container>ul,#book-markup-container>ol{padding:0 8% 0 12%}#book-markup-container .collapsed{height:0;overflow:hidden}#book-markup-container .emphasized-text{opacity:1}#book-markup-container .readable-text>p>img{cursor:pointer}#book-markup-container .readable-text .cueball{display:inline-block;background-color:black;border-radius:50%;width:16px;height:16px;color:white;text-align:center;font-size:smaller;vertical-align:middle;line-height:1;cursor:pointer}.introduction-summary{border-style:solid;border-width:1px;margin-bottom:1.25rem;padding:1.25rem;border-radius:3px;background:#F5F3F0;border-color:#ebe7e1}.introduction-summary .readable-text,.introduction-summary ul .readable-text{padding-left:0}.introduction-summary h3{font-weight:bold}.introduction-summary h3,.introduction-summary ul,.introduction-summary li,.introduction-summary p,.introduction-summary ol{color:#8a785c;font-family:Lato}.introduction-summary ul{padding-left:2rem}.browsable-container{background-color:white;position:relative}.browsable-container.figure-container{text-align:center}.browsable-container.figure-container h1,.browsable-container.figure-container h2,.browsable-container.figure-container h3,.browsable-container.figure-container h4,.browsable-container.figure-container h5{text-align:left}.browsable-container>code,.callout-code-container>code{display:block}.browsable-container code,.callout-code-container code{border-style:none}.callout-code-container{padding:0 1em}#book-markup-container>.browsable-container{margin:0 8%}#book-markup-container .browsable-container{margin-top:1em;margin-bottom:2em;padding:1em}#book-markup-container>.browsable-container.book-overview-cover-container{padding:0}.callout-container>.browsable-container{margin:1em}#book-markup-container .browsable-container:not(.collapsible-panel){border-radius:5px;border:1px solid #d9d9d9}.browsable-placeholder .listing-environment-container{display:none}.listing-environment-container{border-top:1px solid #e5e5e5;padding:10px;margin-top:5px;margin-right:5px;display:block}.listing-environment-container .listing-environment-runnable-script-container{display:inline-block}.listing-environment-container.edit-mode{border-top:1px solid transparent}.listing-environment-container.edit-mode .execution-environment-standard-mode-container{display:none}.listing-environment-container .execution-environment-edit-mode-container{display:none}.listing-environment-container.edit-mode .execution-environment-edit-mode-container{display:inline-block}.listing-environment-container .execution-environment-frame{width:100%;height:200px;display:none;background:#f7f7f7;border:1px solid #e5e5e5;margin-top:20px}.browsable-container .button,.listing-environment-container .button{color:white;border-radius:2px;font-size:smaller;padding:3px 10px;display:inline-block;margin-right:0.1rem;background-color:#0e5ba9;display:inline-block}.browsable-container .button .button-label,.listing-environment-container .button .button-label{margin-left:0.2rem}.browsable-container .button.opened,.listing-environment-container .button.opened{background-color:#0a427a}.browsable-container .button-hide,.listing-environment-container .button-hide{display:none}.browsable-placeholder{color:lightgray;border:dashed 1px;cursor:pointer}.browsable-placeholder>*{position:absolute;overflow-y:auto;cursor:pointer;max-width:630px;-webkit-box-shadow:0px 0px 10px 3px rgba(0,0,0,0.75);-moz-box-shadow:0px 0px 10px 3px rgba(0,0,0,0.75);box-shadow:0px 0px 10px 3px rgba(0,0,0,0.75);z-index:10}.browsable-placeholder>i{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;z-index:11;font-style:normal;font-size:xx-large;opacity:0}.annotation-container{position:absolute;width:20px;right:2px;z-index:90;background:#e5e5e5;cursor:pointer;display:table;text-align:center;border-radius:2px;font-weight:600;-webkit-transition:right 0.15s ease-out;-moz-transition:right 0.15s ease-out;transition:right 0.15s ease-out}.annotation-container:active,.annotation-container:after:active{outline:0}.annotation-container:hover,.annotation-container.hovered{background:#d3d3d7}.annotation-container:hover:after,.annotation-container:after,.annotation-container.hovered:after,.annotation-container.hovered:after{border-right-color:#d3d3d7}.annotation-container.selected{background-color:#F5A623}.annotation-container.selected:not(.vertical){width:22px;right:-1px;border-top-right-radius:0;border-bottom-right-radius:0}.annotation-container.selected:hover{background:#F5A623}.annotation-container.selected:hover:after,.annotation-container.selected:after{border-right-color:#F5A623}.annotation-container.selected.vertical{border-radius:2px}.annotation-container.show-tip:after{right:21px;opacity:1;-webkit-transition:all 0.1s ease-out;-moz-transition:all 0.1s ease-out;transition:all 0.1s ease-out}.annotation-container:after{right:15px;top:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none;border-right-color:#e5e5e5;border-width:7px;margin-top:-7px;opacity:0}.annotation-container .annotation-label{display:table-cell;vertical-align:middle;font-size:10px;font-weight:bold;user-select:none;-webkit-user-select:none}#code-annotation-container,#additional-code-annotation-container{display:none;position:absolute;z-index:95;width:200px;font-size:80%;background-color:#F5A623;border-top-right-radius:2px;border-bottom-right-radius:2px;hyphens:auto}#code-annotation-container .play-pause-container,#additional-code-annotation-container .play-pause-container{text-align:center;font-size:1.8rem;cursor:pointer}#code-annotation-container .annotation-description,#additional-code-annotation-container .annotation-description{display:table-cell;vertical-align:middle;padding:0.5rem}#code-annotation-container.shown,#additional-code-annotation-container.shown{display:inline-block}#code-annotation-container.vertical,#additional-code-annotation-container.vertical{z-index:95;border-radius:2px}#code-annotation-container.vertical.show-tip:after,#additional-code-annotation-container.vertical.show-tip:after{opacity:1;transform:translateY(0);-webkit-transition:all 0.2s ease-out;-moz-transition:all 0.2s ease-out;transition:all 0.2s ease-out}#code-annotation-container.vertical:after,#additional-code-annotation-container.vertical:after{top:100%;left:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none;border-color:rgba(245,166,35,0);border-top-color:#F5A623;border-width:7px;margin-left:-7px;transform:translateY(-5px)}.listing-container{z-index:95;background-color:white}.listing-container .code-area-container{position:relative}.listing-container .code-area-container .code-area .line-container{position:absolute}.listing-container .deemphasized-code{color:gray !important}.listing-container .code-annotations-overlay-container{position:absolute;top:0;right:0;bottom:0;width:25px}.listing-container .code-annotations-overlay-container,.listing-container .code-area{display:block}.listing-container .code-area>.hljs{padding:0 0.5em 0 0}.listing-container .CodeMirror{display:none}.listing-container.edit-mode .code-annotations-overlay-container,.listing-container.edit-mode .code-area{display:none}.listing-container.edit-mode .CodeMirror{display:block}.listing-container .emphasized-code{font-weight:bolder}.listing-container .hidden-annotation{opacity:0}.listing-container .shown-annotation{opacity:1}.listing-container .emphasized-annotation{-webkit-animation:fadeIn ease-in 1;-moz-animation:fadeIn ease-in 1;animation:fadeIn ease-in 1;-webkit-animation-fill-mode:forwards;-moz-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-duration:0.5s;-moz-animation-duration:0.5s;animation-duration:0.5s}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-moz-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}#text-addons-menu{width:350px;max-width:100vw}#text-addons-menu .search-input-container{padding:0 5px}#text-addons-menu .search-input{width:201px}#text-addons-menu .sort-command-container{position:absolute;top:0;right:10px}#text-addons-menu .sort-command-container .selected{font-weight:bolder;text-decoration:underline}#book-markup-container .search-result{background-color:yellow}.readable-text>p,.readable-text>h1,.readable-text>h2,.readable-text>h3,.readable-text>h4,.readable-text>h5{padding:5px;border-right:2px solid transparent}.readable-text.matching-note-bubble-visible>p,.readable-text.matching-note-bubble-visible>h1,.readable-text.matching-note-bubble-visible>h2,.readable-text.matching-note-bubble-visible>h3,.readable-text.matching-note-bubble-visible>h4{background:#fff;border-left:0}.readable-text.being-annotated>p,.readable-text.being-annotated>h1,.readable-text.being-annotated>h2,.readable-text.being-annotated>h3,.readable-text.being-annotated>h4{background:#EAF0F9}.readable-text.contains-search-result>p,.readable-text.contains-search-result>h1,.readable-text.contains-search-result>h2,.readable-text.contains-search-result>h3,.readable-text.contains-search-result>h4{border-right:2px solid yellow}#notes-menu{width:250px;position:absolute;top:100px;right:20px;background:white;border-left:1px solid #ccc;padding:5px 10px 10px;z-index:96;box-shadow:1px 0 5px 0 rgba(0,0,0,0.1)}@media only screen and (min-width: 320px) and (max-width: 689px){#notes-menu{width:350px;max-width:75%}}#notes-menu .notes-menu-close{color:#666;position:absolute;top:0;right:0;padding:0.5em;cursor:pointer}#notes-menu .button{margin-bottom:0}#notes-menu.closed{display:none}#notes-menu.open{display:block}#notes-menu:not(.no-tip):after,#notes-menu:not(.no-tip):before{right:100%;top:23px;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}#notes-menu:not(.no-tip):after{border-color:rgba(136,183,213,0);border-right-color:white;border-width:8px;margin-top:-8px}#notes-menu:not(.no-tip):before{border-color:rgba(194,225,245,0);border-right-color:#ccc;border-width:10px;margin-top:-10px}#notes-menu .notes-menu-heading{color:#666;margin-top:2px;font-size:18px;font-weight:500;user-select:none;-webkit-user-select:none}#notes-menu .note-delete-icon,#notes-menu .note-edit-icon{position:absolute;right:0.2rem;top:0.2rem;color:#666;cursor:pointer;display:none;width:24px;height:24px;text-align:center;cursor:pointer;color:#666;transition:all 0.25s ease-out;border:1px solid #ccc;background:#fff;font-size:16px;padding-top:2px}#notes-menu .note-delete-icon:hover,#notes-menu .note-edit-icon:hover{color:#000}#notes-menu .note-close-icon{display:none !important}#notes-menu .note-delete-icon{border-top-right-radius:3px;border-bottom-right-radius:3px;border-left:0}#notes-menu .note-edit-icon{right:27px;border-top-left-radius:3px;border-bottom-left-radius:3px;border-right:0}#notes-menu .note-item-container{position:relative;padding:10px}#notes-menu .note-item-container .note-item-username-container{font-weight:bold}#notes-menu .note-item-container:not(.edit-mode) .note-input-container{display:none}#notes-menu .note-item-container:not(.edit-mode) .note-content-container{display:block;max-height:200px;overflow:auto}#notes-menu .note-item-container:not(.edit-mode):hover .note-delete-icon,#notes-menu .note-item-container:not(.edit-mode):hover .note-edit-icon{display:block}#notes-menu .note-item-container:not(.edit-mode) .note-input-save,#notes-menu .note-item-container:not(.edit-mode) .note-input-cancel{display:none}#notes-menu .note-item-container.edit-mode .note-input-container{display:block}#notes-menu .note-item-container.edit-mode .note-content-container{display:none}#notes-menu .note-item-container.edit-mode:hover .note-close-icon{display:block}#notes-menu .note-item-container.edit-mode .note-input-save,#notes-menu .note-item-container.edit-mode .note-input-cancel{display:inline-block}#notes-menu .note-item-container:not(:last-child){border-bottom:1px dashed #ccc}#notes-menu .note-item-container:last-child{padding-bottom:0}#notes-menu .note-item-container .waiting-for-deletion{opacity:0.4}#notes-menu .note-input-container{display:none;position:relative}#notes-menu .note-content-container{display:block;color:black;font-size:14px;position:relative;padding:5px}#notes-menu .note-content-container:hover{background-color:#f9f9f9}#notes-menu #note-input-box,#notes-menu .note-input-container{height:100px;border:1px solid #eee;box-shadow:none;overflow:auto}#notes-menu .note-input-container{margin-bottom:3px}#notes-menu .note-input-save{margin-right:10px}#notes-menu #note-input-box{margin-top:10px}#notes-menu .notes-list{list-style-type:none;font-size:smaller;margin-bottom:5px;margin-left:0;overflow-y:auto;overscroll-behavior-y:none;-webkit-overflow-scrolling:touch;margin-top:5px;max-height:500px;overflow:auto;border-top:1px solid #ccc}#notes-menu .notes-list li{padding-left:5px}.highlighted-code{background-color:darkgrey;font-weight:bolder}.highlighted-text,.highlighted-note-text,.dummy-highlighted-text{background-color:#ffe680}.highlighted-text.selected-highlight,.highlighted-note-text.selected-highlight,.dummy-highlighted-text.selected-highlight{background-color:#fd5}.highlighted-text.highlight-color-yellow,.highlighted-note-text.highlight-color-yellow,.dummy-highlighted-text.highlight-color-yellow{background-color:#ffe680}.highlighted-text.highlight-color-yellow.selected-highlight,.highlighted-note-text.highlight-color-yellow.selected-highlight,.dummy-highlighted-text.highlight-color-yellow.selected-highlight{background-color:#fd5}.highlighted-text.highlight-color-red,.highlighted-note-text.highlight-color-red,.dummy-highlighted-text.highlight-color-red{background-color:#faa}.highlighted-text.highlight-color-red.selected-highlight,.highlighted-note-text.highlight-color-red.selected-highlight,.dummy-highlighted-text.highlight-color-red.selected-highlight{background-color:#f55}.highlighted-text.highlight-color-green,.highlighted-note-text.highlight-color-green,.dummy-highlighted-text.highlight-color-green{background-color:#afe9af}.highlighted-text.highlight-color-green.selected-highlight,.highlighted-note-text.highlight-color-green.selected-highlight,.dummy-highlighted-text.highlight-color-green.selected-highlight{background-color:#87de87}.highlighted-text.highlight-color-blue,.highlighted-note-text.highlight-color-blue,.dummy-highlighted-text.highlight-color-blue{background-color:#acf}.highlighted-text.highlight-color-blue.selected-highlight,.highlighted-note-text.highlight-color-blue.selected-highlight,.dummy-highlighted-text.highlight-color-blue.selected-highlight{background-color:#80b3ff}.highlighted-text.highlight-color-pink,.highlighted-note-text.highlight-color-pink,.dummy-highlighted-text.highlight-color-pink{background-color:#fac}.highlighted-text.highlight-color-pink.selected-highlight,.highlighted-note-text.highlight-color-pink.selected-highlight,.dummy-highlighted-text.highlight-color-pink.selected-highlight{background-color:#f59}.annotated-text{background-color:lightgrey;cursor:pointer}.readable-text.paragraph-selected p,.readable-text.paragraph-selected h1,.readable-text.paragraph-selected h2,.readable-text.paragraph-selected h3,.readable-text.paragraph-selected h4,.readable-text.paragraph-selected h5,.readable-text.paragraph-selected h6{background-color:rgba(254,216,1,0.2)}.readable-text.paragraph-selected.clickable:hover p,.readable-text.paragraph-selected.clickable:hover h1,.readable-text.paragraph-selected.clickable:hover h2,.readable-text.paragraph-selected.clickable:hover h3,.readable-text.paragraph-selected.clickable:hover h4,.readable-text.paragraph-selected.clickable:hover h5,.readable-text.paragraph-selected.clickable:hover h6{background-color:rgba(254,216,1,0.4)}li.readable-text.paragraph-selected{background-color:rgba(254,216,1,0.2)}li.readable-text.paragraph-selected.clickable:hover{background-color:rgba(254,216,1,0.4)}.readable-text.clickable:hover p,.readable-text.clickable:hover h1,.readable-text.clickable:hover h2,.readable-text.clickable:hover h3,.readable-text.clickable:hover h4,.readable-text.clickable:hover h5,.readable-text.clickable:hover h6{background-color:rgba(160,160,160,0.2)}li.readable-text.clickable:hover{background-color:rgba(160,160,160,0.2)}.text-selection-reference-node,.highlight-tooltip-reference-node{position:absolute}.text-selection-tooltip-container,.highlight-tooltip-container,.indexed-term-tooltip-container{padding:2px;font-size:1.4rem;cursor:default;user-select:none;-webkit-user-select:none;display:flex;align-items:center}.text-selection-tooltip-container i,.highlight-tooltip-container i,.indexed-term-tooltip-container i{display:inline-block;margin:0 8px;cursor:pointer}.text-selection-tooltip-container .note-button,.text-selection-tooltip-container .highlight-button,.highlight-tooltip-container .note-button,.highlight-tooltip-container .highlight-button,.indexed-term-tooltip-container .note-button,.indexed-term-tooltip-container .highlight-button{display:none}.text-selection-tooltip-container i,.highlight-tooltip-container i,.indexed-term-tooltip-container i{cursor:pointer}.text-selection-tooltip-container .color-selector,.highlight-tooltip-container .color-selector,.indexed-term-tooltip-container .color-selector{cursor:pointer;display:inline-block;margin:0 8px}.text-selection-tooltip-container .color-selector.selected,.highlight-tooltip-container .color-selector.selected,.indexed-term-tooltip-container .color-selector.selected{text-decoration:underline}.text-selection-tooltip-container .color-selector.red,.highlight-tooltip-container .color-selector.red,.indexed-term-tooltip-container .color-selector.red{color:#f55}.text-selection-tooltip-container .color-selector.red.selected,.highlight-tooltip-container .color-selector.red.selected,.indexed-term-tooltip-container .color-selector.red.selected{text-shadow:0px 0px 3px #f22}.text-selection-tooltip-container .color-selector.green,.highlight-tooltip-container .color-selector.green,.indexed-term-tooltip-container .color-selector.green{color:#87de87}.text-selection-tooltip-container .color-selector.green.selected,.highlight-tooltip-container .color-selector.green.selected,.indexed-term-tooltip-container .color-selector.green.selected{text-shadow:0px 0px 3px #5fd35f}.text-selection-tooltip-container .color-selector.yellow,.highlight-tooltip-container .color-selector.yellow,.indexed-term-tooltip-container .color-selector.yellow{color:#fd5}.text-selection-tooltip-container .color-selector.yellow.selected,.highlight-tooltip-container .color-selector.yellow.selected,.indexed-term-tooltip-container .color-selector.yellow.selected{text-shadow:0px 0px 3px #ffd322}.text-selection-tooltip-container .color-selector.blue,.highlight-tooltip-container .color-selector.blue,.indexed-term-tooltip-container .color-selector.blue{color:#80b3ff}.text-selection-tooltip-container .color-selector.blue.selected,.highlight-tooltip-container .color-selector.blue.selected,.indexed-term-tooltip-container .color-selector.blue.selected{text-shadow:0px 0px 3px #4d94ff}.text-selection-tooltip-container .color-selector.pink,.highlight-tooltip-container .color-selector.pink,.indexed-term-tooltip-container .color-selector.pink{color:#f59}.text-selection-tooltip-container .color-selector.pink.selected,.highlight-tooltip-container .color-selector.pink.selected,.indexed-term-tooltip-container .color-selector.pink.selected{text-shadow:0px 0px 3px #ff227a}html.night-mode{background:#2e3436}body.night-mode{background:#2e3436}body.night-mode .placeholder-animated-background{background:linear-gradient(to right, #9a9898 10%, #7f7f7f 18%, #858585 33%)}body.night-mode code{background-color:#929799}body.night-mode .unscramble-target p,body.night-mode li.unscramble-target{background-color:#383d3f}body.night-mode.unlock-supported:not(.free-preview-mode) .scrambled p:hover,body.night-mode.unlock-supported:not(.free-preview-mode) li.scrambled:hover{background-color:#383d3f}body.night-mode .unscrambling p,body.night-mode li.unscrambling{background-color:#383d3f}body.night-mode .scrambled-notifier.unlock-notifier:before{border-color:transparent transparent #2e3436 transparent}body.night-mode #toc-index-menu .current-book-element.book-element-link,body.night-mode #toc-index-menu .book-section .book-element-link.selected-heading{text-decoration:underline}body.night-mode .tooltip{color:#333;background:#fff}body.night-mode .tooltip>.nub{border-color:transparent transparent #fff transparent}body.night-mode .highlighted-text,body.night-mode .highlighted-note-text,body.night-mode .dummy-highlighted-text{background-color:#d0a700}body.night-mode .highlighted-text.highlight-color-yellow,body.night-mode .highlighted-note-text.highlight-color-yellow,body.night-mode .dummy-highlighted-text.highlight-color-yellow{background-color:#d0a700}body.night-mode .highlighted-text.highlight-color-red,body.night-mode .highlighted-note-text.highlight-color-red,body.night-mode .dummy-highlighted-text.highlight-color-red{background-color:#892828}body.night-mode .highlighted-text.highlight-color-green,body.night-mode .highlighted-note-text.highlight-color-green,body.night-mode .dummy-highlighted-text.highlight-color-green{background-color:#3e913e}body.night-mode .highlighted-text.highlight-color-blue,body.night-mode .highlighted-note-text.highlight-color-blue,body.night-mode .dummy-highlighted-text.highlight-color-blue{background-color:#4075c5}body.night-mode .highlighted-text.highlight-color-pink,body.night-mode .highlighted-note-text.highlight-color-pink,body.night-mode .dummy-highlighted-text.highlight-color-pink{background-color:#d91d68}body.night-mode #book-markup-container{color:#b9b9ad}body.night-mode #book-markup-container h1,body.night-mode #book-markup-container h2,body.night-mode #book-markup-container h3,body.night-mode #book-markup-container h4,body.night-mode #book-markup-container h5,body.night-mode #book-markup-container h6{color:#b9b9ad}body.night-mode #book-markup-container .readable-text a{color:#4392e0}body.night-mode #book-markup-container .readable-text kbd{background-color:#515556}body.night-mode #book-markup-container .listing-container .code-area{color:#b9b9ad}body.night-mode #book-markup-container .introduction-summary{background-color:#515556;border-color:transparent}body.night-mode #book-markup-container .introduction-summary li,body.night-mode #book-markup-container .introduction-summary p,body.night-mode #book-markup-container .introduction-summary h3{color:#b9b9ad}body.night-mode #book-markup-container .browsable-container,body.night-mode #book-markup-container .browsable-container h1,body.night-mode #book-markup-container .browsable-container h2,body.night-mode #book-markup-container .browsable-container h3,body.night-mode #book-markup-container .browsable-container h4,body.night-mode #book-markup-container .browsable-container h5,body.night-mode #book-markup-container .browsable-container h6,body.night-mode #book-markup-container #code-annotation-container,body.night-mode #book-markup-container #code-annotation-container h1,body.night-mode #book-markup-container #code-annotation-container h2,body.night-mode #book-markup-container #code-annotation-container h3,body.night-mode #book-markup-container #code-annotation-container h4,body.night-mode #book-markup-container #code-annotation-container h5,body.night-mode #book-markup-container #code-annotation-container h6,body.night-mode #book-markup-container .interactive-container,body.night-mode #book-markup-container .interactive-container h1,body.night-mode #book-markup-container .interactive-container h2,body.night-mode #book-markup-container .interactive-container h3,body.night-mode #book-markup-container .interactive-container h4,body.night-mode #book-markup-container .interactive-container h5,body.night-mode #book-markup-container .interactive-container h6{color:#3C3C3C}body.night-mode .callout-container:not(.interactive-container),body.night-mode .listing-container{background-color:#515556}body.night-mode #toc-index-menu,body.night-mode #indexed-terms-slide-menu .term-viewer-root,body.night-mode #books-menu .slide-in-menu-container{background-color:#515556;color:#b9b9ad}body.night-mode .term-viewer-root a{color:#c7d4e6}body.night-mode .term-viewer-root .term-viewer-html-content kbd{background-color:unset}body.night-mode .term-viewer-root .term-viewer-html-content .code-area-container{color:black}body.night-mode .term-viewer-root h5,body.night-mode .term-viewer-root h4{color:#b9b9ad}body.night-mode .dog-ears-container:before{border-color:#171616 #171616 #2e3436 #2e3436}body.night-mode .dog-ears-container.dog-ears-active:before{border-color:#171616 #171616 #2e3436 #2e3436}body.night-mode #books-menu .book-item-row .book-title,body.night-mode #books-menu .book-item-row .book-authors{color:#b9b9ad}body.night-mode .browsable-container h4,body.night-mode .browsable-container h5,body.night-mode .interactive-container h4,body.night-mode .interactive-container h5{color:#3C3C3C}body.night-mode #track-point-column{background-color:#515556}body.night-mode .paragraph-bubble .text-margin-icon-bubble{color:#b9b9ad}body.night-mode .readable-text.matching-note-bubble-visible>p,body.night-mode .readable-text.matching-note-bubble-visible>h1,body.night-mode .readable-text.matching-note-bubble-visible>h2,body.night-mode .readable-text.matching-note-bubble-visible>h3,body.night-mode .readable-text.matching-note-bubble-visible>h4{background:rgba(81,85,86,0.7)}body.night-mode .readable-text.being-annotated>p,body.night-mode .readable-text.being-annotated>h1,body.night-mode .readable-text.being-annotated>h2,body.night-mode .readable-text.being-annotated>h3,body.night-mode .readable-text.being-annotated>h4{background:rgba(81,85,86,0.7)}body.night-mode .highlighted-text{color:white}.listing-container .code-area{line-height:1.3 !important;font-size:13px;overflow-x:auto}.listing-container .code-area .hljs{background:initial}.listing-container .code-area .hljs .bold{font-weight:900;background-color:#cccccc73}.listing-container .code-area .line-container{position:absolute;left:0;right:20px;top:0px;opacity:0.6;cursor:pointer}.listing-container .code-area .line-container.highlighted{background:rgba(230,230,230,0.4)}.listing-container .code-area .line-container.pre-selected{background:rgba(230,230,230,0.5)}.listing-container .code-area .line-container.selected{background:rgba(230,230,230,0.6)}#book-markup-container .readable-text a{color:#2b44d1;text-decoration:underline}.code-area-container{padding-left:10px}pre.prettyprint{padding:5px 0;background:#fff;border:none}@media only screen and (min-height: 320px) and (max-height: 450px){.tab-container.selected .index-symbols-container{display:none}.index-container .index-content-container{margin-left:5px}}@media only screen and (min-height: 451px) and (max-height: 600px){.tab-container.selected .index-symbols-container{line-height:1.3}}@media only screen and (min-height: 601px) and (max-height: 720px){.tab-container.selected .index-symbols-container{line-height:1.5}}@media only screen and (min-height: 720px) and (max-height: 850px){.tab-container.selected .index-symbols-container{line-height:1.7}}@media only screen and (min-height: 851px){.tab-container.selected .index-symbols-container{line-height:2}}.user-logged-in .text-selection-tooltip-container .note-button,.user-logged-in .text-selection-tooltip-container .highlight-button{display:inline-block}.live-audio-disabled #current-position-point,.live-audio-disabled #play-point,.live-audio-disabled .audio-controls-container{display:none !important}.editor-bubble{background-color:whitesmoke}#download-exercises-link{position:fixed;top:85px;right:2rem;display:none;cursor:pointer}.book-edit #download-exercises-link{display:block}#text-addons-pagination{text-align:center;margin:0}#text-addons-pagination.has-items{border-top:1px dashed rgba(255,255,255,0.2);padding:5px 0 0 0}#text-addons-pagination li{color:#ffffff;font-size:smaller;list-style-type:none;display:inline;margin-right:10px;user-select:none;-webkit-user-select:none;cursor:pointer}#text-addons-pagination li:hover,#text-addons-pagination li.active{color:#0e5ba9}.book-page .tour-feedback-tooltip-item.tour{display:block}.unscrambling{position:relative}.unscrambling p{position:relative}.scrambling-character{display:inline-block;visibility:visible;text-decoration:inherit}.scrambling-word{display:inline-block;transform:translate3d(0px, 0px, 0px);text-decoration:inherit}.scrambling-animated{animation-duration:0.5s;animation-fill-mode:both}.scrambling-animated.scrambling-character,.scrambling-animated .scrambling-character{text-decoration:none !important}.rotate-around{transform-origin:center center;animation-timing-function:linear}.rotate-to-start{animation-timing-function:linear;animation-duration:1s}.rotate-in{transform-origin:center center;animation-iteration-count:1}.rotate-out{animation-iteration-count:1;transform-origin:center center}.unscrambled-content-container{position:absolute;top:5px;left:5px}li .unscrambled-content-container{top:0px;left:1em}.review-book #text-addons-menu .text-addon-item-text{text-decoration:none}#text-addons-menu .text-addon-item-content{display:block;hyphens:auto}#text-addons-menu .tab-title{color:lightgray}#text-addons-menu .tab-title .fa{margin-right:0.5em}#text-addons-menu .text-addon-item-text{text-decoration:underline}#text-addons-menu .text-addon-item-username-container{font-weight:bold}#text-addons-menu .items-container ul{margin:0}#text-addons-menu .items-container .text-addon-item{position:relative;margin:0;padding:0.5rem 2rem}#text-addons-menu .items-container .text-addon-item .text-addon-icon,#text-addons-menu .items-container .text-addon-item .delete-text-addon-icon{position:absolute;color:white;top:0.8rem}#text-addons-menu .items-container .text-addon-item:first-of-type{border-top:1px dashed transparent}#text-addons-menu .items-container .text-addon-item:hover{background:initial}#text-addons-menu .items-container .text-addon-item.waiting-for-deletion{opacity:0.5}#text-addons-menu .text-addon-icon{left:0.7rem;width:12px}#text-addons-menu .text-addon-icon.red{color:#f55}#text-addons-menu .text-addon-icon.yellow{color:#fd5}#text-addons-menu .text-addon-icon.green{color:#87de87}#text-addons-menu .text-addon-icon.blue{color:#80b3ff}#text-addons-menu .text-addon-icon.pink{color:#f59}#text-addons-menu .delete-text-addon-icon{cursor:pointer;right:1.3rem}#pointing-info-box{display:none;width:310px;position:fixed;background-color:gray;bottom:46px;left:50%;transform:translateX(-50%);border-radius:3px;z-index:95;background-color:#fff;border:solid 1px #666;font-size:14px;transition:transform 0.2s ease-in-out}#pointing-info-box:not(.shown){transform:translate(-50%, 150%)}#pointing-info-box.shown{transform:translate(-50%, 0)}#pointing-info-box .fa,#pointing-info-box .add-to-cart-button{user-select:none;-webkit-user-select:none;-moz-user-select:moz-none;-ms-user-select:none}#pointing-info-box input{height:37px;display:inline-block}#pointing-info-box .pointing-info-right-container,#pointing-info-box .pointing-info-left-container{font-size:20px;display:inline-block;cursor:pointer;margin:5px 0;width:40px;height:35px;text-align:center}#pointing-info-box .pointing-info-right-container{float:right;color:gray}#pointing-info-box .pointing-info-left-container{float:left}#pointing-info-box .pointing-info-middle-container{line-height:35px;height:35px;padding:3px 0;display:inline-block;width:220px;text-align:center}#pointing-info-box .pointing-info-middle-container a{display:inline-block;width:100%}.text-addon-item-link{display:block}#book-resources-menu .book-resources-links-container{font-size:14px;margin-bottom:10px}#book-resources-menu .book-resources-links-container a{color:white}#book-resources-menu .book-resources-links-container .fa-star{color:#fc0}#book-resources-menu .book-resources-links-container .book-resource-link{display:block;padding:10px 15px}#book-resources-menu .book-resources-links-container .book-resource-link:hover{color:#222222;background-color:#cccccc}#book-resources-menu .book-resources-links-container:last-of-type{margin-bottom:0}#link-preview-popup{width:400px;position:absolute;top:0;right:0;background:white;border-left:1px solid #ccc;z-index:96;box-shadow:1px 0 5px 4px rgba(0,0,0,0.1)}#link-preview-popup .chapter-preview-container{max-height:150px;overflow:hidden}#link-preview-popup .browsable-preview-container{overflow-y:auto;max-height:50vh;padding:10px;font-size:smaller}#link-preview-popup .browsable-preview-container h4,#link-preview-popup .browsable-preview-container h5{font-size:inherit}#link-preview-popup.book-element-preview .chapter-preview-container{display:block}#link-preview-popup.book-element-preview .browsable-preview-container{display:none}#link-preview-popup.browsable-preview{padding:10px}#link-preview-popup.browsable-preview .chapter-preview-container{display:none}#link-preview-popup.browsable-preview .browsable-preview-container{display:block}#link-preview-popup .book-cover{width:30%}#link-preview-popup.is-cover-left{padding:0 0 0 0}#link-preview-popup.is-cover-left .book-cover{float:left;margin-right:5px}#link-preview-popup.is-cover-left .chapter-preview-title{padding-top:10px;padding-right:10px}#link-preview-popup.is-cover-left .chapter-preview-paragraphs-container{padding-right:20px;padding-bottom:10px}#link-preview-popup.is-cover-right{padding:0 0 0 10px}#link-preview-popup.is-cover-right .book-cover{float:right;margin-left:5px}#link-preview-popup.is-cover-right .chapter-preview-title{padding-top:10px;padding-left:10px;padding-right:10px}#link-preview-popup.is-cover-right .chapter-preview-paragraphs-container{padding-left:20px;padding-right:10px;padding-bottom:10px}#link-preview-popup.is-arrow-up .arrow-up{display:block}#link-preview-popup.is-arrow-up .arrow-down{display:none}#link-preview-popup.is-arrow-down .arrow-up{display:none}#link-preview-popup.is-arrow-down .arrow-down{display:block}#link-preview-popup .chapter-preview-title{font-weight:bold;display:block}#link-preview-popup .chapter-preview-paragraphs-container{overflow:auto;font-size:smaller;display:block;padding-top:5px}#link-preview-popup .chapter-preview-paragraphs-container ul{font-size:inherit;list-style-position:outside}#link-preview-popup .chapter-preview-paragraphs-container p{font-size:inherit;margin:0}#link-preview-popup .chapter-preview-paragraphs-container h1,#link-preview-popup .chapter-preview-paragraphs-container h2,#link-preview-popup .chapter-preview-paragraphs-container h3,#link-preview-popup .chapter-preview-paragraphs-container h4,#link-preview-popup .chapter-preview-paragraphs-container h5{font-size:inherit}#link-preview-popup.closed{display:none}#link-preview-popup.open{display:block}#link-preview-popup .arrow-up{position:absolute;top:0;left:0;transform:translateY(-100%);width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid white}#link-preview-popup .arrow-down{position:absolute;width:0;height:0;bottom:0;left:0;transform:translateY(100%);border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid white}body:not(.book-edit) .text-addendum-container .text-addendum-delete-button{display:none}.text-addendum-container{position:relative}.text-addendum-container .text-addendum-delete-button{position:absolute;top:10px;right:10px;cursor:pointer}@media screen and (max-width: 800px){.text-addendum-container .text-addendum-delete-button{top:3px}}#text-addendum-modal textareaÂ {margin-bottom:0}.time-limited-preview-message-header-container .modal-title-container h3{font-weight:300;margin-bottom:0}.time-limited-preview-message-header-container .modal-title-container h3 strong{font-weight:400}@media screen and (max-width: 550px){.time-limited-preview-message-header-container .modal-title-container h3{font-size:1.5em}}@media screen and (max-width: 420px){.time-limited-preview-message-header-container .modal-title-container h3{font-size:1.1em}}.time-limited-preview-message-container .tokens-button{line-height:1.85}@media screen and (max-width: 400px){.time-limited-preview-message-container .tokens-button{padding:0.25em 0.75em}}.time-limited-preview-message-container .add-to-cart-button,.time-limited-preview-message-container .sign-in-button,.time-limited-preview-message-container .start-preview-button{color:white;background-color:#3C67A2}.time-limited-preview-message-container .add-to-cart-button:hover,.time-limited-preview-message-container .sign-in-button:hover,.time-limited-preview-message-container .start-preview-button:hover{background-color:#355b8f}.time-limited-preview-message-container .add-to-cart-button:active,.time-limited-preview-message-container .sign-in-button:active,.time-limited-preview-message-container .start-preview-button:active{background-color:#2e4f7d}.time-limited-preview-message-container .start-preview-button{margin-right:1em}.time-limited-preview-message-container .modal-content-container .action-button{float:right}.time-limited-preview-message-container .modal-content-container .cancel-button{float:left}.time-limited-preview-message-container .modal-content-container .free-preview-sign-in{float:left}.time-limited-preview-message-container .time-limited-preview-content-container{margin-bottom:0.75em;color:gray}@media screen and (max-width: 550px){.time-limited-preview-message-container .time-limited-preview-content-container{font-size:0.9em}}@media screen and (max-width: 420px){.time-limited-preview-message-container .time-limited-preview-content-container{line-height:1.2;font-size:0.8em}}@media screen and (max-width: 500px){.token-meap-notification-modal p{font-size:0.8em}}.collapsible-panel-opened .exercise-container{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, transform;-webkit-transition-duration:0.4s;transition-duration:0.4s}#book-markup-container .callout-container.interactive-container.web-design-playground{padding:0;overflow:hidden;background:#fc0}#book-markup-container .callout-container.interactive-container.web-design-playground iframe{overflow:hidden;height:75vh;background:white}@media screen and (min-width: 400px){#book-markup-container .callout-container.interactive-container.web-design-playground{margin:0;width:100%}}@media screen and (min-width: 900px){#book-markup-container .callout-container.interactive-container.web-design-playground{margin:0 -10%;width:120%}}@media screen and (min-width: 1100px){#book-markup-container .callout-container.interactive-container.web-design-playground{margin:0 -25%;width:150%}}#track-point-column{display:none;height:100%;width:1px;position:absolute;background-color:#d7d7d7;left:5%}#track-point-column.shown{display:inline-block}@media only screen and (min-width: 320px){#track-point-column{left:1% !important}}@media only screen and (min-width: 360px){#track-point-column{left:4% !important}}@media only screen and (min-width: 480px){#track-point-column{left:4% !important}}.track-point-wrapper{position:absolute;left:-15px;visibility:hidden;height:35px;width:35px;z-index:10}.track-point-wrapper:hover{cursor:pointer}.track-point-wrapper.shown{visibility:visible}.book-cover-link{display:inline-block;position:relative}#newest-edition-box{position:fixed;right:1.2rem;top:130px;max-width:225px;z-index:97;display:none;border:1px solid transparent;border-radius:6px;-webkit-box-shadow:0 1px 1px rgba(0,0,0,0.05);box-shadow:0 1px 1px rgba(0,0,0,0.05)}@media screen and (max-width: 1085px){#newest-edition-box{display:none !important}}#newest-edition-box .newest-edition-available-link{text-align:center;padding:10px 15px;color:darkslategray;background:#d9e9cd;display:block;transition:all ease-in-out 125ms;text-decoration:none !important;border:none}#newest-edition-box .newest-edition-available-link:hover{background:#bad8a4}#newest-edition-box .newest-edition-available-heading{display:block}#newest-edition-box .newest-edition-available-heading{font-size:1.3em;font-weight:300;display:block}#newest-edition-box .newest-edition-available-book-title{font-size:1em;font-style:italic;display:block}#newest-edition-box .newest-edition-available-this-included{font-size:75%;display:none;margin-top:0.5em}.time-limited-preview-message-container .add-to-wish-list-button{margin-right:0.5em;float:left !important}.content-tag p{background-color:lightgray}.content-tag::before{border-color:lightgray;background:gray;color:white}.content-tag::before{content:attr(data-content-tag);position:absolute;transform:translate(50%, -50%);padding:0 0.25em;border-radius:0.2em;font-size:70%;line-height:1.8em}.content-tag.color-yellow p{background-color:#ffe680}.content-tag.color-yellow::before{background:#fd5;color:white}.content-tag.color-red p{background-color:#faa}.content-tag.color-red::before{background:#f55;color:white}.content-tag.color-green p{background-color:#afe9af}.content-tag.color-green::before{background:#87de87;color:white}.content-tag.color-blue p{background-color:#acf}.content-tag.color-blue::before{background:#80b3ff;color:white}.content-tag.color-pink p{background-color:#fac}.content-tag.color-pink::before{background:#f59;color:white}li.content-tag{background-color:lightgray}li.content-tag.color-yellow{background-color:#ffe680}li.content-tag.color-red{background-color:#faa}li.content-tag.color-green{background-color:#afe9af}li.content-tag.color-blue{background-color:#acf}li.content-tag.color-pink{background-color:#fac}.book-meap .error-report{display:initial}body:not(.book-meap) .error-report{display:none}#free-ebooks-upsell-root{position:fixed;top:130px;right:1em;background-color:white;padding:0.5em;width:165px}@media screen and (min-width: 1030px){#free-ebooks-upsell-root{width:200px}}@media screen and (min-width: 1500px){#free-ebooks-upsell-root{width:250px;right:1.5em}}@media screen and (min-width: 1600px){#free-ebooks-upsell-root{width:300px}}#free-ebooks-upsell-root .slick-dotted.slick-slider{margin-bottom:0.15em}#free-ebooks-upsell-root .slick-prev:before,#free-ebooks-upsell-root .slick-next:before{font-family:FontAwesome;color:#444}#free-ebooks-upsell-root .free-ebooks-upsell-close{display:none;position:absolute;top:0.25em;right:0.5em;cursor:pointer}#free-ebooks-upsell-root .slick-next{right:-20px}#free-ebooks-upsell-root .slick-prev{left:-20px}#free-ebooks-upsell-root .slick-prev:before{content:"\\f104"}#free-ebooks-upsell-root .slick-next:before{content:"\\f105"}@media screen and (max-width: 970px) and (max-height: 600px){#free-ebooks-upsell-root{display:none !important}}@media screen and (max-width: 970px){#free-ebooks-upsell-root{bottom:27px;left:0;right:0;top:initial;width:100%;margin:0 auto;max-width:600px;z-index:96;padding:initial;border:1px solid #eee}#free-ebooks-upsell-root .free-ebooks-upsell-carausel{width:90%;margin:0 auto;margin-bottom:0.5em}#free-ebooks-upsell-root .free-ebooks-upsell-close{display:block}}#free-ebooks-upsell-root .slick-slide{margin:0.5em;margin-bottom:0}#free-ebooks-upsell-root .slick-dots{bottom:-13px}#free-ebooks-upsell-root .slick-dots li button:before{content:\'â¢\';font-size:20px;font-family:initial}#free-ebooks-upsell-root .free-ebooks-upsell-title{text-align:center;font-size:120%;user-select:none;-webkit-user-select:none;font-weight:300}#free-ebooks-upsell-root .free-ebooks-upsell-carausel-item{position:relative;display:inline-block;border:solid thin #ddd;border-bottom-width:0}#free-ebooks-upsell-root .free-ebooks-upsell-carausel-item:focus{outline:none}#free-ebooks-upsell-root .carausel-price-container{position:absolute;bottom:0;left:0;width:100%;color:white;background-color:#407fbf;padding:0.2em 0;text-align:center;white-space:nowrap;font-size:85%;display:flex;justify-content:center;align-items:center}@media screen and (min-width: 970px) and (max-width: 1030px){#free-ebooks-upsell-root .carausel-price-container{font-size:65%}}#free-ebooks-upsell-root .carausel-original-price-container{font-size:70%;position:relative;color:#9fbfdf;margin-right:0.25em;align-self:flex-end}#free-ebooks-upsell-root .carausel-original-price-container::before{position:absolute;content:"";left:-0.15em;top:calc(50% - 1px);right:-0.15em;border-top:2px solid #2d5986;transform:rotate(-5deg)}#free-ebooks-upsell-root .carausel-discounted-price-container{font-size:80%}.dog-ears-container{position:absolute;right:0;border:none;padding:1.6em;overflow:hidden;transition:border-radius 0s;cursor:pointer}.dog-ears-container:before{cursor:pointer;content:"";position:absolute;top:0;right:0;border-style:solid;box-shadow:1px 1px 5px rgba(0,0,0,0.4);width:0;border-width:12px;border-color:#D9D9D9 #D9D9D9 #FFF #FFF;transition:border-width .2s, border-color .2s}.dog-ears-container.dog-ears-mouse-over:before{border-width:18px}.dog-ears-container.dog-ears-active:before{border-width:20px;border-color:#EEE #EEE #FFF #FFF}@media screen and (max-width: 600px){.dog-ears-container:before{border-width:10px}.dog-ears-container.dog-ears-mouse-over:before{border-width:12px}.dog-ears-container.dog-ears-active:before{border-width:16px}}.toc-summary-loading-container{text-align:center}.toc-summary-chapter-link,.toc-summary-part-link{display:block}.toc-summary-chapter-link{margin-left:1em}.toc-summary-part-link{margin-top:1em}.toc-summary-front-back-matter-link+.toc-summary-front-back-matter-link::before{content:"\\00B7";margin-left:0.5em;margin-right:0.5em}.toc-summary-part-link+.toc-summary-chapter-link{margin-top:0.5em}.indexed-term{cursor:pointer;font-size:90%;white-space:nowrap}.indexed-term sup{font-size:50%}.indexed-term:hover{text-decoration:underline}.inline-indexed-term{text-decoration:none;position:relative;cursor:pointer}.inline-indexed-term:after{content:\'\';width:100%;position:absolute;left:0;bottom:-3px;border-width:thin;border-style:solid;border-color:#c3c3c3}.medium-zoom-image{z-index:1011;background-color:white;padding:1em}.medium-zoom-overlay{z-index:1010}#indexed-terms-slide-menu{border-left:1px solid #d0cdcd}\n',""])},720:function(e,t,n){var o=n(721);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(98)(o,i);o.locals&&(e.exports=o.locals)},721:function(e,t,n){(e.exports=n(97)(!1)).push([e.i,'#book-markup-container .collapsible-panel{max-height:100px;color:white;border-radius:4px;padding:10px;margin:30px 2.2em;position:relative;background-color:transparent}#book-markup-container .collapsible-panel-background{position:absolute;top:0;left:-200%;right:-200%;height:100%;background:#3C3C3C;z-index:0}@media screen and (max-width: 800px){#book-markup-container .collapsible-panel-background{top:0;left:0;right:0;bottom:0}}body.theme-1 .button-collapsible-panel{background-color:#0e5ba9 !important;color:#fff !important;text-transform:uppercase;border-radius:0.1rem;padding:0.4rem 0.8rem;font-size:.8125rem;font-weight:700;margin-bottom:0.2rem;margin-top:0;box-shadow:0 0.1rem 0 0 #2f5182;text-align:center;transition:none;min-width:8rem}body.theme-1 .button-collapsible-panel:hover{background-color:#1777d9 !important}body.theme-1 .button-collapsible-panel:active{box-shadow:0 0;margin-top:2px;margin-bottom:1px}body.theme-1 .button-collapsible-panel>i.fa-pencil{margin-right:5px;margin-left:-10px}body.theme-1 .collapsible-panel-opened .button-collapsible-panel{background-color:#0e5ba9;color:#fff}.collapsible-panel-background,.collapsible-panel-container{max-height:0;-webkit-transition:opacity 0.5s 0.3s cubic-bezier(0.7, 0, 0.3, 1),transform 0.5s 0.3s cubic-bezier(0.7, 0, 0.3, 1),box-shadow 0.2 0.1s cubic-bezier(0.7, 0, 0.3, 1),height 0.2s cubic-bezier(0.7, 0, 0.3, 1),max-height 0.2s cubic-bezier(0.7, 0, 0.3, 1);transition:opacity 0.5s 0.3s cubic-bezier(0.7, 0, 0.3, 1),transform 0.5s 0.3s cubic-bezier(0.7, 0, 0.3, 1),box-shadow 0.2 0.1s cubic-bezier(0.7, 0, 0.3, 1),height 0.2s cubic-bezier(0.7, 0, 0.3, 1),max-height 0.2s cubic-bezier(0.7, 0, 0.3, 1)}.button-collapsible-panel{border:solid 1px #3c67a2;border-radius:5px;background-color:#F5F5F5;color:#5280BF;padding:0.5rem 1.2rem 0.5rem 1rem;display:inline-block;position:relative;-webkit-transition:all 0.3s 0.6s;transition:all 0.3s 0.6s}.button-collapsible-panel:hover,.button-collapsible-panel:active,.button-collapsible-panel:focus{color:#3c67a2}.button-collapsible-panel .icon-i-collapsible-panel-close{opacity:0}.button-collapsible-panel .icon-i-collapsible-panel-close:before{content:"\\2716";color:white}.button-collapsible-panel .icon-i-collapsible-panel-close{position:absolute;right:0.4rem;font-size:1rem}.collapsible-panel-opened .button-collapsible-panel{color:white;background-color:#5280BF;-webkit-transition:all 0.3s 0.3s;transition:all 0.3s 0.3s}.collapsible-panel-opened .icon-i-collapsible-panel-close{opacity:1;transition:all 0.3s 0.3s}.collapsible-panel-opened .collapsible-panel-background{height:100%;box-shadow:0 0 10px 3px rgba(0,0,0,0.4)}.collapsible-panel-opened .collapsible-panel-container{opacity:1;height:100%}.collapsible-panel-opened .collapsible-panel-background,.collapsible-panel-opened .collapsible-panel-container{max-height:20000px}@media only screen and (min-width: 320px){.collapsible-panel-container .toolbar-separator{width:0}}@media only screen and (min-width: 380px) and (max-width: 479px){.button-collapsible-panel{font-size:0.8rem;width:120px;margin-left:-25px}}@media only screen and (min-width: 649px){.collapsible-panel-container .toolbar-separator{width:40px}.button-collapsible-panel{font-size:1.2rem;width:150px;margin-left:0}}\n',""])},773:function(e,t,n){"use strict";var o=n(0),i=function(){function e(){}return e.prototype.fetch=function(e,t){var n=this;return new Promise((function(o,i){$.ajax({url:n.getRunnableListingLocation(e,t)}).then((function(e){return o(e)})).fail((function(e){return i(e)}))}))},e.prototype.getRunnableListingLocation=function(e,t){return o.a.getAwsUrl("/"+e.shortName+"/RunnableListings/"+t)},e}(),a=n(24),r=function(){function e(){this.webService=new i}return e.prototype.fetch=function(e,t){return e.hasBeenDownloaded?a.a.fetchRunnableListing(e.shortName,t):this.webService.fetch(e,t)},e.prototype.getRunnableListingLocation=function(e,t){return e.hasBeenDownloaded?a.a.getRunnableListingLocation(e.shortName,t):this.webService.getRunnableListingLocation(e,t)},e}(),s=n(1);var l,d,c={runnableListingsService:new Promise((function(e,t){s.b.loadDeviceInfo().then((function(t){e(function(e){switch(e){case s.a.Browser:return new i;case s.a.Cordova:case s.a.Electron:return new r}}(t.platform))})).catch((function(e){return t(e)}))}))},h=n(3),u=n(4),p=n(15),g=n(57),m=window,f=new(function(){function e(){this.modeURL="vendor/codemirror/mode/%N/%N.js",this.loading={}}return e.prototype.requireMode=function(e,t,n){var i=this;if(void 0===n&&(n=function(){}),t){if(e.modes.hasOwnProperty(t))return this.ensureDeps(e,t,n);if(this.loading.hasOwnProperty(t))return this.loading[t].push(n);var a=o.a.getLivebookCdn()+this.modeURL.replace(/%N/g,t),r=document.createElement("script");r.src=a;var s=document.getElementsByTagName("script")[0],l=this.loading[t]=[n];e.on(r,"load",(function(){i.ensureDeps(e,t,(function(){for(var e=0;e<l.length;++e)l[e]()}))})),s.parentNode.insertBefore(r,s)}else n&&n()},e.prototype.autoLoadMode=function(e,t,n){var o=this;m.CodeMirror=e,e.modes.hasOwnProperty(n)?this.setLanguageMode(e,t):this.requireMode(e,n,(function(){return o.setLanguageMode(e,t)}))},e.prototype.setLanguageMode=function(e,t){var n=t.getOption("mode")||"";switch(n.toLowerCase()){case"java":n="text/x-java";break;case"scala":n="text/x-scala";break;case"kotlin":n="text/x-kotlin";break;case"ruby":n="text/x-ruby";break;case"python":n="text/x-python";break;case"html":case"htmlmixed":case"css":case"javascript":n="text/html"}t.setOption("mode",n)},e.prototype.splitCallback=function(e,t){var n=t;return function(){0==--n&&e()}},e.prototype.ensureDeps=function(e,t,n){var o=e.modes[t].dependencies;if(!o)return n();for(var i=[],a=0;a<o.length;++a)e.modes.hasOwnProperty(o[a])||i.push(o[a]);if(!i.length)return n();var r=this.splitCallback(n,i.length);for(a=0;a<i.length;++a)this.requireMode(e,i[a],r)},e}()),b=n(5),k=n(574),v=null,x=["htmlmixed"],y={programming_languages:x.map((function(e){return{programming_language:e,lambda_name:"",default_code:"",default_html:"",default_css:"",mime_type:""}}))},w=function(){function e(e,t){var n=this;this.currentConsoleBuffer="",this.baseConsoleLog=console.log,this.listingEnvironmentElement=e,this.codeMirrorSyntaxHighlightingLanguage=t,this.$listingEnvironment=$(e),this.$listingEnvironment.append(Mustache.render('<div class="listing-environment-container">\n<div class="listing-environment-toolbar">\n    <span class="listing-environment-runnable-script-container">\n        {{#isRunnableListing}}\n        <a href="javascript:void(0)" class="button-toggle-result button">\n            <span class="show-medium-up">show result</span>\n            <i class="fa fa-eye show-small" aria-hidden="true"></i>\n        </a>\n        <span class="execution-environment-standard-mode-container">\n            <a href="javascript:void(0)" class="button-edit button">\n                <span class="show-medium-up">edit</span>\n                <i class="fa fa-pencil show-small" aria-hidden="true"></i>\n            </a>\n        </span>\n        <span class="execution-environment-edit-mode-container">\n            <a href="javascript:void(0)" class="button-restore button">\n                <span class="show-medium-up">back</span>\n                <i class="fa fa-angle-double-left show-small" aria-hidden="true"></i>\n            </a>\n\n            <a href="javascript:void(0)" class="button-reset button">\n                <span class="show-medium-up">reset</span>\n                <i class="fa fa-undo show-small" aria-hidden="true"></i>\n            </a>\n            <a href="javascript:void(0)" class="button-run button">\n                <span class="show-medium-up">run</span>\n                <i class="fa fa-play show-small" aria-hidden="true"></i>\n            </a>\n        </span>\n    </span>\n    {{/isRunnableListing}}\n    <span class="listing-environment-standard-mode-container">\n        <a href="javascript:void(0)" data-tooltip class="button-copy button radius">\n            <span class="show-medium-up">copy</span>\n            <i class="fa fa-clipboard show-small" aria-hidden="true"></i>\n        </a>\n    </span>\n</div>\n</div>',{isRunnableListing:this.$listingEnvironment.is(".listing-runnable")&&(d.isOpen||l.userOwnsBook)})),this.$listingEnvironmentContainer=this.$listingEnvironment.find(".listing-environment-container"),this.isRunnableListing=this.$listingEnvironment.is(".listing-runnable"),this.isRunnableListing&&(this.$executionIFrame=this.$listingEnvironment.find(".execution-environment-frame"),this.$buttonToggleResult=this.$listingEnvironment.find(".button-toggle-result"),this.$buttonEdit=this.$listingEnvironment.find(".button-edit"),this.$buttonRun=this.$listingEnvironment.find(".button-run"),this.$buttonReset=this.$listingEnvironment.find(".button-reset"),this.$buttonRestore=this.$listingEnvironment.find(".button-restore"),h.a.onEventWithCooldown(this.$buttonToggleResult,"click touchstart",(function(e){n.handleToggleResultsClick(),n.fullyShow()})),h.a.onEventWithCooldown(this.$buttonEdit,"click touchstart",(function(e){n.handleEditClick(),n.fullyShow()})),h.a.onEventWithCooldown(this.$buttonRun,"click touchstart",(function(e){n.handleRunClick(),n.fullyShow()})),h.a.onEventWithCooldown(this.$buttonReset,"click touchstart",(function(e){n.handleResetClick(),n.fullyShow()})),h.a.onEventWithCooldown(this.$buttonRestore,"click touchstart",(function(e){n.handleRestoreClick(),n.fullyShow()}))),this.$buttonCopy=this.$listingEnvironment.find(".button-copy"),this.$buttonCopy.on("click",(function(e){return n.fullyShow()})),this.createClipboard(),this.listingCode=function(e){if(!e)return e;var t=e.indexOf("!@%STYLE%@!");if(-1===t)return e;return e.substring(0,t)}(this.$listingEnvironment.find(".code-area").text()),this.runnableCode="",this.userEditedCode="",this.listingUrl="",this.isInEditMode=!1,this.isRunnableListing&&(this.listingEnvironmentElement.runnableScript=this,this.asyncGetRunnableCode())}return e.initialize=function(t,n){l=t,d=n,$(".browsable-container .code-area").each((function(e,t){var n=$(t).closest(".browsable-container");n.is(".listing-container")||n.addClass("listing-container")})),v=null,null!=l&&l.programmingLanguage&&"N/A"!=l.programmingLanguage&&(n.isOpen||t.userOwnsBook)&&k.a.getSupportedLanguagesInfo().then((function(e){e&&e.programming_languages&&(e.programming_languages=e.programming_languages.concat(y.programming_languages)),v=e.programming_languages.find((function(e){return e.programming_language.toLowerCase()==(l.programmingLanguage||"").toLowerCase()}))})).catch((function(e){})),u.a.asyncEach($(".listing-container"),(function(t){return new e(t,p.a.getCodeMirrorSyntaxHighlightMode(l,t.querySelector(".code-area").textContent))}),(function(){}),1)},e.prototype.asyncGetRunnableCode=function(){var e=this,t=this.$listingEnvironment.attr("location");c.runnableListingsService.then((function(n){e.listingUrl=n.getRunnableListingLocation(l,t),n.fetch(l,t).then((function(t){e.runnableCode=function(e,t){if(null==e)return e;l.hasBeenDownloaded&&(t="file://"+t);var n="<base href='"+t+"'/>";if(-1==e.indexOf("<head>"))return e;return e.replace("<head>","<head>"+n)}(t,e.listingUrl),e.userEditedCode=e.runnableCode})).catch((function(e){return console.log(e)}))}))},e.prototype.handleToggleResultsClick=function(){var e=this.$listingEnvironment,t=this.$buttonToggleResult;if(e.removeClass("focus-off"),null==v||null==l){var n="Error when executing source code";return l&&!l.userOwnsBook&&(n="Code execution is available when you own the book"),void g.a.showTemporaryNotification(n)}t.is(".opened")?this.hideResults():(this.runCurrentCode(),this.showResults())},e.prototype.showResults=function(){var e=this.$listingEnvironment,t=this.$buttonToggleResult,n=this.$executionIFrame;t.addClass("opened").find("span").text("Hide result"),n.velocity("slideDown",(function(){$(document).trigger("textLayoutModified",e[0])})),$(document).trigger("codeShowResult")},e.prototype.hideResults=function(){var e=this.$listingEnvironment,t=this.$buttonToggleResult,n=this.$executionIFrame;t.removeClass("opened").find("span").text("Show result"),n.velocity("slideUp",(function(){$(document).trigger("textLayoutModified",e[0])})),$(document).trigger("codeHideResult")},e.prototype.handleEditClick=function(){this.$listingEnvironment.removeClass("focus-off"),this.enterEditMode()},e.prototype.handleRunClick=function(){null!=v&&null!=l?(this.createIFrameIfNecessary(),this.$buttonToggleResult.is(".opened")||this.showResults(),this.runCurrentCode(),$(document).trigger("codeRun")):g.a.showTemporaryNotification("Cannot execute")},e.prototype.handleResetClick=function(){$(document).trigger("codeReset"),this.userEditedCode=this.runnableCode,this.codeMirror&&this.codeMirror.setValue(this.runnableCode)},e.prototype.handleRestoreClick=function(){this.leaveEditMode()},e.prototype.runCurrentCode=function(){var e=this;this.createIFrameIfNecessary();var t="";this.isInEditMode&&this.codeMirror?this.userEditedCode=t=this.codeMirror.getValue():t=this.runnableCode,this.showContentInRunPanel(C),-1===x.indexOf(v.programming_language)?k.a.executeCode(t,"","",v.programming_language,v.lambda_name).then((function(t){e.showContentInRunPanel(t.lambda_output)})).catch((function(t){e.showContentInRunPanel("<div style='color: red;'>Error when executing code: "+t+"</div>")})):this.showContentInRunPanel(t)},e.prototype.createIFrameIfNecessary=function(){0===this.$executionIFrame.length&&(this.$executionIFrame=$('<iframe src="about:blank" class="execution-environment-frame"></iframe>'),this.$listingEnvironmentContainer.append(this.$executionIFrame),this.$executionIFrame[0].src='javascript:window["contents"]')},e.prototype.rerouteLoggingToBuffer=function(){this.currentConsoleBuffer="";var e=this;console.log=function(t){for(var n=Array.prototype.slice.call(arguments),o="",i=0;i<n.length;i++)"string"==typeof n[i]||"number"==typeof n[i]||"boolean"==typeof n[i]?o+=" "+n[i]:o+=" "+JSON.stringify(n[i]);this.currentConsoleBuffer+="<br />"+o,e.baseConsoleLog.apply(console,arguments)}},e.prototype.showContentInRunPanel=function(e){this.$executionIFrame[0].contentWindow.contents=e,this.$executionIFrame[0].src='javascript:window["contents"]'},e.prototype.enterEditMode=function(){this.createCodeMirror(),this.$listingEnvironment.addClass("edit-mode"),this.$listingEnvironmentContainer.addClass("edit-mode"),$(document).trigger("runnableScriptEditModeEntered",this.$listingEnvironment),this.isInEditMode=!0},e.prototype.leaveEditMode=function(){this.isInEditMode&&(this.$listingEnvironment.removeClass("edit-mode"),this.$listingEnvironmentContainer.removeClass("edit-mode"),$(document).trigger("runnableScriptEditModeLeft",this.$listingEnvironment),this.isInEditMode=!1)},e.prototype.fullyShow=function(){this.$listingEnvironment.removeClass("focus-off")},e.prototype.getSourceCode=function(){var e="";e=this.isInEditMode&&this.codeMirror?this.codeMirror.getValue():this.runnableCode;try{!e&&this.listingEnvironmentElement.annotatedListing&&(e=this.listingEnvironmentElement.annotatedListing.source)}catch(e){console.log(e)}return e||this.listingCode},e.prototype.createClipboard=function(){var e=this;window.Clipboard?this.initializeClipboard():b.a.loadClipboardCode().then((function(){return e.initializeClipboard()}))},e.prototype.initializeClipboard=function(){var e=this;if(window.Clipboard)try{var t=new window.Clipboard(this.$buttonCopy[0],{text:function(){return e.getSourceCode()}});t.on("success",(function(t){e.showMessageOnCopyButton("Copied!"),t.clearSelection(),$(document.activeElement).blur()})),t.on("error",(function(t){e.showMessageOnCopyButton(function(e){var t="",n="cut"===e?"X":"C";t=/iPhone|iPad/i.test(navigator.userAgent)?"No support :(":/Mac/i.test(navigator.userAgent)?"Press â-"+n+" to "+e:"Press Ctrl-"+n+" to "+e;return t}(t.action)),$(document.activeElement).blur()}))}catch(e){console.log("Failed to initialize clipboard")}},e.prototype.showMessageOnCopyButton=function(e){var t=this;this.$buttonCopy.attr("title",e),window.Foundation&&(window.Foundation.libs.tooltip.create(this.$buttonCopy),window.Foundation.libs.tooltip.showTip(this.$buttonCopy),h.a.setTimeout((function(){window.Foundation.libs.tooltip.off(t.$buttonCopy)}),1e3))},e.prototype.createCodeMirror=function(){var e=this;if(!this.codeMirror){var t=this.listingEnvironmentElement.querySelector(".code-area-container");b.a.loadCodeMirrorCode().then((function(n){var o=n[0];e.codeMirror=o.default(t,{value:e.getSourceCode(),mode:e.codeMirrorSyntaxHighlightingLanguage,lineNumbers:!0}),e.codeMirrorSyntaxHighlightingLanguage&&f.autoLoadMode(o.default,e.codeMirror,e.codeMirrorSyntaxHighlightingLanguage);var i=parseInt($(e.codeMirror.getWrapperElement()).css("line-height"))*(e.codeMirror.lineCount()+3);e.codeMirror.setSize("100%",i),h.a.setTimeout((function(){return e.codeMirror.refresh()}),200)}))}},e}();t.a=w;var C='<div style="text-align:center;">\n<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">\n<path opacity="0.2" fill="#000" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n  s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n  c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"></path>\n<path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n  C22.32,8.481,24.301,9.057,26.013,10.047z" transform="rotate(192 20 20)">\n  <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 20 20" to="360 20 20" dur="0.5s" repeatCount="indefinite"></animateTransform>\n  </path>\n</svg>\n</div>'},846:function(e,t,n){"use strict";n.r(t),n.d(t,"PromoManagerClass",(function(){return r})),n.d(t,"PromoManager",(function(){return s}));var o=n(460),i=n(132),a=n(14),r=function(){function e(){}return e.prototype.promote=function(){var e=this;i.a.getDotdPromoInfo().then((function(t){null!=t&&(e.getHiddenPromotionMap()[t.productExternalId]||(o.a.setPromotion(t),e.trackEvents()))}))},e.prototype.clean=function(){o.a.clean()},e.prototype.trackEvents=function(){var e=this;$(document).on("click",".close-promo-button, .add-dotd-book-to-cart",(function(t){var n=$(t.target);e.rememberHiddenPromotion(n.attr("data-product-external-id"))}))},e.prototype.rememberHiddenPromotion=function(e){if(e){var t=this.getHiddenPromotionMap();t[e]=Date.now(),this.storeHiddenPromotionMap(t)}},e.prototype.getHiddenPromotionMap=function(){return JSON.parse(a.a.getItem("LB_HIDDEN_PROMOTIONS")||"{}")},e.prototype.storeHiddenPromotionMap=function(e){a.a.setItem("LB_HIDDEN_PROMOTIONS",JSON.stringify(e))},e}(),s=new r}}]);
//# sourceMappingURL=bookPage.chunk.js.map?a796f8c9e28d41ef982b