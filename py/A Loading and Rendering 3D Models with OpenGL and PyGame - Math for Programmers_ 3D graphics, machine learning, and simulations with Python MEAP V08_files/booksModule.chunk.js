(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{353:function(t,i,n){"use strict";n.r(i),n.d(i,"BooksMenu",(function(){return m}));var e=n(78),o=n(409),s=n(470),a=n(75),r=n(0),l=n(472),c=n(22),h=n(434),d=n(3),u=n(555),p=n(25),f=n(7),m=new(function(){function t(){var t=this;this.$booksButton=$(".books-button"),this.$booksMenu=$("#books-menu"),this.slideMenu=new e.a(this.$booksButton,this.$booksMenu,(function(){return t.buildBookMenuContent()}),(function(){}),!0,(function(){return t.emptyMenu()})),$(document).on("requestBooksMenuOpen",(function(){return t.open()}))}return t.prototype.buildBookMenuContent=function(){var t=this;f.a.isLoggedIn().then((function(i){var n=p.a.getUsersLibraryAndCatalog(!!i.loggedIn),e=t.currentBookElement&&t.currentBookElement.book?p.a.getRelatedProducts(t.currentBookElement.book.shortName):Promise.resolve([]);Promise.all([n,e,h.a.getUserWishList()]).then((function(i){var n=i[0],e=i[1],o=i[2];t.expandRelatedProducts(e,n.catalog),t.initializeMenuWithBooks(n.userLibrary,n.catalog,e,t.buildWishListBooks(o,n.catalog))})).catch((function(t){console.log("Couldn't fetch books",t)}))}))},t.prototype.expandRelatedProducts=function(t,i){for(var n={},e=0,o=i;e<o.length;e++){n[(r=o[e]).shortName]=r}for(var s=0,a=t;s<a.length;s++){var r,l=a[s];null!=(r=n[l.externalId])&&(l.hasAudio=r.hasAudio)}},t.prototype.initialize=function(t,i){if(this.currentBookElement=i,null!=t){if(this.catalogBooks&&this.catalogBooks.length)for(var n=0,e=this.catalogBooks;n<e.length;n++){var o=e[n];o.shortName===t.shortName&&this.updateBookProgress(o,i)}if(this.userBooks&&this.userBooks.length)for(var s=0,a=this.userBooks;s<a.length;s++){var r=a[s];r.shortName===t.shortName&&this.updateBookProgress(r,i)}}},t.prototype.clean=function(){this.sortMyBooksTooltip&&(this.sortMyBooksTooltip.clean(),this.sortMyBooksTooltip=null),this.sortLibraryTooltip&&(this.sortLibraryTooltip.clean(),this.sortLibraryTooltip=null),this.catalogBooks=null,this.userBooks=null,this.currentBookElement=null,this.tabs=null},t.prototype.open=function(){this.slideMenu&&this.slideMenu.openMenu()},t.prototype.updateBookProgress=function(t,i){t.progressBookElement=i?i.shortName:"chapter-1",t.lastBookElementItem="1",t.bookPath=r.a.getBookElementUrl(t.shortName,t.progressBookElement,i.meapVersion)+t.lastBookElementItem,t.lastAccessedTime=Date.now()},t.prototype.buildWishListBooks=function(t,i){return t.items.map((function(t){return i.find((function(i){return i.manningId===t.product.id}))})).filter((function(t){return!!t}))},t.prototype.initializeMenuWithBooks=function(t,i,n,e){var a=this;if(i&&i.length){this.catalogBooks=i,this.userBooks=t,i.filter((function(i){var n=t.find((function(t){return t.shortName===i.shortName}));i.userOwnsBook=!!n}));var r=$(Mustache.render(g,{userOwnsBooks:t&&t.length>0&&t.length!==i.length,userOwnedBooks:t,wishList:e,hasWishListMenu:u.a.shouldWishListABeShown,loggedInButNoWishlistItems:f.a.isCurrentlyLoggedIn()&&null!=e&&0==e.length,isNotLoggedIn:!f.a.isCurrentlyLoggedIn(),library:i,relatedProducts:n,hasRelatedProducts:n&&n.length}));if(d.a.onEventWithCooldown(r.find(".add-to-cart-button"),"click",(function(t){return a.addToCart(t,i)})),d.a.onEventWithCooldown(r.find(".remove-from-wishlist-button"),"click",(function(e){return a.removeFromWishList(e,t,i,n)})),r.find(".partial-book-ownership-line").each((function(t,i){var n=$(i).closest("[data-book-short-name]").attr("data-book-short-name");p.a.getChapterOwnership(n).then((function(t){null!=t&&l.a.render(i,t)})).catch((function(t){console.log("Error loading partial book ownership")}))})),this.$booksMenu.find(".slide-in-menu-container").empty().append(r),null==this.tabs)this.tabs=new o.a(this.$booksMenu);else{var h=this.tabs.getCurrentlySelectedTabIndex();this.tabs=new o.a(this.$booksMenu),this.tabs.selectTab(h)}var m=this,v=r.find(".search-input");v.typeWatch&&v.typeWatch({callback:function(t){m.filterBooks(this,t)},wait:200,highlight:!0,captureLength:2}),f.a.isLoggedIn().then((function(t){t.loggedIn&&c.a.getUserFirstName().then((function(t){a.$booksMenu.find(".books-menu-user-name").text(t+"'s")}))})),this.sortMyBooksTooltip?this.sortMyBooksTooltip.updateSortIcon($(".sort-my-books-menu-icon")):this.sortMyBooksTooltip=new s.a($(".sort-my-books-menu-icon"),t,(function(){return a.initializeMenuWithBooks(t,i,n,e)}),"book-menu-sort-tooltip"),this.sortLibraryTooltip?this.sortLibraryTooltip.updateSortIcon($(".sort-library-menu-icon")):this.sortLibraryTooltip=new s.a($(".sort-library-menu-icon"),i,(function(){return a.initializeMenuWithBooks(t,i,n,e)}),"book-menu-sort-tooltip"),this.slideMenu.setAssociatedElement(this.sortLibraryTooltip.$tooltip.add(this.sortMyBooksTooltip.$tooltip)),this.handleCoverLoading()}},t.prototype.addToCart=function(t,i){var n=i.find((function(i){return i.manningId===$(t.target).data("manning-id")}));a.a.requestAddBookToCart(n,!1,null,!0),$(document).trigger("wishListAddToCart",[n.shortName])},t.prototype.removeFromWishList=function(t,i,n,e){var o=this,s=$(t.target).data("manning-id"),a=h.a.wishList.items.find((function(t){return t.product.id==s}));if(a){var r=this.$booksMenu.find(".syncing-wish-list-frame");r.css("display","flex"),h.a.removeProductFromWishList(a.product.id).then((function(t){r.css("display","none");var s=o.buildWishListBooks(t,n);o.initializeMenuWithBooks(i,n,e,s),$(document).trigger("wishListRemove",[a.product.id])})).catch((function(t){$(document).trigger("requestNotification","error syncing wishlist"),r.css("display","none")}))}},t.prototype.filterBooks=function(t,i){var n=$(t).parents(".tab-container").find(".items-container");(i=i.trim().toLowerCase())?n.find(".book-item").each((function(t,n){var e=$(n);e.toggleClass("hidden",-1===e.text().toLowerCase().indexOf(i))})):n.find(".hidden").removeClass("hidden")},t.prototype.handleCoverLoading=function(){var t=this.$booksMenu.find(".book-cover");t.on("load",(function(t){return $(t.target).closest(".book-item").removeClass("hidden")})),t.on("error",(function(t){return $(t.target).closest(".book-item").remove()}))},t.prototype.emptyMenu=function(){this.$booksMenu.find(".slide-in-menu-container").empty().html('<div class="loading-container">\n                <i class="fa fa-spin fa-circle-o-notch fa-3x fa-fw"></i>\n            </div>')},t}()),g='\n    <div class="tab-title-container">\n        {{#userOwnsBooks}}\n            <div class="tab-title"><span class="books-menu-user-name">your</span> books</div>\n        {{/userOwnsBooks}}\n        <div class="tab-title">library</div>\n        {{#hasRelatedProducts}}<div class="tab-title">related</div>{{/hasRelatedProducts}}\n        {{#hasWishListMenu}}\n        <div class="tab-title">wish list <i class="fa fa-heart heart-icon-tab-title" aria-hidden="true"></i></div>\n        {{/hasWishListMenu}}\n    </div>\n    <div class="tabs-container">\n    {{#userOwnsBooks}}\n    <div class="tab-container">\n        <div class="search-input-container">\n            <input type="text" class="search-input" placeholder="find in my books">\n            <div class="books-menu-sort-container">\n                sort <i class="fa fa-sort sort-my-books-menu-icon" aria-hidden="true"></i>\n            </div>\n        </div>\n        <div class="items-container">\n            {{#userOwnedBooks}}\n            <div class="book-item book-item-row row" data-book-short-name="{{shortName}}">\n                <div class="columns small-3 book-cover-column">\n                    <a href="{{bookPath}}" class="book-cover-link">\n                        <img class="book-cover" src="{{bookCoverPath}}" alt="book cover">\n                        {{#hasAudio}}\n                        <div class="liveaudio-corner">\n                            <svg viewBox="0 0 1792 1792">\n                                <use xlink:href="#liveaudio-corner">\n                            </svg>\n                        </div>\n                        {{/hasAudio}}\n                    </a>\n                    {{#partialBookOwnership}}\n                    <div class="partial-book-ownership-line" cellspacing="0">\n                        <span class="partial-book-ownership-loading-line"></span>\n                    </div>\n                    {{/partialBookOwnership}}\n                </div>\n                <div class="columns small-9 book-info-column">\n                    <a href="{{bookPath}}">\n                        <div class="book-title">{{cleanTitle}}</div>\n                        <div class="book-authors">{{authors}}</div>\n                    </a>\n                </div>\n            </div>\n            {{/userOwnedBooks}}\n        </div>\n    </div>\n{{/userOwnsBooks}}\n<div class="tab-container">\n    <div class="search-input-container">\n        <input type="text" class="search-input" placeholder="find in the whole library">\n        <div class="books-menu-sort-container">\n            sort <i class="fa fa-sort sort-library-menu-icon" aria-hidden="true"></i>\n        </div>\n    </div>\n    <div class="items-container">\n        <ul>\n            {{#library}}\n            <li class="row short book-item-row book-item" data-book-short-name="{{shortName}}">\n                <div class="columns small-10"> \n                    <a href="{{bookPath}}">\n                        <span class="book-title">{{cleanTitle}}</span>\n                    </a>\n                </div>\n                <div class="columns small-1">\n                {{#userOwnsBook}}\n                    <i class="fa fa-check" style="color: green" title="you own this book"></i>\n                {{/userOwnsBook}}\n                </div>\n            </li>\n            {{/library}}\n        </ul>\n    </div>\n</div>\n{{#hasRelatedProducts}}\n<div class="tab-container">\n    <div class="search-input-container">\n        <input type="text" class="search-input" placeholder="find in related products">\n        <div class="books-menu-sort-container">\n            sort <i class="fa fa-sort sort-library-menu-icon" aria-hidden="true"></i>\n        </div>\n    </div>\n    <div class="items-container">\n        {{#relatedProducts}}                  \n        <div class="book-item book-item-row row" data-book-short-name="{{externalId}}">\n            <div class="columns small-3 book-cover-column">\n                <a href="{{link}}" class="book-cover-link">\n                    <img class="book-cover" src="{{imageUrl}}" alt="book cover">\n                    {{#hasAudio}}\n                    <div class="liveaudio-corner">\n                        <svg viewBox="0 0 1792 1792">\n                            <use xlink:href="#liveaudio-corner">\n                        </svg>\n                    </div>\n                    {{/hasAudio}}\n                </a>\n            </div>\n            <div class="columns small-9 book-info-column">\n                <a href="{{link}}">\n                    <div class="book-title">{{title}}</div>\n                    <div class="book-authors">{{authors}}</div>\n                </a>\n            </div>\n        </div>\n        {{/relatedProducts}}\n    </div>\n</div>\n{{/hasRelatedProducts}}\n{{#hasWishListMenu}}\n<div class="tab-container">\n    <div class="search-input-container">\n        <input type="text" class="search-input" placeholder="find in my wish list">\n        <div class="books-menu-sort-container">\n            sort <i class="fa fa-sort sort-library-menu-icon" aria-hidden="true"></i>\n        </div>\n    </div>\n    <div class="items-container wish-list-container">\n        {{#wishList}}\n            <div class="book-item book-item-row row" data-book-short-name="{{shortName}}">\n                <div class="columns small-3 book-cover-column">\n                    <a href="{{bookPath}}" class="book-cover-link">\n                        <img class="book-cover" src="{{bookCoverPath}}" alt="book cover">\n                        {{#hasAudio}}\n                        <div class="liveaudio-corner">\n                            <svg viewBox="0 0 1792 1792">\n                                <use xlink:href="#liveaudio-corner">\n                            </svg>\n                        </div>\n                        {{/hasAudio}}\n                    </a>\n                    {{#partialBookOwnership}}\n                    <div class="partial-book-ownership-line" cellspacing="0">\n                        <span class="partial-book-ownership-loading-line"></span>\n                    </div>\n                    {{/partialBookOwnership}}\n                </div>\n                <div class="columns small-9 book-info-column">\n                    <a href="{{bookPath}}">\n                        <div class="book-title">{{cleanTitle}}</div>\n                        <div class="book-authors">{{authors}}</div>\n                    </a>\n                    <div class="wishlist-command-container">\n                        <span class="emphasized-button add-to-cart-button" data-manning-id="{{manningId}}" title="add to cart">\n                            <i class="fa fa-cart-plus"></i> add to cart\n                        </span>\n                        <span class="remove-from-wishlist-button" data-manning-id="{{manningId}}" title="remove from wishlist">\n                            <i class="fa fa-trash" data-manning-id="{{manningId}}"></i>\n                        </span>\n                    </div>\n                </div>\n            </div>\n        {{/wishList}}\n        {{#isNotLoggedIn}}\n            <div class="slide-menu-message-container"><span class="sign-in-button wish-list-sign-in-button">sign in</span> to add books to your wishlist</div>\n        {{/isNotLoggedIn}}\n        {{#loggedInButNoWishlistItems}}\n            <div class="slide-menu-message-container">go to a book you don\'t own and add it to your wishlist</div>\n        {{/loggedInButNoWishlistItems}}\n        <div class="syncing-wish-list-frame">\n            <i class="fa fa-spin fa-circle-o-notch fa-3x fa-fw"></i>\n        </div>\n    </div>\n</div>\n{{/hasWishListMenu}}\n</div>'},389:function(t,i,n){"use strict";n.d(i,"a",(function(){return e})),n.d(i,"b",(function(){return o}));var e,o,s=n(3),a=n(1),r=$(document),l=$(window);!function(t){t[t.center=0]="center",t[t.left=1]="left",t[t.right=2]="right"}(e||(e={})),function(t){t[t.center=0]="center",t[t.above=1]="above",t[t.below=2]="below"}(o||(o={}));var c={dontCleanPrevious:!1,dontShowOnClick:!1,horizontalPosition:e.center,verticalPosition:o.below,dontAutomaticallyPosition:!1,additionalClasses:"",contentHtml:"",isFixed:!1,showOnMouseOver:!1},h=function(){function t(t){var i=this;this.$tooltip=$(d),this.$parentContainer=$(t||document.body),this.$parentContainer.append(this.$tooltip),this.$contentContainer=this.$tooltip.find(".tooltip-container"),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleResizeStart=this.handleResizeStart.bind(this),s.a.onDescendantEventWithCooldown(this.$tooltip,a.b.isCordova()?"touchstart":"click",".command-row, .item-row",(function(t){return i.handleCommandRowClick(t.currentTarget)})),this.$contentContainer.on("mousewheel DOMMouseScroll",(function(t){s.a.handleContainerScroll(t),t.stopPropagation()}))}return t.prototype.initialize=function(t,i,n,e,o){this.initializeConfig(o),this.config.dontCleanPrevious||this.clean(),this.config.contentHtml&&this.$contentContainer.html(this.config.contentHtml),this.beforeOpenCallback=i,this.commandExecuteCallback=n,this.afterCloseCallback=e,this.config.additionalClasses&&this.$tooltip.addClass(this.config.additionalClasses),this.updateReferentElement(t)},t.prototype.updateReferentElement=function(t){var i=this;this.$referentElements&&this.$referentElements.off("click mouseenter"),this.$referentElements=t,this.config.dontShowOnClick||s.a.onEventWithCooldown(this.$referentElements,"click",(function(t){i.isOpen?i.close():i.handleReferentElementInteraction(t.currentTarget)})),this.config.showOnMouseOver&&s.a.onEventWithCooldown(this.$referentElements,"mouseenter",(function(t){return i.handleReferentElementInteraction(t.currentTarget)}))},t.prototype.clean=function(){this.close(),this.$referentElements&&this.$referentElements.off(),this.config&&this.$tooltip.removeClass(this.config.additionalClasses),this.$referentElements=null,this.currentReferentElement=null,this.beforeOpenCallback=null},t.prototype.open=function(t){t&&(this.currentReferentElement=t,this.beforeOpenCallback&&this.beforeOpenCallback($(t),this.$contentContainer)||(r.on("click",this.handleDocumentClick),l.on("resizestart",this.handleResizeStart),this.reposition(t),this.isOpen=!0,this.$tooltip.addClass("advanced-tooltip-opened")))},t.prototype.openAtPosition=function(t,i,n,e){this.beforeOpenCallback&&this.beforeOpenCallback($(null),this.$contentContainer)||(this.currentReferentElement=t,r.on("click",this.handleDocumentClick),l.on("resizestart",this.handleResizeStart),this.$tooltip.css("top",i.top+"px"),this.$tooltip.css("left",i.left+"px"),this.positionTip(n.horizontalPosition,n.verticalPosition,e),this.$tooltip.css("display","block"),this.$tooltip.addClass("advanced-tooltip-opened"),this.isOpen=!0)},t.prototype.reposition=function(t){if(t||(t=this.currentReferentElement),t){var i=$(t).find(".fa");i&&0!==i.length||(i=$(t));var n=this.getOffsetFromParentContainer(i),s=this.$tooltip.width(),a=this.$tooltip.height(),c=l.width(),h=r.height(),d=this.config.horizontalPosition,u=this.config.verticalPosition;this.config.dontAutomaticallyPosition||(n.left+s/2<.95*c&&n.left-s/2>.05*c?d=e.center:n.left+s>c?d=e.left:n.left-s<0&&(d=e.right),d===e.center?n.top+3*this.getElementHeight(i)+a>h&&(u=o.above):d!==e.left&&d!==e.right||(u=o.center)),this.centerMenuHorizontaly(i,d),this.centerMenuVertically(i,u),this.positionTip(d,u),this.$tooltip.css("display","block")}},t.prototype.getMenuWidth=function(){return this.$tooltip.width()},t.prototype.getMenuHeight=function(){return this.$tooltip.height()},t.prototype.initializeConfig=function(t){t?(this.config={},this.config.dontCleanPrevious="dontCleanPrevious"in t?t.dontCleanPrevious:c.dontCleanPrevious,this.config.horizontalPosition="horizontalPosition"in t?t.horizontalPosition:c.horizontalPosition,this.config.verticalPosition="verticalPosition"in t?t.verticalPosition:c.verticalPosition,this.config.dontAutomaticallyPosition="dontAutomaticallyPosition"in t?t.dontAutomaticallyPosition:c.dontAutomaticallyPosition,this.config.isFixed="isFixed"in t?t.isFixed:c.isFixed,this.config.contentHtml="contentHtml"in t?t.contentHtml:c.contentHtml,this.config.additionalClasses="additionalClasses"in t?t.additionalClasses:c.additionalClasses,this.config.dontShowOnClick="dontShowOnClick"in t?t.dontShowOnClick:c.dontShowOnClick,this.config.showOnMouseOver="showOnMouseOver"in t?t.showOnMouseOver:c.showOnMouseOver):this.config=c},t.prototype.positionTip=function(t,i,n){var s=this.$tooltip.find(".tooltip-tip");s.removeClass("tip-left tip-right tip-up tip-down"),t===e.left?s.addClass("tip-right"):t===e.right?s.addClass("tip-left"):i===o.below?s.addClass("tip-up"):i===o.above?s.addClass("tip-down"):s.addClass("tip-up"),s.css("left",""),s.css("top",""),s.css("right",""),s.css("bottom",""),n&&(n.left&&s.css("left",n.left),n.top&&s.css("top",n.top),n.right&&s.css("right",n.right),n.bottom&&s.css("bottom",n.bottom))},t.prototype.centerMenuHorizontaly=function(t,i){switch(i){case e.left:this.centerMenuHorizontalyLeft(t);break;case e.right:this.centerMenuHorizontalyRight(t);break;default:this.centerMenuHorizontalyCenter(t)}},t.prototype.centerMenuVertically=function(t,i){switch(i){case o.above:this.centerMenuVerticallyAbove(t);break;case o.center:this.centerMenuVerticallyCenter(t);break;default:this.centerMenuVerticallyBelow(t)}},t.prototype.centerMenuHorizontalyLeft=function(t){this.$tooltip.css("left",this.keepLeftPositionOnScreen(this.getOffsetFromParentContainer(t).left-this.getElementWidth(t)-this.$tooltip.width())+"px")},t.prototype.centerMenuHorizontalyCenter=function(t){this.$tooltip.css("left",this.keepLeftPositionOnScreen(this.getOffsetFromParentContainer(t).left-this.$tooltip.width()/2+this.getElementWidth(t)/4)+"px")},t.prototype.centerMenuHorizontalyRight=function(t){this.$tooltip.css("left",this.keepLeftPositionOnScreen(this.getOffsetFromParentContainer(t).left+this.getElementWidth(t))+"px")},t.prototype.keepLeftPositionOnScreen=function(t){if(t<=10)return 10;var i=this.$tooltip.width(),n=$(window).width();return t+i+10>=n?t-Math.abs(n-t-i-10):t},t.prototype.centerMenuVerticallyAbove=function(t){this.$tooltip.css("top",this.getOffsetFromParentContainer(t).top-this.getElementHeight(t)-this.$tooltip.height()+"px")},t.prototype.centerMenuVerticallyCenter=function(t){this.$tooltip.css("top",this.getOffsetFromParentContainer(t).top-this.$tooltip.height()/2+"px")},t.prototype.centerMenuVerticallyBelow=function(t){this.$tooltip.css("top",this.getOffsetFromParentContainer(t).top+this.getElementHeight(t)+"px")},t.prototype.close=function(){this.$tooltip.css({display:"none",top:"initial",left:"initial",bottom:"initial",right:"initial"}),this.isOpen=!1,r.off("click",this.handleDocumentClick),l.off("resizestart",this.handleResizeStart),this.currentReferentElement=null,this.afterCloseCallback&&this.afterCloseCallback(),this.$tooltip.removeClass("advanced-tooltip-opened")},t.prototype.handleReferentElementInteraction=function(t){this.open(t)},t.prototype.handleCommandRowClick=function(t){this.currentReferentElement&&this.commandExecuteCallback&&this.commandExecuteCallback($(this.currentReferentElement),$(t))},t.prototype.handleDocumentClick=function(t){var i=t.target;this.$tooltip.is(i)||0!==this.$tooltip.has(i).length||this.currentReferentElement===i||0!==$(this.currentReferentElement).has(i).length||this.close()},t.prototype.handleResizeStart=function(){this.close()},t.prototype.getOffsetFromParentContainer=function(t){if(this.config.isFixed)return t[0].getBoundingClientRect();var i=this.$parentContainer.offset()||{top:0,left:0},n=t.offset()||{top:0,left:0};return{top:n.top-i.top,left:n.left-i.left}},t.prototype.getElementWidth=function(t){if(!t||!t.length)return 0;var i=t[0];if(i.getBBox&&(n=i.getBBox()))return n.width;var n,e=t.width();if(e)return e;if(i.getBoundingClientRect&&(n=i.getBoundingClientRect()))return n.width;return 0},t.prototype.getElementHeight=function(t){var i=t[0];if(i.getBBox&&(n=i.getBBox()))return n.height;var n,e=t.height();if(e)return e;if(i.getBoundingClientRect&&(n=i.getBoundingClientRect()))return n.height;return 0},t}();i.c=h;var d='<div class="advanced-tooltip">\n<div class="tooltip-container"></div>\n<div class="tooltip-tip"></div>\n</div>'},409:function(t,i,n){"use strict";var e=n(3),o=function(){function t(t,i){var n=this;this.currentIndex=0,this.$mainContainer=t,this.afterTabSwitchCallback=i,e.a.onDescendantEventWithCooldown(this.$mainContainer,"click touchstart",".tab-title",(function(t){var i=n.$mainContainer.find(".tab-title").index(t.currentTarget);n.selectTab(i),n.afterTabSwitchCallback&&n.afterTabSwitchCallback(i)})),this.selectTab(this.currentIndex)}return t.prototype.selectTab=function(t){var i=this.$mainContainer.find(".tab-title"),n=this.$mainContainer.find(".tab-container");i.removeClass("selected"),n.removeClass("selected"),i.eq(t).length?i.eq(t).addClass("selected"):i.eq(0).addClass("selected"),n.eq(t).length?(n.eq(t).addClass("selected"),this.currentIndex=t):(n.eq(0).addClass("selected"),this.currentIndex=0)},t.prototype.getCurrentlySelectedTabIndex=function(){return this.currentIndex},t}();i.a=o},434:function(t,i,n){"use strict";n.d(i,"a",(function(){return r}));var e=n(22),o=n(0),s=n(7),a=$(document),r=new(function(){function t(){var t=this;$(document).on("appActivatedAfterLongTime",(function(){t.wishList=null,t.wishListPromise=null,t.isSyncing=!1}))}return t.prototype.hasInitializedWishList=function(){return null!=this.wishList},t.prototype.onSyncingChanged=function(t){this.syncingCallback=t},t.prototype.isBookInWishList=function(t){return null!=t&&this.isProductInWishList(t.manningId)},t.prototype.isProductInWishList=function(t){return null!=this.wishList&&null!=this.wishList.items&&0!=this.wishList.items.length&&null!=this.wishList.items.find((function(i){return null!=i.product&&i.product.id==t}))},t.prototype.updateSyncing=function(t){this.isSyncing!=t&&(this.isSyncing=t,this.syncingCallback&&this.syncingCallback())},t.prototype.addBookToWishList=function(t){return this.addProductToWishList(t.manningId)},t.prototype.addProductToWishList=function(t){var i=this;return new Promise((function(n,s){i.getUserWishList().then((function(r){if(!r.id)return s("User is not logged in");i.updateSyncing(!0),o.a.postToOurBackend(o.a.getAbsoluteUrl("api/wishList/"+r.id+"/addItem/"+t),(function(e){i.updateSyncing(!1),i.syncingCallback&&i.syncingCallback(),e?(i.wishList=e,n(e),i.wishListPromise=Promise.resolve(i.wishList),a.trigger("wishListArrived",e),a.trigger("wishListAdd",[t,!0])):s("Not enough information")}),(function(t){i.updateSyncing(!1),s(),e.a.getUserEmail().then((function(t){a.trigger("wishListFail",[t+"-"+(new Date).getTime(),"N/A","N/A"])})).catch((function(t){a.trigger("wishListFail",["unknownUser-"+(new Date).getTime(),"N/A","N/A"])}))}),{},!0,!0,!1,!1)})).catch((function(t){return s(t)}))}))},t.prototype.removeProductFromWishList=function(t){var i=this;return new Promise((function(n,s){i.getUserWishList().then((function(r){var l=r.items.find((function(i){return i.product.id==t}));if(!l)return s("wish list item not found");i.updateSyncing(!0),o.a.interactWithOurBackend(o.a.getAbsoluteUrl("api/wishList/removeItem/"+l.id),"delete",(function(e){if(i.updateSyncing(!1),!e)return a.trigger("wishListFail",["unknownUser-"+(new Date).getTime(),"N/A","N/A"]),void s("Not enough information");i.wishList=e,n(e),i.wishListPromise=Promise.resolve(i.wishList),a.trigger("wishListArrived",e),a.trigger("wishListRemove",[t])}),(function(t){i.updateSyncing(!1),e.a.getUserEmail().then((function(t){a.trigger("wishListFail",[t+"-"+(new Date).getTime(),"N/A","N/A"])})).catch((function(t){a.trigger("wishListFail",["unknownUser-"+(new Date).getTime(),"N/A","N/A"])}))}),{},!0,!0,!1,!1)})).catch((function(t){return s(t)}))}))},t.prototype.getUserWishList=function(){var t=this;return s.a.isCurrentlyLoggedIn()?null!=this.wishListPromise?this.wishListPromise:this.wishListPromise=new Promise((function(i,n){t.updateSyncing(!0),o.a.getFromOurBackend(o.a.getAbsoluteUrl("wishList"),(function(e){if(t.updateSyncing(!1),!e)return a.trigger("wishListFail",["unknownUser-"+(new Date).getTime(),"N/A","N/A"]),void n("Not enough information");t.wishList=e,i(e),t.wishListPromise=Promise.resolve(t.wishList),a.trigger("wishListArrived",e)}),(function(i){t.wishListPromise=null,t.updateSyncing(!1),e.a.getUserEmail().then((function(t){a.trigger("wishListFail",[t+"-"+(new Date).getTime(),"N/A","N/A"])})).catch((function(t){a.trigger("wishListFail",["unknownUser-"+(new Date).getTime(),"N/A","N/A"])}))}),{},!0,!0,!1,!1)})):Promise.resolve({id:-1,title:"",items:[]})},t}())},470:function(t,i,n){"use strict";var e=n(34),o=n(389),s=function(){function t(t,i,n,s){var r=this;void 0===s&&(s=""),this.$sortIcon=t,this.books=i,this.callback=n,this.advancedTooltip=new o.c,t.removeClass("hidden"),this.advancedTooltip.initialize(t,(function(){}),(function(t,i){var n=i.closest(".advanced-tooltip");n.removeClass("alphabetical-sort release-date-sort last-opened-sort"),i.is(".alphabetical-sort")?(e.a.sortBooksAlphabetically(r.books),n.addClass("alphabetical-sort")):i.is(".release-date-sort")?(e.a.sortBooksByLastUpdateDate(r.books),n.addClass("release-date-sort")):i.is(".last-opened-sort")&&(e.a.sortBooksByLastAccess(r.books),n.addClass("last-opened-sort")),r.callback&&r.callback(),r.advancedTooltip.close()}),(function(){}),{horizontalPosition:o.a.center,verticalPosition:o.b.below,dontAutomaticallyPosition:!0,additionalClasses:"sort-books-tooltip "+s,contentHtml:a,isFixed:!1}),this.$tooltip=this.advancedTooltip.$tooltip}return t.prototype.clean=function(){this.$sortIcon=null,this.callback=null,this.books=null,this.advancedTooltip.clean()},t.prototype.updateSortIcon=function(t){this.$sortIcon=t,this.advancedTooltip.updateReferentElement(this.$sortIcon)},t}();i.a=s;var a='\n<div class="sort-books-tooltip-item item-row alphabetical-sort">alphabetical <span class="fa fa-check"></span></div>\n<div class="sort-books-tooltip-item item-row release-date-sort">release date <span class="fa fa-check"></span></div>\n<div class="sort-books-tooltip-item item-row last-opened-sort">last opened <span class="fa fa-check"></span></div>'},472:function(t,i,n){"use strict";n.d(i,"a",(function(){return e}));var e=new(function(){function t(){}return t.prototype.render=function(t,i){null!=t&&null!=i&&null!=i.partialChapterOwnership&&0!=i.partialChapterOwnership.length&&(t.innerHTML=i.partialChapterOwnership.map((function(t){var i=t.userOwned||t.partiallyOwned?t.shortName:"";return i&&(i="you own "+(i=i.replace("-"," "))+" in this book"),'<span data-partial-ownership-id="'+t.shortName+'" \n                            class="ownership-line chapter-ownership-line '+(t.fullyOwned?"is-fully-owned":"")+'" \n                            title="'+i+'">\n                            '+(t.partiallyOwned?'<span class="is-partially-owned"></span>':"")+"\n                    </span>"})).join(""))},t}())},555:function(t,i,n){"use strict";n.d(i,"a",(function(){return o}));var e=n(5),o=new(function(){function t(){this.shouldWishListABeShown=!0}return t.prototype.initialize=function(t){this.getWishListManagerSource().then((function(i){return i.WishListManager.initalize(t)}))},t.prototype.clean=function(){this.getWishListManagerSource().then((function(t){return t.WishListManager.clean()}))},t.prototype.addCurrentBookToWishList=function(){this.getWishListManagerSource().then((function(t){return t.WishListManager.addCurrentBookToWishList()}))},t.prototype.getWishListManagerSource=function(){return this.wishListManagerSourcePromise||(this.wishListManagerSourcePromise=e.a.importWebpackModuleWithRetry(this.constructWishListManagerSourcePromise)),this.wishListManagerSourcePromise},t.prototype.constructWishListManagerSourcePromise=function(){return n.e(54).then(n.bind(null,767))},t}())}}]);
//# sourceMappingURL=booksModule.chunk.js.map?255cd651c1dd5c16ebd5