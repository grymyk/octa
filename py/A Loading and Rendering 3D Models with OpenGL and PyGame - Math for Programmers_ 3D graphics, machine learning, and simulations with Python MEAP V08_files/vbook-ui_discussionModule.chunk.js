(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1279:function(e,t,o){"use strict";var r,n=o(357),i=o(358),a=o(376),s=o(385),u=o(375),c=(o(885),o(887),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.render=function(){return n.createElement("span",{className:"label-separator"}," · ")},t}(n.Component),l=o(1295),d=o(891),h=(o(889),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}());l.a.locale(d);var m=new l.a("en-US"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.render=function(){return n.createElement("span",{className:"time-ago-label"},m.format(this.props.date))},t}(n.Component),g=(o(902),o(365)),v=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.render=function(){return n.createElement(n.Fragment,null,n.createElement("span",{className:"notifications-indicator-root","data-for":"notification-indicator-tooltip","data-tip":this.props.tooltip||"view notifications",onClick:this.props.onClick},n.createElement("span",{className:"notifications-indicator-label"},this.props.count)),!g.a.isTouch&&n.createElement(a,{effect:"solid",id:"notification-indicator-tooltip",place:"right",html:!0}))},t}(n.Component),S=o(367),T=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),C=function(e){function t(t){var o=e.call(this,t)||this;return o.handleOpenElementForum=o.handleOpenElementForum.bind(o),o}return T(t,e),t.prototype.render=function(){var e=this.props.elementForum,t=e.forum.threads,o=this.countComments(t),r=e.elementTitle||(e.element||"").replace("-"," "),i=S.a.getElementForumLink(this.props.productForum,e);null!=t&&t.length;return n.createElement("div",{className:"element-forum-root",onClick:this.handleOpenElementForum},n.createElement("div",null,n.createElement("div",{className:"element-forum-header"},n.createElement("div",{className:"element-forum-title",title:e.elementTitle},n.createElement("a",{href:i,className:"dont-propagate-click",onClick:function(e){return e.preventDefault()}},r))),n.createElement("div",{className:"element-forum-footer"},t[t.length-1]?n.createElement(n.Fragment,null,n.createElement("a",{href:i},o," ",o>1?"comments":"comment"),n.createElement(p,null),n.createElement(f,{date:e.lastCommentDate})):n.createElement("span",{className:"inconspicuous-text"},"start a new thread in here"))),n.createElement("div",null,this.generateNotificationsContent()),!g.a.isTouch&&n.createElement(a,{effect:"solid",place:"top"}))},t.prototype.generateNotificationsContent=function(){return this.props.elementForum.numberOfNewComments>0?n.createElement(E,{count:this.props.elementForum.numberOfNewComments,tooltip:this.props.elementForum.numberOfNewComments+" new comment"+(this.props.elementForum.numberOfNewComments>1?"s":"")}):S.a.hasElementForumVisitNotifications(this.props.forumVisitInfo,this.props.productForum,this.props.elementForum)?n.createElement("div",{className:"forum-not-seen-indicator","data-tip":"contains new comments"}):void 0},t.prototype.handleOpenElementForum=function(){this.props.openElementForum&&this.props.openElementForum(this.props.elementForum)},t.prototype.countComments=function(e){var t=0;if(!e||0==e.length)return t;for(var o=0,r=e;o<r.length;o++){var n=r[o];t+=(null!=n.posts?n.posts.length:0)+1}return t},t}(n.Component),y=o(588),_=o(649),O=o(904),R=(o(905),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),b=function(){return(b=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},w=function(e){function t(t){var o=e.call(this,t)||this;return o.handleRootReady=o.handleRootReady.bind(o),o.handleSearchClick=o.handleSearchClick.bind(o),o.handleClearSearchClick=o.handleClearSearchClick.bind(o),o.handleKeyPress=o.handleKeyPress.bind(o),o.handleSetSearchQuery=o.handleSetSearchQuery.bind(o),o.handleSetSortType=o.handleSetSortType.bind(o),o.toggleSortTooltip=o.toggleSortTooltip.bind(o),o.handlePopupClick=o.handlePopupClick.bind(o),o.handlePopupRef=o.handlePopupRef.bind(o),o.state={isSortTooltipOpened:!1},o}return R(t,e),t.prototype.render=function(){var e=this;return n.createElement("div",{className:i("forum-header-root",{"forum-header-showing-search":this.props.isShowingSearchResults}),ref:this.handleRootReady},n.createElement("div",{className:"forum-header"},n.createElement("span",{className:"forum-header-left-side-container"},this.props.hasBackButton?n.createElement("i",{className:"fa fa-fw fa-arrow-left back-button forum-header-button",onClick:this.props.onBack,"data-place":"right","data-tip":this.props.leftIconTooltip,"data-for":"forum-header-tooltip"}):n.createElement("i",{className:i("fa fa-fw",{"fa-comments forum-header-button":this.props.hasRootIcon}),"data-place":"right","data-tip":this.props.leftIconTooltip,"data-for":"forum-header-tooltip",onClick:this.props.onGoToRoot}),this.props.notificationsCount&&this.props.notificationsCount>0?n.createElement(E,{count:this.props.notificationsCount,onClick:this.props.onShowNotifications}):n.createElement("span",{className:"forum-header-empty-icon"})),n.createElement("span",{className:"forum-header-middle-container"},n.createElement("span",{className:"forum-header-title",dangerouslySetInnerHTML:{__html:this.props.title}}),this.props.offerSearch&&!this.props.isShowingSearchResults&&!this.props.isLoading&&n.createElement(O.a,{ref:this.handlePopupRef,trigger:function(){return n.createElement("span",{className:"forum-header-sort",onClick:e.toggleSortTooltip},"sort ",n.createElement("i",{className:"fa fa-sort","aria-hidden":"true"}))},position:"bottom center",open:this.state.isSortTooltipOpened,contentStyle:{border:"none",background:"black",width:"auto"},arrowStyle:{background:"black"},onOpen:this.props.onRequiresAllResults},n.createElement("div",{onClick:this.handlePopupClick},n.createElement("div",{className:i("forum-header-sort-tooltip-item",{selected:this.props.sortType==_.a.MostRecent}),onClick:this.handleSetSortType,"data-value":_.a.MostRecent}," date "),n.createElement("div",{className:i("forum-header-sort-tooltip-item",{selected:this.props.sortType==_.a.Alphabetical}),onClick:this.handleSetSortType,"data-value":_.a.Alphabetical}," alphabetical "),n.createElement("div",{className:i("forum-header-sort-tooltip-item",{selected:this.props.sortType==_.a.CommentCount}),onClick:this.handleSetSortType,"data-value":_.a.CommentCount}," number of comments ")))),n.createElement("span",{className:"forum-header-right-side-container"},n.createElement("span",{className:"forum-header-empty-icon"}),n.createElement("i",{className:"fa fa-times-circle forum-header-button",onClick:this.props.onClose,"data-tip":"close discussion","data-for":"forum-header-tooltip"}))),this.props.offerSearch&&n.createElement("div",{className:"forum-header-input-container"},n.createElement("input",{onFocus:this.props.onRequiresAllResults,value:this.props.searchQuery||"",placeholder:this.props.searchPlaceholder,className:"forum-header-search-input",onKeyPress:this.handleKeyPress,onChange:this.handleSetSearchQuery}),this.props.isShowingSearchResults?n.createElement("i",{className:"fa fa-times search-icon",onClick:this.handleClearSearchClick,"data-tip":"clear search","data-for":"forum-header-tooltip"}):n.createElement("i",{className:"fa fa-search search-icon",onClick:this.handleSearchClick,"data-tip":"search","data-for":"forum-header-tooltip"})),!g.a.isTouch&&n.createElement(a,{effect:"solid",place:"top",id:"forum-header-tooltip",html:!0}))},t.prototype.handleRootReady=function(e){this.root=e},t.prototype.handlePopupRef=function(e){this.popup=e},t.prototype.handlePopupClick=function(){this.popup&&this.popup.closePopup(),this.setState(b({},this.state,{isSortTooltipOpened:!1}))},t.prototype.handleClearSearchClick=function(){this.props.onClearSearch&&this.props.onClearSearch()},t.prototype.handleSetSearchQuery=function(e){this.props.onSetSearchQuery&&this.props.onSetSearchQuery(e.target.value)},t.prototype.handleSetSortType=function(e){var t=e.target;this.setState(b({},this.state,{isSortTooltipOpened:!1})),this.props.onSetSortType&&this.props.onSetSortType(t.getAttribute("data-value"))},t.prototype.handleSearchClick=function(){this.triggerOnSearchIfNeeded()},t.prototype.handleKeyPress=function(e){"Enter"==e.key&&this.triggerOnSearchIfNeeded()},t.prototype.triggerOnSearchIfNeeded=function(){if(this.root){var e=this.root.querySelector(".forum-header-search-input");if(e){var t=(e.value||"").trim();t&&this.props.onSearch&&this.props.onSearch(t)}}},t.prototype.toggleSortTooltip=function(){this.state.isSortTooltipOpened||this.props.onRequiresAllResults&&this.props.onRequiresAllResults(),this.setState(b({},this.state,{isSortTooltipOpened:!this.state.isSortTooltipOpened}))},t}(n.Component),A=(o(907),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),I=function(e){function t(t){var o=e.call(this,t)||this;return o.handleProductForumSelected=o.handleProductForumSelected.bind(o),o}return A(t,e),t.prototype.render=function(){return n.createElement("div",{className:"product-forum-summary-root",onClick:this.handleProductForumSelected},n.createElement("div",{className:"product-forum-summary-container"},n.createElement("div",{className:"product-forum-summary-title",title:this.props.productForum.productTitle},n.createElement("a",{href:S.a.getProductForumLink(this.props.productForum),className:"dont-propagate-click",onClick:function(e){return e.preventDefault()}},this.props.productForum.productTitle)),n.createElement("div",{className:"product-forum-summary-footer"},n.createElement("a",{href:"javascript:void(0)"},this.props.productForum.numberOfComments," ",this.props.productForum.numberOfComments>1?"comments":"comment"),n.createElement(p,null),n.createElement(f,{date:this.props.productForum.lastCommentDate}))),n.createElement("div",{className:"product-forum-summary-notifications"},this.generateNotificationsIndicator()),!g.a.isTouch&&n.createElement(a,{effect:"solid",place:"top"}))},t.prototype.generateNotificationsIndicator=function(){return this.props.productForum.numberOfNewComments>0?n.createElement(E,{count:this.props.productForum.numberOfNewComments,tooltip:this.props.productForum.numberOfNewComments+" new comment"+(this.props.productForum.numberOfNewComments>1?"s":"")}):S.a.hasProductForumVisitNotifications(this.props.forumVisitInfo,this.props.productForum)?n.createElement("div",{className:"forum-not-seen-indicator","data-tip":"contains new comments"}):void 0},t.prototype.handleProductForumSelected=function(){this.props.onProductForumSelected&&this.props.onProductForumSelected(this.props.productForum)},t}(n.Component),k=o(360),F=o(438),P=(o(909),o(420)),L=(o(911),o(408)),x=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),N=function(e){function t(t){var o=e.call(this,t)||this;return o.handleToggleThread=o.handleToggleThread.bind(o),o.handleDeleteClick=o.handleDeleteClick.bind(o),o.handleReplyClicked=o.handleReplyClicked.bind(o),o.handleEditClick=o.handleEditClick.bind(o),o.handleUpVoteClick=o.handleUpVoteClick.bind(o),o.handleDownVoteClick=o.handleDownVoteClick.bind(o),o.handleToggleSpam=o.handleToggleSpam.bind(o),o.handleNotifyAuthor=o.handleNotifyAuthor.bind(o),o.handleEditingSuggestionToggle=o.handleEditingSuggestionToggle.bind(o),o}return x(t,e),t.prototype.render=function(){var e=this,t=this.props.post instanceof P.f,o=t?this.props.post.posts:[],r=this.props.post.id,a=[];if(t){var s=this.props.post;null==this.props.currentUser||s.isBeingEdited||(a.push(n.createElement("a",{href:"javascript:void(0)",key:r+"-reply",onClick:this.handleReplyClicked},"reply")),a.push(n.createElement(p,{key:r+"-sep-2"})))}if(this.props.post.isBeingEdited)a.push(n.createElement("a",{href:"javascript:void(0)",key:r+"-save",onClick:this.props.onSaveRequested},"save")),a.push(n.createElement(p,{key:r+"-sep-3"})),a.push(n.createElement("a",{href:"javascript:void(0)",key:r+"-cancel",onClick:this.props.onCancelRequested},"cancel (esc)"));else{if(null!=this.props.currentUser&&(this.props.post.user.id==this.props.currentUser.id?0==o.length&&(a.push(n.createElement("a",{href:"javascript:void(0)",key:r+"-edit",onClick:this.handleEditClick},"edit")),a.push(n.createElement(p,{key:r+"-sep-3"})),a.push(n.createElement("a",{href:"javascript:void(0)",key:r+"-delete",onClick:this.handleDeleteClick},"delete")),a.push(n.createElement(p,{key:r+"-sep-4"}))):(a.push(n.createElement("a",{href:"javascript:void(0)",key:r+"-upvote",className:i({selected:this.hasAlreadyBeenUpvoted()}),onClick:this.handleUpVoteClick},n.createElement("span",{className:"upvote-downvote-label"},"upvote"),n.createElement("i",{className:"upvote-downvote-icon fa fa-thumbs-o-up","data-tip":"upvote"}))),a.push(n.createElement(p,{key:r+"-sep-5"})),a.push(n.createElement("a",{href:"javascript:void(0)",key:r+"-downvote",className:i({selected:this.hasAlreadyBeenDownvoted()}),onClick:this.handleDownVoteClick},n.createElement("span",{className:"upvote-downvote-label"},"downvote"),n.createElement("i",{className:"upvote-downvote-icon fa fa-thumbs-o-down","data-tip":"downvote"}))),a.push(n.createElement(p,{key:r+"-sep-6"})))),a.push(n.createElement(f,{key:r+"-time",date:this.props.post.dateCreated})),this.props.post.link&&!this.props.post.link.startsWith("/comment-")&&(a.push(n.createElement(p,{key:r+"-sep-7"})),a.push(n.createElement("a",{className:"open-post-location-link",href:this.props.post.link,key:r+"-location","data-tip":"go to location"},n.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"})))),null!=this.props.currentUser&&this.props.post.user.id!=this.props.currentUser.id){var u=this.hasAlreadyBeenMarkedAsSpam(),c=u?"not spam":"report spam";a.push(n.createElement("span",{className:"post-footer-spam-container",key:"post-footer-spam"},n.createElement(p,null),n.createElement("a",{href:"javascript:void(0)",className:i({selected:u}),onClick:this.handleToggleSpam},n.createElement("i",{className:"fa fa-exclamation-triangle spam-icon","aria-hidden":"true","data-tip":c}))))}var l=S.a.canModerateInProduct(this.props.currentUser,this.props.post.productId),d=this.props.post.isEditingSuggestion,h=l&&!this.props.isAuthor;if((l||this.props.post.isEditingSuggestion)&&(a.push(n.createElement(p,{key:r+"-sep-8"})),a.push(n.createElement("a",{className:i("edit-suggestion-link",{selected:this.props.post.isEditingSuggestion,"not-clickable":!l}),href:"javascript:void(0)",key:r+"-edit-suggestion",onClick:this.handleEditingSuggestionToggle,"data-tip":l?d?"unmark suggestion":"acknowledge suggestion":d?"suggestion acknowledged":""},n.createElement("i",{className:"fa fa-check-circle-o edit-suggestion-icon","aria-hidden":"true"})))),this.props.post.isSyncingVotes)0!=this.props.post.votes&&null!=this.props.post.votes&&a.push(n.createElement("span",{className:i("post-footer-upvote-counter"),key:r+"-upvotes"},n.createElement("i",{className:"fa fa-spinner fa-spin"})));else if(0!=this.props.post.votes&&null!=this.props.post.votes){var m=this.props.post.votes;a.push(n.createElement("span",{className:i("post-footer-upvote-counter",{negative:m<0,positive:m>0}),key:r+"-upvotes"},n.createElement("i",{className:i("fa post-footer-votes-icon",{"fa-thumbs-o-down":m<0,"fa-thumbs-o-up":m>0}),"aria-hidden":"true"}),this.props.post.votes))}h&&(a.push(n.createElement(p,{key:r+"-sep-9"})),a.push(n.createElement("a",{className:"notify-author-link",href:"javascript:void(0)",key:r+"-notify-author",onClick:this.handleNotifyAuthor,"data-tip":"notify author"},n.createElement("i",{className:"fa fa-envelope-o notify-author-icon","aria-hidden":"true"}))))}return n.createElement("div",{className:"post-footer-root",ref:function(t){return e.root=t}},a)},t.prototype.handleToggleThread=function(){this.props.post instanceof P.f&&(this.props.post.isOpen?this.props.onCloseRequested&&this.props.onCloseRequested(this.props.post):this.props.onOpenRequested&&this.props.onOpenRequested(this.props.post))},t.prototype.handleDeleteClick=function(){this.props.onDeletePostRequested&&this.props.onDeletePostRequested(this.props.post)},t.prototype.handleEditClick=function(){this.props.onStartEdit&&this.props.onStartEdit(this.props.post)},t.prototype.handleReplyClicked=function(){if(this.props.post instanceof P.f)if(this.props.post.isOpen){var e=L.a.closest(this.root,".thread-root-container");if(null!=e){var t=e.querySelector("input, textarea");null!=t&&t.focus()}}else this.props.onOpenRequested&&this.props.onOpenRequested(this.props.post)},t.prototype.handleUpVoteClick=function(){this.hasAlreadyBeenUpvoted()?this.props.onRevokeVoteRequested&&this.props.onRevokeVoteRequested(this.props.post):this.props.onVoteRequested&&this.props.onVoteRequested(this.props.post,1)},t.prototype.handleDownVoteClick=function(){this.hasAlreadyBeenDownvoted()?this.props.onRevokeVoteRequested&&this.props.onRevokeVoteRequested(this.props.post):this.props.onVoteRequested&&this.props.onVoteRequested(this.props.post,-1)},t.prototype.hasAlreadyBeenUpvoted=function(){var e=this.props.post,t=this.props.currentUser.votes.find((function(t){return t.commentId==e.id}));return null!=t&&t.isUpVote},t.prototype.hasAlreadyBeenDownvoted=function(){var e=this.props.post,t=this.props.currentUser.votes.find((function(t){return t.commentId==e.id}));return null!=t&&!t.isUpVote},t.prototype.handleToggleSpam=function(){this.props.onToggleSpamRequested&&this.props.onToggleSpamRequested(this.props.post)},t.prototype.hasAlreadyBeenMarkedAsSpam=function(){return S.a.hasAlreadyBeenMarkedAsSpam(this.props.currentUser,this.props.post)},t.prototype.handleNotifyAuthor=function(){this.props.onNotifyAuthorRequested&&this.props.onNotifyAuthorRequested(this.props.currentUser,this.props.post)},t.prototype.handleEditingSuggestionToggle=function(){S.a.canModerateInProduct(this.props.currentUser,this.props.post.productId)&&this.props.onToggleEditingSuggestionRequested&&this.props.onToggleEditingSuggestionRequested(this.props.post)},t}(n.Component),U=(o(913),o(371)),M=(o(915),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),D=["#e6194b","#3cb44b","#0082c8","#f58231","#911eb4","#f032e6","#008080","#aa6e28","#800000","#808000","#000080","#000000"],V=0,q={};var H,B=function(e){function t(t){var o=e.call(this,t)||this;return o.handleImageLoadingError=o.handleImageLoadingError.bind(o),o.handleAvatarChangeImageClick=o.handleAvatarChangeImageClick.bind(o),o.state={hasFailedLoadingImage:!o.isAbsolutePath(o.props.user.avatarUrl)},o}return M(t,e),t.prototype.render=function(){return n.createElement("div",{className:"avatar-container"},this.state.hasFailedLoadingImage?n.createElement("span",{className:"avatar-image",style:{backgroundColor:(e=this.props.user.name,q[e]?q[e]:(q[e]=D[V],++V>=D.length&&(V=0),q[e]))},title:this.props.user&&this.props.user.name},this.getInitials()):n.createElement("img",{className:"avatar-image",onError:this.handleImageLoadingError,alt:this.props.user.name,src:this.props.user.avatarUrl}),(this.props.isAuthor||this.props.isModerator)&&n.createElement("i",{className:"fa fa-star","data-tip":this.props.isAuthor?"author":"moderator"}),this.props.isCurrentUser&&null!=this.props.onChangeAvatar&&n.createElement("div",{className:"avatar-container-change-profile",onClick:this.handleAvatarChangeImageClick,"data-tip":"change your profile image"},n.createElement("i",{className:"fa fa-camera"})));var e},t.prototype.componentWillReceiveProps=function(e){e.user.avatarUrl!=this.props.user.avatarUrl&&this.setState({hasFailedLoadingImage:""==this.props.user.avatarUrl})},t.prototype.handleImageLoadingError=function(){this.setState({hasFailedLoadingImage:!0})},t.prototype.getInitials=function(){var e=(this.props.user.name||"").trim();if(!e)return"NN";var t=e.split(/\s+/);return t&&0!=t.length?1==t.length?(t[0][0]||"").toUpperCase():(t[0][0]||"").toUpperCase()+(t[1][0]||"").toUpperCase():0},t.prototype.isAbsolutePath=function(e){return!!e&&(e||"").startsWith("http")},t.prototype.handleAvatarChangeImageClick=function(e){return e&&e.preventDefault(),e&&e.stopPropagation(),this.props.onChangeAvatar&&this.props.onChangeAvatar(),!1},t}(n.Component),j=(o(917),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),G=function(e){function t(t){var o=e.call(this,t)||this;return o.handleCommentTextRef=o.handleCommentTextRef.bind(o),o.handleRootClick=o.handleRootClick.bind(o),o}return j(t,e),t.prototype.render=function(){return n.createElement("div",{className:"user-comment-root-container"},n.createElement(B,{onChangeAvatar:this.props.onChangeAvatar,isCurrentUser:this.isCommentByCurrentUser(),user:this.props.post.user,isAuthor:S.a.isAuthor(this.props.post.user,this.props.authorIdMap),isModerator:S.a.isModerator(this.props.post.user,this.props.moderatorIdMap)}),n.createElement("div",{className:"user-comment-content-container"},n.createElement("div",{className:i("user-comment-text-container",{"has-not-been-seen":this.props.isUnseen}),ref:this.handleCommentTextRef},this.renderContent(),this.props.isUnseen&&n.createElement("div",{className:"forum-not-seen-indicator extra-noticable-indicator","data-tip":this.props.post instanceof P.f?"contains new comments":"new comment"})),this.props.children))},t.prototype.renderContent=function(){var e=this.props.post;return e instanceof P.f&&e.title?n.createElement(n.Fragment,null,n.createElement("div",{className:"user-comment-thread-header"},n.createElement("span",null,e.user.name,": ")," ",n.createElement("span",{className:"user-comment-thread-title"},e.title)),n.createElement(U.a,{source:e.text,html_in_markdown:!1})):n.createElement(U.a,{source:S.a.expendCommentWithUserText(e.text,e.user.name),html_in_markdown:!1})},t.prototype.handleCommentTextRef=function(e){this.textRoot=e},t.prototype.componentDidMount=function(){null!=this.textRoot&&this.textRoot.addEventListener("click",this.handleRootClick)},t.prototype.componentWillUnmount=function(){null!=this.textRoot&&this.textRoot.removeEventListener("click",this.handleRootClick)},t.prototype.handleRootClick=function(e){var t=e.target;null!=t&&"IMG"==t.tagName&&this.props.onLargeImageRequested&&this.props.onLargeImageRequested(t.src)},t.prototype.isCommentByCurrentUser=function(){return null!=this.props.currentUser&&null!=this.props.post&&null!=this.props.post.user&&this.props.currentUser.id==this.props.post.user.id},t}(n.Component),W=(o(778),o(920),o(363)),z=(o(429),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),Q=function(e){function t(t){var o=e.call(this,t)||this;return o.handleActionClicked=o.handleActionClicked.bind(o),o}return z(t,e),t.prototype.render=function(){var e=this;return n.createElement(W.b,{title:"add a link",isOpen:this.props.isShown,onClose:this.props.onClose,theme:W.a.standard,onActionClicked:this.handleActionClicked,onCancelationClicked:this.props.onClose,actionMessageHTML:"add"},n.createElement("form",{className:"social-modal-form",ref:function(t){return e.root=t}},n.createElement("label",null,n.createElement("span",{className:"label-text"},"Link text:"),n.createElement("input",{className:"social-modal-form-link-text",type:"text",defaultValue:this.props.defaultValue||""})),n.createElement("label",null,n.createElement("span",{className:"label-text"},"Link url:"),n.createElement("input",{className:"social-modal-form-link-url",type:"text"}))))},t.prototype.handleActionClicked=function(){this.props.onAccept&&this.root&&this.props.onAccept(this.root.querySelector(".social-modal-form-link-text").value,this.root.querySelector(".social-modal-form-link-url").value)},t}(n.Component),K=o(591),Y=o(1283),Z=(o(922),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),J=function(){return(J=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},$=function(e){function t(t){var o=e.call(this,t)||this;return o.handleTextAreaChange=o.handleTextAreaChange.bind(o),o.handleKeyDown=o.handleKeyDown.bind(o),o.handleRootRef=o.handleRootRef.bind(o),o.handleRootClick=o.handleRootClick.bind(o),o.state={value:o.props.initialText||""},o}return Z(t,e),t.prototype.render=function(){var e=this,t=i({"previewable-markdown-editor-preview-container":!0,"previewable-markdown-editor-preview-container-hidden":!this.props.isPreviewing}),o=i({"previewable-markdown-editor-textarea-container-hidden":this.props.isPreviewing});return n.createElement("div",{className:i("previewable-markdown-editor-root"),ref:this.handleRootRef},n.createElement("div",{className:i("previewable-markdown-editor-wrapper",{"has-arrow-tip":this.props.hasTip})},n.createElement(n.Fragment,null,n.createElement(U.a,{className:t,source:S.a.expendCommentWithUserText(this.state.value,this.props.user&&this.props.user.name),html_in_markdown:!1}),n.createElement(Y.a,{className:o,inputRef:function(t){return e.textArea=t},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleTextAreaChange,onKeyDown:this.handleKeyDown,minRows:this.props.minRows||1,maxRows:this.props.maxRows||5})),this.props.hasTextareaCommands&&n.createElement("div",{className:"previewable-markdown-editor-input-commands-container"},n.createElement("i",{className:i("fa fa-font post-input-show-text-commands-icon",{selected:this.props.isShowingTextEditor}),"data-tip":"toggle text edit controls","aria-hidden":"true",onClick:this.props.onTextEditToggle}),n.createElement("i",{className:"fa "+(this.props.saveIcon||"fa-paper-plane"),"data-tip":this.props.saveLabel,title:this.props.saveLabel,onClick:this.props.onSave,"aria-hidden":"true"}))),this.props.isEditing&&n.createElement(N,{post:this.props.post,currentUser:this.props.user,isAuthor:S.a.isAuthor(this.props.user,this.props.authorIdMap),onSaveRequested:this.props.onSave,onCancelRequested:this.props.onCancel}))},t.prototype.handleRootRef=function(e){this.root=e},t.prototype.componentDidMount=function(){null!=this.root&&this.root.addEventListener("click",this.handleRootClick),this.props.dontFocusOnMounted||this.textArea&&this.textArea.focus()},t.prototype.componentWillUnmount=function(){null!=this.root&&this.root.removeEventListener("click",this.handleRootClick)},t.prototype.handleRootClick=function(e){var t=e.target;null!=t&&"IMG"==t.tagName&&t.src&&this.props.onLargeImageRequested&&this.props.onLargeImageRequested(t.src)},t.prototype.getText=function(){return this.textArea.value.trim()},t.prototype.clearText=function(){this.setState(J({},this.state,{value:""}))},t.prototype.getSelectedText=function(){return this.textArea.value.substring(this.textArea.selectionStart,this.textArea.selectionEnd)},t.prototype.focus=function(){this.textArea.focus()},t.prototype.insertTextAtLocation=function(e,t,o){void 0===t&&(t=""),void 0===o&&(o={});var r=this.textArea,n=r.selectionStart,i=r.selectionEnd,a="";if(o.insertAtStartOfLine)for(var s=r.value,u=n;u>=0;u--)if(u<=0||"\n"==s[u]){n=u;break}n!=i&&(a=r.value.substring(n,i)),o.ignoreCurrentSelection&&(a=""),this.setState(J({},this.state,{value:r.value.substring(0,n)+e+a+t+r.value.substring(i)})),r.selectionEnd=n+a.length+1,r.focus()},t.prototype.handleTextAreaChange=function(e){this.setState(J({},this.state,{value:e.target.value}))},t.prototype.handleKeyDown=function(e){var t=e.keyCode||e.which;13==t&&(e.metaKey||e.ctrlKey)?this.props.onSave&&this.props.onSave():27==t?this.props.onCancel&&this.props.onCancel():9!=t||e.shiftKey||(e.preventDefault(),this.insertTextAtLocation("\t",""))},t}(n.Component),X=(o(924),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),ee=function(e){function t(t){return e.call(this,t)||this}return X(t,e),t.prototype.render=function(){return n.createElement("div",{className:"text-edit-controls-root",style:{maxHeight:this.props.isShowingTextEditor?"70px":0}},n.createElement("div",{className:"text-edit-controls-commands-container"},n.createElement("i",{className:"fa fa-bold","data-tip":"bold","aria-hidden":"true",onClick:this.props.onBoldClick}),n.createElement("i",{className:"fa fa-italic","data-tip":"italic","aria-hidden":"true",onClick:this.props.onItalicClick}),n.createElement("i",{className:"fa fa-link","data-tip":"add a link","aria-hidden":"true",style:{marginLeft:"1.5em"},onClick:this.props.onAddLinkClick}),n.createElement("i",{className:"fa fa-quote-right","data-tip":"quote","aria-hidden":"true",onClick:this.props.onAddQuoteClick}),n.createElement("i",{className:"fa fa-code","data-tip":"code fragment","aria-hidden":"true",onClick:this.props.onAddCodeClick}),n.createElement("i",{className:"fa fa-picture-o","data-tip":"insert image","aria-hidden":"true",onClick:this.props.onAddImageClick}),n.createElement("a",{href:"javascript:void(0)",className:"text-edit-controls-preview-link",tabIndex:-1,onClick:this.props.onTogglePreviewClick},this.props.isPreviewing?"code":"preview")),!g.a.isTouch&&n.createElement(a,{effect:"solid",place:"top"}))},t}(n.Component),te=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),oe=function(){return(oe=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},re=function(e){function t(t){var o=e.call(this,t)||this;return o.handleCancelClick=o.handleCancelClick.bind(o),o.triggerSave=o.triggerSave.bind(o),o.handleTextEditToggle=o.handleTextEditToggle.bind(o),o.handleHeaderClick=o.handleHeaderClick.bind(o),o.handleBoldClick=o.handleBoldClick.bind(o),o.handleItalicClick=o.handleItalicClick.bind(o),o.handleStrikethroughClick=o.handleStrikethroughClick.bind(o),o.handleAddLinkClick=o.handleAddLinkClick.bind(o),o.handleAddQuoteClick=o.handleAddQuoteClick.bind(o),o.handleAddCodeClick=o.handleAddCodeClick.bind(o),o.handleAddImageClick=o.handleAddImageClick.bind(o),o.handleAddUnorderedListClick=o.handleAddUnorderedListClick.bind(o),o.handleAddOrderedListClick=o.handleAddOrderedListClick.bind(o),o.handleTogglePreviewClick=o.handleTogglePreviewClick.bind(o),o.handleAddLinkConfirmed=o.handleAddLinkConfirmed.bind(o),o.handleAddLinkClosed=o.handleAddLinkClosed.bind(o),o.handleAddImageConfirmed=o.handleAddImageConfirmed.bind(o),o.handleAddImageClosed=o.handleAddImageClosed.bind(o),o.state={isShowingTextEditor:!1,isPreviewing:!1},o}return te(t,e),t.prototype.render=function(){var e=this;return null==this.props.user?n.createElement("div",{className:"post-input-root post-input-sign-in-root"},n.createElement("div",{className:"discussion-sign-in-container"},n.createElement("div",{className:"discussion-sign-in-button"},"sign in to join the discussion"))):n.createElement("div",{className:"post-input-root",ref:function(t){return e.root=t},onClick:this.props.onClick},n.createElement(ee,{isShowingTextEditor:this.state.isShowingTextEditor,isPreviewing:this.state.isPreviewing,onBoldClick:this.handleBoldClick,onItalicClick:this.handleItalicClick,onAddLinkClick:this.handleAddLinkClick,onAddQuoteClick:this.handleAddQuoteClick,onAddCodeClick:this.handleAddCodeClick,onAddImageClick:this.handleAddImageClick,onTogglePreviewClick:this.handleTogglePreviewClick}),n.createElement("div",{className:"post-input-content-container"},n.createElement(B,{onChangeAvatar:this.props.onChangeAvatar,isCurrentUser:!0,user:this.props.user,isAuthor:S.a.isAuthor(this.props.user,this.props.authorIdMap),isModerator:S.a.isModerator(this.props.user,this.props.moderatorIdMap)}),n.createElement($,{ref:function(t){return e.previewableMarkdownEditor=t},user:this.props.user,post:this.props.post,initialText:this.props.initialText,isPreviewing:this.state.isPreviewing,isShowingTextEditor:this.state.isShowingTextEditor,placeholder:this.props.placeholder,hasTip:!0,hasTextareaCommands:!this.props.dontShowCommands,dontFocusOnMounted:this.props.dontFocusOnInput,isEditing:this.props.isEditing,saveLabel:this.props.saveLabel,authorIdMap:this.props.authorIdMap,onCancel:this.handleCancelClick,onSave:this.triggerSave,onTextEditToggle:this.handleTextEditToggle,onLargeImageRequested:this.props.onLargeImageRequested})),!g.a.isTouch&&n.createElement(a,{effect:"solid",place:"top"}))},t.prototype.handleCancelClick=function(){this.props.onCancel&&this.props.onCancel()},t.prototype.triggerSave=function(){this.previewableMarkdownEditor.getText().length>5e3?alert("Comment is too long, maximum length is 5000 characters."):(this.props.onSave&&this.props.onSave(this.previewableMarkdownEditor.getText()),this.previewableMarkdownEditor.clearText())},t.prototype.handleTextEditToggle=function(){this.props.onTextEditToggle?this.props.onTextEditToggle():this.setState(oe({},this.state,{isShowingTextEditor:!this.state.isShowingTextEditor}))},t.prototype.handleHeaderClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("# ","",{insertAtStartOfLine:!0})},t.prototype.handleBoldClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("**","**")},t.prototype.handleItalicClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("*","*")},t.prototype.handleStrikethroughClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("~~","~~")},t.prototype.handleAddLinkClick=function(){this.root&&this.renderAddLinkModal(!0,this.previewableMarkdownEditor.getSelectedText())},t.prototype.handleAddLinkConfirmed=function(e,t){this.previewableMarkdownEditor.insertTextAtLocation("["+e+"]("+t+")","",{ignoreCurrentSelection:!0}),this.renderAddLinkModal(!1)},t.prototype.renderAddLinkModal=function(e,t){void 0===t&&(t=""),k.render(n.createElement(Q,{isShown:e,defaultValue:t,onAccept:this.handleAddLinkConfirmed,onClose:this.handleAddLinkClosed}),document.getElementById("full-screen-modal"))},t.prototype.handleAddImageClick=function(){this.renderUploadImageModal(!0)},t.prototype.renderUploadImageModal=function(e){k.render(n.createElement(K.a,{isShown:e,onAccept:this.handleAddImageConfirmed,onClose:this.handleAddImageClosed}),document.getElementById("full-screen-modal"))},t.prototype.handleAddImageConfirmed=function(e){this.previewableMarkdownEditor.insertTextAtLocation("![]("+e+")"),this.renderUploadImageModal(!1)},t.prototype.handleAddImageClosed=function(){this.renderUploadImageModal(!1)},t.prototype.handleAddQuoteClick=function(){this.previewableMarkdownEditor.insertTextAtLocation(">","",{insertAtStartOfLine:!0})},t.prototype.handleAddCodeClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("`","`")},t.prototype.handleAddUnorderedListClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("- ","",{insertAtStartOfLine:!0})},t.prototype.handleAddOrderedListClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("1. ","",{insertAtStartOfLine:!0})},t.prototype.handleTogglePreviewClick=function(){this.setState(oe({},this.state,{isPreviewing:!this.state.isPreviewing}))},t.prototype.handleAddLinkClosed=function(){this.renderAddLinkModal(!1)},t}(n.Component),ne=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),ie=function(e){function t(t){var o=e.call(this,t)||this;return o.handlePostEdit=o.handlePostEdit.bind(o),o.handlePostEditCancel=o.handlePostEditCancel.bind(o),o.handlePostSave=o.handlePostSave.bind(o),o}return ne(t,e),t.prototype.render=function(){return n.createElement("div",{className:i("post-root-container",{"is-being-synced":this.props.post&&this.props.post.isBeingSynced}),"data-comment-id":this.props.post.id},this.props.post.isBeingEdited?n.createElement(re,{post:this.props.post,initialText:this.props.post.text,user:this.props.currentUser,saveIcon:"fa-check",saveLabel:"save",onSave:this.handlePostSave,onCancel:this.handlePostEditCancel,isEditing:this.props.post.isBeingEdited,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap,onChangeAvatar:this.props.onChangeAvatar,onLargeImageRequested:this.props.onLargeImageRequested}):n.createElement(G,{currentUser:this.props.currentUser,post:this.props.post,onLargeImageRequested:this.props.onLargeImageRequested,onChangeAvatar:this.props.onChangeAvatar,isUnseen:this.props.isUnseen,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap},n.createElement(N,{post:this.props.post,isAuthor:S.a.isAuthor(this.props.currentUser,this.props.authorIdMap),currentUser:this.props.currentUser,onStartEdit:this.handlePostEdit,onDeletePostRequested:this.props.onDeletePostRequested,onVoteRequested:this.props.onVoteRequested,onNotifyAuthorRequested:this.props.onNotifyAuthorRequested,onRevokeVoteRequested:this.props.onRevokeVoteRequested,onToggleSpamRequested:this.props.onToggleSpamRequested,onToggleEditingSuggestionRequested:this.props.onToggleEditingSuggestionRequested})),this.props.post.isBeingSynced&&n.createElement("div",{className:"syncing-frame"}))},t.prototype.handlePostEdit=function(){this.props.onEditRequested&&this.props.onEditRequested(this.props.post)},t.prototype.handlePostEditCancel=function(){this.props.onEditCancelRequested&&this.props.onEditCancelRequested(this.props.post)},t.prototype.handlePostSave=function(e){this.props.onSaveRequested&&this.props.onSaveRequested(this.props.post,e)},t}(n.Component),ae=(o(926),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),se=function(e){function t(t){var o=e.call(this,t)||this;return o.handleOpenThread=o.handleOpenThread.bind(o),o}return ae(t,e),t.prototype.render=function(){var e=this.props.thread;if(null==e||null==e.posts||0==e.posts.length)return null;var t=e.posts[e.posts.length-1];return n.createElement("div",{className:"thread-post-summary-root"},n.createElement("i",{className:"fa fa-reply open-thread-icon","aria-hidden":"true",onClick:this.handleOpenThread}),n.createElement("span",{className:"thread-post-summary-open-thread-link",onClick:this.handleOpenThread},n.createElement(B,{user:t.user,isAuthor:S.a.isAuthor(t.user,this.props.authorIdMap),isModerator:S.a.isModerator(t.user,this.props.moderatorIdMap)}),n.createElement("a",{href:"javascript:void(0)",className:"thread-post-summary-user-name"},t.user.name," replied"),"  ·  ",n.createElement("a",{href:"javascript:void(0)"},e.posts.length," ",e.posts.length>1?"responses":"response")),n.createElement(p,null),n.createElement(f,{date:t.dateCreated}))},t.prototype.handleOpenThread=function(){this.props.onOpenRequested&&this.props.onOpenRequested(this.props.thread)},t}(n.Component),ue=(o(928),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),ce=function(){return(ce=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},pe=function(e){function t(t){var o=e.call(this,t)||this;return o.handleCancelClick=o.handleCancelClick.bind(o),o.triggerSave=o.triggerSave.bind(o),o.handleTitleChange=o.handleTitleChange.bind(o),o.handleHeaderClick=o.handleHeaderClick.bind(o),o.handleBoldClick=o.handleBoldClick.bind(o),o.handleItalicClick=o.handleItalicClick.bind(o),o.handleStrikethroughClick=o.handleStrikethroughClick.bind(o),o.handleAddLinkClick=o.handleAddLinkClick.bind(o),o.handleAddQuoteClick=o.handleAddQuoteClick.bind(o),o.handleAddCodeClick=o.handleAddCodeClick.bind(o),o.handleAddImageClick=o.handleAddImageClick.bind(o),o.handleAddUnorderedListClick=o.handleAddUnorderedListClick.bind(o),o.handleAddOrderedListClick=o.handleAddOrderedListClick.bind(o),o.handleTogglePreviewClick=o.handleTogglePreviewClick.bind(o),o.handleAddLinkConfirmed=o.handleAddLinkConfirmed.bind(o),o.handleAddLinkClosed=o.handleAddLinkClosed.bind(o),o.handleAddImageConfirmed=o.handleAddImageConfirmed.bind(o),o.handleAddImageClosed=o.handleAddImageClosed.bind(o),o.state={title:o.props.thread?o.props.thread.title:"",isPreviewing:!1},o}return ue(t,e),t.prototype.render=function(){var e=this;return null==this.props.user?n.createElement("div",{className:"thread-input-root thread-input-sign-in-root"},n.createElement("div",{className:"discussion-sign-in-container"},n.createElement("div",{className:"discussion-sign-in-button"},"sign in to join the discussion"))):n.createElement("div",{className:"thread-input-root",ref:function(t){return e.root=t}},n.createElement(B,{onChangeAvatar:this.props.onChangeAvatar,isCurrentUser:!0,user:this.props.user,isAuthor:S.a.isAuthor(this.props.user,this.props.authorIdMap),isModerator:S.a.isModerator(this.props.user,this.props.moderatorIdMap)}),n.createElement("div",{className:"thread-input-wrapper"},n.createElement("input",{className:"thread-input-title-input",placeholder:"subject",value:this.state.title,onChange:this.handleTitleChange,ref:function(t){return e.titleInput=t}}),n.createElement(ee,{isShowingTextEditor:!0,isPreviewing:this.state.isPreviewing,onBoldClick:this.handleBoldClick,onItalicClick:this.handleItalicClick,onAddLinkClick:this.handleAddLinkClick,onAddQuoteClick:this.handleAddQuoteClick,onAddCodeClick:this.handleAddCodeClick,onAddImageClick:this.handleAddImageClick,onTogglePreviewClick:this.handleTogglePreviewClick}),n.createElement($,{ref:function(t){return e.previewableMarkdownEditor=t},initialText:null!=this.props.thread?this.props.thread.text:"",saveLabel:this.props.saveLabel,isPreviewing:this.state.isPreviewing,isShowingTextEditor:!0,onCancel:this.handleCancelClick,onSave:this.triggerSave,placeholder:"Ask a question or share an example. \nPlease, stay with the subject of this book.",user:this.props.user,authorIdMap:this.props.authorIdMap,dontFocusOnMounted:!0,onLargeImageRequested:this.props.onLargeImageRequested,minRows:4}),n.createElement("div",{className:"thread-create-post-footer"},this.props.isEditing?n.createElement("a",{href:"javascript:void(0)",tabIndex:-1,onClick:this.props.onCancel},"cancel"):n.createElement("a",{href:"https://guides.github.com/features/mastering-markdown/",className:"info-link",target:"_blank",tabIndex:-1},"style with markdown"),n.createElement("div",null,this.props.hasCancel&&n.createElement("span",{className:"social-button",onClick:this.handleCancelClick},"cancel"),n.createElement("span",{className:"social-button",onClick:this.triggerSave}," ",this.props.saveLabel||"save")))))},t.prototype.componentDidMount=function(){this.titleInput&&this.titleInput.focus()},t.prototype.handleTitleChange=function(e){this.setState(ce({},this.state,{title:e.target.value}))},t.prototype.handleCancelClick=function(){this.props.onCancel&&this.props.onCancel()},t.prototype.triggerSave=function(){this.previewableMarkdownEditor.getText().length>5e3?alert("Comment is too long, maximum length is 5000 characters."):(this.props.onSave&&this.props.onSave(this.titleInput.value,this.previewableMarkdownEditor.getText()),this.previewableMarkdownEditor.clearText(),this.previewableMarkdownEditor.focus(),this.setState(ce({},this.state,{title:""})))},t.prototype.handleHeaderClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("# ","",{insertAtStartOfLine:!0})},t.prototype.handleBoldClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("**","**")},t.prototype.handleItalicClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("*","*")},t.prototype.handleStrikethroughClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("~~","~~")},t.prototype.handleAddLinkClick=function(){this.root&&this.renderAddLinkModal(!0,this.previewableMarkdownEditor.getSelectedText())},t.prototype.handleAddLinkConfirmed=function(e,t){this.previewableMarkdownEditor.insertTextAtLocation("["+e+"]("+t+")","",{ignoreCurrentSelection:!0}),this.renderAddLinkModal(!1)},t.prototype.renderAddLinkModal=function(e,t){void 0===t&&(t=""),k.render(n.createElement(Q,{isShown:e,defaultValue:t,onAccept:this.handleAddLinkConfirmed,onClose:this.handleAddLinkClosed}),document.getElementById("full-screen-modal"))},t.prototype.handleAddImageClick=function(){this.renderUploadImageModal(!0)},t.prototype.renderUploadImageModal=function(e){k.render(n.createElement(K.a,{isShown:e,onAccept:this.handleAddImageConfirmed,onClose:this.handleAddImageClosed}),document.getElementById("full-screen-modal"))},t.prototype.handleAddImageConfirmed=function(e){this.previewableMarkdownEditor.insertTextAtLocation("![]("+e+")"),this.renderUploadImageModal(!1)},t.prototype.handleAddImageClosed=function(){this.renderUploadImageModal(!1)},t.prototype.handleAddQuoteClick=function(){this.previewableMarkdownEditor.insertTextAtLocation(">","",{insertAtStartOfLine:!0})},t.prototype.handleAddCodeClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("`")},t.prototype.handleAddUnorderedListClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("- ","",{insertAtStartOfLine:!0})},t.prototype.handleAddOrderedListClick=function(){this.previewableMarkdownEditor.insertTextAtLocation("1. ","",{insertAtStartOfLine:!0})},t.prototype.handleTogglePreviewClick=function(){this.setState(ce({},this.state,{isPreviewing:!this.state.isPreviewing}))},t.prototype.handleAddLinkClosed=function(){this.renderAddLinkModal(!1)},t}(n.Component),le=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),de=function(e){function t(t){var o=e.call(this,t)||this;return o.handleOpenThread=o.handleOpenThread.bind(o),o.handleCloseThread=o.handleCloseThread.bind(o),o.handlePostEdit=o.handlePostEdit.bind(o),o.handlePostSave=o.handlePostSave.bind(o),o.handlePostEditCancel=o.handlePostEditCancel.bind(o),o.handleDeletePostRequested=o.handleDeletePostRequested.bind(o),o.handleCreatePost=o.handleCreatePost.bind(o),o.handleThreadSave=o.handleThreadSave.bind(o),o.handleThreadEditCancel=o.handleThreadEditCancel.bind(o),o.handleVoteRequested=o.handleVoteRequested.bind(o),o.handleRevokeVoteRequested=o.handleRevokeVoteRequested.bind(o),o.handleThreadPostSave=o.handleThreadPostSave.bind(o),o.handleToggleSpamRequested=o.handleToggleSpamRequested.bind(o),o.handleToggleEditingSuggestionRequested=o.handleToggleEditingSuggestionRequested.bind(o),o.state={},o}return le(t,e),t.prototype.render=function(){var e=this;return n.createElement("li",{className:i("thread-root-container",{"is-being-synced":this.props.thread&&this.props.thread.isBeingSynced}),"data-comment-id":this.props.thread.id},!this.props.thread.isBeingEdited&&n.createElement(G,{currentUser:this.props.currentUser,post:this.props.thread,onLargeImageRequested:this.props.onLargeImageRequested,onChangeAvatar:this.props.onChangeAvatar,isUnseen:this.props.isUnseen,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap},n.createElement(N,{post:this.props.thread,currentUser:this.props.currentUser,isAuthor:S.a.isAuthor(this.props.currentUser,this.props.authorIdMap),onOpenRequested:this.handleOpenThread,onCloseRequested:this.handleCloseThread,onStartEdit:this.handlePostEdit,onDeletePostRequested:this.props.onDeleteRequested,onVoteRequested:this.handleVoteRequested,onNotifyAuthorRequested:this.props.onNotifyAuthorRequested,onRevokeVoteRequested:this.handleRevokeVoteRequested,onToggleSpamRequested:this.handleToggleSpamRequested,onToggleEditingSuggestionRequested:this.handleToggleEditingSuggestionRequested}),this.props.thread.isOpen?n.createElement("div",null,this.props.thread.posts.map((function(t){return n.createElement(ie,{post:t,key:t.id,currentUser:e.props.currentUser,authorIdMap:e.props.authorIdMap,moderatorIdMap:e.props.moderatorIdMap,isUnseen:e.props.isUnseen&&!t.isSeen,canEdit:null!=e.props.currentUser&&t.user.id==e.props.currentUser.id,onEditRequested:e.handlePostEdit,onEditCancelRequested:e.handlePostEditCancel,onSaveRequested:e.handlePostSave,onDeletePostRequested:e.handleDeletePostRequested,onVoteRequested:e.handleVoteRequested,onNotifyAuthorRequested:e.props.onNotifyAuthorRequested,onRevokeVoteRequested:e.handleRevokeVoteRequested,onToggleSpamRequested:e.handleToggleSpamRequested,onLargeImageRequested:e.props.onLargeImageRequested,onChangeAvatar:e.props.onChangeAvatar})})),this.props.currentUser&&n.createElement(re,{placeholder:"reply",user:this.props.currentUser,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap,dontFocusOnInput:this.props.dontFocusOnInput||g.a.isTouch,saveLabel:"reply",onSave:this.handleCreatePost,onLargeImageRequested:this.props.onLargeImageRequested,onChangeAvatar:this.props.onChangeAvatar})):n.createElement(se,{thread:this.props.thread,authorIdMap:this.props.authorIdMap,moderatorIdMap:this.props.moderatorIdMap,onOpenRequested:this.handleOpenThread})),this.props.thread.isBeingEdited&&n.createElement(pe,{initialText:this.props.thread.text,user:this.props.currentUser,thread:this.props.thread,isEditing:this.props.thread.isBeingEdited,saveLabel:"save",onSave:this.handleThreadSave,onCancel:this.handleThreadEditCancel,onChangeAvatar:this.props.onChangeAvatar}),this.props.thread.isBeingSynced&&n.createElement("div",{className:"syncing-frame"}))},t.prototype.handleOpenThread=function(e){this.props.onOpenRequested&&this.props.onOpenRequested(e)},t.prototype.handleCloseThread=function(e){this.props.onCloseRequested&&this.props.onCloseRequested(e)},t.prototype.handleThreadPostSave=function(e){this.props.onSaveEditPostRequested(this.props.thread,this.props.thread,e,"")},t.prototype.handleThreadSave=function(e,t){this.props.onSaveEditPostRequested(this.props.thread,this.props.thread,t,e)},t.prototype.handleThreadEditCancel=function(){this.props.onCancelEditPostRequested(this.props.thread,this.props.thread)},t.prototype.handlePostSave=function(e,t){this.props.onSaveEditPostRequested(this.props.thread,e,t)},t.prototype.handleCreatePost=function(e){this.props.onCreatePostRequested(this.props.thread,e)},t.prototype.handlePostEdit=function(e){this.props.onStartEditPostRequested&&this.props.onStartEditPostRequested(this.props.thread,e)},t.prototype.handlePostEditCancel=function(e){this.props.onCancelEditPostRequested(this.props.thread,e)},t.prototype.handleDeletePostRequested=function(e){this.props.onDeletePostRequested(this.props.thread,e)},t.prototype.handleVoteRequested=function(e,t){this.props.onVoteRequested(this.props.thread,e,t)},t.prototype.handleToggleSpamRequested=function(e){this.props.onToggleSpamRequested(this.props.thread,e)},t.prototype.handleToggleEditingSuggestionRequested=function(e){this.props.onToggleEditingSuggestionRequested(this.props.thread,e)},t.prototype.handleRevokeVoteRequested=function(e){this.props.onRevokeVoteRequested(this.props.thread,e)},t}(n.Component),he=o(457),me=(o(930),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}());!function(e){e.EDIT_SUGGESTION="EDIT_SUGGESTION",e.OLD_MEAP_VERSIONS="OLD_MEAP_VERSIONS"}(H||(H={}));var fe=function(e){function t(t){return e.call(this,t)||this}return me(t,e),t.prototype.render=function(){var e=this.props.threads,t=S.a.getUniqueUsers(e);return t.length?n.createElement("div",{className:"threads-summary-root",onClick:this.props.onExpandRequested},this.props.summaryType==H.EDIT_SUGGESTION&&n.createElement("a",{href:"javascript:void(0)"},"show editing suggestions by"),this.props.summaryType==H.OLD_MEAP_VERSIONS&&n.createElement("a",{href:"javascript:void(0)"},"show comments from this book's other MEAP versions by "),n.createElement(B,{user:t[0]}),t.length>=2&&n.createElement("a",{href:"javascript:void(0)"},"and "+(t.length-1)+" more")):null},t}(n.Component),ge=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),ve=function(){return(ve=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Ee=function(e){function t(t){var o=e.call(this,t)||this;return o.handleOpenThreadRequested=o.handleOpenThreadRequested.bind(o),o.handleCloseThreadRequested=o.handleCloseThreadRequested.bind(o),o.handleDeleteThreadRequested=o.handleDeleteThreadRequested.bind(o),o.handleVoteRequested=o.handleVoteRequested.bind(o),o.handleRevokeVoteRequested=o.handleRevokeVoteRequested.bind(o),o.handleToggleSpam=o.handleToggleSpam.bind(o),o.handleToggleEditingSuggestion=o.handleToggleEditingSuggestion.bind(o),o.handleRootRef=o.handleRootRef.bind(o),o.handleCollapsedThreadsToggle=o.handleCollapsedThreadsToggle.bind(o),o.handleCollapsedMeapThreadsToggle=o.handleCollapsedMeapThreadsToggle.bind(o),o.handleNotifyAuthor=o.handleNotifyAuthor.bind(o),o.state={fullyShowEditSuggestionThreads:o.threadsContainCommentToShow(o.props.commentIdToShow),fullyShowOlderMeapVersionsThreads:o.threadsContainCommentToShow(o.props.commentIdToShow)},o}return ge(t,e),t.prototype.threadsContainCommentToShow=function(e){return!!e&&(null!=this.props.forum&&null!=this.props.forum.threads.find((function(t){return t.containsCommentId(e)})))},t.prototype.render=function(){return n.createElement("ul",{className:i({"social-scrollable-container":!this.props.isntSocialScrollableContainer}),ref:this.handleRootRef},this.renderContent(this.props.forum.threads,this.props.productForum?this.props.productForum.productMeapVersion:0))},t.prototype.renderContent=function(e,t){var o=this;if(null==e||0==e.length)return n.createElement("div",{className:"social-message-container"},null!=this.props.currentUser?"Start a thread by using the input fields below!":"Sign in below to start a discussion");if(this.props.dontCollapseEditingSuggestions)return this.renderFullThreads(e);var r=e.filter((function(e){return(!o.shouldThreadBeSummarized(e)||o.state.fullyShowEditSuggestionThreads)&&(!o.shouldThreadBeSummarizedByMeapVersion(e,t)||o.state.fullyShowOlderMeapVersionsThreads)})),i=e.filter((function(e){return o.shouldThreadBeSummarized(e)})),a=e.filter((function(e){return o.shouldThreadBeSummarizedByMeapVersion(e,t)}));return n.createElement(n.Fragment,null,this.renderFullThreads(r),this.renderThreadsSummaryByMeapVersion(this.state.fullyShowOlderMeapVersionsThreads?[]:a),this.shouldShowThreadsSummaryLink(e,t)&&this.renderThreadsSummary(this.state.fullyShowEditSuggestionThreads?[]:i),this.state.fullyShowOlderMeapVersionsThreads&&a.length>0&&n.createElement("div",{className:"threads-summary-root"},n.createElement("a",{href:"javascript:void(0)",onClick:this.handleCollapsedMeapThreadsToggle},"hide comments for older MEAP versions")),this.shouldShowThreadsSummaryLink(e,t)&&this.state.fullyShowEditSuggestionThreads&&i.length>0&&n.createElement("div",{className:"threads-summary-root"},n.createElement("a",{href:"javascript:void(0)",onClick:this.handleCollapsedThreadsToggle},"hide editing suggestions")))},t.prototype.shouldShowThreadsSummaryLink=function(e,t){var o=this;return e.filter((function(e){return!o.shouldThreadBeSummarizedByMeapVersion(e,t)||o.state.fullyShowOlderMeapVersionsThreads})).length>0},t.prototype.shouldThreadBeSummarized=function(e){return!S.a.canModerateInProduct(this.props.currentUser,e.productId)&&e.isEditingSuggestion},t.prototype.shouldThreadBeSummarizedByMeapVersion=function(e,t){return!S.a.canModerateInProduct(this.props.currentUser,e.productId)&&(!isNaN(parseInt(e.meapVersion))&&+e.meapVersion<t)},t.prototype.renderFullThreads=function(e){var t=this;return e.map((function(e){return n.createElement(de,{key:e.id,onOpenRequested:t.handleOpenThreadRequested,onCloseRequested:t.handleCloseThreadRequested,onDeleteRequested:t.handleDeleteThreadRequested,thread:e,currentUser:t.props.currentUser,authorIdMap:t.props.authorIdMap,moderatorIdMap:t.props.moderatorIdMap,isUnseen:-1!=(t.props.unseenThreadIds||[]).indexOf(e.id),dontFocusOnInput:t.props.dontFocusOnInput||g.a.isTouch,onCreatePostRequested:t.props.createPost,onStartEditPostRequested:t.props.startEditPost,onCancelEditPostRequested:t.props.cancelEditPost,onSaveEditPostRequested:t.props.saveEditPost,onDeletePostRequested:t.props.deletePost,onVoteRequested:t.handleVoteRequested,onNotifyAuthorRequested:t.handleNotifyAuthor,onToggleSpamRequested:t.handleToggleSpam,onToggleEditingSuggestionRequested:t.handleToggleEditingSuggestion,onRevokeVoteRequested:t.handleRevokeVoteRequested,onLargeImageRequested:t.props.onLargeImageRequested,onChangeAvatar:t.props.onChangeAvatar})}))},t.prototype.renderThreadsSummary=function(e){return n.createElement(fe,{threads:e,summaryType:H.EDIT_SUGGESTION,onExpandRequested:this.handleCollapsedThreadsToggle})},t.prototype.renderThreadsSummaryByMeapVersion=function(e){return n.createElement(fe,{threads:e,summaryType:H.OLD_MEAP_VERSIONS,onExpandRequested:this.handleCollapsedMeapThreadsToggle})},t.prototype.componentWillReceiveProps=function(e){this.trackNotSeenThreads(),this.props.commentIdToShow!=e.commentIdToShow&&this.threadsContainCommentToShow(e.commentIdToShow)&&this.setState(ve({},this.state,{fullyShowEditSuggestionThreads:!0}))},t.prototype.handleRootRef=function(e){this.root=e,this.trackNotSeenThreads()},t.prototype.trackNotSeenThreads=function(){var e=this;this.props.trackSeenComments&&this.props.unseenThreadIds&&0!=this.props.unseenThreadIds.length&&(clearTimeout(this.notSeenTimeout),this.root&&(this.notSeenTimeout=setTimeout((function(){var t=e.getNotSeenIds();t.length&&(e.props.clearThreadNotifications&&e.props.clearThreadNotifications(t),he.a.getProvider().markAsSeen(t))}),1e3)))},t.prototype.getNotSeenIds=function(){if(null==this.root)return[];for(var e=this.root.querySelectorAll(".forum-not-seen-indicator"),t=[],o=0;o<e.length;o++){var r=e[o],n=L.a.closest(r,".thread-root-container");if(null!=n){var i=+n.getAttribute("data-comment-id");!Number.isNaN(i)&&i>0&&-1==t.indexOf(i)&&t.push(i)}}return t},t.prototype.handleOpenThreadRequested=function(e){this.props.openThread&&this.props.openThread(this.props.forum,e)},t.prototype.handleCloseThreadRequested=function(e){this.props.closeThread&&this.props.closeThread(this.props.forum,e)},t.prototype.handleDeleteThreadRequested=function(e){this.props.deletePost&&this.props.deletePost(e,e)},t.prototype.handleVoteRequested=function(e,t,o){this.props.vote&&this.props.vote(this.props.currentUser,e,t,o)},t.prototype.handleRevokeVoteRequested=function(e,t){this.props.revokeVote&&this.props.revokeVote(this.props.currentUser,e,t)},t.prototype.handleToggleSpam=function(e,t){this.props.toggleSpam&&this.props.toggleSpam(this.props.currentUser,e,t)},t.prototype.handleToggleEditingSuggestion=function(e,t){this.props.toggleEditSuggestion&&this.props.toggleEditSuggestion(this.props.currentUser,e,t)},t.prototype.handleNotifyAuthor=function(e,t){this.props.notifyAuthor&&this.props.notifyAuthor(e,t)},t.prototype.handleCollapsedThreadsToggle=function(){this.setState({fullyShowEditSuggestionThreads:!this.state.fullyShowEditSuggestionThreads})},t.prototype.handleCollapsedMeapThreadsToggle=function(){this.setState({fullyShowOlderMeapVersionsThreads:!this.state.fullyShowOlderMeapVersionsThreads})},t}(n.Component),Se=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Te=function(e){function t(t){return e.call(this,t)||this}return Se(t,e),t.prototype.render=function(){var e=this;return n.createElement(W.b,{title:"",isOpen:this.props.isShown,onClose:this.props.onClose,theme:W.a.standard},n.createElement("div",{className:"social-modal-form",ref:function(t){return e.root=t}},n.createElement("img",{className:"social-modal-form-image",src:this.props.imageUrl,alt:"image"})))},t}(n.Component),Ce=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),ye=function(e){function t(t){var o=e.call(this,t)||this;return o.handleSendClick=o.handleSendClick.bind(o),o}return Ce(t,e),t.prototype.render=function(){var e=this;return n.createElement(W.b,{title:"",isOpen:this.props.isShown,onClose:this.props.onClose,theme:W.a.standard,actionMessageHTML:"send",onActionClicked:this.handleSendClick},n.createElement("div",{className:"social-modal-form",ref:function(t){return e.root=t}},n.createElement("div",null,"Notify author about this post:"),n.createElement(ie,{post:this.props.post,currentUser:null,isUnseen:!1,authorIdMap:{},moderatorIdMap:{}}),"Note:",n.createElement("textarea",{rows:6,style:{display:"block",width:"100%",margin:"1em 0"}})))},t.prototype.handleSendClick=function(){var e=null!=this.root?this.root.querySelector("textarea").value:"";this.props.onNotifyAuthor(this.props.user,this.props.post,e),this.props.onClose&&this.props.onClose()},t}(n.Component),_e=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Oe=function(){return(Oe=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Re=function(e){function t(t){var o=e.call(this,t)||this;return o.handleNewThreadSave=o.handleNewThreadSave.bind(o),o.handleOpenThread=o.handleOpenThread.bind(o),o.handleCloseThread=o.handleCloseThread.bind(o),o.handleCreatePost=o.handleCreatePost.bind(o),o.handleStartEditPost=o.handleStartEditPost.bind(o),o.handleCancelEditPost=o.handleCancelEditPost.bind(o),o.handleSaveEditPost=o.handleSaveEditPost.bind(o),o.handleDeletePost=o.handleDeletePost.bind(o),o.handleVote=o.handleVote.bind(o),o.handleRevokeVote=o.handleRevokeVote.bind(o),o.handleToggleSpam=o.handleToggleSpam.bind(o),o.handleToggleEditingSuggestion=o.handleToggleEditingSuggestion.bind(o),o.handleNewThreadPostSave=o.handleNewThreadPostSave.bind(o),o.handleLargeImageRequested=o.handleLargeImageRequested.bind(o),o.handleCloseModal=o.handleCloseModal.bind(o),o.handleNotificationsArrived=o.handleNotificationsArrived.bind(o),o.handlePostInputClick=o.handlePostInputClick.bind(o),o.handleNotifyAuthor=o.handleNotifyAuthor.bind(o),o.state={isShowingFullThreadInput:!1},o}return _e(t,e),t.prototype.render=function(){return n.createElement(n.Fragment,null,this.props.isLoading&&n.createElement("div",{className:"forum-loading-container"},n.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-3x fa-fw"})),!this.props.isLoading&&this.props.forum&&this.props.forum.threads&&n.createElement(Ee,{forum:this.props.forum,productForum:this.props.productForum,commentIdToShow:this.props.commentIdToShow,authorIdMap:this.props.forum.authorIdMap,moderatorIdMap:this.props.forum.moderatorIdMap,currentUser:this.props.currentUser,dontFocusOnInput:this.props.dontFocusOnInput,isntSocialScrollableContainer:this.props.isntSocialScrollableContainer,dontCollapseEditingSuggestions:this.props.dontCollapseEditingSuggestions,openThread:this.handleOpenThread,closeThread:this.handleCloseThread,createPost:this.handleCreatePost,startEditPost:this.handleStartEditPost,cancelEditPost:this.handleCancelEditPost,saveEditPost:this.handleSaveEditPost,deletePost:this.handleDeletePost,vote:this.handleVote,revokeVote:this.handleRevokeVote,toggleSpam:this.handleToggleSpam,toggleEditSuggestion:this.handleToggleEditingSuggestion,unseenThreadIds:this.props.unseenThreadIds,onLargeImageRequested:this.handleLargeImageRequested,onChangeAvatar:this.props.onChangeAvatarRequested,trackSeenComments:this.props.trackSeenComments,clearThreadNotifications:this.props.clearThreadNotifications,notifyAuthor:this.handleNotifyAuthor}),!this.props.dontAllowNewThreadCreation&&null!=this.props.forum&&(this.state.isShowingFullThreadInput?n.createElement(pe,{user:this.props.currentUser,authorIdMap:this.props.forum.authorIdMap,moderatorIdMap:this.props.forum.moderatorIdMap,saveLabel:"create thread",onSave:this.handleNewThreadSave,onLargeImageRequested:this.handleLargeImageRequested,onChangeAvatar:this.props.onChangeAvatarRequested}):n.createElement(re,{user:this.props.currentUser,authorIdMap:this.props.forum.authorIdMap,moderatorIdMap:this.props.forum.moderatorIdMap,saveLabel:"create thread",placeholder:"create thread",onSave:this.handleNewThreadPostSave,onClick:this.handlePostInputClick,dontFocusOnInput:!0,dontShowCommands:!g.a.isTouch,onLargeImageRequested:this.handleLargeImageRequested,onChangeAvatar:this.props.onChangeAvatarRequested})))},t.prototype.handlePostInputClick=function(){g.a.isTouch||this.setState(Oe({},this.state,{isShowingFullThreadInput:!this.state.isShowingFullThreadInput}))},t.prototype.handleLargeImageRequested=function(e){k.render(n.createElement(Te,{imageUrl:e,isShown:!0,onClose:this.handleCloseModal}),document.getElementById("full-screen-modal"))},t.prototype.handleCloseModal=function(){try{k.unmountComponentAtNode(document.getElementById("full-screen-modal"))}catch(e){console.log("Cannot unmount view image close")}},t.prototype.handleNotifyAuthor=function(e,t){var o=this;k.render(n.createElement(ye,{user:e,post:t,isShown:!0,onClose:this.handleCloseModal,onNotifyAuthor:function(e,t,r){return o.props.notifyAuthor&&o.props.notifyAuthor(e,t,r)}}),document.getElementById("full-screen-modal"))},t.prototype.handleNewThreadPostSave=function(e){(e||"").trim()&&this.props.createThread&&this.props.createThread("",e,this.getForumContext())},t.prototype.handleNewThreadSave=function(e,t){this.props.createThread&&this.props.createThread(e,t,this.getForumContext()),g.a.isTouch||this.setState(Oe({},this.state,{isShowingFullThreadInput:!1}))},t.prototype.handleOpenThread=function(e,t){this.props.openThread&&this.props.openThread(t,this.getForumContext())},t.prototype.handleCloseThread=function(e,t){this.props.closeThread&&this.props.closeThread(t,this.getForumContext())},t.prototype.handleCreatePost=function(e,t){this.props.createPost&&this.props.createPost(e,t,this.getForumContext())},t.prototype.handleStartEditPost=function(e,t){this.props.startEditPost&&this.props.startEditPost(e,t,this.getForumContext())},t.prototype.handleCancelEditPost=function(e,t){this.props.cancelEditPost&&this.props.cancelEditPost(e,t,this.getForumContext())},t.prototype.handleSaveEditPost=function(e,t,o,r){this.props.saveEditPost&&this.props.saveEditPost(e,t,o,r,this.getForumContext())},t.prototype.handleDeletePost=function(e,t){this.props.deletePost&&this.props.deletePost(e,t,this.getForumContext())},t.prototype.handleVote=function(e,t,o,r){this.props.vote&&this.props.vote(e,t,o,r,this.getForumContext())},t.prototype.handleRevokeVote=function(e,t,o){this.props.revokeVote&&this.props.revokeVote(e,t,o,this.getForumContext())},t.prototype.handleToggleSpam=function(e,t,o){this.props.toggleSpam&&this.props.toggleSpam(e,t,o,this.getForumContext())},t.prototype.handleToggleEditingSuggestion=function(e,t,o){this.props.toggleEditingSuggestion&&this.props.toggleEditingSuggestion(e,t,o,this.getForumContext())},t.prototype.handleNotificationsArrived=function(e){this.props.notificationsArrived&&this.props.notificationsArrived(e)},t.prototype.getForumContext=function(){return{forum:this.props.forum}},t}(n.Component),be=Object(s.b)((function(e,t){return{forum:e&&e.forum,currentUser:e&&e.currentUser&&e.currentUser,title:e&&e.title}}),(function(e){return Oe({},Object(u.b)({openThread:F.b.openThread,closeThread:F.b.closeThread,createThread:F.b.createThread,createPost:F.b.createPost,startEditPost:F.b.startEditPost,cancelEditPost:F.b.cancelEditPost,saveEditPost:F.b.saveEditPost,deletePost:F.b.deletePost,vote:F.b.votePost,revokeVote:F.b.revokeVotePost,toggleSpam:F.b.toggleSpam,toggleEditingSuggestion:F.b.toggleEditingSuggestion,notificationsArrived:F.b.notificationsArrived,notifyAuthor:F.b.notifyAuthor},e))}))(Re),we=o(368),Ae=o(28),Ie=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),ke=function(){return(ke=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Fe=function(e){function t(t){var o=e.call(this,t)||this;return o.lastScrollTop=0,o.handleOpenElementForum=o.handleOpenElementForum.bind(o),o.handleProductForumSelected=o.handleProductForumSelected.bind(o),o.handleBackClick=o.handleBackClick.bind(o),o.handleSearch=o.handleSearch.bind(o),o.handleClearSearch=o.handleClearSearch.bind(o),o.handleGoToRoot=o.handleGoToRoot.bind(o),o.handleRootLoaded=o.handleRootLoaded.bind(o),o.syncHeight=o.syncHeight.bind(o),o.handleElementCreatedSyncHeight=o.handleElementCreatedSyncHeight.bind(o),o.handleThreadOpened=o.handleThreadOpened.bind(o),o.handleSetSearchQuery=o.handleSetSearchQuery.bind(o),o.handleSetSortType=o.handleSetSortType.bind(o),o.onSearchLinkClick=o.onSearchLinkClick.bind(o),o.onProductForumsContainerScroll=o.onProductForumsContainerScroll.bind(o),o.handleRequiresAllResults=o.handleRequiresAllResults.bind(o),S.a.on(F.a.OPEN_THREAD,o.handleThreadOpened),o.canToggleLivebooks=S.a.getSourceApp()==Ae.b.livevideo||S.a.getSourceApp()==Ae.b.demo,o.state={showLivebooks:o.canToggleLivebooks&&S.a.shouldShowLivebooks()},o.toggleShowLivebooks=o.toggleShowLivebooks.bind(o),o}return Ie(t,e),t.prototype.render=function(){var e=this.determineHasBackButton(),t=!e,o=this.shouldOfferSearch();return n.createElement("div",{className:"product-forum-root",ref:this.handleRootLoaded},n.createElement(w,{title:this.getForumTitle(),offerSearch:o,searchPlaceholder:this.getSearchPlaceholder(o),hasBackButton:e,hasRootIcon:t,leftIconTooltip:this.getLeftIconTooltip(t),notificationsCount:this.props.notificationsCount,onBack:this.handleBackClick,onClose:this.props.onClose,onSearch:this.handleSearch,onGoToRoot:this.handleGoToRoot,onShowNotifications:this.props.onShowNotifications,isShowingSearchResults:null!=this.props.searchResultsForum,isLoading:this.props.isLoading,onClearSearch:this.handleClearSearch,searchQuery:this.props.searchQuery,onSetSearchQuery:this.handleSetSearchQuery,sortType:this.props.sortType,onSetSortType:this.handleSetSortType,onRequiresAllResults:this.handleRequiresAllResults}),this.generateContent(),this.props.isShowingNotificationsForum&&n.createElement("div",{className:"forum-footer-commands-container",onClick:this.props.clearNotifications},"close notifications"),!g.a.isTouch&&n.createElement(a,{effect:"solid",place:"top"}))},t.prototype.componentDidMount=function(){this.syncHeight()},t.prototype.handleRootLoaded=function(e){this.root=e,this.syncHeight()},t.prototype.shouldOfferSearch=function(){return!(this.props.isShowingNotificationsForum||this.props.isShowingLocationForum||this.props.isShowingElementForum)&&(null==this.props.productForum||null!=this.props.productForum.elementForums&&0!=this.props.productForum.elementForums.length)},t.prototype.getSearchPlaceholder=function(e){return e?this.props.isShowingElementForum||null!=this.props.productForum?"search comments in "+this.props.productForum.productTitle:"find a book/video or search all comments":""},t.prototype.handleElementCreatedSyncHeight=function(){this.syncHeight()},t.prototype.getLeftIconTooltip=function(e){if(this.props.isShowingNotificationsForum)return"clear notifications";if(null!=this.props.searchResultsForum)return"clear search";if(this.props.isShowingLocationForum){var t=this.props.elementForumStore.getState().forum;return null!=t?"back to "+t.title:"back"}return this.props.isShowingElementForum?null!=this.props.productForum?"back to "+this.props.productForum.productTitle:"back":null!=this.props.productForum?"back to discussion":null!=this.props.productForums&&this.props.productForums.length?"reload discussion":e?"show discussion":void 0},t.prototype.getForumTitle=function(){if(this.props.isShowingNotificationsForum)return"notifications";if(null!=this.props.searchResultsForum)return this.props.searchResultsForum.title;var e=this.props.locationForumStore&&this.props.locationForumStore.getState()&&this.props.locationForumStore.getState().forum,t=this.props.elementForumStore&&this.props.elementForumStore.getState()&&this.props.elementForumStore.getState().forum;if(this.props.isShowingLocationForum){var o=null!=e?S.a.getFromLocationReplacementMap(e.title):null;return(null!=t?""+this.getElementTitleAsLink(t):"")+(null!=o?", "+o:"")+(null!=this.props.productForum?": "+we.a.getShortTitle(this.props.productForum.productTitle):"")}return this.props.isShowingElementForum?this.getElementTitleAsLink(t)+(null!=this.props.productForum?": "+we.a.getShortTitle(this.props.productForum.productTitle):""):null!=this.props.productForum?we.a.getShortTitle(this.props.productForum.productTitle):S.a.getDefaultForumTitle()},t.prototype.getElementTitleAsLink=function(e){return e&&e.forumLocation&&"Author Online Forum Legacy Posts"!=e.title&&e.forumLocation.baseLink?'<a href="'+e.forumLocation.baseLink+'">'+e.title+"</a>":null!=e?e.title:""},t.prototype.syncHeight=function(){this.root&&(!this.props.verticalPadding||this.props.verticalPadding<0||(this.root.style.height="calc(100vh - "+this.props.verticalPadding+"px"))},t.prototype.determineHasBackButton=function(){var e=this.props.elementForumStore&&this.props.elementForumStore.getState()&&this.props.elementForumStore.getState().forum;return!!(null!=this.props.searchResultsForum||this.props.isShowingLocationForum&&null!=e||this.props.isShowingElementForum&&null!=this.props.productForum||null!=this.props.productForum&&null!=this.props.productForums||this.props.isShowingNotificationsForum)},t.prototype.generateContent=function(){var e=this;if(this.props.isLoading)return n.createElement("div",{className:"forum-loading-container"},n.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-3x fa-fw"}));if(this.props.isShowingNotificationsForum)return n.createElement("div",{className:"social-scrollable-container"},this.props.notificationStores.map((function(t){var o=t.getState().forum;return n.createElement(s.a,{store:t,key:e.getNotificationsForumLocationId(o)},n.createElement(be,{dontAllowNewThreadCreation:!0,unseenThreadIds:e.getUnseenThreadIds(),dontFocusOnInput:!0,onChangeAvatarRequested:e.props.onChangeAvatarRequested}))})));if(null!=this.props.searchResultsForum){var t=[];if(null==this.props.productForum&&null!=this.props.productForums&&this.props.productForums.length>0){var o=S.a.getMatchingProductForums(this.props.productForums,this.props.searchQuery);null!=o&&o.length>0&&t.push(this.generateProductForums(!0))}return null!=this.props.searchResultsForum.threads&&this.props.searchResultsForum.threads.length&&t.push(n.createElement(s.a,{key:"search-results-posts",store:this.props.searchForumStore},n.createElement(be,{ref:this.handleElementCreatedSyncHeight,isntSocialScrollableContainer:!0,dontAllowNewThreadCreation:!0,onChangeAvatarRequested:this.props.onChangeAvatarRequested}))),t.length>0?n.createElement("div",{className:"social-scrollable-container"},t):n.createElement("span",{className:"social-message-container"},"We couldn't find any comments matching your query.")}if(this.props.isShowingLocationForum)return n.createElement(s.a,{store:this.props.locationForumStore,key:"location-forum-provider"},n.createElement(be,{commentIdToShow:this.props.commentIdToShow,unseenThreadIds:this.getUnseenThreadIds(),key:"location-forum",ref:this.handleElementCreatedSyncHeight,trackSeenComments:!0,clearThreadNotifications:this.props.clearThreadNotifications,onChangeAvatarRequested:this.props.onChangeAvatarRequested}));if(this.props.isShowingElementForum)return n.createElement(s.a,{store:this.props.elementForumStore,key:"element-forum-provider"},n.createElement(be,{commentIdToShow:this.props.commentIdToShow,productForum:this.props.productForum,unseenThreadIds:this.getUnseenThreadIds(),key:"element-forum",ref:this.handleElementCreatedSyncHeight,trackSeenComments:!0,clearThreadNotifications:this.props.clearThreadNotifications,dontCollapseEditingSuggestions:this.isErrataElementForum(),onChangeAvatarRequested:this.props.onChangeAvatarRequested}));if(null!=this.props.productForum){var r=this.props.productForum.elementForums,i=null!=r&&r.length>0;return S.a.sortElementForums(r,this.props.sortType),n.createElement("div",{ref:this.handleElementCreatedSyncHeight,className:"social-scrollable-container"},i&&r.map((function(t){return n.createElement(C,{key:t.element,forumVisitInfo:e.props.forumVisitInfo,elementForum:t,productForum:e.props.productForum,openElementForum:e.handleOpenElementForum})})))}return null!=this.props.productForums&&this.props.productForums.length>0?this.generateProductForums():n.createElement("div",{className:"social-message-container"},"To create a comment, go to a product and attach a comment next to any paragraph.")},t.prototype.generateProductForums=function(e){var t=this,o=S.a.getMatchingProductForums(this.props.productForums,this.props.searchQuery);S.a.sortProductForums(o,this.props.sortType);var r=this.canToggleLivebooks&&!e;return r&&(o=this.state.showLivebooks?o:o.filter((function(e){return!e.isLivebook}))),n.createElement(n.Fragment,null,n.createElement("div",{key:"product-forums",ref:this.handleElementCreatedSyncHeight,className:i({"social-scrollable-container":!e}),onScroll:this.onProductForumsContainerScroll},o.map((function(e){return n.createElement(I,{key:e.productExternalId,productForum:e,forumVisitInfo:t.props.forumVisitInfo,onProductForumSelected:t.handleProductForumSelected})})),this.props.searchQuery&&!e&&n.createElement("div",{key:"social-large-search",className:"social-search-link",onClick:this.onSearchLinkClick},"search all comments for ",n.createElement("em",null,this.props.searchQuery)),!e&&this.props.isLoadingMoreProductResults&&n.createElement("div",{key:"loading-more-results",className:"loading-more-results"},n.createElement("i",{className:"fa fa-fw fa-circle-o-notch fa-2x fa-spin"}))),r&&n.createElement("div",{key:"toggle-livebooks",className:"toggle-livebooks-link",onClick:this.toggleShowLivebooks},this.state.showLivebooks?"hide":"show"," livebooks"))},t.prototype.getUnseenThreadIds=function(){var e=[];if(!this.props.notificationStores||!this.props.notificationStores.length)return e;for(var t=0,o=this.props.notificationStores;t<o.length;t++){var r=o[t].getState();if(null!=r){var n=r.forum;if(null!=n)for(var i=0,a=n.threads;i<a.length;i++){var s=a[i];e.push(s.id)}}}return e},t.prototype.isErrataElementForum=function(){if(null==this.props.elementForumStore)return!1;var e=this.props.elementForumStore.getState();return null!=e&&(null!=e.forum&&0==(e.forum.title||"").toLowerCase().indexOf("errata"))},t.prototype.handleOpenElementForum=function(e){this.props.selectElementForum&&this.props.selectElementForum(e,this.props.productForum)},t.prototype.handleProductForumSelected=function(e){this.props.selectProductForum&&this.props.selectProductForum(e.productExternalId,e.isLivebook,e.isLivevideo)},t.prototype.handleClearSearch=function(){this.props.clearSearch&&this.props.clearSearch()},t.prototype.handleGoToRoot=function(){this.props.goToRoot&&this.props.goToRoot()},t.prototype.handleBackClick=function(){if(this.props.isShowingNotificationsForum&&this.props.clearNotifications&&this.props.clearNotifications(),null!=this.props.searchResultsForum)this.props.clearSearch&&this.props.clearSearch();else if(this.props.isShowingLocationForum){var e=this.props.elementForumStore.getState(),t=e&&e.forum;null!=t&&null!=t.forumLocation?this.props.clearLocationForum&&this.props.clearLocationForum(this.props.productForum.productExternalId,t.forumLocation.element):this.props.clearElementForum&&this.props.clearElementForum(this.props.productForum.productExternalId,this.props.productForum.isLivebook,this.props.productForum.isLivevideo)}else this.props.isShowingElementForum?this.props.clearElementForum&&this.props.clearElementForum(this.props.productForum.productExternalId,this.props.productForum.isLivebook,this.props.productForum.isLivevideo):null!=this.props.productForum&&this.props.clearProductForum&&this.props.clearProductForum()},t.prototype.handleSearch=function(e){this.props.search(e,this.props.productForum)},t.prototype.onSearchLinkClick=function(){this.props.search(this.props.searchQuery,this.props.productForum)},t.prototype.handleSetSearchQuery=function(e){this.props.setSearchQuery(e)},t.prototype.handleSetSortType=function(e){this.props.setSortType(e)},t.prototype.getNotificationsForumLocationId=function(e){return"notifications-forum-"+(e&&e.getCommentIds().join("-")||Date.now())},t.prototype.handleThreadOpened=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(null!=this.props.currentUser){var o=(e||[]).filter((function(e){return e.containsUnseen()}));0!=o.length&&this.props.clearThreadNotifications&&this.props.clearThreadNotifications(o.map((function(e){return e.id})))}},t.prototype.toggleShowLivebooks=function(){S.a.storeShouldShowLivebooks(!this.state.showLivebooks);var e=!this.state.showLivebooks;this.setState({showLivebooks:!this.state.showLivebooks}),e&&this.props.goToRoot&&this.props.goToRoot()},t.prototype.onProductForumsContainerScroll=function(e){var t=e.target,o=t.scrollTop>this.lastScrollTop;this.lastScrollTop=t.scrollTop,t.offsetHeight+t.scrollTop+200>=t.scrollHeight&&!this.props.isLoadingMoreProductResults&&!this.props.hasRunOutOfProductsToLoad&&o&&this.props.fetchAdditionalProducts&&this.props.fetchAdditionalProducts(!0)},t.prototype.handleRequiresAllResults=function(){this.shouldOfferSearch()&&!this.props.isShowingElementForum&&null!=!this.props.productForum&&null!=S.a.paginationEndDate&&S.a.paginationEndDate.getFullYear()>1990&&(S.a.paginationStartDate=new Date,S.a.paginationEndDate=new Date(1990,0),this.props.fetchAdditionalProducts&&this.props.fetchAdditionalProducts(!1))},t}(n.Component);t.a=Object(s.b)((function(e,t){return{isShowingNotificationsForum:e&&e.isShowingNotificationsForum,isShowingLocationForum:e&&e.isShowingLocationForum,isShowingElementForum:e&&e.isShowingElementForum,productForum:e&&e.productForum,productForums:e&&e.productForums,searchResultsForum:e&&e.searchResultsForum,currentUser:e&&e.currentUser&&e.currentUser,isLoading:e&&e.isLoading,verticalPadding:e&&e.verticalPadding,commentIdToShow:e&&e.commentIdToShow,notificationsCount:e&&e.notificationsCount,forumVisitInfo:e&&e.forumVisitInfo,notificationStores:e&&e.notificationStores,locationForumStore:e&&e.locationForumStore,elementForumStore:e&&e.elementForumStore,searchForumStore:e&&e.searchForumStore,searchQuery:e&&e.searchQuery,sortType:e&&e.sortType,isLoadingMoreProductResults:e&&e.isLoadingMoreProductResults,hasRunOutOfProductsToLoad:e&&e.hasRunOutOfProductsToLoad}}),(function(e){return ke({},Object(u.b)({selectElementForum:y.b.setElementForum,selectProductForum:y.b.fetchProductForum,clearProductForum:y.b.clearProductForum,clearElementForum:y.b.clearElementForum,clearLocationForum:y.b.clearLocationForum,search:y.b.search,setSearchQuery:y.b.setSearchQuery,clearSearch:y.b.clearSearch,goToRoot:y.b.goToRootAndLoadProductForums,clearNotifications:y.b.clearNotifications,clearThreadNotifications:y.b.clearThreadNotifications,setSortType:y.b.setSortType,fetchAdditionalProducts:y.b.fetchAdditionalProductForums},e))}))(Fe)},1284:function(e,t,o){"use strict";var r=o(649),n=o(420),i=o(588),a=o(367),s=o(375),u=o(777),c=o(438),p=o(457),l=function(){return(l=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},d=0,h=0,m=window.$;function f(e,t){try{switch(t.type){case c.a.CREATE_THREAD_SUCCESS:case c.a.CREATE_POST_SUCCESS:case c.a.DELETE_POST_SUCCESS:case c.a.REVOKE_VOTE_POST_SUCCESS:case c.a.VOTE_POST_SUCCESS:m&&m(document).trigger("socialEvent",[t.type,t.forum&&t.forum.forumLocation||t.elementForum&&t.elementForum.forum&&t.elementForum.forum.forumLocation,t.elementForum&&t.elementForum.elementTitle||t.forum&&t.forum.title])}}catch(e){}switch(t.type){case c.a.SET_FORUM:return l({},e,{forum:t.forum});case c.a.SET_CURRENT_USER:return l({},e,{currentUser:t.user});case c.a.SET_TITLE:return l({},e,{title:t.title});case c.a.OPEN_THREAD:case c.a.CLOSE_THREAD:return function(e,t){var o=n.f.createCopy(t.thread,!1);o.isOpen=!t.thread.isOpen;var r=e.forum.threads.concat([]);return r.splice(r.indexOf(t.thread),1,o),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,r)})}(e,t);case c.a.CREATE_THREAD_START:return function(e,t){var o=new n.f("-"+ ++d,t.title,t.text,e.currentUser,0,new Date,new Date,"",!1,[]);return o.isBeingSynced=!0,l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,e.forum.threads.concat([o]))})}(e,t);case c.a.CREATE_THREAD_SUCCESS:return function(e,t){var o=n.f.createCopy(t.thread);o.id=t.id,o.isBeingSynced=!1,o.link=t.link;var r=e.forum.threads.concat([]);return r.splice(r.indexOf(t.thread),1,o),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,r)})}(e,t);case c.a.CREATE_THREAD_ERROR:return function(e,t){var o=e.forum.threads.concat([]);return o.splice(o.indexOf(t.thread)),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.DELETE_POST_START:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread);if(t.post instanceof n.f)r.isBeingSynced=!0;else{var i=n.d.createCopy(t.post);i.isBeingSynced=!0,r.posts.splice(r.posts.indexOf(t.post),1,i)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.DELETE_POST_SUCCESS:return function(e,t){var o=e.forum.threads.concat([]);if(t.post instanceof n.f)o.splice(o.indexOf(t.thread),1);else{var r=n.f.createCopy(t.thread);r.posts.splice(r.posts.indexOf(t.post),1),o.splice(o.indexOf(t.thread),1,r)}return l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.DELETE_POST_ERROR:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread);if(t.post instanceof n.f)r.isBeingSynced=!1;else{var i=n.d.createCopy(t.post);i.isBeingSynced=!1,r.posts.splice(r.posts.indexOf(t.post),1,i)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.CREATE_POST_START:return function(e,t){var o=n.f.createCopy(t.thread),r=new n.d("-"+ ++h,t.text,e.currentUser,0,new Date,new Date);r.isBeingSynced=!0,o.posts.push(r),o.isOpen=!0;var i=e.forum.threads.concat([]);return i.splice(i.indexOf(t.thread),1,o),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,i)})}(e,t);case c.a.CREATE_POST_SUCCESS:return function(e,t){var o=n.f.createCopy(t.thread);o.isOpen=!0,o.link=t.link;var r=n.d.createCopy(t.post);r.isBeingSynced=!1,r.id=t.id,o.posts.splice(o.posts.indexOf(t.post),1,r);var i=e.forum.threads.concat([]);return i.splice(i.indexOf(t.thread),1,o),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,i)})}(e,t);case c.a.CREATE_POST_ERROR:return function(e,t){var o=n.f.createCopy(t.thread);o.posts.splice(o.posts.indexOf(t.post),1),o.isOpen=t.thread.isOpen;var r=e.forum.threads.concat([]);return r.splice(r.indexOf(t.thread),1,o),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,r)})}(e,t);case c.a.START_EDIT_POST:return function(e,t){var o=e.forum.threads.concat([]),r=t.thread,i=n.f.createCopy(r);if(t.post instanceof n.f)i.isBeingEdited=!0;else{var a=n.d.createCopy(t.post);a.isBeingEdited=!0,i.posts.splice(i.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(r),1,i),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.CANCEL_EDIT_POST:return function(e,t){var o=e.forum.threads.concat([]),r=t.thread,i=n.f.createCopy(r);if(t.post instanceof n.f)i.isBeingEdited=!1;else{var a=n.d.createCopy(t.post);a.isBeingEdited=!1,i.posts.splice(i.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(r),1,i),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.SAVE_EDIT_POST_START:return function(e,t){var o=e.forum.threads.concat([]),r=t.thread,i=n.f.createCopy(r);if(t.post instanceof n.f)i.isBeingEdited=!1,i.isBeingSynced=!0,i.text=t.text,i.title=t.title;else{var a=n.d.createCopy(t.post);a.text=t.text,a.isBeingEdited=!1,a.isBeingSynced=!0,i.posts.splice(i.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(r),1,i),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.SAVE_EDIT_POST_SUCCESS:return function(e,t){var o=e.forum.threads.concat([]),r=t.thread,i=n.f.createCopy(r);if(t.post instanceof n.f)i.isBeingSynced=!1,i.isBeingEdited=!1;else{var a=n.d.createCopy(t.post);a.isBeingSynced=!1,a.isBeingEdited=!1,i.posts.splice(i.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(r),1,i),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.SAVE_EDIT_POST_ERROR:return function(e,t){var o=e.forum.threads.concat([]),r=t.thread,i=n.f.createCopy(r);if(t.post instanceof n.f)i.isBeingEdited=!0,i.isBeingSynced=!1,i.text=t.oldText;else{var a=n.d.createCopy(t.post);a.text=t.oldText,a.isBeingEdited=!0,a.isBeingSynced=!1,i.posts.splice(i.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(r),1,i),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.VOTE_POST_START:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread),i=n.g.createCopy(e.currentUser);if(t.post instanceof n.f)r.isBeingSynced=!0,r.isSyncingVotes=!0;else{var a=n.d.createCopy(t.post);a.isBeingSynced=!0,a.isSyncingVotes=!0,r.posts.splice(r.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o),currentUser:i})}(e,t);case c.a.VOTE_POST_SUCCESS:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread),i=n.g.createCopy(e.currentUser);if(t.post instanceof n.f)r.votes=t.totalAmount,r.isBeingSynced=!1,r.isSyncingVotes=!1,g(i,r,t.userVoteAmount);else{var a=n.d.createCopy(t.post);a.votes=t.totalAmount,a.isBeingSynced=!1,a.isSyncingVotes=!1,g(i,a,t.userVoteAmount),r.posts.splice(r.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o),currentUser:i})}(e,t);case c.a.VOTE_POST_ERROR:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread),i=n.g.createCopy(e.currentUser);if(t.post instanceof n.f)r.isBeingSynced=!1,r.isSyncingVotes=!1;else{var a=n.d.createCopy(t.post);a.isBeingSynced=!1,a.isSyncingVotes=!1,r.posts.splice(r.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o),currentUser:i})}(e,t);case c.a.REVOKE_VOTE_POST_START:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread),i=n.g.createCopy(e.currentUser);if(t.post instanceof n.f)r.isBeingSynced=!0,r.isSyncingVotes=!0;else{var a=n.d.createCopy(t.post);a.isBeingSynced=!0,a.isSyncingVotes=!0,r.posts.splice(r.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o),currentUser:i})}(e,t);case c.a.REVOKE_VOTE_POST_SUCCESS:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread),i=n.g.createCopy(e.currentUser);if(t.post instanceof n.f)r.votes=t.totalAmount,r.isBeingSynced=!1,r.isSyncingVotes=!1,i.votes=t.votes;else{var a=n.d.createCopy(t.post);a.votes=t.totalAmount,a.isBeingSynced=!1,a.isSyncingVotes=!1,i.votes=t.votes,r.posts.splice(r.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o),currentUser:i})}(e,t);case c.a.REVOKE_VOTE_POST_ERROR:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread),i=n.g.createCopy(e.currentUser);if(t.post instanceof n.f)r.isBeingSynced=!1,r.isSyncingVotes=!1;else{var a=n.d.createCopy(t.post);a.isBeingSynced=!1,a.isSyncingVotes=!1,r.posts.splice(r.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o),currentUser:i})}(e,t);case c.a.TOGGLE_SPAM_START:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread),i=n.g.createCopy(e.currentUser);if(t.post instanceof n.f)r.isBeingSynced=!0;else{var a=n.d.createCopy(t.post);a.isBeingSynced=!0,r.posts.splice(r.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o),currentUser:i})}(e,t);case c.a.TOGGLE_SPAM_SUCCESS:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread),i=n.g.createCopy(e.currentUser);if(t.post instanceof n.f)r.isBeingSynced=!1,i.spamCommentIds=t.spamCommentIds;else{var a=n.d.createCopy(t.post);a.isBeingSynced=!1,i.spamCommentIds=t.spamCommentIds,r.posts.splice(r.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o),currentUser:i})}(e,t);case c.a.TOGGLE_SPAM_ERROR:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread),i=n.g.createCopy(e.currentUser);if(t.post instanceof n.f)r.isBeingSynced=!1;else{var a=n.d.createCopy(t.post);a.isBeingSynced=!1,r.posts.splice(r.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o),currentUser:i})}(e,t);case c.a.NOTIFICATIONS_ARRIVED:return function(e,t){for(var o=a.a.getAllThreads(t.notificationForums),r=[],i=[],s=function(e){var t=o.find((function(t){return t.id==e.id}));t?(r.push(n.f.createCopy(t)),i.push(t)):r.push(e)},u=0,c=e.forum.threads;u<c.length;u++){var p=c[u];s(p)}if(!i.length)return e;return l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,r)})}(e,t);case c.a.TOGGLE_EDITING_SUGGESTION_START:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread),i=n.g.createCopy(e.currentUser);if(t.post instanceof n.f)r.isBeingSynced=!0;else{var a=n.d.createCopy(t.post);a.isBeingSynced=!0,r.posts.splice(r.posts.indexOf(t.post),1,a)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o),currentUser:i})}(e,t);case c.a.TOGGLE_EDITING_SUGGESTION_SUCCESS:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread);if(t.post instanceof n.f)r.isBeingSynced=!1,r.isEditingSuggestion=t.isEditingSuggestion;else{var i=n.d.createCopy(t.post);i.isBeingSynced=!1,i.isEditingSuggestion=t.isEditingSuggestion,r.posts.splice(r.posts.indexOf(t.post),1,i)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.TOGGLE_EDITING_SUGGESTION_ERROR:return function(e,t){var o=e.forum.threads.concat([]),r=n.f.createCopy(t.thread);if(t.post instanceof n.f)r.isBeingSynced=!1;else{var i=n.d.createCopy(t.post);i.isBeingSynced=!1,r.posts.splice(r.posts.indexOf(t.post),1,i)}return o.splice(o.indexOf(t.thread),1,r),l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.REMOVE_THREADS:return function(e,t){var o=t.threads||[],r=e.forum.threads.filter((function(e){return!o.find((function(t){return t.id==e.id}))}));return l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,r)})}(e,t);case c.a.CHANGE_AVATAR_URL:return function(e,t){var o=[];if(null==e||null==e.forum)return e;for(var r=0,i=e.forum.threads;r<i.length;r++){var a=i[r];if(a.containsCommentsByUser(t.user)){for(var s=n.f.createCopy(a),u=[],c=0,p=s.posts;c<p.length;c++){var d=p[c];if(d.isCreatedByUser(t.user)){var h=n.d.createCopy(d);h.user=t.user,u.push(h)}else u.push(d)}s.posts=u,s.isCreatedByUser(t.user)&&(s.user=t.user),o.push(s)}else o.push(a)}return l({},e,{forum:n.b.createCopyWithNewThreads(e.forum,o)})}(e,t);case c.a.NOTIFY_AUTHOR:return function(e,t){return p.a.getProvider().notifyAuthor(t.user,t.post,t.message),l({},e)}(e,t);default:return e}}function g(e,t,o){var r=e.votes.find((function(e){return e.commentId==t.id}));r?r.isUpVote?o<0?r.isUpVote=!1:e.votes.splice(e.votes.indexOf(r),1):o>0?r.isUpVote=!0:e.votes.splice(e.votes.indexOf(r),1):e.votes.push({commentId:t.id,isUpVote:o>0})}var v=o(779);function E(e){return function(e){return function(t){var o=e(t);switch(t.type){case c.a.CREATE_THREAD_SUCCESS:S(t.thread.id);break;case c.a.CREATE_POST_SUCCESS:S(t.post.id)}return o}}}function S(e){try{var t=document.querySelector("[data-comment-id='"+e+"']");if(!t)return;t.scrollIntoView({behavior:"smooth"})}catch(e){}}function T(e){return function(e){return function(t){var o=e(t);switch(t.type){case c.a.OPEN_THREAD:!function(e){a.a.trigger(e.type,[e.thread])}(t);break;case c.a.CREATE_POST_SUCCESS:case c.a.CREATE_THREAD_SUCCESS:a.a.trigger(t.type,[t.id])}return o}}}o.d(t,"a",(function(){return _}));var C=function(){return(C=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},y={searchQuery:null,notificationStores:null,locationForumStore:null,elementForumStore:null,searchForumStore:null,forumVisitInfo:null};function _(e,t){switch(void 0===e&&(e=y),t.type){case i.a.INITIALIZE:return function(e,t){var o=Object(s.d)(f,Object(s.a)(u.a,v.a,E,T)),n=Object(s.d)(f,Object(s.a)(u.a)),i=Object(s.d)(f,Object(s.a)(u.a,v.a,E,T));null!=t.user&&(o.dispatch(c.b.setCurrentUser(t.user)),i.dispatch(c.b.setCurrentUser(t.user)));return C({},e,{isLoadingMoreProductResults:!1,hasRunOutOfProductsToLoad:!1,sortType:r.a.MostRecent,currentUser:t.user,verticalPadding:t.verticalPadding,elementForumStore:o,searchForumStore:n,locationForumStore:i})}(e,t);case i.a.SET_CURRENT_USER:return function(e,t){null!=t.user&&(e.elementForumStore&&e.elementForumStore.dispatch(c.b.setCurrentUser(t.user)),e.locationForumStore&&e.locationForumStore.dispatch(c.b.setCurrentUser(t.user)),e.searchForumStore&&e.searchForumStore.dispatch(c.b.setCurrentUser(t.user)));return C({},e,{currentUser:t.user})}(e,t);case i.a.CHANGE_AVATAR_URL:return function(e,t){var o=C({},e.currentUser,{avatarUrl:t.avatarUrl});null!=e.elementForumStore&&(e.elementForumStore.dispatch(c.b.changeAvatarUrl(o,t.avatarUrl)),e.elementForumStore.dispatch(c.b.setCurrentUser(o)));null!=e.locationForumStore&&(e.locationForumStore.dispatch(c.b.changeAvatarUrl(o,t.avatarUrl)),e.locationForumStore.dispatch(c.b.setCurrentUser(o)));null!=e.searchForumStore&&(e.searchForumStore.dispatch(c.b.changeAvatarUrl(o,t.avatarUrl)),e.searchForumStore.dispatch(c.b.setCurrentUser(o)));return C({},e,{currentUser:o})}(e,t);case i.a.CREATE_AND_SET_ELEMENT_FORUM:return function(e,t){var o=t.productForum.elementForums&&t.productForum.elementForums.find((function(e){return e.element==t.element})),r=t.productForum;null==o&&(o=new n.a(t.element,t.elementTitle,new n.b(a.a.adjustElementTitle(t.elementTitle),new n.c(t.productForum.productExternalId,t.element,"","",t.meapVersion),[],t.productForum.authorIdMap,t.productForum.moderatorIdMap),new Date(1970)),(r=n.e.createCopy(r)).elementForums.push(o));null!=o&&(e.elementForumStore.dispatch(c.b.setForum(o.forum)),a.a.setCurrentLocation(o.forum.forumLocation));var i=e.forumVisitInfo;null!=i&&i[t.productForum.productId]&&((i=C({},e.forumVisitInfo))[t.productForum.productId]={lastVisitDate:i[t.productForum.productId].lastVisitDate,visitedElements:C({},i[t.productForum.productId].visitedElements||{})},i[t.productForum.productId].visitedElements[t.element]=!0);return C({},e,{productForum:r,searchQuery:"",isShowingElementForum:!0,isShowingLocationForum:!1,title:o.elementTitle,isLoading:!1,forumVisitInfo:i})}(e,t);case i.a.SET_ELEMENT_FORUM:return function(e,t){var o=t.elementForum;null!=o&&(e.elementForumStore&&e.elementForumStore.dispatch(c.b.setForum(o.forum)),a.a.setCurrentLocation(o.forum.forumLocation));var r=e.forumVisitInfo;null!=r&&r[t.productForum.productId]&&((r=C({},e.forumVisitInfo))[t.productForum.productId]={lastVisitDate:r[t.productForum.productId].lastVisitDate,visitedElements:C({},r[t.productForum.productId].visitedElements||{})},r[t.productForum.productId].visitedElements[t.elementForum.element]=!0);return C({},e,{searchQuery:"",isShowingElementForum:!0,isShowingLocationForum:!1,title:o.elementTitle,isLoading:!1,forumVisitInfo:r})}(e,t);case i.a.SET_LOCATION_FORUM:return function(e,t){null!=t.locationForum&&(e.locationForumStore.dispatch(c.b.setForum(t.locationForum)),a.a.setCurrentLocation(t.locationForum.forumLocation));return C({},e,{isShowingLocationForum:!0})}(e,t);case i.a.FETCH_PRODUCT_FORUM_START:return function(e,t){return C({},e,{searchQuery:"",searchResultsForum:null,isLoading:!0})}(e);case i.a.FETCH_PRODUCT_FORUM_SUCCESS:return function(e,t){var o=t.productForum,r=k(e).filter((function(e){return e.forumLocation.productExternalId==o.productExternalId}));r.length>0&&(o=A(o,r));return C({},e,{productForum:o,isLoading:!1,title:t.productForum.productTitle})}(e,t);case i.a.FETCH_PRODUCT_FORUM_ERROR:return function(e,t){return C({},e,{productForum:null,isLoading:!1,title:a.a.getDefaultForumTitle()})}(e);case i.a.FETCH_PRODUCT_FORUMS_START:return function(e,t){return C({},e,{isLoading:!0,title:a.a.getDefaultForumTitle()})}(e);case i.a.FETCH_PRODUCT_FORUMS_SUCCESS:return function(e,t){var o=t.productForums,r=k(e);r.length>0&&(o=w(o,r));return C({},e,{productForums:o,isLoading:!1,title:a.a.getDefaultForumTitle()})}(e,t);case i.a.FETCH_PRODUCT_FORUMS_ERROR:return function(e,t){return C({},e,{productForums:[],isLoading:!1,title:a.a.getDefaultForumTitle()})}(e);case i.a.FETCH_ADDITIONAL_PRODUCT_FORUMS_START:return function(e,t){return C({},e,{isLoading:!1,isLoadingMoreProductResults:!0})}(e);case i.a.FETCH_ADDITIONAL_PRODUCT_FORUMS_SUCCESS:return function(e,t){var o=e.productForums.concat([]),r=t.productForums,n=k(e);n.length>0&&(r=w(r,n));var i={};if(null!=o&&o.length>0)for(var a=0,s=o;a<s.length;a++){var u=s[a];i[u.productId]=!0}for(var c=0,p=r;c<p.length;c++){var l=p[c];i[l.productId]||(i[l.productId]=!0,o.push(l))}return C({},e,{productForums:o,isLoadingMoreProductResults:!1,hasRunOutOfProductsToLoad:null==r||0==r.length})}(e,t);case i.a.FETCH_ADDITIONAL_PRODUCT_FORUMS_ERROR:return function(e,t){return C({},e,{isLoadingMoreProductResults:!1})}(e);case i.a.CLEAR_LOCATION_FORUM_CLEAR:return C({},e,{isShowingLocationForum:!1,isLoading:!0});case i.a.CLEAR_ELEMENT_FORUM_CLEAR:return C({},e,{isShowingLocationForum:!1,isShowingElementForum:!1,title:e.productForum.productTitle||a.a.getDefaultForumTitle(),isLoading:!0});case i.a.CLEAR_PRODUCT_FORUM_CLEAR:return function(e,t){return C({},e,{productForum:null,title:a.a.getDefaultForumTitle(),forumVisitInfo:O(e),isLoading:!0})}(e);case i.a.SEARCH_START:return C({},e,{isLoading:!0,searchResultsForum:null});case i.a.SEARCH_SUCCESS:return function(e,t){var o=new n.b("search results",null,t.results,{},{});return e.searchForumStore.dispatch(c.b.setForum(o)),e.searchForumStore.dispatch(c.b.setCurrentUser(e.currentUser)),C({},e,{isLoading:!1,searchResultsForum:o})}(e,t);case i.a.SEARCH_ERROR:return C({},e,{isLoading:!1,searchResultsForum:null});case i.a.CLEAR_SEARCH:return C({},e,{searchQuery:"",isLoading:!1,searchResultsForum:null});case i.a.SET_SEARCH_QUERY:return C({},e,{searchQuery:t.searchQuery});case i.a.GO_TO_ROOT:return function(e,t){return C({},e,{isShowingLocationForum:!1,isShowingElementForum:!1,productForum:null,productForums:null,isLoading:!0,searchResultsForum:null,forumVisitInfo:O(e)})}(e);case i.a.FETCH_FULL_PATH_TO_LOCATION_FORUM_START:return C({},e,{isLoading:!0,searchResultsForum:null});case i.a.FETCH_FULL_PATH_TO_LOCATION_FORUM_SUCCESS:return function(e,t){var o=t.locationForum,r=t.elementForum,n=t.productForum,i=k(e).filter((function(e){return e.forumLocation.productExternalId==t.productForum.productExternalId}));i.length>0&&(null!=o&&(o=I(o,i)),null!=r&&(r=I(r,i)),null!=n&&(n=A(n,i)));null!=o&&null!=e.locationForumStore&&(e.locationForumStore.dispatch(c.b.setForum(o)),a.a.setCurrentLocation(o.forumLocation));null!=r&&null!=e.elementForumStore&&e.elementForumStore.dispatch(c.b.setForum(r));return C({},e,{isLoading:!1,isShowingLocationForum:null!=o,isShowingElementForum:null!=r,productForum:n})}(e,t);case i.a.FETCH_FULL_PATH_TO_LOCATION_FORUM_ERROR:return C({},e,{isLoading:!1});case i.a.SET_VERTICAL_PADDING:return C({},e,{verticalPadding:t.verticalPadding});case i.a.SHOW_COMMENT:return function(e,t){return C({},e,{commentIdToShow:t.commentId})}(e,t);case i.a.SET_SORT_TYPE:return function(e,t){return C({},e,{sortType:t.sortType})}(e,t);case i.a.SET_DIRECT_NOTIFICATIONS:return function(e,t){return R(e,t.notificationForums)}(e,t);case i.a.SHOW_ALL_NOTIFICATIONS_LOADING:return C({},e,{isShowingNotificationsForum:!1,isLoading:!0});case i.a.SHOW_ALL_NOTIFICATIONS:return function(e,t){var o=e.productForum,r=e.productForums;null!=o&&(o=b(o));null!=r&&(r=r.map((function(e){return b(e)})));return C({},e,{productForum:o,productForums:r,isShowingNotificationsForum:!0,isLoading:!1})}(e);case i.a.CLEAR_NOTIFICATIONS:return function(e,t){return C({},R(e,[]),{isShowingNotificationsForum:!1})}(e);case i.a.CLEAR_THREAD_NOTIFICATIONS:return function(e,t){for(var o=e.notificationStores||[],r=[],n=(t.threadIds||[]).map((function(e){return+e})),i=(t.threadIds||[]).map((function(e){return e+""})),a=0,s=o;a<s.length;a++){var u=s[a],p=u.getState().forum,l=p.threads.filter((function(e){return-1!=n.indexOf(e.id)||-1!=i.indexOf(e.id)}));l.length>0?l.length<p.threads.length&&u.dispatch(c.b.removeThreads(l)):r.push(u)}return R(e,r.map((function(e){return e.getState().forum})))}(e,t);case i.a.SET_FORUM_VISIT_INFO:return function(e,t){return C({},e,{forumVisitInfo:t.forumVisitInfo})}(e,t)}return e}function O(e){var t=e.forumVisitInfo;return null!=t&&null!=e.productForum&&t[e.productForum.productId]&&((t=C({},t))[e.productForum.productId]={lastVisitDate:new Date,visitedElements:t[e.productForum.productId].visitedElements}),t}function R(e,t){var o=e.notificationStores||[],r=a.a.getNotificationsCount(t),n=t.map((function(t){var r=o.find((function(e){return a.a.areTwoForumsSame(e.getState().forum,t)}));return null==r&&(null==(r=o.find((function(e){return a.a.twoForumsShareTheSameRootThread(e.getState().forum,t)})))&&(r=Object(s.d)(f,Object(s.a)(u.a,v.a,E))).dispatch(c.b.setCurrentUser(e.currentUser)),r.dispatch(c.b.setForum(t))),r})),i=e.locationForumStore.getState().forum,p=e.elementForumStore.getState().forum,l=e.productForum,d=e.productForums;return null!=i&&(i=I(i,t),e.locationForumStore.getState().forum!=i&&e.locationForumStore.dispatch(c.b.setForum(i))),null!=p&&(p=I(p,t),e.elementForumStore.getState().forum!=p&&e.elementForumStore.dispatch(c.b.setForum(p))),null!=l&&(l=A(l,t)),null!=d&&(d=w(d,t)),C({},e,{notificationsCount:r,notificationStores:n,isShowingLocationForum:e.isShowingLocationForum,isShowingElementForum:e.isShowingElementForum,productForum:l,productForums:d})}function b(e){if(null==e||!e.numberOfNewComments)return e;var t=n.e.createCopy(e);return t.numberOfNewComments=0,t.elementForums=function(e){for(var t=[],o=0,r=e;o<r.length;o++){var i=r[o];if(i.numberOfNewComments){var a=n.a.createCopy(i);a.numberOfNewComments=0,t.push(a)}else t.push(i)}return t}(e.elementForums),t}function w(e,t){return e.map((function(e){return A(e,t)}))}function A(e,t){var o=t.filter((function(t){return t.forumLocation.productExternalId==e.productExternalId}));return 0!=o.length||e.numberOfNewComments?((e=n.e.createCopy(e)).numberOfNewComments=a.a.getNotificationsCount(o),null!=e.elementForums&&(e.elementForums=function(e,t){for(var o=[],r=function(e){var r=t.filter((function(t){return t.forumLocation.element==e.element}));if(0!=r.length||e.numberOfNewComments){var i=n.a.createCopy(e);i.forum=I(i.forum,r),i.numberOfNewComments=a.a.getNotificationsCount(r),o.push(i)}else o.push(e)},i=0,s=e;i<s.length;i++){var u=s[i];r(u)}return o}(e.elementForums,o)),e):e}function I(e,t){if(!e||!e.forumLocation)return e;var o=e.forumLocation,r=t.filter((function(e){var t=e.forumLocation;return!!t&&(t.productExternalId==o.productExternalId&&(t.element||"general").toLowerCase()==(o.element||"general").toLowerCase())}));if(0==r.length)return e;var i=n.b.createCopy(e);return i.threads=function(e,t){for(var o=[],r=[],i={},a=0,s=t;a<s.length;a++){for(var u=s[a],c=0,p=u.threads;c<p.length;c++){var l=p[c];i[l.id]=l}r.push.apply(r,u.threads)}for(var d=0,h=e;d<h.length;d++){l=h[d];var m,f=i[l.id];if(null==f)(m=n.f.createCopy(l)).isOpen=!1,o.push(m);else(m=n.f.createCopy(f)).isOpen=!0,o.push(m)}return o}(i.threads,r),i}function k(e){return e&&e.notificationStores&&e.notificationStores.length?e.notificationStores.map((function(e){return e.getState().forum})):[]}},363:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var r,n,i=o(357),a=o(390),s=o(358),u=(o(369),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});!function(e){e[e.standard=0]="standard",e[e.dark=1]="dark",e[e.gold=2]="gold",e[e.green=3]="green",e[e.red=4]="red"}(n||(n={}));var c={backgroundColor:"rgba(0, 0, 0, 0.75)",zIndex:1008,top:0,display:"flex",alignItems:"center",justifyContent:"center",position:"fixed"},p={alignItems:"flex-start"},l={backgroundColor:"rgb(255, 255, 255)",display:"fixed",position:"relative",top:"unset",left:"unset",right:"unset",bottom:"unset",border:"unset",borderRadius:"unset",width:"100%",color:"#3C3C3C",overflow:"visible",padding:"20px 40px"},d={maxWidth:"600px",margin:"0 auto",padding:"0"},h={maxHeight:"90vh",overflow:"auto",maxWidth:"85vw"},m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.render=function(){var e=this,t=Object.assign({},l),o=c,r=Object.assign({},h),s=Object.assign({},d);this.props.isContentVerticalTop&&(o=Object.assign({},o,p)),this.props.isPositionStatic&&(o=Object.assign({},o,{position:"static"})),this.props.dontGoFullWidth&&(t=Object.assign({},t,{width:"auto"})),this.props.hasNoPadding&&(t=Object.assign({},t,{padding:"0"})),this.props.noWidthLimitation&&(r=Object.assign({},r,{maxWidth:"auto"}),s=Object.assign({},s,{maxWidth:"auto"})),this.props.theme==n.dark?t=Object.assign({},t,{backgroundColor:"rgb(51, 51,51)"}):this.props.theme==n.gold?t=Object.assign({},t,{backgroundColor:"rgb(254, 203, 47)"}):this.props.theme==n.green?t=Object.assign({},t,{backgroundColor:"rgb(57, 121, 38)"}):this.props.theme==n.red&&(t=Object.assign({},t,{backgroundColor:"rgb(195, 41, 28)"})),this.props.contentTopOffset&&(t=Object.assign({},t,{top:this.props.contentTopOffset})),this.props.initialOverlayTop&&(o.top=this.props.initialOverlayTop,r.maxHeight="calc("+h.maxHeight+" - "+this.props.initialOverlayTop+")");var u={"dark-theme":this.props.theme==n.dark,"gold-theme":this.props.theme==n.gold,"green-theme":this.props.theme==n.green,"red-theme":this.props.theme==n.red};return this.props.parentElement&&this.props.parentElement!=document.body?i.createElement("div",{className:"ReactModal__Overlay",style:o},i.createElement("div",{style:t},this.generateModalContent(u,s,r))):i.createElement(a,{isOpen:this.props.isOpen,appElement:document.body,style:{overlay:o,content:t},parentSelector:function(){return document.body},onRequestClose:function(){null!=e.props.onClose&&(e.props.onClose instanceof Function?e.props.onClose():console.error&&console.error("onClose is not a function",e.props.onClose,e.props.mainContainerClassName))}},this.generateModalContent(u,s,r))},t.prototype.generateModalContent=function(e,t,o){var r=this;return i.createElement(i.Fragment,null,i.createElement("div",{className:s("modal-header",e,this.props.additionalModalHeaderClass)},i.createElement("div",{className:"modal-back-button-container"},this.props.hasBackButton?i.createElement("div",{className:"modal-header-button",onTouchStart:function(e){return r.props.onBack&&r.props.onBack()},onClick:function(e){return r.props.onBack&&r.props.onBack()}},i.createElement("i",{className:"fa fw fa-chevron-left"})):i.createElement("i",{className:"fa fw fa-chevron-left",style:{opacity:0}})),i.createElement("div",{className:"modal-title-container"},this.props.title&&i.createElement("h3",{dangerouslySetInnerHTML:{__html:this.props.title}}),this.props.subtitle&&i.createElement("span",{style:this.props.subtitleStyle},this.props.subtitle)),i.createElement("div",{onTouchStart:function(e){return r.props.onClose&&r.props.onClose()},onClick:function(e){return r.props.onClose&&r.props.onClose()},className:s("modal-close-button-container",{"no-padding":this.props.hasNoPadding})},i.createElement("div",{className:"modal-header-button"},i.createElement("i",{className:"fa fw fa-times"})))),i.createElement("div",{className:s(this.props.mainContainerClassName,e),style:t},i.createElement("div",{style:o,className:"modal-content-container"},this.props.children,i.createElement("div",null,this.props.actionMessageHTML&&i.createElement("span",{className:s("tokens-button action-button",this.props.actionButtonAdditionalClass),onClick:this.props.onActionClicked,dangerouslySetInnerHTML:{__html:this.props.actionMessageHTML}}),this.props.secondayActionMessageHTML&&i.createElement("span",{className:s("tokens-button action-button",this.props.secondaryActionButtonAdditionalClass),onClick:this.props.onSecondaryActionClicked,dangerouslySetInnerHTML:{__html:this.props.secondayActionMessageHTML}})),this.props.cancelationMessageHTML&&i.createElement("span",{className:"tokens-button cancel-button",onClick:this.props.onCancelationClicked,dangerouslySetInnerHTML:{__html:this.props.cancelationMessageHTML}}))))},t}(i.Component);t.b=m},365:function(e,t,o){"use strict";var r=function(){function e(){this.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0;try{this.supportsCssClipPath=window&&window.CSS&&window.CSS.supports&&window.CSS.supports("clip-path","polygon(50% 0%, 0% 100%, 100% 100%)")}catch(e){this.supportsCssClipPath=!1}}return e.prototype.isRunningInLivebook=function(){return-1!==document.location.hostname.indexOf("livebook")||-1!==document.title.toLowerCase().indexOf("livebook")},e.prototype.isRunningInLivevideo=function(){return-1!==document.location.hostname.indexOf("livevideo")||-1!==document.title.toLowerCase().indexOf("livevideo")},e.prototype.isRunningInMarketplace=function(){return!this.isRunningInLivebook()&&!this.isRunningInLivevideo()},e.prototype.isMobileWidth=function(){return window.innerWidth<500},e}();t.a=new r},367:function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var r=o(394),n=o(646),i=o(420),a=o(649),s=o(28),u=function(){function e(){}return e.setSourceApp=function(t){e.sourceApp=t},e.setDeploymentType=function(t){e.deploymentType=t},e.getSourceApp=function(){return e.sourceApp},e.getNextEndDate=function(e,t){return void 0===t&&(t=0),e?new Date(e.getTime()-7*Math.pow(2,t)*24*60*60*1e3):new Date(Date.now()-7*Math.pow(2,t)*24*60*60*1e3)},e.getProductForumLink=function(t){if(t.isLivebook){var o="/book/"+t.productSlug+"/discussion";return e.sourceApp==s.b.livebook?o:e.deploymentType==s.a.qa?"https://livebook-qa.manning.com"+o:"https://livebook.manning.com"+o}if(t.isLivevideo){o="/course/"+t.productExternalId+"/"+t.productSlug+"?discussions=true";return e.sourceApp==s.b.livevideo?o:e.deploymentType==s.a.qa?"https://livevideo-qa.manning.com"+o:"https://livevideo.manning.com"+o}return""},e.getElementForumLink=function(t,o){if(null==t)return"";if(null==o)return e.getProductForumLink(t);if(t.isLivebook){var r="/book/"+t.productSlug+"/"+o.element+"/discussion";return e.sourceApp==s.b.livebook?r:e.deploymentType==s.a.qa?"https://livebook-qa.manning.com"+r:"https://livebook.manning.com"+r}if(t.isLivevideo){if("General"==o.element||"Errata"==o.element||"Author Online Forum Legacy Posts"==o.element)return e.getProductForumLink(t);r="/module/"+o.element+"?discussions=true";return e.sourceApp==s.b.livevideo?r:e.deploymentType==s.a.qa?"https://livevideo-qa.manning.com"+r:"https://livevideo.manning.com"+r}return""},e.sortProductForums=function(e,t){t==a.a.Alphabetical?e.sort((function(e,t){return e.productTitle<t.productTitle?-1:e.productTitle>t.productTitle?1:0})):t==a.a.MostRecent?e.sort((function(e,t){return t.lastCommentDate==e.lastCommentDate?0:t.lastCommentDate<e.lastCommentDate?-1:1})):t==a.a.CommentCount&&e.sort((function(e,t){return t.numberOfComments-e.numberOfComments}))},e.sortElementForums=function(e,t){var o=this;t==a.a.Alphabetical?e.sort((function(e,t){return o.compareByTitle(e.element||"",t.element||"")})):t==a.a.MostRecent?e.sort((function(e,t){return t.lastCommentDate==e.lastCommentDate?0:t.lastCommentDate<e.lastCommentDate?-1:1})):t==a.a.CommentCount&&e.sort((function(e,t){return t.forum.getCommentCount()-e.forum.getCommentCount()}))},e.compareByTitle=function(e,t){if(e=(e||"").toLowerCase(),t=(t||"").toLowerCase(),"general"==e)return-1;if("general"==t)return 1;if("errata"==e)return-1;if("errata"==t)return 1;if(-1!=e.indexOf("chapter")&&-1!=t.indexOf("chapter")){var o=e.match(/\d+/),r=t.match(/\d+/);if(o&&r)return parseInt(o[0])-parseInt(r[0])}else if(-1!=e.indexOf("appendix")&&-1!=t.indexOf("appendix")){o=e.match(/\d+/),r=t.match(/\d+/);if(o&&r)return parseInt(o[0])-parseInt(r[0])}else{if(-1!=e.indexOf("chapter")&&-1!=t.indexOf("appendix"))return-1;if(-1!=e.indexOf("appendix")&&-1!=t.indexOf("chapter"))return 1}return e<t?-1:e>t?1:0},e.getMatchingProductForums=function(e,t){if(!(t=(t||"").trim()))return e;var o=new n(e,{includeScore:!0,shouldSort:!0,threshold:.2,keys:[{name:"productTitle",weight:1}]}).search(t).map((function(e){return e.item}));if(0==o.length){var r=t.toLowerCase();o=e.filter((function(e){return-1!=e.productTitle.toLowerCase().indexOf(r)}))}return o},e.isAuthor=function(e,t){return!(!e||!t)&&!!t[e.id]},e.isModerator=function(e,t){return!(!e||!t)&&!!t[e.id]},e.canModerateInProduct=function(e,t){return!(!e||!e.authorizedProductIds)&&(e.authorizedProductIds["*"]||e.authorizedProductIds[t])},e.getUniqueUsers=function(e){if(!e||!e.length)return[];for(var t=[],o={},r=0,n=e;r<n.length;r++){var i=n[r];o[i.user.id]||(t.push(i.user),o[i.user.id]=!0)}return t},e.hasAlreadyBeenMarkedAsSpam=function(e,t){return!!(e&&e.spamCommentIds&&e.spamCommentIds.length&&t)&&null!=e.spamCommentIds.find((function(e){return e==t.id}))},e.hasProductForumVisitNotifications=function(e,t){if(!e||!t)return!1;var o=e[t.productId];return!!o&&t.lastCommentDate>o.lastVisitDate},e.hasElementForumVisitNotifications=function(e,t,o){if(!e||!t)return!1;var r=e[t.productId];return!!r&&(!r.visitedElements[o.element]&&o.forum.hasPostsNewerThan(r.lastVisitDate))},e.on=function(e,t){this.emitter.addListener(e,t)},e.off=function(e,t){this.emitter.removeListener(e,t)},e.trigger=function(e,t){var o=this;setTimeout((function(){var r;return(r=o.emitter).emit.apply(r,[e].concat(t))}),16)},e.addLocationReplacementMapItem=function(e,t){this.locationReplacementMap[e]=t},e.getFromLocationReplacementMap=function(e){return this.locationReplacementMap[e]||e},e.setCurrentLocation=function(e){this.forumLocation=e},e.getCurrentLocation=function(){return this.forumLocation},e.getDefaultForumTitle=function(){return"Discussion"},e.adjustElementTitle=function(e){return(e||"").replace(/-/," ")},e.getNotificationsCount=function(e){for(var t=0,o=0,r=e;o<r.length;o++){t+=r[o].countNotSeenPosts()}return t},e.expendCommentWithUserText=function(e,t){return e||(e=""),(e.startsWith("#")||e.startsWith("<"))&&(e="\r\n\r\n"+e),t+": "+e},e.getMatchingThreads=function(e,t){for(var o={},r={},a=[],s=[],u=0,c=t;u<c.length;u++){var p=c[u];s.push(p),o[p.id]=p;for(var l=0,d=p.posts;l<d.length;l++){var h=d[l];r[h.id]=p,s.push(h)}}for(var m=0,f=new n(s,{includeScore:!0,shouldSort:!0,threshold:.6,keys:[{name:"text",weight:1}]}).search(e);m<f.length;m++){var g=f[m].item;if(g instanceof i.f)a.push(g);else{var v=r[g.id];v&&a.push(v)}}return a},e.getAllThreads=function(e){var t=[];if(!e)return t;for(var o=0,r=e;o<r.length;o++){var n=r[o];t.push.apply(t,n.threads)}return t},e.twoForumsShareTheSameRootThread=function(e,t){return!!(e&&t&&e.threads&&t.threads&&e.threads.length&&t.threads.length)&&e.threads[0].id==t.threads[0].id},e.areTwoForumsSame=function(e,t){return this.areThreadsSame(e.threads,t.threads)},e.areForumsSame=function(e,t){return this.areThreadsSame(this.getAllThreads(e),this.getAllThreads(t))},e.areThreadsSame=function(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var o={},r=0,n=e;r<n.length;r++){var i=n[r];o[i.id]=i}for(var a=0,s=t;a<s.length;a++){var u=s[a],c=e[u.id];if(!c)return!1;if(c.posts.length!=u.posts.length)return!1}return!0},e.storeShouldShowLivebooks=function(e){this.setItemToLocalStorage("DISCUSSION_SHOW_LIVEBOOKS",e?"1":"")},e.shouldShowLivebooks=function(){return!!this.getItemFromLocalStorage("DISCUSSION_SHOW_LIVEBOOKS")},e.getTomorrowsDate=function(){var e=new Date,t=new Date;return t.setDate(e.getDate()+1),t},e.getItemFromLocalStorage=function(e){try{return localStorage.getItem(e)}catch(t){return console.log("Error getting item from local storage",e),""}},e.setItemToLocalStorage=function(e,t){try{return t?localStorage.setItem(e,t):localStorage.removeItem(e)}catch(t){return console.log("Error setting item to local storage",e),""}},e.locationReplacementMap={},e.emitter=new r,e.paginationStartDate=new Date,e.paginationEndDate=new Date,e.paginationIncrement=0,e}();u.paginationEndDate=u.getNextEndDate()},368:function(e,t,o){"use strict";var r=function(){function e(){this.numberedBookItemIndexRegExp=/^(?:(?:(?:(?:Chapter)|(?:Part)|(?:Lesson)|(?:Section)|(?:Unit)) ))?((?:\d+\.?)+)/,this.appendixIndexRegExp=/^(Appendix )?[A-Z]\.(\d+\.?)*/,this.isOnDevice=!1}return e.prototype.cleanBookTitle=function(e){return e?(e||"").trim().replace(/,?\s+(second|third|fourth|fifth|sixth|seventh|eight|nineth)\s+edition/i,""):e},e.prototype.adaptLinkFormat=function(e){return e=e||"",this.isOnDevice?e.indexOf("#!")>=0?e:e.indexOf("/book")>=0?e.replace("/book","/#!/book"):e:e.replace("#!","").replace("//book","/book")},e.prototype.getShortTitle=function(e){if(!e)return e;var t=(e=e.replace(/,?\s+second\s+edition/i,", 2nd ed.").replace(/,?\s+third\s+edition/i,", 3rd ed.").replace(/,?\s+fourth\s+edition/i,", 4th ed.").replace(/,?\s+fifth\s+edition/i,", 5th ed.").replace(/,?\s+sixth\s+edition/i,", 6th ed.").replace(/,?\s+seventh\s+edition/i,", 7th ed.").replace(/,?\s+eight\s+edition/i,", 8th ed.").replace(/,?\s+nineth\s+edition/i,", 9th ed.")).indexOf(":");return-1==t?e:e.substring(0,t)},e.prototype.getElementLink=function(e){if(!e)return e;var t=(e=this.adaptLinkFormat(e)).match("(chapter-[0-9]+)|(part-[0-9]+)|(appendix(-[a-z])?)");return null==t||0==t.length?e:e.substring(0,t.index+t[0].length)},e.prototype.getSectionLink=function(e,t){if(!e)return e;e=this.adaptLinkFormat(e);var o=this.getElementLink(e);if(o==e)return e;var r=this.extractBookElementIndex(t).trim()||"";return""==r?e:(r.endsWith(".")&&(r=r.substring(0,r.length-1)),o+"/section-"+r.replace(/\./g,"-"))},e.prototype.extractBookElementIndex=function(e){var t=new RegExp(this.appendixIndexRegExp).exec(e),o=new RegExp(this.numberedBookItemIndexRegExp).exec(e);return t?(t[0]||"").replace("Appendix ",""):o&&o.length>1?o[1]:""},e.prototype.splitIntoShortNameAndContent=function(e){var t=new RegExp(this.appendixIndexRegExp).exec(e),o=new RegExp(this.numberedBookItemIndexRegExp).exec(e);if(t)return{shortName:r=(t[0]||"").replace("Appendix ",""),content:n=e.replace("Appendix","").replace(r,"")};if(o&&o.length>1){var r=o[1],n=e.replace("Chapter","").replace("Lesson","").replace(r,"");return-1!=e.indexOf("Chapter")&&(r="Chapter "+r),{shortName:r,content:n}}return null},e.prototype.extractSegmentedBookElementIndex=function(e){var t=this.extractBookElementIndex(e);return t?t.split(".").filter((function(e){return e.trim()})):[]},e.prototype.compareBookItemIndexes=function(e,t){for(var o=this.extractSegmentedBookElementIndex(e),r=this.extractSegmentedBookElementIndex(t),n=Math.max(o.length,r.length),i=0;i<n;i++){var a=o[i],s=r[i];if(!a)return-1;if(!s)return 1;var u=parseInt(a),c=parseInt(s);if(Number.isNaN(u)&&!Number.isNaN(c))return 1;if(!Number.isNaN(u)&&Number.isNaN(c))return-1;if(Number.isNaN(u)&&Number.isNaN(c)){if(a===s)continue;return a<s?-1:1}if(u!==c)return u<c?-1:1}return 0},e.prototype.getLastIndex=function(e){var t=this.extractBookElementIndex(e);if(!t)return t;var o=t.match(/(\d+)\.?$/);return null==o?"":o[1]||o[0]},e.prototype.cleanBookElementTitle=function(e,t){if(void 0===t&&(t=!0),!e)return e;var o=this.extractBookElementIndex(e);return e=e.trim().replace(/^(Chapter|Part|Section|Appendix|Unit|Module)/,""),t&&(e=e.replace(o,"").trim()),(e=e.replace(/^\.\s*/,"")).trim()},e.prototype.adjustCoverPath=function(e,t,o){return e?(-1!=e.indexOf("images")&&-1!=e.indexOf("manning.com")&&(-1!=e.indexOf("manning.com/book/")?e=e.replace("manning.com/book/","manning.com/"+t+"/"+o+"/resize/book/"):-1!=e.indexOf("manning.com/video/")&&(e=e.replace("manning.com/video/","manning.com/"+t+"/"+o+"/resize/video/"))),e):e},e}();t.a=new r},369:function(e,t,o){var r=o(370);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},370:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".ReactModal__Overlay{animation:fade-in-black-background 0.1s ease-in-out;font-family:'Lato';position:relative;text-align:left}.ReactModal__Overlay .dark-theme .modal-title-container{color:#fecb2f}.ReactModal__Overlay .dark-theme p{color:white}.ReactModal__Overlay .green-theme{color:white}.ReactModal__Overlay .green-theme .modal-header-button{color:white}.ReactModal__Overlay .green-theme h3,.ReactModal__Overlay .green-theme em,.ReactModal__Overlay .green-theme p{color:white}.ReactModal__Overlay .red-theme{color:white}.ReactModal__Overlay .red-theme .modal-header-button{color:white}.ReactModal__Overlay .red-theme h3,.ReactModal__Overlay .red-theme em,.ReactModal__Overlay .red-theme p{color:white}.ReactModal__Overlay .gold-theme .modal-header-button{color:#c69501}.ReactModal__Overlay .gold-theme h3{font-weight:bold}.ReactModal__Overlay .gold-theme .modal-content-container{margin-top:-1em;overscroll-behavior:none;-ms-scroll-chaining:none}.ReactModal__Overlay .modal-header{display:flex;align-items:center;justify-content:space-between;font-weight:300;line-height:1}.ReactModal__Overlay .modal-header-button{font-size:1em;cursor:pointer;user-select:none;color:#9a9a9a}.ReactModal__Overlay .modal-back-button-container{position:absolute;top:35px;left:20px}.ReactModal__Overlay .modal-close-button-container{position:absolute;top:35px;right:20px;z-index:10;padding:1em;margin:-1em;cursor:pointer}.ReactModal__Overlay .modal-close-button-container.no-padding{top:25px}@media screen and (max-width: 450px){.ReactModal__Overlay .modal-close-button-container.no-padding{top:15px}}.ReactModal__Overlay .modal-title-container{max-width:600px;margin:0 auto}.ReactModal__Overlay h3{font-size:2em;font-weight:300;display:inline-block;margin:0 0.5em 20px 0;color:inherit}.ReactModal__Overlay .modal-title-container{flex:1 auto}.ReactModal__Overlay .cancel-button{float:right}.ReactModal__Overlay .tokens-button{background-color:gray}.ReactModal__Overlay .tokens-button:hover:not(.disabled){background-color:#9a9a9a}.ReactModal__Overlay .tokens-button:active:not(.disabled){background-color:#8d8d8d}.ReactModal__Overlay .tokens-button.action-button{color:white;background-color:#3C67A2}.ReactModal__Overlay .tokens-button.action-button:hover:not(.disabled){background-color:#5280bf}.ReactModal__Overlay .tokens-button.action-button:active:not(.disabled){background-color:#4373b5}@keyframes fade-in-black-background{0%{background-color:rgba(0,0,0,0)}100%{background-color:rgba(0,0,0,0.75)}}\n",""])},371:function(e,t,o){"use strict";var r,n=o(357),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=o(589),s=o(590),u=function(e){function t(t,o){var r=e.call(this,t,o)||this;return r.state={},r}return i(t,e),t.prototype.content=function(){var e=this;if(this.props.source){var t=this.renderMarkdown(this.props.source);return t.success?n.createElement("div",{dangerouslySetInnerHTML:{__html:t.source}}):n.createElement("div",null,t.source)}return n.Children.map(this.props.children,(function(t){if("string"==typeof t){var o=e.renderMarkdown(t);return o.success?n.createElement("span",{dangerouslySetInnerHTML:{__html:o.source}}):n.createElement("span",null,o.source)}return t}))},t.prototype.componentDidUpdate=function(e){this.props.html_in_markdown!==e.html_in_markdown&&null!=this.props.html_in_markdown&&this.md&&(this.md.options.html=this.props.html_in_markdown,this.forceUpdate())},t.prototype.renderMarkdown=function(e){try{if(!this.md){var t={html:this.props.html_in_markdown||!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!0,linkTarget:"_blank",typographer:!0,_highlight:!0,_strict:!1,_view:"html"};this.md=new a("full",t).use(s)}return{success:!0,source:this.md.render(e)}}catch(t){return{success:!1,source:e}}},t.prototype.render=function(){return n.createElement("div",{style:this.props.style,className:this.props.className||""},this.content())},t}(n.Component);t.a=u},408:function(e,t,o){"use strict";var r=function(){function e(){}return e.prototype.triggerEvent=function(e,t){if("createEvent"in document){var o=document.createEvent("HTMLEvents");o.initEvent(t,!1,!0),e.dispatchEvent(o)}else e.fireEvent("on"+t)},e.prototype.triggerTextAreaChange=function(e){e.dispatchEvent(new Event("input",{bubbles:!0}))},e.prototype.closest=function(e,t){var o,r;for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(o=e,!0)}));e;){if((r=e.parentElement)&&r[o](t))return r;e=r}return null},e.prototype.removeClassFromElements=function(e,t){for(var o=0;o<e.length;o++)this.removeClassFromElement(e[o],t)},e.prototype.removeClassFromElement=function(e,t){e&&e.classList.remove(t)},e.prototype.addClassToElements=function(e,t){for(var o=0;o<e.length;o++)this.addClassToElement(e[o],t)},e.prototype.addClassToElement=function(e,t){e&&e.classList.add(t)},e.prototype.ensureInView=function(e,t){if(null!=e){t||(t=this.getScrollParent(e));var o=t.scrollTop,r=o+t.clientHeight,n=e.offsetTop,i=n+e.clientHeight;n<o?t.scrollTop-=o-n:i>r&&(t.scrollTop+=i-r+10)}},e.prototype.getScrollParent=function(e,t){var o=window.getComputedStyle(e),r="absolute"===o.position,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===o.position)return document.body;for(var i=e;i=i.parentElement;)if(o=window.getComputedStyle(i),(!r||"static"!==o.position)&&n.test(o.overflow+o.overflowY+o.overflowX))return i;return document.body},e.prototype.getDistanceFromTopOfThePage=function(e){for(var t=0,o=0;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,o+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:o}},e.prototype.getDistanceFromLeftEdgeOfThePage=function(e){if(!e)return 0;var t=e.getBoundingClientRect();return null!=t?t.left:0},e.prototype.getElementPosition=function(e){return{top:e.offsetTop,left:e.offsetLeft}},e.prototype.getElementOuterHeight=function(e){var t=e.offsetHeight,o=getComputedStyle(e);return t+=parseInt(o.marginTop)+parseInt(o.marginBottom)},e.prototype.getOffsetTopFromAncestor=function(e,t){for(var o=0;null!=e&&e!==t;)o+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return o},e.prototype.getBottomPadding=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.paddingBottom);return Number.isNaN(o)?0:o},e.prototype.getTopPadding=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.paddingTop);return Number.isNaN(o)?0:o},e.prototype.getRightPadding=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.paddingRight);return Number.isNaN(o)?0:o},e.prototype.getComputedMarginTop=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.marginTop);return Number.isNaN(o)?0:o},e.prototype.getStyledMarginTop=function(e){if(null==e)return 0;var t=parseFloat(e.style.marginTop);return Number.isNaN(t)?0:t},e.prototype.getVerticalCenterOffset=function(e){return null==e?0:e.offsetTop+e.offsetHeight/2},e.prototype.getFirstLineCenterVerticalOffset=function(e){return null==e?0:e.offsetTop+this.getLineHeight(e)/2},e.prototype.getComputedLineHeight=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.lineHeight);return Number.isNaN(o)?0:o},e.prototype.getLineHeight=function(e){if(null==e)return 0;var t,o=e.cloneNode();o.innerHTML="<br>",e.appendChild(o);var r=o.offsetHeight;o.innerHTML="<br><br>";var n=o.offsetHeight;return e.removeChild(o),t=n-r,Math.max(t,0)},e.prototype.getWidth=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.width);return Number.isNaN(o)?0:o},e.prototype.getHeight=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.height);return Number.isNaN(o)?0:o},e.prototype.getFontString=function(e){var t=window.getComputedStyle(e);return null==t?"":t.font?t.font:t.fontSize+" "+t.fontFamily},e.prototype.getTextWidth=function(e,t){var o=(this.canvas||(this.canvas=document.createElement("canvas"))).getContext("2d");return o.font=t,Math.floor(o.measureText(e).width)},e.prototype.removeDescendents=function(e,t){if(e&&e.children.length)for(var o=e.querySelectorAll(t),r=0;r<o.length;r++){var n=o[r];n.parentElement.removeChild(n)}},e.prototype.scrollElementTop=function(e,t,o,r){void 0===o&&(o=700),void 0===r&&(r=function(){}),this.scrollElementProperty(e,t,o,"scrollTop",r)},e.prototype.scrollElementLeft=function(e,t,o,r){void 0===o&&(o=700),void 0===r&&(r=function(){}),this.scrollElementProperty(e,t,o,"scrollLeft",r)},e.prototype.scrollElementProperty=function(e,t,o,r,n){var i=this;if(void 0===o&&(o=700),void 0===n&&(n=function(){}),e&&(t=Math.round(t),!((o=Math.round(o))<0)))if(0!==o){var a=Date.now(),s=a+o,u=e[r],c=t-u,p=e[r],l=function(){if(e[r]==p){var t=Date.now(),o=function(e,t,o){if(o<=e)return 0;if(o>=t)return 1;var r=(o-e)/(t-e);return r*r*(3-2*r)}(a,s,t),d=Math.round(u+c*o);e[r]=d,t>=s?n&&n():e[r]!==p||e[r]===d?(p=e[r],i.requestAnimationFrame(l)):n&&n()}else n&&n()};this.requestAnimationFrame(l)}else e[r]=t},e.prototype.requestAnimationFrame=function(e){window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,16)},e}();t.a=new r},420:function(e,t,o){"use strict";var r=function(){function e(e,t,o,r,n,i,a,s,u,c,p){this.authorIdMap={},this.moderatorIdMap={},this.productId=e,this.productExternalId=t,this.productMeapVersion=o,this.productTitle=n,this.productSlug=r,this.numberOfComments=i,this.numberOfNewComments=a,this.lastCommentDate=s,this.elementForums=u,this.isLivebook=c,this.isLivevideo=p}return e.createCopy=function(t){var o=new e(t.productId,t.productExternalId,t.productMeapVersion,t.productSlug,t.productTitle,t.numberOfComments,t.numberOfNewComments,t.lastCommentDate,null!=t.elementForums?(t.elementForums||[]).concat([]):null,t.isLivebook,t.isLivevideo);return o.authorIdMap=t.authorIdMap,o.moderatorIdMap=t.moderatorIdMap,o},e}(),n=o(586),i=function(){function e(e,t,o,r,n){void 0===n&&(n=0),this.element=e,this.elementTitle=t,this.forum=o,this.lastCommentDate=r,this.numberOfNewComments=n}return e.createCopy=function(t){return new e(t.element,t.elementTitle,n.a.createCopy(t.forum),t.lastCommentDate,t.numberOfNewComments)},e.prototype.keepUniqueThreads=function(){if(this.forum&&this.forum.threads&&0!=this.forum.threads.length){for(var e={},t=[],o=0,r=this.forum.threads;o<r.length;o++){var n=r[o];e[n.id]||(t.push(n),e[n.id]=!0)}this.forum.threads=t}},e}(),a=o(647),s=o(587),u=o(648),c=function(e,t,o,r,n){this.productExternalId=e,this.element=t,this.location=o,this.baseLink=r,this.meapVersion=n};o.d(t,"e",(function(){return r})),o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return n.a})),o.d(t,"f",(function(){return a.a})),o.d(t,"d",(function(){return s.a})),o.d(t,"g",(function(){return u.a})),o.d(t,"c",(function(){return c}))},429:function(e,t,o){var r=o(657);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},438:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var r,n=o(420),i=o(457),a=o(367),s=function(){return(s=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};!function(e){e.SET_FORUM="SET_FORUM",e.SET_PRODUCT_FORUM="SET_PRODUCT_FORUM",e.SET_CURRENT_USER="SET_CURRENT_USER",e.SET_AUTHORS_AND_MODERATORS="SET_AUTHORS_AND_MODERATORS",e.SET_TITLE="SET_TITLE",e.OPEN_THREAD="OPEN_THREAD",e.CLOSE_THREAD="CLOSE_THREAD",e.CREATE_THREAD="CREATE_THREAD",e.CREATE_THREAD_START="CREATE_THREAD_START",e.CREATE_THREAD_SUCCESS="CREATE_THREAD_SUCCESS",e.CREATE_THREAD_ERROR="CREATE_THREAD_ERROR",e.DELETE_POST="DELETE_POST",e.DELETE_POST_START="DELETE_POST_START",e.DELETE_POST_SUCCESS="DELETE_POST_SUCCESS",e.DELETE_POST_ERROR="DELETE_POST_ERROR",e.CREATE_POST="CREATE_POST",e.CREATE_POST_START="CREATE_POST_START",e.CREATE_POST_SUCCESS="CREATE_POST_SUCCESS",e.CREATE_POST_ERROR="CREATE_POST_ERROR",e.START_EDIT_POST="START_EDIT_POST",e.CANCEL_EDIT_POST="CANCEL_EDIT_POST",e.SAVE_EDIT_POST="SAVE_EDIT_POST",e.SAVE_EDIT_POST_START="SAVE_EDIT_POST_START",e.SAVE_EDIT_POST_SUCCESS="SAVE_EDIT_POST_SUCCESS",e.SAVE_EDIT_POST_ERROR="SAVE_EDIT_POST_ERROR",e.VOTE_POST="VOTE_POST",e.VOTE_POST_START="VOTE_POST_START",e.VOTE_POST_SUCCESS="VOTE_POST_SUCCESS",e.VOTE_POST_ERROR="VOTE_POST_ERROR",e.REVOKE_VOTE_POST="REVOKE_VOTE_POST",e.REVOKE_VOTE_POST_START="REVOKE_VOTE_POST_START",e.REVOKE_VOTE_POST_SUCCESS="REVOKE_VOTE_POST_SUCCESS",e.REVOKE_VOTE_POST_ERROR="REVOKE_VOTE_POST_ERROR",e.TOGGLE_SPAM="TOGGLE_SPAM",e.TOGGLE_SPAM_START="TOGGLE_SPAM_START",e.TOGGLE_SPAM_SUCCESS="TOGGLE_SPAM_SUCCESS",e.TOGGLE_SPAM_ERROR="TOGGLE_SPAM_ERROR",e.TOGGLE_EDITING_SUGGESTION="TOGGLE_EDITING_SUGGESTION",e.TOGGLE_EDITING_SUGGESTION_START="TOGGLE_EDITING_SUGGESTION_START",e.TOGGLE_EDITING_SUGGESTION_SUCCESS="TOGGLE_EDITING_SUGGESTION_SUCCESS",e.TOGGLE_EDITING_SUGGESTION_ERROR="TOGGLE_EDITING_SUGGESTION_ERROR",e.NOTIFICATIONS_ARRIVED="NOTIFICATIONS_ARRIVED",e.REMOVE_THREADS="REMOVE_THREADS",e.CHANGE_AVATAR_URL="CHANGE_AVATAR_URL",e.NOTIFY_AUTHOR="NOTIFY_AUTHOR"}(r||(r={}));var u=function(e,t,o){return void 0===o&&(o={}),s({type:r.CREATE_THREAD_START,title:e,text:t},o)},c=function(e,t,o,n){return void 0===n&&(n={}),s({type:r.CREATE_THREAD_SUCCESS,thread:e,id:t,link:o},n)},p=function(e,t){return void 0===t&&(t={}),s({type:r.CREATE_THREAD_ERROR,thread:e},t)},l=function(e,t,o){return void 0===o&&(o={}),s({type:r.DELETE_POST_START,thread:e,post:t},o)},d=function(e,t,o){return void 0===o&&(o={}),s({type:r.DELETE_POST_SUCCESS,thread:e,post:t},o)},h=function(e,t,o){return void 0===o&&(o={}),s({type:r.DELETE_POST_ERROR,thread:e,post:t},o)},m=function(e,t,o){return void 0===o&&(o={}),s({type:r.CREATE_POST_START,thread:e,text:t},o)},f=function(e,t,o,n,i){return void 0===i&&(i={}),s({type:r.CREATE_POST_SUCCESS,thread:e,post:t,id:o,link:n},i)},g=function(e,t,o){return void 0===o&&(o={}),s({type:r.CREATE_POST_ERROR,thread:e,post:t},o)},v=function(e,t,o,n,i){return void 0===i&&(i={}),s({type:r.SAVE_EDIT_POST_START,thread:e,post:t,text:o,title:n},i)},E=function(e,t,o){return void 0===o&&(o={}),s({type:r.SAVE_EDIT_POST_SUCCESS,thread:e,post:t},o)},S=function(e,t,o,n,i,a,u){return void 0===u&&(u={}),s({type:r.SAVE_EDIT_POST_ERROR,thread:e,post:t,oldText:o,newText:n,oldTitle:i,newTitle:a},u)},T=function(e,t,o,n){return void 0===n&&(n={}),s({type:r.VOTE_POST_START,thread:e,post:t,amount:o},n)},C=function(e,t,o,n,i,a){return void 0===a&&(a={}),s({type:r.VOTE_POST_SUCCESS,thread:e,post:t,totalAmount:o,userVoteAmount:n,userVotes:i},a)},y=function(e,t,o){return void 0===o&&(o={}),s({type:r.VOTE_POST_ERROR,thread:e,post:t},o)},_=function(e,t,o){return void 0===o&&(o={}),s({type:r.REVOKE_VOTE_POST_START,thread:e,post:t},o)},O=function(e,t,o,n,i){return void 0===i&&(i={}),s({type:r.REVOKE_VOTE_POST_SUCCESS,thread:e,post:t,totalAmount:o,votes:n},i)},R=function(e,t,o){return void 0===o&&(o={}),s({type:r.REVOKE_VOTE_POST_ERROR,thread:e,post:t},o)},b=function(e,t,o,n){return void 0===n&&(n={}),s({type:r.TOGGLE_SPAM_START,user:e,thread:t,post:o},n)},w=function(e,t,o,n,i){return void 0===i&&(i={}),s({type:r.TOGGLE_SPAM_SUCCESS,user:e,thread:t,post:o,spamCommentIds:n},i)},A=function(e,t,o){return void 0===o&&(o={}),s({type:r.TOGGLE_SPAM_ERROR,thread:e,post:t},o)},I=function(e,t,o,n){return void 0===n&&(n={}),s({type:r.TOGGLE_EDITING_SUGGESTION_START,user:e,thread:t,post:o},n)},k=function(e,t,o,n,i){return void 0===i&&(i={}),s({type:r.TOGGLE_EDITING_SUGGESTION_SUCCESS,user:e,thread:t,post:o,isEditingSuggestion:n},i)},F=function(e,t,o){return void 0===o&&(o={}),s({type:r.TOGGLE_EDITING_SUGGESTION_ERROR,thread:e,post:t},o)},P={setForum:function(e){return{type:r.SET_FORUM,forum:e}},setCurrentUser:function(e){return{type:r.SET_CURRENT_USER,user:e}},setAuthorsAndModerators:function(e,t){return{type:r.SET_AUTHORS_AND_MODERATORS,authorIdMap:e,moderatorIdMap:t}},setTitle:function(e){return{type:r.SET_TITLE,title:e}},openThread:function(e,t){return void 0===t&&(t={}),s({type:r.OPEN_THREAD,thread:e},t)},closeThread:function(e,t){return void 0===t&&(t={}),s({type:r.CLOSE_THREAD,thread:e},t)},createThread:function(e,t,o){return void 0===o&&(o={}),function(r,n){r(u(e,t,o));var a=null;null!=o.elementForum?a=n().productForum.elementForums.find((function(e){return e.element==o.elementForum.element})).forum:a=n().forum;var s=a.threads.find((function(e){return e.isBeingSynced&&e.text===t&&+e.id<0}));i.a.getProvider().createThread(s).then((function(e){r(c(s,e.id,e.link,o))})).catch((function(){r(p(s,o))}))}},createThreadStart:u,createThreadSuccess:c,createThreadError:p,deletePost:function(e,t,o){return void 0===o&&(o={}),function(r,a){r(l(e,t));var s=null;null!=o.elementForum?s=a().productForum.elementForums.find((function(e){return e.element==o.elementForum.element})).forum:s=a().forum;var u=s.threads.find((function(t){return t.id==e.id})),c=t instanceof n.f?u:u.posts.find((function(e){return e.id==t.id}));i.a.getProvider().deletePost(c||u).then((function(){r(d(u,c,o))})).catch((function(){r(h(u,c,o))}))}},deletePostStart:l,deletePostSuccess:d,deletePostError:h,createPost:function(e,t,o){return void 0===o&&(o={}),function(r,n){var a;(r(m(e,t)),null!=o.elementForum)?a=n().productForum.elementForums.find((function(e){return e.element==o.elementForum.element})).forum:a=n().forum;var s=a.threads.find((function(t){return t.id==e.id})),u=s.posts.find((function(e){return e.isBeingSynced&&e.text==t&&+e.id<0}));i.a.getProvider().createPost(e,u).then((function(e){r(f(s,u,e.id,e.link,o))})).catch((function(){r(g(s,u,o))}))}},createPostStart:m,createPostSuccess:f,createPostError:g,startEditPost:function(e,t,o){return void 0===o&&(o={}),s({type:r.START_EDIT_POST,thread:e,post:t},o)},cancelEditPost:function(e,t,o){return void 0===o&&(o={}),s({type:r.CANCEL_EDIT_POST,thread:e,post:t},o)},saveEditPost:function(e,t,o,r,a){return void 0===a&&(a={}),function(s,u){s(v(e,t,o,r));var c=null;null!=a.elementForum?c=u().productForum.elementForums.find((function(e){return e.element==a.elementForum.element})).forum:c=u().forum;var p=c.threads.find((function(t){return t.id==e.id})),l=t instanceof n.f?p:p.posts.find((function(e){return e.isBeingSynced&&e.id==t.id}));i.a.getProvider().saveEditedPost(l).then((function(){s(E(p,l,a))})).catch((function(){s(S(p,t,t.text,o,t.title,r,a))}))}},saveEditPostStart:v,saveEditPostSuccess:E,saveEditPostError:S,votePost:function(e,t,o,r,a){return void 0===a&&(a={}),function(s,u){var c;(s(T(t,o,r)),null!=a.elementForum)?c=u().productForum.elementForums.find((function(e){return e.element==a.elementForum.element})).forum:c=u().forum;var p=c.threads.find((function(e){return e.id==t.id})),l=o instanceof n.f?p:p.posts.find((function(e){return e.id==o.id}));i.a.getProvider().votePost(e,l,r).then((function(e){s(C(p,l,e.voteScore,r,e.votes,a))})).catch((function(){s(y(p,o,a))}))}},votePostStart:T,votePostSuccess:C,votePostError:y,revokeVotePost:function(e,t,o,r){return void 0===r&&(r={}),function(a,s){var u;(a(_(t,o)),null!=r.elementForum)?u=s().productForum.elementForums.find((function(e){return e.element==r.elementForum.element})).forum:u=s().forum;var c=u.threads.find((function(e){return e.id==t.id})),p=o instanceof n.f?c:c.posts.find((function(e){return e.id==o.id}));i.a.getProvider().revokeVote(e,p).then((function(e){a(O(c,p,e.voteScore,e.votes,r))})).catch((function(){a(R(c,o,r))}))}},revokeVotePostStart:_,revokeVotePostSuccess:O,revokeVotePostError:R,toggleSpam:function(e,t,o,r){return void 0===r&&(r={}),function(s,u){var c;(s(b(e,t,o)),null!=r.elementForum)?c=u().productForum.elementForums.find((function(e){return e.element==r.elementForum.element})).forum:c=u().forum;var p=c.threads.find((function(e){return e.id==t.id})),l=o instanceof n.f?p:p.posts.find((function(e){return e.id==o.id}));i.a.getProvider().toggleSpam(e,l.id,!a.a.hasAlreadyBeenMarkedAsSpam(e,l)).then((function(t){s(w(e,p,l,t.spamCommentIds,r))})).catch((function(){s(A(p,o,r))}))}},toggleSpamStart:b,toggleSpamSuccess:w,toggleSpamError:A,toggleEditingSuggestion:function(e,t,o,r){return void 0===r&&(r={}),function(a,s){var u;(a(I(e,t,o)),null!=r.elementForum)?u=s().productForum.elementForums.find((function(e){return e.element==r.elementForum.element})).forum:u=s().forum;var c=u.threads.find((function(e){return e.id==t.id})),p=o instanceof n.f?c:c.posts.find((function(e){return e.id==o.id}));i.a.getProvider().toggleEditSuggestion(e,p.id,!p.isEditingSuggestion).then((function(t){a(k(e,c,p,t,r))})).catch((function(){a(F(c,o,r))}))}},toggleEditingSuggestionStart:I,toggleEditingSuggestionSuccess:k,toggleEditingSuggestionError:F,notificationsArrived:function(e){return{type:r.NOTIFICATIONS_ARRIVED,notificationForums:e}},removeThreads:function(e){return{type:r.REMOVE_THREADS,threads:e}},changeAvatarUrl:function(e,t){return{type:r.CHANGE_AVATAR_URL,user:e,avatarUrl:t}},notifyAuthor:function(e,t,o){return{type:r.NOTIFY_AUTHOR,user:e,post:t,message:o}}};t.b=P},457:function(e,t,o){"use strict";var r,n,i=o(134);t.a={initializeWebUtils:function(e){r=new i.a(e)},initializeProvider:function(e){n=e},getWebUtils:function(){return r},getProvider:function(){return n}}},586:function(e,t,o){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=function(){function e(e,t,o,r,n){this.title=e,this.forumLocation=t,this.threads=o,this.authorIdMap=r||{},this.moderatorIdMap=n||{}}return e.createCopy=function(t){return new e(t.title,t.forumLocation,t.threads.concat([]),r({},t.authorIdMap),r({},t.moderatorIdMap))},e.createCopyWithNewThreads=function(t,o){return new e(t.title,t.forumLocation,o,r({},t.authorIdMap),r({},t.moderatorIdMap))},e.prototype.getCommentCount=function(){for(var e=0,t=0,o=this.threads;t<o.length;t++){e+=o[t].posts.length+1}return e},e.prototype.countNotSeenPosts=function(){for(var e=0,t=0,o=this.threads;t<o.length;t++){e+=o[t].countNotSeenPosts()}return e},e.prototype.hasPostsNewerThan=function(e){for(var t=0,o=this.threads;t<o.length;t++){if(o[t].hasPostsNewerThan(e))return!0}return!1},e.prototype.containsThreadWithId=function(e){for(var t=0,o=this.threads;t<o.length;t++){if(o[t].id==e)return!0}return!1},e.prototype.containsThreadOrPostWithId=function(e){for(var t=0,o=this.threads;t<o.length;t++){var r=o[t];if(r.id==e)return!0;for(var n=0,i=r.posts;n<i.length;n++){if(i[n].id==e)return!0}}return!1},e.prototype.getCommentIds=function(){for(var e=[],t=0,o=this.threads;t<o.length;t++){var r=o[t];e.push(r.id);for(var n=0,i=r.posts;n<i.length;n++){var a=i[n];e.push(a.id)}}return e},e}();t.a=n},587:function(e,t,o){"use strict";var r=o(368),n=function(){function e(e,t,o,n,i,a,s,u,c){void 0===s&&(s=""),void 0===u&&(u=!0),void 0===c&&(c=!1),this.isBeingEdited=!1,this.isBeingSynced=!1,this.isSyncingVotes=!1,this.isEditingSuggestion=!1,this.id=e,this.text=t,this.user=o,this.votes=n,this.dateCreated=i,this.dateUpdated=a,this.link=r.a.adaptLinkFormat(s||""),this.isSeen=u,this.isEditingSuggestion=c}return e.prototype.isCreatedByUser=function(e){return!(!e||!this.user)&&e.id==this.user.id},e.createCopy=function(t){var o=new e(t.id,t.text,t.user,t.votes,t.dateCreated,t.dateUpdated,t.link,t.isSeen,t.isEditingSuggestion);return o.isBeingEdited=t.isBeingEdited,o.isBeingSynced=t.isBeingSynced,o.isSyncingVotes=t.isSyncingVotes,o.productId=t.productId,o.isEditingSuggestion=t.isEditingSuggestion,o.meapVersion=t.meapVersion,o.oldForumId=t.oldForumId,o},e}();t.a=n},588:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var r,n=o(420),i=o(457),a=o(367);!function(e){e.INITIALIZE="INITIALIZE",e.SET_CURRENT_USER="SET_CURRENT_USER",e.SET_IS_LOADING="SET_IS_LOADING",e.SET_ELEMENT_FORUM="SET_ELEMENT_FORUM",e.CREATE_AND_SET_ELEMENT_FORUM="CREATE_AND_SET_ELEMENT_FORUM",e.SET_LOCATION_FORUM="SET_LOCATION_FORUM",e.FETCH_PRODUCT_FORUM="FETCH_PRODUCT_FORUM",e.FETCH_PRODUCT_FORUM_START="FETCH_PRODUCT_FORUM_START",e.FETCH_PRODUCT_FORUM_SUCCESS="FETCH_PRODUCT_FORUM_SUCCESS",e.FETCH_PRODUCT_FORUM_ERROR="FETCH_PRODUCT_FORUM_ERROR",e.FETCH_PRODUCT_FORUMS="FETCH_PRODUCTS_FORUMS",e.FETCH_PRODUCT_FORUMS_START="FETCH_PRODUCTS_FORUMS_START",e.FETCH_PRODUCT_FORUMS_SUCCESS="FETCH_PRODUCTS_FORUMS_SUCCESS",e.FETCH_PRODUCT_FORUMS_ERROR="FETCH_PRODUCTS_FORUMS_ERROR",e.FETCH_ADDITIONAL_PRODUCT_FORUMS="FETCH_ADDITIONAL_PRODUCTS",e.FETCH_ADDITIONAL_PRODUCT_FORUMS_START="FETCH_ADDITIONAL_PRODUCTS_START",e.FETCH_ADDITIONAL_PRODUCT_FORUMS_SUCCESS="FETCH_ADDITIONAL_PRODUCTS_SUCCESS",e.FETCH_ADDITIONAL_PRODUCT_FORUMS_ERROR="FETCH_ADDITIONAL_PRODUCTS_ERROR",e.SEARCH="SEARCH",e.SEARCH_START="SEARCH_START",e.SEARCH_SUCCESS="SEARCH_SUCCESS",e.SEARCH_ERROR="SEARCH_ERROR",e.CLEAR_SEARCH="CLEAR_SEARCH",e.SET_SEARCH_QUERY="SET_SEARCH_QUERY",e.SET_SORT_TYPE="SET_SORT_TYPE",e.CLEAR_LOCATION_FORUM="CLEAR_LOCATION_FORUM",e.CLEAR_LOCATION_FORUM_CLEAR="CLEAR_LOCATION_FORUM_CLEAR",e.CLEAR_ELEMENT_FORUM="CLEAR_ELEMENT_FORUM",e.CLEAR_ELEMENT_FORUM_CLEAR="CLEAR_ELEMENT_FORUM_CLEAR",e.CLEAR_PRODUCT_FORUM="CLEAR_PRODUCT_FORUM",e.CLEAR_PRODUCT_FORUM_CLEAR="CLEAR_PRODUCT_FORUM_CLEAR",e.GO_TO_ROOT="GO_TO_ROOT",e.FETCH_FULL_PATH_TO_LOCATION_FORUM="FETCH_FULL_PATH_TO_LOCATION_FORUM",e.FETCH_FULL_PATH_TO_LOCATION_FORUM_START="FETCH_FULL_PATH_TO_LOCATION_FORUM_START",e.FETCH_FULL_PATH_TO_LOCATION_FORUM_SUCCESS="FETCH_FULL_PATH_TO_LOCATION_FORUM_SUCCESS",e.FETCH_FULL_PATH_TO_LOCATION_FORUM_ERROR="FETCH_FULL_PATH_TO_LOCATION_FORUM_ERROR",e.SET_VERTICAL_PADDING="SET_VERTICAL_PADDING",e.SHOW_COMMENT="SHOW_COMMENT",e.SET_DIRECT_NOTIFICATIONS="SET_DIRECT_NOTIFICATIONS",e.SET_FORUM_VISIT_INFO="SET_FORUM_VISIT_INFO",e.SHOW_ALL_NOTIFICATIONS_REQUESTED="SHOW_ALL_NOTIFICATIONS_REQUESTED",e.SHOW_ALL_NOTIFICATIONS_LOADING="SHOW_ALL_NOTIFICATIONS_LOADING",e.SHOW_ALL_NOTIFICATIONS="SHOW_ALL_NOTIFICATIONS",e.CLEAR_THREAD_NOTIFICATIONS="CLEAR_THREAD_NOTIFICATIONS",e.CLEAR_NOTIFICATIONS="CLEAR_NOTIFICATIONS",e.CHANGE_AVATAR_URL="CHANGE_AVATAR_URL"}(r||(r={}));var s,u=function(e,t){return{type:r.SET_ELEMENT_FORUM,productForum:t,elementForum:e}},c=function(e){return{type:r.SHOW_COMMENT,commentId:e}},p=function(e){return{type:r.FETCH_PRODUCT_FORUM_START,productExternalId:e}},l=function(e){return{type:r.FETCH_PRODUCT_FORUM_SUCCESS,productForum:e}},d=function(){return{type:r.FETCH_PRODUCT_FORUM_ERROR}},h=function(){return function(e,t){e(m()),i.a.getProvider().getProductForums(a.a.getTomorrowsDate(),a.a.paginationEndDate).then((function(t){e(f(t))})).catch((function(){e(g())}))}},m=function(){return{type:r.FETCH_PRODUCT_FORUMS_START}},f=function(e){return{type:r.FETCH_PRODUCT_FORUMS_SUCCESS,productForums:e}},g=function(){return{type:r.FETCH_PRODUCT_FORUMS_ERROR}},v=function(e,t){void 0===t&&(t=!0),t&&(a.a.paginationIncrement++,a.a.paginationStartDate=a.a.paginationEndDate,a.a.paginationEndDate=a.a.getNextEndDate(a.a.paginationStartDate,a.a.paginationIncrement)),i.a.getProvider().getProductForums(a.a.paginationStartDate,a.a.paginationEndDate).then((function(t){e(S(t))})).catch((function(){e(T())}))},E=function(){return{type:r.FETCH_ADDITIONAL_PRODUCT_FORUMS_START}},S=function(e){return{type:r.FETCH_ADDITIONAL_PRODUCT_FORUMS_SUCCESS,productForums:e}},T=function(){return{type:r.FETCH_ADDITIONAL_PRODUCT_FORUMS_ERROR}},C=function(){return{type:r.CLEAR_LOCATION_FORUM_CLEAR}},y=function(){return{type:r.CLEAR_ELEMENT_FORUM_CLEAR}},_=function(){return{type:r.CLEAR_PRODUCT_FORUM_CLEAR}},O=function(e,t){return{type:r.SEARCH_START,productForum:t,query:e}},R=function(e,t,o){return{type:r.SEARCH_SUCCESS,query:e,results:t,productForum:o}},b=function(e){return{type:r.SEARCH_ERROR}},w=function(){return{type:r.FETCH_FULL_PATH_TO_LOCATION_FORUM_START}},A=function(e,t,o){return{type:r.FETCH_FULL_PATH_TO_LOCATION_FORUM_SUCCESS,locationForum:e,elementForum:t,productForum:o}},I=function(){return{type:r.FETCH_FULL_PATH_TO_LOCATION_FORUM_ERROR}},k=function(e){return{type:r.SHOW_ALL_NOTIFICATIONS_LOADING,notificationForums:e}},F=function(e){return{type:r.SHOW_ALL_NOTIFICATIONS,notificationForums:e}},P={initialize:function(e,t){return{type:r.INITIALIZE,user:e,verticalPadding:t}},setCurrentUser:function(e){return{type:r.SET_CURRENT_USER,user:e}},setIsLoading:function(e){return{type:r.SET_IS_LOADING,isLoading:e}},setSearchQuery:function(e){return{type:r.SET_SEARCH_QUERY,searchQuery:e}},setSortType:function(e){return{type:r.SET_SORT_TYPE,sortType:e}},setElementForum:u,createAndSetElementForum:function(e,t,o,n){return{type:r.CREATE_AND_SET_ELEMENT_FORUM,productForum:n,element:e,elementTitle:t,meapVersion:o}},clearElementForum:function(e){return function(t,o){t(y()),i.a.getProvider().getProductForum(e).then((function(e){t(l(e))})).catch((function(){t(d())}))}},clearElementForumClear:y,setLocationForum:function(e){return{type:r.SET_LOCATION_FORUM,locationForum:e}},clearLocationForum:function(e,t){return function(o,r){o(C()),i.a.getProvider().getProductForum(e).then((function(e){var r=e.elementForums.find((function(e){return e.element==t}));o(u(r,e))})).catch((function(){o(d())}))}},clearLocationForumClear:C,fetchProductForum:function(e){return function(t,o){t(p(e)),i.a.getProvider().getProductForum(e).then((function(e){t(l(e))})).catch((function(){t(d())}))}},fetchProductForumStart:p,fetchProductForumSuccess:l,fetchProductForumError:d,fetchProductForums:h,fetchProductForumsStart:m,fetchProductForumsSuccess:f,fetchProductForumsError:g,fetchAdditionalProductForums:function(e){return void 0===e&&(e=!0),function(t,o){t(E()),clearTimeout(s),s=setTimeout((function(){v(t,e)}),2e3)}},fetchAdditionalProductForumsStart:E,fetchAdditionalProductForumsSuccess:S,fetchAdditionalProductForumsError:T,clearProductForum:function(){return function(e,t){e(_()),i.a.getProvider().getProductForums(a.a.getTomorrowsDate(),a.a.paginationEndDate).then((function(t){e(f(t))})).catch((function(){e(g())}))}},clearProductForumClear:_,search:function(e,t){return function(o,r){o(O(e,t)),i.a.getProvider().search(e,t).then((function(r){o(R(e,r,t))})).catch((function(){o(b(t))}))}},searchStart:O,searchSuccess:R,searchError:b,clearSearch:function(){return{type:r.CLEAR_SEARCH}},goToRootAndLoadProductForums:function(){return function(e,t){e({type:r.GO_TO_ROOT}),e(h())}},fetchFullPathToLocationForum:function(e,t,o,r,n,a){return function(s,u){s(w()),i.a.getProvider().getFullPathToLocationForum(e,t,o,r,n,a).then((function(e){s(A(e.locationForum,e.elementForum,e.productForum))})).catch((function(){s(I())}))}},fetchFullPathToLocationForumStart:w,fetchFullPathToLocationForumSuccess:A,fetchFullPathToLocationForumError:I,setVerticalPadding:function(e){return{type:r.SET_VERTICAL_PADDING,verticalPadding:e}},fetchProductForumAndShowComment:function(e,t){return function(o,r){o(p(e)),i.a.getProvider().getProductForum(e).then((function(e){o(l(e));var r=e.elementForums.find((function(e){return null!=e&&null!=e.forum&&e.forum.containsThreadOrPostWithId(t)}));null!=r&&o(u(r,e)),o(c(t))})).catch((function(){o(d())}))}},fetchFullPathToLocationForumAndShowComment:function(e,t,o,r,n,a,s){return function(u,l){u(w()),i.a.getProvider().getFullPathToLocationForum(e,t,o,r,n,a).then((function(e){u(A(e.locationForum,e.elementForum,e.productForum)),u(c(s))})).catch((function(){u(I())})),u(p(e))}},fetchProductAndElementForum:function(e,t,o,r){return function(s,c){s(p(e)),i.a.getProvider().getProductForum(e).then((function(i){s(l(i));var c=i.elementForums.find((function(e){return null!=e&&e.element==t}));null==c&&(c=new n.a(t,o||t,new n.b(a.a.adjustElementTitle(o||t),new n.c(e,t,"","",r),[],i.authorIdMap,i.moderatorIdMap),new Date(1970)),i.elementForums.push(c)),s(u(c,i))})).catch((function(){s(d())}))}},setDirectNotifications:function(e){return{type:r.SET_DIRECT_NOTIFICATIONS,notificationForums:e}},showNotificationsRequested:function(e){return function(t,o){t(k(e)),setTimeout((function(){t(F(e))}),500)}},showNotificationsLoading:k,showAllNotifications:F,clearNotifications:function(){return{type:r.CLEAR_NOTIFICATIONS}},clearThreadNotifications:function(e){return{type:r.CLEAR_THREAD_NOTIFICATIONS,threadIds:e}},setForumVisitInfo:function(e){return{type:r.SET_FORUM_VISIT_INFO,forumVisitInfo:e}},changeAvatarUrl:function(e){return{type:r.CHANGE_AVATAR_URL,avatarUrl:e}}};t.b=P},591:function(e,t,o){"use strict";var r,n=o(357),i=o(358),a=o(658),s=o.n(a),u=o(363),c=o(776),p=(o(429),o(659),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(){return(l=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},d=function(e,t,o,r){return new(o||(o=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?n(e.value):new o((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},h=function(e,t){var o,r,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},m=function(e){function t(t){var o=e.call(this,t)||this;return o.onImageLoaded=function(e,t){o.imageRef=e,o.imageRef.setAttribute&&o.imageRef.setAttribute("crossOrigin","anonymous")},o.onCropComplete=function(e,t){o.makeClientCrop(e,t)},o.handleActionClicked=o.handleActionClicked.bind(o),o.handleFilesDropped=o.handleFilesDropped.bind(o),o.handleFileUploaded=o.handleFileUploaded.bind(o),o.onImageLoaded=o.onImageLoaded.bind(o),o.onCropComplete=o.onCropComplete.bind(o),o.onCropChange=o.onCropChange.bind(o),o.state={imageUrl:"",imageLoading:!1,crop:{aspect:o.props.aspectRatio,x:0,y:0,width:o.props.maxWidth||50}},o}return p(t,e),t.prototype.componentDidMount=function(){this.hasBeenMounted=!0},t.prototype.componentWillUnmount=function(){this.hasBeenMounted=!1,this.imageRef=null,this.fileUrl=null,this.imageName=""},t.prototype.render=function(){var e=this;return n.createElement(u.b,{title:this.props.title||"upload image",isOpen:this.props.isShown,onClose:this.props.onClose,theme:u.a.standard,onActionClicked:this.handleActionClicked,onCancelationClicked:this.props.onClose,actionMessageHTML:this.state.isPerformingAction?'adding <i class="fa fa-circle-o-notch fa-spin fa-fw"></i>':"add"},n.createElement("div",{className:"social-modal-form image-upload-form",ref:function(t){return e.root=t}},this.state.imageUrl?this.generateImagePreview():n.createElement(c.a,{accept:"image/png, image/jpeg, image/jpg",onDrop:this.handleFilesDropped,multiple:!1},(function(t){var o=t.getRootProps,r=t.getInputProps;t.isDragActive,t.isDragAccept,t.isDragReject;return n.createElement("div",l({},o(),{className:"dropzone image-upload-container"}),n.createElement("input",l({},r())),e.state.imageLoading?"Please wait...":"Drop an image here (or click to select files to upload).")}))))},t.prototype.generateImagePreview=function(){return this.props.aspectRatio?n.createElement("div",{className:"social-modal-cropp-container"},n.createElement("div",{className:"social-modal-cropp-column"},n.createElement("div",null,"Original"),n.createElement(s.a,{src:this.state.imageUrl,crop:this.state.crop,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange})),n.createElement("div",{className:"social-modal-cropp-column"},n.createElement("div",null,"Preview"),this.state.croppedImageUrl&&n.createElement("img",{className:i({"social-modal-form-round-image":this.props.isRoundImagePreview}),alt:"cropped image",crossOrigin:"anonymous",style:{maxWidth:"100%"},src:this.state.croppedImageUrl}))):n.createElement("img",{className:"social-modal-form-image",crossOrigin:"anonymous",src:this.state.imageUrl,alt:"image"})},t.prototype.handleFilesDropped=function(e){var t=this;if(null!=e&&0!==e.length){if(!this.hasBeenMounted)return!1;var o=e[0],r=new FileReader;this.setState({imageLoading:!0}),r.onload=function(){var e=r.result.split(","),n=e[0],i=e[1];t.imageName=o.name,t.props.forcedFileName&&(t.imageName=t.replaceFileName(t.imageName)),t.props.aspectRatio?t.handleFileUploaded(n+","+i):null!=t.props.uploadImage?t.props.uploadImage(i,t.imageName,t.handleFileUploaded,n):window.handleUploadImageToS3&&window.handleUploadImageToS3(i,t.imageName,t.handleFileUploaded,n)},r.onabort=function(){if(!t.hasBeenMounted)return!1;t.setState({imageLoading:!1})},r.onerror=function(){if(!t.hasBeenMounted)return!1;t.setState({imageLoading:!1})},r.readAsDataURL(o)}},t.prototype.handleFileUploaded=function(e){if(!this.hasBeenMounted)return!1;this.setState({imageUrl:e,imageLoading:!1})},t.prototype.handleActionClicked=function(){this.props.onAccept&&this.root&&(this.state.isPerformingAction||(this.state.croppedImageUrl?this.saveCroppedImageAndClose():this.state.imageUrl&&(this.props.onAccept&&this.props.onAccept(this.state.imageUrl),this.setState({imageLoading:!1,imageUrl:"",croppedImageUrl:""}))))},t.prototype.saveCroppedImageAndClose=function(){var e=this,t=(this.state.croppedImageUrl||"").split(","),o=t[0],r=t[1],n=function(t){e.setState(l({},e.state,{isPerformingAction:!1})),e.props.onAccept&&e.props.onAccept(t)},i=!1;null!=this.props.uploadImage?(this.props.uploadImage(r,this.imageName,n,o),i=!0):window.handleUploadImageToS3&&(window.handleUploadImageToS3(r,this.imageName,n,o),i=!0),i&&this.setState(l({},this.state,{isPerformingAction:i}))},t.prototype.replaceFileName=function(e){try{if(this.props.forcedFileName){var t=e.lastIndexOf(".");return-1==t?e:e.replace(e.substr(0,t),this.props.forcedFileName)}}catch(e){}return e},t.prototype.onCropChange=function(e){this.setState(l({},this.state,{crop:e}))},t.prototype.makeClientCrop=function(e,t){return d(this,void 0,void 0,(function(){var t;return h(this,(function(o){switch(o.label){case 0:return this.imageRef&&e.width&&e.height?[4,this.getCroppedImg(this.imageRef,e)]:[3,2];case 1:t=o.sent(),this.setState(l({},this.state,{croppedImageUrl:t})),o.label=2;case 2:return[2]}}))}))},t.prototype.getCroppedImg=function(e,t){var o=this,r=document.createElement("canvas"),n=e.naturalWidth/e.width,i=e.naturalHeight/e.height;return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(e,t.x*n,t.y*i,t.width*n,t.height*i,0,0,t.width,t.height),new Promise((function(e,t){r.toBlob((function(t){o.blobToDataURL(t,(function(t){return e(t)}))}),"image/jpeg")}))},t.prototype.blobToDataURL=function(e,t){var o=new FileReader;o.onload=function(e){t(e.target.result)},o.readAsDataURL(e)},t}(n.Component);t.a=m},647:function(e,t,o){"use strict";var r,n,i=o(587),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});!function(e){e[e.Private=0]="Private",e[e.Public=1]="Public",e[e.Question=2]="Question"}(n||(n={}));var s=function(e){function t(t,o,r,n,i,a,s,u,c,p){void 0===u&&(u="");var l=e.call(this,t,r,n,i,a,s,u)||this;return l.isOpen=!1,l.title=o,l.isEditingSuggestion=c,l.posts=p||[],l}return a(t,e),t.prototype.countNotSeenPosts=function(){for(var e=0,t=0,o=this.posts;t<o.length;t++){o[t].isSeen||e++}return e},t.prototype.hasPostsNewerThan=function(e){if(this.dateCreated>e)return!0;for(var t=0,o=this.posts;t<o.length;t++){if(o[t].dateCreated>e)return!0}return!1},t.prototype.containsUnseen=function(){if(!this.isSeen)return!0;for(var e=0,t=this.posts;e<t.length;e++){if(!t[e].isSeen)return!0}return!1},t.prototype.containsCommentId=function(e){if(!e)return!1;if(this.id==e)return!0;for(var t=0,o=this.posts;t<o.length;t++){if(o[t].id==e)return!0}return!1},t.prototype.isCreatedByUser=function(e){return!(!e||!this.user)&&e.id==this.user.id},t.prototype.containsCommentsByUser=function(e){if(!e)return!1;if(null!=this.user&&this.user.id==e.id)return!0;for(var t=0,o=this.posts;t<o.length;t++){if(o[t].isCreatedByUser(e))return!0}return!1},t.createCopy=function(e,o){void 0===o&&(o=!0);var r=o?e.posts.concat([]):e.posts,n=new t(e.id,e.title,e.text,e.user,e.votes,e.dateCreated,e.dateUpdated,e.link,e.isEditingSuggestion,r);return n.isOpen=e.isOpen,n.isBeingSynced=e.isBeingSynced,n.isBeingEdited=e.isBeingEdited,n.productExternalId=e.productExternalId,n.productId=e.productId,n.element=e.element,n.location=e.location,n.isEditingSuggestion=e.isEditingSuggestion,n.meapVersion=e.meapVersion,n.oldForumId=e.oldForumId,n},t}(i.a);t.a=s},648:function(e,t,o){"use strict";var r=function(){function e(e,t,o){void 0===o&&(o=""),this.id=e,this.name=t,this.avatarUrl=o,this.votes=[],this.spamCommentIds=[]}return e.createCopy=function(t,o,r){void 0===o&&(o=!0),void 0===r&&(r=!0);var n=o?t.votes.concat([]):t.votes,i=r?t.spamCommentIds.concat([]):t.spamCommentIds,a=new e(t.id,t.name,t.avatarUrl);return a.votes=n,a.spamCommentIds=i,a.authorizedProductIds=t.authorizedProductIds,a},e}();t.a=r},649:function(e,t,o){"use strict";var r;o.d(t,"a",(function(){return r})),function(e){e[e.MostRecent=0]="MostRecent",e[e.Alphabetical=1]="Alphabetical",e[e.CommentCount=2]="CommentCount"}(r||(r={}))},657:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".social-modal-form .post-root-container{padding:1em 0}.social-modal-form label{display:flex;margin-bottom:1em;line-height:1.2;align-items:center}.social-modal-form label .label-text{display:inline-block;width:65px}.social-modal-form label>input{flex:1;font-size:inherit;line-height:inherit;margin:0.5em;height:auto}.social-modal-form .image-upload-container{border:2px black dashed;padding:2em;text-align:center;margin-bottom:1.5em;outline:none}.social-modal-form .social-modal-form-image{max-width:100%;max-height:85vh;text-align:center;display:block;margin:1.5em auto}.social-modal-form .social-modal-form-round-image{border-radius:50%}.social-modal-form .social-modal-cropp-container{display:flex;margin-bottom:0.5em}.social-modal-form .social-modal-cropp-container .social-modal-cropp-column{flex:1 1 0;text-align:center}.social-modal-form .social-modal-cropp-container .social-modal-cropp-column+.social-modal-cropp-column{margin-left:0.5em}.social-modal-form.image-upload-form .social-modal-form-image{max-height:60vh}.social-email-notifications-form label{cursor:pointer;user-select:none}.social-email-notifications-form label input{margin-left:0;margin-right:0.5em}\n",""])},661:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var r=new(function(){function e(){}return e.prototype.getProductToc=function(e,t,o,r){return o?this.getLivebookToc(e,t):r?this.getLivevideoToc(e,t):Promise.resolve({})},e.prototype.getLivebookToc=function(e,t){return new Promise((function(o,r){e.ajax(e.getAbsoluteLivebookAwsUrl(t+"/tocAndIndex.json"),(function(e){return o(e.toc)}),(function(e){return r(e)}))}))},e.prototype.getLivevideoToc=function(e,t){return new Promise((function(o,r){e.ajax(e.getAbsoluteBackendLivevideoUrl("course/getToc"),(function(e){return o(e)}),(function(e){return r(e)}),{id:t},!0)}))},e}())},779:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var r=o(438),n=o(408);function i(e){return function(e){return function(t){var o=e(t);switch(t.type){case r.a.CREATE_THREAD_ERROR:null!=document.activeElement&&(document.activeElement.value=t.thread.text);break;case r.a.CREATE_POST_ERROR:null!=document.activeElement&&(document.activeElement.value=t.post.text);break;case r.a.SAVE_EDIT_POST_ERROR:if(null!=document.activeElement)document.activeElement.value=t.newText,Object.getOwnPropertyDescriptor(HTMLTextAreaElement.prototype,"value").set.call(document.activeElement,t.newText),n.a.triggerTextAreaChange(document.activeElement)}return o}}}},885:function(e,t,o){var r=o(886);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},886:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".product-forum-root{font-size:14px;color:#333333;background-color:white;border-left:1px solid lightgray;display:flex;flex-direction:column}.product-forum-root .forum-loading-container{text-align:center;border-top:1px solid lightgray}.product-forum-root:not(.forum-header-showing-search)>.social-message-container{border-top:1px solid lightgray}.product-forum-root>.social-scrollable-container{flex:1 1 auto;overflow-y:auto;overscroll-behavior-y:none;-webkit-overflow-scrolling:touch;-ms-scroll-chaining:none}.product-forum-root a{color:#3C67A2}.product-forum-root>ul,.product-forum-root .social-scrollable-container ul{list-style:none;margin:0;padding:0}.product-forum-root .user-comment-content-container .user-comment-text-container ul{list-style:disc;padding-left:2em}.product-forum-root ul{font-size:inherit}.product-forum-root p{font-size:inherit;line-height:inherit}.product-forum-root code{color:#333;background-color:initial;border:none;border-width:1px;padding:0}.product-forum-root .non-selectable{color:gray;font-size:80%;user-select:none;cursor:default}.product-forum-root .social-button{display:inline-block;text-align:center;color:#3c3c3c;background-color:white;padding:0.5em 1em;user-select:none;cursor:pointer;font-weight:400}.product-forum-root .thread-post-summary-root .thread-post-summary-open-thread-link{display:flex;align-items:center;cursor:pointer;user-select:none}.product-forum-root .thread-post-summary-root .thread-post-summary-open-thread-link .avatar-container{margin-right:0;width:20px;height:20px;line-height:20px;font-size:70%}.product-forum-root .thread-post-summary-root .thread-post-summary-open-thread-link .avatar-container .avatar-image{width:20px;height:20px;line-height:20px}.product-forum-root .thread-post-summary-root .thread-post-summary-open-thread-link:hover a{text-decoration:underline}.product-forum-root .label-separator{margin:0 0.4em}.product-forum-root a{color:#3C67A2;text-decoration:none}.product-forum-root .user-comment-content-container .post-input-root{padding:0.5em 0 0.5em 0.5em;border-top:none;margin-bottom:0}.product-forum-root .post-root-container .post-input-root{padding:0}.product-forum-root .syncing-frame{position:absolute;top:0;left:0;right:0;bottom:0}.product-forum-root .product-forum-summary-title .label-separator,.product-forum-root .element-forum-title .label-separator{margin:0 0.25em}.product-forum-root .thread-root-container,.product-forum-root .post-input-root,.product-forum-root .forum-header-root .forum-header-input-container,.product-forum-root .thread-input-root,.product-forum-root .threads-summary-root{padding-left:1em;padding-right:1em}.product-forum-root .forum-header-root .forum-header,.product-forum-root .product-forum-summary-root,.product-forum-root .element-forum-root,.product-forum-root .social-message-container,.product-forum-root .social-search-link,.product-forum-root .toggle-livebooks-link{padding:1em}.product-forum-root .post-input-root,.product-forum-root .thread-input-root{margin-bottom:1em;padding-top:1em}.product-forum-root .post-input-sign-in-root,.product-forum-root .thread-input-sign-in-root{padding:0.5em 0;margin-bottom:0}.product-forum-root .thread-root-container,.product-forum-root .threads-summary-root{padding-top:1em}.product-forum-root .thread-root-container:last-child,.product-forum-root .threads-summary-root:last-child{padding-bottom:1em}.product-forum-root .forum-loading-container{padding-top:1em}.product-forum-root .user-comment-root-container .avatar-container,.product-forum-root .post-input-content-container>.avatar-container,.product-forum-root .thread-input-root>.avatar-container{margin-right:1em}.product-forum-root .element-forum-root:nth-child(2n),.product-forum-root .product-forum-summary-root:nth-child(2n){background-color:#f8f8f8}.product-forum-root .element-forum-root:nth-child(2n):hover,.product-forum-root .product-forum-summary-root:nth-child(2n):hover{background-color:#dfdfdf}.product-forum-root .element-forum-root:nth-child(2n+1),.product-forum-root .product-forum-summary-root:nth-child(2n+1){background-color:#e8e8e8}.product-forum-root .element-forum-root:nth-child(2n+1):hover,.product-forum-root .product-forum-summary-root:nth-child(2n+1):hover{background-color:#dbdbdb}.product-forum-root .social-message-container{padding:1em;font-style:italic;color:gray}.product-forum-root .loading-more-results{padding:1em;color:gray;user-select:none;display:flex;align-items:center;justify-content:center}.product-forum-root .social-search-link,.product-forum-root .toggle-livebooks-link{padding:1em;cursor:pointer;color:gray;user-select:none}.product-forum-root .social-search-link:hover,.product-forum-root .toggle-livebooks-link:hover{text-decoration:underline}.product-forum-root .toggle-livebooks-link{text-align:center;background-color:#3C67A2;color:white}.product-forum-root .forum-footer-commands-container{padding:1em;background-color:#3C67A2;color:white;cursor:pointer;user-select:none;text-align:center}.product-forum-root .forum-footer-commands-container:active{background:#2e4f7d}.product-forum-root .forum-footer-commands-container:hover{text-decoration:underline}.forum-not-seen-indicator{position:absolute;top:0.5em;right:0.5em;min-width:0.5em;min-height:0.5em;border-radius:50%;background-color:#67a73d}.forum-not-seen-indicator.extra-noticable-indicator{background-color:#e44e46}.discussion-sign-in-container{display:flex;align-items:center;justify-content:center}.discussion-sign-in-container>.discussion-sign-in-button{background-color:#3C67A2;color:white;padding:0.5em 1em;cursor:pointer;user-select:none}.discussion-sign-in-container>.discussion-sign-in-button:hover{background-color:#355b8f}.discussion-sign-in-container>.discussion-sign-in-button:active{background-color:#2e4f7d}\n",""])},887:function(e,t,o){var r=o(888);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},888:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".element-forum-root{cursor:pointer;position:relative;display:flex;justify-content:space-between;align-items:center}.element-forum-root a{text-decoration:none}.element-forum-root .element-forum-minimize-button{cursor:pointer;float:right}.element-forum-root .element-forum-footer{font-size:80%}.element-forum-root .inconspicuous-text{color:gray}\n",""])},889:function(e,t,o){var r=o(890);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},890:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".time-ago-label{color:gray}\n",""])},902:function(e,t,o){var r=o(903);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},903:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".notifications-indicator-root{position:relative;background-color:#e44e46;width:1.3em;height:1.3em;border-radius:50%;-webkit-user-select:none;-moz-user-select:moz-none;-ms-user-select:none;user-select:none;cursor:pointer;color:white;display:inline-block;margin-left:0.5em}.notifications-indicator-root:active{background-color:#d8291f}.notifications-indicator-root .notifications-indicator-label{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);font-size:80%;line-height:0}\n",""])},905:function(e,t,o){var r=o(906);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},906:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".forum-header-sort-tooltip-item{text-align:center;color:white;cursor:pointer;user-select:none;font-size:12px;line-height:20px;padding:2px}.forum-header-sort-tooltip-item.selected{font-weight:700;text-decoration:underline}.forum-header-sort-tooltip-item:hover{background-color:#666}.forum-header-root.forum-header-showing-search{border-bottom:1px solid lightgray}.forum-header-root .forum-header{display:flex;justify-content:space-between;align-items:center;background-color:#3C67A2;color:white}.forum-header-root .forum-header-middle-container{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.forum-header-root .forum-header-sort{cursor:pointer;font-size:80%;user-select:none;color:#d8e1eb;margin-left:0.25em}.forum-header-root .forum-header-sort:hover{text-decoration:underline}.forum-header-root .forum-header-title{font-weight:bold;margin:0 0.5em}.forum-header-root .forum-header-title a{color:white;text-decoration:underline}.forum-header-root .forum-header-input-container{padding:0.5em;display:flex}.forum-header-root .forum-header-input-container input{margin:0;width:100%;font-size:inherit;line-height:1.5;outline:none;border:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.forum-header-root .forum-header-input-container .search-icon{padding:0.5em;margin-right:-0.5em;cursor:pointer}.forum-header-root .forum-header-button{cursor:pointer;font-size:120%}.forum-header-root .forum-header-left-side-container{display:flex;align-items:center}.forum-header-root .forum-header-left-side-container .forum-header-empty-icon{margin-left:0.5em}.forum-header-root .forum-header-right-side-container{display:flex;align-items:center}.forum-header-root .forum-header-right-side-container .forum-header-empty-icon{margin-right:0.5em}.forum-header-root .forum-header-empty-icon{width:1.3em;height:1.3em;display:inline-block}\n",""])},907:function(e,t,o){var r=o(908);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},908:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".product-forum-summary-root{position:relative;cursor:pointer;display:flex;justify-content:space-between;align-items:center}.product-forum-summary-root .product-forum-summary-footer{font-size:80%}\n",""])},909:function(e,t,o){var r=o(910);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},910:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".thread-root-container{position:relative}.thread-root-container.is-being-synced{opacity:0.5}.thread-root-container>.post-input-root,.thread-root-container>.thread-input-root{margin-bottom:0;padding:0;border-top:none}\n",""])},911:function(e,t,o){var r=o(912);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},912:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".post-footer-root{font-size:80%;color:gray;text-align:left;position:relative;padding-left:0.9em;user-select:none}.post-footer-root a{color:inherit;text-decoration:none;padding:0.5em;margin:-0.5em}.post-footer-root a:hover{text-decoration:underline}.post-footer-root a.selected{text-decoration:underline}.post-footer-root .post-footer-upvote-counter{position:absolute;top:0;right:0;font-weight:bold;font-size:14px;padding:0.2em 0.5em;margin:0 0.5em;background-color:#f3f3f3;user-select:none;display:inline-block;transform:translateY(-50%)}.post-footer-root .post-footer-upvote-counter.negative{background-color:#BE6464;color:white}.post-footer-root .post-footer-upvote-counter.positive{background-color:#67a73d;color:white}.post-footer-root .post-footer-votes-icon{margin-right:0.5em}@media screen and (max-width: 400px){.post-footer-root .post-footer-votes-icon{display:none}}.post-footer-root a.selected .upvote-downvote-icon,.post-footer-root a.selected .edit-suggestion-icon{color:black}.post-footer-root a.selected .spam-icon{color:red}.post-footer-root a.not-clickable{cursor:default}@media screen and (max-width: 500px){.post-footer-root .post-footer-spam-container{display:none}}.post-footer-root .post-footer-spam-container i{cursor:pointer}.post-footer-root .upvote-downvote-icon{display:none;color:gray}@media screen and (max-width: 400px){.post-footer-root .upvote-downvote-label{display:none}.post-footer-root .upvote-downvote-icon{display:inline-block}}\n",""])},913:function(e,t,o){var r=o(914);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},914:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".post-root-container{padding:0.5em 0 0.5em 0.5em}.post-root-container>.post-input-root{margin-bottom:0}.post-root-container.is-being-synced{opacity:0.5}\n",""])},915:function(e,t,o){var r=o(916);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},916:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".avatar-container{width:36px;height:36px;line-height:36px;text-align:center;color:white;margin:0 10px 0 0;user-select:none;position:relative}.avatar-container .fa-star{position:absolute;color:#fecb2f;bottom:0;right:0}.avatar-container .avatar-image,.avatar-container .avatar-container-change-profile{border-radius:50%;width:36px;height:36px;line-height:36px;display:inline-block}.avatar-container .avatar-container-change-profile{position:absolute;top:0;left:0;right:0;bottom:0;display:none;background-color:rgba(0,0,0,0.5);color:white;cursor:pointer}.avatar-container:hover .avatar-container-change-profile{display:flex;align-items:center;justify-content:center}\n",""])},917:function(e,t,o){var r=o(918);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},918:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".user-comment-root-container{display:flex;width:100%}.user-comment-root-container .user-comment-content-container{flex:1}.user-comment-root-container .user-comment-content-container p:first-of-type{margin-top:0}.user-comment-root-container .user-comment-content-container p:last-of-type{margin-bottom:0}.user-comment-root-container .user-comment-text-container img{width:100%;cursor:pointer}.user-comment-root-container .user-comment-text-container .label-separator{margin:0 0.25em}.user-comment-root-container .user-comment-text-container code{display:block;background-color:white;padding:0.5em}.user-comment-root-container .user-comment-thread-header{margin-bottom:0.5em}.user-comment-root-container .user-comment-thread-title{font-weight:bold;display:inline-block}.user-comment-root-container .user-comment-text-container{position:relative;background-color:#f3f3f3;padding:0.608em;border:1px solid transparent;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.user-comment-root-container .user-comment-text-container pre{white-space:pre-wrap}.user-comment-root-container .user-comment-text-container.emphasized{border-color:#fecb2f}\n",""])},920:function(e,t,o){var r=o(921);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},921:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".post-input-root{clear:both;display:block;width:100%;border-top:1px solid lightgray}.post-input-root .post-input-content-container{display:flex;width:100%}.post-input-root .post-input-content-container>*:last-child{flex:1}.post-input-root textarea,.post-input-root .previewable-markdown-editor-preview-container{padding:0 4em 0 2px}.post-input-root .post-input-content-container .previewable-markdown-editor-wrapper{padding:0.643em}@media screen and (max-width: 400px){.post-input-root .post-input-show-text-commands-icon{display:none}}.post-input-root .non-selectable{color:gray;font-size:80%}.post-input-root .text-edit-controls-root .text-edit-controls-commands-container{margin-left:50px;border:1px solid lightgray;border-bottom:none}\n",""])},922:function(e,t,o){var r=o(923);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},923:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,'.previewable-markdown-editor-root .previewable-markdown-editor-wrapper{border:1px solid lightgray;position:relative;padding:0.5em;background:white}.previewable-markdown-editor-root .previewable-markdown-editor-wrapper.has-arrow-tip:after,.previewable-markdown-editor-root .previewable-markdown-editor-wrapper.has-arrow-tip:before{right:100%;top:18px;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.previewable-markdown-editor-root .previewable-markdown-editor-wrapper.has-arrow-tip:after{border-color:rgba(136,183,213,0);border-right-color:white;border-width:7px;margin-top:-7px}.previewable-markdown-editor-root .previewable-markdown-editor-wrapper.has-arrow-tip:before{border-color:rgba(194,225,245,0);border-right-color:#c8ccd0;border-width:8px;margin-top:-8px}.previewable-markdown-editor-root p:first-of-type{margin-top:0}.previewable-markdown-editor-root p:last-of-type{margin-bottom:0}.previewable-markdown-editor-root textarea,.previewable-markdown-editor-root .previewable-markdown-editor-preview-container{width:100%;resize:none;font-size:inherit;font-family:inherit;line-height:18px;outline:none;border:none;padding:0 4em 0 2px;margin:0;min-height:18px;box-shadow:none}.previewable-markdown-editor-root textarea:focus{background:initial}.previewable-markdown-editor-root .previewable-markdown-editor-preview-container img{width:100%}.previewable-markdown-editor-root .previewable-markdown-editor-preview-container-hidden,.previewable-markdown-editor-root .previewable-markdown-editor-textarea-container-hidden{display:none}.previewable-markdown-editor-root .previewable-markdown-editor-input-commands-container{position:absolute;bottom:0.5em;right:0.5em;color:#616770}.previewable-markdown-editor-root .previewable-markdown-editor-input-commands-container i{cursor:pointer;margin:0.1em 0.5em;line-height:18px}.previewable-markdown-editor-root .previewable-markdown-editor-input-commands-container i.selected{color:#333333}\n',""])},924:function(e,t,o){var r=o(925);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},925:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".text-edit-controls-root{transition:max-height 0.15s ease-in-out}.text-edit-controls-root .text-edit-controls-commands-container{background-color:#f9f9f9;padding:0.25em 0;overflow:hidden}.text-edit-controls-root .text-edit-controls-commands-container .fa{cursor:pointer;margin:0.5em}.text-edit-controls-root .text-edit-controls-preview-link{float:right;margin:0.2em 0.5em}@media screen and (max-width: 400px){.text-edit-controls-root{display:none}}\n",""])},926:function(e,t,o){var r=o(927);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},927:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".thread-post-summary-root{font-size:80%;padding-left:1em;margin-top:0.5em;display:flex;align-items:center}.thread-post-summary-root .open-thread-icon{margin-right:0.5em;transform:rotate(180deg);cursor:pointer}.thread-post-summary-root .thread-post-summary-user-name{margin-left:0.5em}@media screen and (max-width: 400px){.thread-post-summary-root .thread-post-summary-user-name{display:none}}.thread-post-summary-root .non-selectable{color:gray}.thread-post-summary-root>a{display:flex;align-items:center}\n",""])},928:function(e,t,o){var r=o(929);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},929:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,'.thread-input-root{clear:both;display:flex;flex:none;border-top:1px solid lightgray}.thread-input-root .previewable-markdown-editor-root{margin-bottom:0.5em}.thread-input-root .previewable-markdown-editor-root textarea{line-height:20px}.thread-input-root .previewable-markdown-editor-preview-container{min-height:52px}.thread-input-root .thread-input-wrapper{position:relative;background:#f9f9f9;border:1px solid #c8ccd0;padding:1em}.thread-input-root .thread-input-wrapper:after,.thread-input-root .thread-input-wrapper:before{right:100%;top:18px;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.thread-input-root .thread-input-wrapper:after{border-color:rgba(136,183,213,0);border-right-color:#f9f9f9;border-width:7px;margin-top:-7px}.thread-input-root .thread-input-wrapper:before{border-color:rgba(194,225,245,0);border-right-color:#c8ccd0;border-width:8px;margin-top:-8px}.thread-input-root .thread-input-title-input{width:100%;font-size:inherit;font-family:inherit;line-height:20px;outline:none;border:1px solid lightgray;margin:0;padding:0.5em;box-shadow:none}@media screen and (max-width: 400px){.thread-input-root .thread-input-title-input{margin-bottom:0.5em}}.thread-input-root>*:last-child{flex:1}.thread-input-root .thread-create-post-footer{display:flex;justify-content:space-between;align-items:center;background:#f9f9f9}.thread-input-root .thread-create-post-footer a{margin-left:0.5em}@media screen and (max-width: 600px){.thread-input-root .thread-create-post-footer{font-size:80%}}@media screen and (max-width: 450px){.thread-input-root .thread-create-post-footer .info-link{display:none}}.thread-input-root .thread-create-post-footer .social-button{color:white;background-color:#3C67A2}.thread-input-root .thread-create-post-footer .social-button:hover{background-color:#355b8f}.thread-input-root .thread-create-post-footer .social-button:active{background-color:#27446a}\n',""])},930:function(e,t,o){var r=o(931);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},931:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".threads-summary-root{cursor:pointer;font-size:80%}.threads-summary-root .avatar-container{margin:0 0.5em;width:20px;height:20px;line-height:20px;display:inline-block;font-size:70%}.threads-summary-root .avatar-container .avatar-image{width:20px;height:20px;line-height:20px}.threads-summary-root:hover a{text-decoration:underline}\n",""])},932:function(e,t,o){"use strict";var r=o(586),n=o(647),i=o(587),a=o(648),s=o(28),u=o(134),c=o(420),p=o(127),l=o(367),d=o(661),h=function(){function e(e,t){this.sourceApp=e,this.deploymentType=t,this.webUtils=new u.a(s.c.getConfig(e,t)),l.a.setSourceApp(e),l.a.setDeploymentType(t)}return e.prototype.notifyAuthor=function(e,t,o){var r=this;return new Promise((function(n,i){r.webUtils.ajax(r.webUtils.getAbsoluteBackendUrl("/api/comment/notifyAuthors"),(function(){return n()}),(function(){alert("Error notifying author about a post. Please try later."),i()}),{userId:e&&e.id,commentId:t&&t.id,message:o},!1,!0)}))},e.prototype.saveEmailNotificationChoice=function(e){var t=this;return new Promise((function(o,r){t.webUtils.ajax(t.webUtils.getAbsoluteBackendUrl("/api/comment/setRecieveEmailNotifications"),(function(){return o()}),(function(){return r()}),{value:e},!1,!0)}))},e.prototype.createDiscussionVisitInfo=function(e){var t=this;return new Promise((function(o,r){t.isSendingDiscussionVisitInfo?setTimeout((function(){t.sendDiscussionVisitInfo(e,o,r)}),500):t.sendDiscussionVisitInfo(e,o,r)}))},e.prototype.sendDiscussionVisitInfo=function(e,t,o){var r=this;this.isSendingDiscussionVisitInfo=!0,this.webUtils.ajax(this.webUtils.getAbsoluteBackendUrl("/api/discussionVisitInfo/createDiscussionVisitInfo"),(function(){r.isSendingDiscussionVisitInfo=!1,t()}),(function(){r.isSendingDiscussionVisitInfo=!1,o()}),{bookManningId:e},!1,!0)},e.prototype.getForumVisitInfo=function(){var e=this;return new Promise((function(t,o){e.webUtils.ajax(e.webUtils.getAbsoluteBackendUrl("/api/discussionVisitInfo/getDiscussionVisitInfo"),(function(e){for(var o in e)"string"==typeof e[o].lastVisitDate&&(e[o].lastVisitDate=new Date(e[o].lastVisitDate)),e[o].visitedElements||(e[o].visitedElements={}),t(e)}),(function(e){return o(e)}),{},!1,!0)}))},e.prototype.getNotifications=function(){var e=this;return new Promise((function(t,o){e.webUtils.ajax(e.webUtils.getAbsoluteBackendUrl("/api/comment/getNotifications"),(function(o){var n=e.getThreadsFromComments(o);t(n.map((function(t){return t.isOpen=!0,new r.a(t.productTitle,new c.c(t.productExternalId,t.element,t.location,e.extractBaseLink(t.link),t.meapVersion),[t],{},{})})))}),(function(e){return o(e)}),{},!1,!0)}))},e.prototype.markAsSeen=function(e){var t=this;return e&&0!=e.length?new Promise((function(o,r){t.webUtils.ajax(t.webUtils.getAbsoluteBackendUrl("/api/comment/markAsSeen"),(function(){return o()}),(function(e){return r(e)}),{commentIds:e},!1,!0)})):Promise.resolve()},e.prototype.getFullPathToLocationForum=function(e,t,o,n,i,a){var s=this;return new Promise((function(u,p){s.getProductForum(e).then((function(s){var p={locationForum:null,elementForum:null,productForum:s},d=s.elementForums.find((function(e){return e.element==t}));null!=d?(p.elementForum=d.forum,p.locationForum=new r.a(o,new c.c(e,t,o,n,i),d.forum.threads.filter((function(e){return e.location==o||a&&e.location==a})),s.authorIdMap,s.moderatorIdMap)):(p.elementForum=new r.a(l.a.adjustElementTitle(t),new c.c(e,t,"",n,i),[],s.authorIdMap,s.moderatorIdMap),p.locationForum=new r.a(o,new c.c(e,t,o,n,i),[],s.authorIdMap,s.moderatorIdMap)),u(p)})).catch((function(e){return p(e)}))}))},e.prototype.getProductForums=function(e,t){var o=this,r={};return this.sourceApp==s.b.livevideo&&(r.onlyLiveVideos=!l.a.shouldShowLivebooks()),r.onlyLiveVideos||null==e||null==t||(r.startDate=p.a.formatDate(e<t?e:t),r.endDate=p.a.formatDate(e>t?e:t)),new Promise((function(e,t){o.webUtils.ajax(o.webUtils.getAbsoluteBackendUrl("/api/comment/getProductsWithComments"),(function(t){if(t&&t.length){var o=t.map((function(e){return new c.e(e.productId,e.productExternalId,0,e.productSlug,e.productTitle,e.commentCount,0,new Date(e.lastCommentDate),[],e.isLiveBook,e.isLiveVideo)}));o.sort((function(e,t){return e.lastCommentDate>t.lastCommentDate?-1:e.lastCommentDate<t.lastCommentDate?1:0})),e(o)}else e([])}),(function(e){return t(e)}),r,!1,!0)}))},e.prototype.search=function(e,t){var o=this;return new Promise((function(r,n){o.webUtils.ajax(o.webUtils.getAbsoluteBackendUrl("/api/comment/search"),(function(e){var n=o.getProductForumsFromComments(t&&t.productId,t&&t.productExternalId,t&&t.productMeapVersion,t&&t.productTitle,t&&t.productSlug,e,[],[],{},t&&t.isLivebook,t&&t.isLivevideo);r(n.allThreads)}),(function(e){return n(e)}),{query:e,productExternalId:t&&t.productExternalId},!1,!0)}))},e.prototype.getProductForum=function(e){var t=this;return new Promise((function(o,r){t.getProductComments(e).then((function(e){var t=new c.e(e.productId,e.productExternalId,e.productMeapVersion,e.productSlug,e.productTitle,e.numberOfComments,0,e.lastCommentDate,e.elementForums,e.isLiveBook,e.isLiveVideo);t.authorIdMap=e.authorIdMap,t.moderatorIdMap=e.moderatorIdMap,o(t)})).catch((function(e){return r(e)}))}))},e.prototype.getProductComments=function(e){var t=this;return new Promise((function(o,r){t.getRawProductComments(e).then((function(r){t.getProductToc(e,r.isLiveBook,r.isLiveVideo).then((function(n){var i=t.getProductForumsFromComments(r.productId,e,r.productMeapVersion,r.productTitle,r.productSlug,r.comments,r.authorIds,r.moderatorIds,t.buildElementFullNameMapFromToc(n),r.isLiveBook,r.isLiveVideo);o(i)})).catch((function(n){var i=t.getProductForumsFromComments(r.productId,e,r.productMeapVersion,r.productTitle,r.productSlug,r.comments,r.authorIds,r.moderatorIds,{},r.isLiveBook,r.isLiveVideo);o(i)}))})).catch((function(e){return r(e)}))}))},e.prototype.buildElementFullNameMapFromToc=function(e){var t={};if(!e)return t;try{if(e.chapters||e.frontMatter||e.backMatter){var o=e.chapters;if(!o){o=[];for(var r=0,n=e.parts;r<n.length;r++){var i=n[r];o.push.apply(o,i.chapters)}}for(var a=(e.frontMatter||[]).concat(o||[],e.backMatter||[]),s=0,u=a;s<u.length;s++){t[(l=u[s]).shortName]=l.title}}else if(e&&e.length)for(var c=0,p=e;c<p.length;c++){var l;if((l=p[c]).link&&(t[(l.link||"").replace("search/","")]=l.title),l.children&&l.children.length)for(var d=0,h=l.children;d<h.length;d++){var m=h[d];m.link&&(t[(m.link||"").replace("search/","")]=m.title)}}}catch(e){console.log("Error building element full name map")}return t},e.prototype.getRawProductComments=function(e){var t=this;return new Promise((function(o,r){t.webUtils.ajax(t.webUtils.getAbsoluteBackendUrl("/api/comment/getProductComments"),(function(e){return o(e)}),(function(e){return r(e)}),{productExternalId:e},!1,!0)}))},e.prototype.getProductToc=function(e,t,o){return d.a.getProductToc(new u.a(s.c.getConfig(this.sourceApp,this.deploymentType)),e,t,o)},e.prototype.getThreadsFromComments=function(e){var t=[];if(!e||!e.length)return t;var o={},r={};e.sort((function(e,t){return+e.id-+t.id}));for(var a=0,s=e;a<s.length;a++){var u=s[a];if(u.parent){var c=new i.a(u.id,u.text,this.getUser(r,u),u.voteScore,new Date(u.dateCreated),new Date(u.lastUpdated),u.link||"","isSeen"in u?!!u.isSeen:void 0);c.productId=u.productId,c.oldForumId=u.oldForumId;var p=o[u.parent.id];null!=p&&p instanceof n.a&&p.posts.push(c)}else{var l=new n.a(u.id,u.title,u.text,this.getUser(r,u),u.voteScore,new Date(u.dateCreated),new Date(u.lastUpdated),u.link||"",!!u.isEditingSuggestion,[]);t.push(l),l.productId=u.productId,l.element=u.element,l.location=u.location,l.productExternalId=u.productExternalId,l.oldForumId=u.oldForumId,o[l.id]=l}}return t},e.prototype.getProductForumsFromComments=function(e,t,o,a,s,u,d,h,m,f,g){void 0===m&&(m={});var v={productId:e,productExternalId:t,productMeapVersion:o,productTitle:a,productSlug:s,meapVersion:"",numberOfComments:0,lastCommentDate:null,elementLocationsForums:{},authorIdMap:p.a.getMapFromArray(d),moderatorIdMap:p.a.getMapFromArray(h),allThreads:[],elementForums:[],isLiveBook:f,isLiveVideo:g},E={},S={},T={};v.numberOfComments=u.length,u.sort((function(e,t){return+e.id-+t.id}));for(var C=0,y=u;C<y.length;C++){var _=y[C];if(_.parent){var O=new i.a(_.id,_.text,this.getUser(T,_),_.voteScore,new Date(_.dateCreated),new Date(_.lastUpdated),_.link||"",!!_.isSeen,!!_.isEditingSuggestion);O.meapVersion=_.meapVersion,O.productId=_.productId;var R=E[_.parent.id];null!=R&&R instanceof n.a&&R.posts.push(O)}else{var b=new n.a(_.id,_.title,_.text,this.getUser(T,_),_.voteScore,new Date(_.dateCreated),new Date(_.lastUpdated),_.link||"",!!_.isEditingSuggestion,[]);(!v.lastCommentDate||v.lastCommentDate<b.dateCreated)&&(v.lastCommentDate=b.dateCreated),b.productId=_.productId,b.element=_.element,b.location=_.location,b.meapVersion=_.meapVersion,b.oldForumId=_.oldForumId,E[b.id]=b,v.allThreads.push(b);var w=_.oldForumId?"Author Online Forum Legacy Posts":_.element||"General",A=_.location||"",I=_.oldForumId?"":this.extractBaseLink(_.link||"");v.elementLocationsForums[w]||(v.elementLocationsForums[w]={}),S[w]||(S[w]=new c.a(w,m[w]||w,new r.a(l.a.adjustElementTitle(m[w]||w),new c.c(t,w,"",I,o),[],v.authorIdMap,v.moderatorIdMap),new Date(1970))),b.isEditingSuggestion&&(S.Errata||(S.Errata=new c.a("Errata","Errata",new r.a("Errata",new c.c(t,"Errata","",I,o),[],v.authorIdMap,v.moderatorIdMap),new Date(1970))),S.Errata.forum.threads.push(b)),v.elementLocationsForums[w][A]||(v.elementLocationsForums[w][A]=new r.a(A,new c.c(t,w,A,I,o),[],v.authorIdMap,v.moderatorIdMap)),v.elementLocationsForums[w][A].threads.push(b),S[w].forum.threads.push(b)}}S.General||(S.General=new c.a("General","General",new r.a("General",new c.c(t,"","","",""),[],v.authorIdMap,v.moderatorIdMap),new Date(1970))),S.Errata?S.Errata.keepUniqueThreads():S.Errata=new c.a("Errata","Errata",new r.a("Errata",new c.c(t,"Errata","","",""),[],v.authorIdMap,v.moderatorIdMap),new Date(1970));var k=function(e){var t=S[e];if(t&&t.forum.threads){for(var o=t.lastCommentDate,r=0,n=t.forum.threads;r<n.length;r++){var i=n[r];i.dateCreated>o&&(o=i.dateCreated),null!=i.posts&&1==i.posts.length&&i.posts[0].dateCreated>o&&(o=i.posts[0].dateCreated),i.posts.sort((function(e,t){return e.dateCreated>o&&(o=e.dateCreated),t.dateCreated>o&&(o=t.dateCreated),e.dateCreated>t.dateCreated?1:e.dateCreated<t.dateCreated?-1:0}))}t.lastCommentDate=o}};for(var w in S)k(w);return v.elementForums=p.a.getArrayFromMap(S),v},e.prototype.extractBaseLink=function(e){return(e||"").replace(/\/comment-[0-9]+/i,"")},e.prototype.getUser=function(e,t){return e[t.userId]||(e[t.userId]=new a.a(t.userId,t.userFirstName+" "+t.userLastName,t.avatarUrl||"")),e[t.userId]},e.prototype.createThread=function(e){var t=this,o=l.a.getCurrentLocation(),r={productExternalId:o.productExternalId,element:o.element,location:o.location,link:encodeURI(o.baseLink||""),title:e.title,text:e.text};return o.meapVersion&&"0"!=o.meapVersion&&(r.meapVersion=o.meapVersion),new Promise((function(e,o){t.webUtils.ajax(t.webUtils.getAbsoluteBackendUrl("/api/comment/create"),(function(t){t.success?(null==t.comment&&o("Couldn't create comment"),e({id:t.comment.id,link:t.comment.link})):o(t.reason)}),(function(e){return o(e)}),r,!1,!0)}))},e.prototype.createPost=function(e,t){var o=this,r=l.a.getCurrentLocation(),n={productId:e.productId||"",productExternalId:e.productExternalId||r&&r.productExternalId,element:e.element||r&&r.element,location:e.location||r&&r.location,title:"",text:t.text,link:this.removeCommentIdSegment(e.link)||r&&r.baseLink||"",parent:e.id},i=e.meapVersion||r&&r.meapVersion;return i&&"0"!=i&&(n.meapVersion=i),new Promise((function(e,t){o.webUtils.ajax(o.webUtils.getAbsoluteBackendUrl("/api/comment/create"),(function(o){o.success?(null==o.comment&&t("Couldn't create comment"),e({id:o.comment.id,link:o.comment.link})):t(o.reason)}),(function(e){return t(e)}),n,!1,!0)}))},e.prototype.deletePost=function(e){var t=this;return new Promise((function(o,r){t.webUtils.ajax(t.webUtils.getAbsoluteBackendUrl("/api/comment/delete"),(function(e){e&&e.success?o():r("error when deleting post")}),(function(e){return r(e)}),{id:e.id},!1,!0)}))},e.prototype.saveEditedPost=function(e){var t=this;return new Promise((function(o,r){t.webUtils.ajax(t.webUtils.getAbsoluteBackendUrl("/api/comment/update"),(function(e){e&&e.success?o():r("error when updating post")}),(function(e){return r(e)}),{id:e.id,text:e.text,title:e.title},!1,!0)}))},e.prototype.votePost=function(e,t,o){var r=this;return new Promise((function(e,n){r.webUtils.ajax(r.webUtils.getAbsoluteBackendUrl("/api/comment/vote"),(function(t){return e(t)}),(function(e){return n(e)}),{id:t.id,vote:o>0?1:-1},!1,!0)}))},e.prototype.revokeVote=function(e,t){var o=this;return new Promise((function(e,r){o.webUtils.ajax(o.webUtils.getAbsoluteBackendUrl("/api/comment/revokeVote"),(function(t){return e(t)}),(function(e){return r(e)}),{id:t.id},!1,!0)}))},e.prototype.toggleEditSuggestion=function(e,t,o){var r=this;return void 0===o&&(o=void 0),new Promise((function(e,n){r.webUtils.ajax(r.webUtils.getAbsoluteBackendUrl("/api/comment/toggleEditingSuggestion"),(function(t){return e(t&&t.isEditingSuggestion)}),(function(e){return n(e)}),{id:t,isEditingSuggestion:o},!1,!0)}))},e.prototype.toggleSpam=function(e,t,o){var r=this;return new Promise((function(e,n){r.webUtils.ajax(r.webUtils.getAbsoluteBackendUrl("/api/comment/toggleSpam"),(function(t){return e(t)}),(function(e){return n(e)}),{id:t,isSpam:o},!1,!0)}))},e.prototype.clearSpamFlags=function(e){var t=this;return new Promise((function(o,r){t.webUtils.ajax(t.webUtils.getAbsoluteBackendUrl("/api/comment/clearSpamFlags"),(function(e){return o()}),(function(e){return r(e)}),{commentId:e},!1,!0)}))},e.prototype.getVotes=function(e){var t=this;return new Promise((function(o,r){t.webUtils.ajax(t.webUtils.getAbsoluteBackendUrl("/api/comment/getVotes"),(function(e){return o(e)}),(function(e){return r(e)}),{userId:e},!1,!0)}))},e.prototype.getUserSpamFlags=function(e){var t=this;return new Promise((function(o,r){t.webUtils.ajax(t.webUtils.getAbsoluteBackendUrl("/api/comment/getUserSpamFlags"),(function(e){return o(e)}),(function(e){return r(e)}),{userId:e},!1,!0)}))},e.prototype.getUsersCommentInfo=function(){var e=this;return new Promise((function(t,o){e.webUtils.ajax(e.webUtils.getAbsoluteBackendUrl("/api/comment/getUsersCommentInfo"),(function(e){return t(e)}),(function(e){return o(e)}),{},!1,!0)}))},e.prototype.removeCommentIdSegment=function(e){if(!e)return e;var t=e.indexOf("/comment-");return-1!=t?e.substr(0,t):e},e}();t.a=h},933:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var r=o(588),n=o(457),i=o(367),a=o(28);function s(e){return function(t){return function(o){var s,u;o.type==r.a.CLEAR_NOTIFICATIONS&&(s=e.getState(),(u=i.a.getAllThreads((s.notificationStores||[]).map((function(e){return e.getState().forum}))).map((function(e){return e.id}))).length&&n.a.getProvider().markAsSeen(u));var c=t(o);switch(o.type){case r.a.CLEAR_SEARCH:var p=document.querySelector(".forum-header-search-input");p&&(p.value="");break;case r.a.SHOW_COMMENT:!function(e){try{var t=document.querySelector("[data-comment-id='"+e+"'] .user-comment-text-container");if(null!=t){if(i.a.getSourceApp()==a.b.livevideo&&null!=window.jQuery){var o=window.jQuery(".social-scrollable-container");o.animate({scrollTop:o.scrollTop()+window.jQuery(t).offset().top},1e3)}else t.scrollIntoView();t.classList.add("emphasized"),setTimeout((function(){t.classList.remove("emphasized")}),3e3)}}catch(e){}}(o.commentId)}return c}}}},936:function(e,t,o){"use strict";var r,n=o(357),i=o(363),a=(o(429),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=function(e){function t(t){var o=e.call(this,t)||this;return o.handleActionClicked=o.handleActionClicked.bind(o),o}return a(t,e),t.prototype.render=function(){var e=this;return n.createElement(i.b,{title:"email notifications",isOpen:this.props.isShown,onClose:this.props.onClose,theme:i.a.standard,onActionClicked:this.handleActionClicked,onCancelationClicked:this.props.onClose,actionMessageHTML:"save"},n.createElement("form",{ref:function(t){return e.root=t},className:"social-email-notifications-form"},n.createElement("label",null,n.createElement("input",{type:"checkbox"}),n.createElement("span",null,"email me when someone replies to my comment"))))},t.prototype.handleActionClicked=function(){this.props.onAccept&&this.props.onAccept(this.root.querySelector("input").checked)},t}(n.Component);t.a=s},937:function(e,t,o){"use strict";var r,n=o(357),i=o(363),a=(o(429),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.render=function(){return n.createElement(i.b,{title:"Code of Conduct",isOpen:this.props.isShown,onClose:this.props.onClose,theme:i.a.standard,onActionClicked:this.props.onClose,actionMessageHTML:"ok"},n.createElement("p",null,"The Manning forums are a place for readers and computer scientists to engage in technological discussions, specifically as they relate to the content we publish. We expect users to treat each other with respect and to make meaningful contributions to these discussions."),n.createElement("p",null,"Advertising by anyone other than Manning or our authors is strictly prohibited on our forums. Any advertisements for goods or services, including training or seminars, will be treated as spam."),n.createElement("p",null,"We reserve the right to moderate or remove content that we deem inappropriate or to ban or delete users who, at our sole discretion, we determine to be abusive or not conducive to an engaging and respectful environment."))},t}(n.Component);t.a=s}}]);
//# sourceMappingURL=vbook-ui~discussionModule.chunk.js.map?72130d69e3a149728f25