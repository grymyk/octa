(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1192:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,'#demo-container .search-demo-route-link{display:inline-block;margin:0 5px;padding:0 2px}#demo-container .search-demo-route-link.selected{background-color:blue;color:white}.clearfix::after{content:" ";display:block;height:0;clear:both}.search-tree-toolip{background-color:#666666 !important;opacity:1 !important}.search-tree-toolip.place-top:after{border-top-color:#666666 !important}.search-tree-toolip.place-bottom:after{border-bottom-color:#666666 !important}.search-modal{font-size:16px !important;font-family:Lato,Arial,"Helvetica Neue",Helvetica,Roboto,Arial,sans-serif !important;line-height:1.2;position:relative;height:100%;padding:0;background-color:#666;color:#fff}.search-modal ul,.search-modal ol,.search-modal dl{font-size:inherit;line-height:1.2}.search-modal *,.search-modal *:before,.search-modal *:after{-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial}.search-modal.ReactModal__Content{transform:initial}.search-modal-container{position:relative;height:100%}.search-modal-container .search-searching-suggestions-label{padding:1em;font-size:75%;display:block;color:#c2c2c2}.search-modal-container .search-wrapper{height:100%}.search-modal-container .search-result{font-weight:normal;background-color:#fc0;margin:-0.1em;padding:0.1em 0.2em}.search-modal-container .react-toggle{margin-left:10px}.search-modal-container .product-title-breadcrumb{font-style:italic;color:inherit}.search-modal-container .element-title-breadcrumb,.search-modal-container .sub-element-title-breadcrumb{color:inherit}.search-modal-container .product-cover-root{position:relative;display:inline-block}.search-modal-container .product-cover-root .liveaudio-corner{position:absolute;bottom:0;right:0;width:40%}.search-modal-container .product-cover-root .liveaudio-corner svg{vertical-align:bottom}.search-modal-container .search-category-selector-form{margin:1em 2em;text-align:center;display:none;clear:both}@media screen and (max-width: 700px){.search-modal-container .search-category-selector-form{display:none}}.search-modal-container .search-category-selector-form label{display:inline-flex;align-items:center;cursor:pointer;user-select:none;margin-right:1em;font-size:inherit;color:inherit;font-weight:normal;line-height:1;margin-bottom:0}.search-modal-container .search-category-selector-form label:first-of-type{margin-right:3em}.search-modal-container .search-category-selector-form input{cursor:pointer;margin:3px 5px 3px 3px}.search-modal-container .search-category-selector-form[disabled] label{color:#989797}.search-modal-container .search-category-selector-form .not-checked{opacity:0.6}.search-modal-container .search-toolbar-wrapper{padding:2.2em 2.2em 0 2.2em;background-color:#666}@media screen and (max-width: 500px){.search-modal-container .search-toolbar-wrapper{padding:2.2em 0.5em 0 0.5em}}.search-modal-container .search-toolbar-wrapper .search-location-toggle{font-size:small;user-select:none;margin:0 0 0 1.5em}.search-modal-container .search-toolbar-wrapper .search-location-toggle-small{display:none;margin:0 0 0 auto;white-space:pre}.search-modal-container .search-toolbar-wrapper .search-location-toggle-small .search-location-toggle-item{line-height:1.2;display:inline-block}.search-modal-container .search-toolbar-wrapper .search-location-toggle-small .search-location-toggle-item:first-child{margin-right:1em}@media screen and (max-width: 700px){.search-modal-container .search-toolbar-wrapper .search-location-toggle-medium-large{display:none}}@media screen and (max-width: 700px){.search-modal-container .search-toolbar-wrapper .search-location-toggle-small{display:block}}.search-modal-container .search-toolbar-wrapper .search-location-toggle-item{color:inherit;cursor:pointer;display:block;text-align:right;line-height:1.6;white-space:pre}.search-modal-container .search-toolbar-wrapper .search-location-toggle-item.selected{text-decoration:underline;font-weight:bolder}.search-modal-container .search-toolbar-wrapper .search-location-toggle-item:not(.selected){color:#c2c2c2}.search-modal-container .search-toolbar-wrapper .search-location-toggle-item:hover{text-decoration:underline}.search-modal-container .search-toolbar-wrapper .search-location-toggle-item img{width:16px;height:15px;margin-left:5px}.search-modal-container .search-toolbar-bottom-container{display:flex;align-items:center;height:2.2em;margin:0 3.85em 0 3.3em;user-select:none}.search-modal-container .search-toolbar-bottom-container.is-empty-toolbar-bottom-container{height:0}.search-modal-container .search-toolbar-bottom-container .search-link{text-decoration:underline;cursor:pointer;font-weight:bold}.search-modal-container .search-toolbar-bottom-container .search-query-label{font-weight:bold}.search-modal-container .search-toolbar-bottom-container .search-toolbar-message{line-height:2.2em;text-overflow:ellipsis;white-space:pre;white-space:nowrap;overflow:hidden;color:#c2c2c2;padding-right:1em;font-size:80%}.search-modal-container .search-toolbar-bottom-container .search-toolbar-back-arrow{font-size:120%;margin-right:0.5em;cursor:pointer}@media screen and (max-width: 700px){.search-modal-container .search-toolbar-bottom-container{margin-left:3em}.search-modal-container .search-toolbar-bottom-container .search-toolbar-message{font-size:70%}}@media screen and (max-width: 500px){.search-modal-container .search-toolbar-bottom-container{margin-right:2.15em}}@media screen and (max-width: 400px){.search-modal-container .search-toolbar-bottom-container .search-toolbar-message.is-in-product{display:none}}.search-modal-container .search-toolbar{display:flex;position:relative;align-items:center;font-size:1.5em}.search-modal-container .search-toolbar .search-toolbar-button{font-size:1em;outline:none;color:#989797;cursor:pointer}.search-modal-container .search-toolbar .close-button{color:#989797;font-size:1.3em;margin-left:1.18em}@media screen and (max-width: 500px){.search-modal-container .search-toolbar .close-button{margin-left:0.3em}}.search-modal-container .search-toolbar .close-button:hover{color:white}.search-modal-container .search-toolbar .search-button{color:#fff}.search-modal-container .search-toolbar .search-button:hover{color:#f2f2f2}.search-modal-container .search-toolbar .search-button:active{color:#e6e6e6}.search-modal-container .search-toolbar .search-input-clear{cursor:pointer;margin-left:-1.5em;font-size:70%;opacity:0}.search-modal-container .search-toolbar .search-input-clear.clear-input-shown{opacity:1}@media screen and (max-width: 500px){.search-modal-container .search-toolbar .search-input-clear{margin-left:-1.2em}}.search-modal-container .search-input-autocompleted{position:absolute;user-select:none;height:50px;line-height:50px;font-size:1.5em;font-weight:300;padding:0 1em 0 0.3em;color:#c2c2c2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;left:0;top:0}@media screen and (max-width: 500px){.search-modal-container .search-input-autocompleted{display:none !important}}.search-modal-container .search-input{outline:none;border:0;border-radius:2px;height:50px;color:#fff;font-family:Lato,Arial,"Helvetica Neue",Helvetica,Roboto,Arial,sans-serif;padding:0 1em 0 0.3em;margin:0 1em 0 0.3em;margin-right:0;width:100%;font-size:1.5em;background-color:#525252}.search-modal-container .search-input.has-characters{font-weight:700}@media screen and (max-width: 500px){.search-modal-container .search-input{font-size:1em;height:35px}}.search-modal-container .search-input::-webkit-input-placeholder{font-style:normal;color:#c2c2c2}.search-modal-container .search-input::-moz-placeholder{font-style:normal;color:#c2c2c2}.search-modal-container .search-input:-ms-input-placeholder{font-style:normal;color:#c2c2c2}.search-modal-container .search-input:-moz-placeholder{font-style:normal;color:#c2c2c2}.search-modal-container .search-input::placeholder{font-style:normal;color:#c2c2c2}.search-modal-container .search-input::-ms-clear{display:none}.search-container{position:relative;overflow:hidden;height:100%}.search-container .search-error-container{color:#b70b0b}.search-container .search-notifications-container{position:absolute;bottom:15px;left:15px;padding:10px;background-color:gray;border-radius:3px;font-size:12px;display:none}.search-container .search-results-content-container{overflow:auto;position:relative;color:#fff;height:100%}.search-container .search-results-content-container .loading-results-container{margin-right:2.3em;width:auto}.search-container .search-results-content-container img{display:inline-block;vertical-align:middle;max-width:100%;height:auto}.search-container .search-results-content-container::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:7px}.search-container .search-results-content-container::-webkit-scrollbar-thumb{border-radius:4px;background-color:gray;-webkit-box-shadow:0 0 1px rgba(255,255,255,0.8)}.results-list-component-container{transition:transform 0.3s ease-in-out, opacity 0.3s ease-in-out;transform:translateX(100%);opacity:0;position:absolute;top:0;left:0;right:0;overflow-x:none;overflow-y:auto;background-color:#F0F0F0;color:black}.results-list-component-container.shown{transform:translateX(0);opacity:1}.results-list-component-container .result-item-book-element-link+.result-item-book-element-link:before{content:"·";padding-right:0.5em;padding-left:0.5em}.results-list-component-container .results-list-container{margin:0;list-style-type:none;padding-left:0}.results-list-component-container .results-list-container .livebook-label,.results-list-component-container .results-list-container .livevideo-label,.results-list-component-container .results-list-container .product-label{display:inline-block;padding:0.1em 0.4em;margin-right:0.4em;color:white;font-size:70%;vertical-align:middle;user-select:none;margin-top:-0.75em}.results-list-component-container .results-list-container .livebook-label{background-color:#10509f}.results-list-component-container .results-list-container .livevideo-label{background-color:#5facc0}.results-list-component-container .results-list-container .product-label{background-color:#555}.results-list-component-container .results-list-container .result-item{padding:0.8em 4.8em;cursor:pointer}.results-list-component-container .results-list-container .result-item a{color:black;text-decoration:none}.results-list-component-container .results-list-container .result-item:first-of-type{padding-top:1.9em}.results-list-component-container .results-list-container .result-item.selected,.results-list-component-container .results-list-container .result-item:hover{background-color:#ffe680}.results-list-component-container .results-list-container .result-item.selected .result-item-book-element-link,.results-list-component-container .results-list-container .result-item:hover .result-item-book-element-link{color:#997a00}.results-list-component-container .results-list-container .result-item .result-item-text-link{display:block;line-height:1.5;max-width:700px;font-weight:300}.results-list-component-container .results-list-container .result-item .result-item-text-link i{font-family:inherit;font-style:italic}.results-list-component-container .results-list-container .result-item .result-item-book-element-link{font-size:small;display:inline-block;color:#525252;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.results-list-component-container .results-list-container .result-item .result-item-book-element-link:last-of-type{margin-right:0}.results-list-component-container .results-list-container .result-item .result-item-book-element-link .search-result{background-color:initial;font-weight:bolder;margin:initial;padding:initial}@media screen and (max-width: 500px){.results-list-component-container .results-list-container .result-item{padding:0.5em 1em 0.5em 1em;font-size:90%}}.search-tree{overflow:visible;white-space:nowrap}@media screen and (max-width: 500px){.search-tree{font-size:12px}}.search-tree .links-container{position:relative;display:inline-block;vertical-align:top;width:30px}.search-tree .links-container .central-line{position:absolute;width:4px;left:15px;background-color:#fc0}.search-tree .links-container .dashed-line{position:absolute;width:4px;height:20px;left:15px;background-color:#848484;background:linear-gradient(to bottom, #fc0, #fc0 50%, #848484 50%, #848484);background-size:100% 5px}.search-tree .links-container .connector{position:absolute;transform:translateY(-50%);height:4px;width:15px;background-color:#fc0}.search-tree .search-tree-column{position:relative;display:inline-block;vertical-align:top;width:calc(33% - 20px);font-size:90%}@media screen and (max-width: 650px){.search-tree .search-tree-column{width:calc(50% - 30px)}}@media screen and (max-width: 500px){.search-tree .search-tree-column{width:100%}}.search-tree .search-tree-column.products-tree-column ul li{padding-left:0}.search-tree .search-tree-column.sub-elements-tree-column{width:calc(33% - 15px)}.search-tree .search-tree-column:first-of-type ul li:first-of-type{margin-top:1.8em}.search-tree .search-tree-column:first-of-type.elements-tree-column ul li:first-of-type{margin-top:1.3em}.search-tree .search-tree-column.elements-tree-column .search-tree-item-title-container,.search-tree .search-tree-column.sub-elements-tree-column .search-tree-item-title-container{font-weight:300}.search-tree .search-tree-column ul{list-style-type:none;margin:0;padding:0;white-space:normal}.search-tree .search-tree-column ul .search-tree-item{display:flex}.search-tree .search-tree-column ul li{position:relative;padding:0.5em 2em 0.5em 0.5em;cursor:pointer;transition:transform 0.3s}.search-tree .search-tree-column ul li:not(:first-child){margin-top:0.1em}.search-tree .search-tree-column ul li .open-subtree-container{padding-bottom:5px}.search-tree .search-tree-column ul li .search-tree-item-title-container,.search-tree .search-tree-column ul li .open-subtree-container,.search-tree .search-tree-column ul li .cover-container{align-self:center}.search-tree .search-tree-column ul li .search-tree-item-title-container{display:flex}.search-tree .search-tree-column ul li .search-tree-item-title-container.has-most-results{font-weight:bold}.search-tree .search-tree-column ul li .cover-container{vertical-align:middle}.search-tree .search-tree-column ul li .cover-container img{width:40px;max-width:initial;display:inline-block;margin-right:0.5em;border:1px solid transparent;cursor:pointer}.search-tree .search-tree-column ul li .cover-container img:hover{border-color:#fc0}.search-tree .search-tree-column ul li .cover-container .liveaudio-corner{right:calc(0.5em + 1px);bottom:1px}@media screen and (max-width: 700px){.search-tree .search-tree-column ul li .cover-container{display:none}}@media screen and (max-width: 500px){.search-tree .search-tree-column ul li .cover-container{display:table-cell}}.search-tree .search-tree-column ul li .element-index{white-space:nowrap}.search-tree .search-tree-column ul li .search-tree-item-title-container:hover{color:#fc0}.search-tree .search-tree-column ul li .title{display:inline-block}.search-tree .search-tree-column ul li .title.livevideo-product:before,.search-tree .search-tree-column ul li .title.livebook-product:before{font-family:FontAwesome;color:inherit;background:unset;font-size:unset;padding:unset;vertical-align:middle;bottom:0;margin-right:0.5em}.search-tree .search-tree-column ul li .title.livevideo-product:after,.search-tree .search-tree-column ul li .title.livebook-product:after{font-family:FontAwesome;content:"\\f08e";color:inherit;background:unset !important;font-size:85%;top:1px;padding:unset;margin-left:5px;vertical-align:middle;bottom:0}.search-tree .search-tree-column ul li .title.livevideo-product:before{content:"\\f03d"}.search-tree .search-tree-column ul li .title.livebook-product:before{content:"\\f02d"}.search-tree .search-tree-column ul li .title:hover{color:#fc0}.search-tree .search-tree-column ul li .title:hover:after{background-color:#fc0}.search-tree .search-tree-column ul li.selected .cover-container img{border-color:#fc0}.search-tree .search-tree-column ul li.selected .title{color:#fc0}.search-tree .search-tree-column ul li.selected .title:after{background-color:#fc0}.search-tree .search-tree-column ul li.selected .element-index{color:#fc0}.search-tree .search-tree-column ul li:hover .open-subtree-icon{color:white}.search-tree .search-tree-column ul li:hover .open-subtree-icon:hover{color:#fc0}.search-tree .search-tree-column ul li.selected .open-subtree-icon{color:#fc0}.search-tree .search-tree-column ul li.product-tree-item{font-style:italic}.search-tree .search-tree-column .search-tree-column-title{text-align:center}.search-tree .search-tree-column .open-subtree-icon{cursor:pointer;padding:0.5em;transition:transform 0.2s}.search-tree .search-tree-column .open-subtree-icon:hover{transform:scale(1.2);color:#fc0}.search-tree .search-tree-column .empty-subtree-icon{padding:0.5em}.search-autocomplete-container{box-sizing:border-box;position:absolute;overflow-x:hidden;overflow-y:auto;width:100%;padding:0 4.8em 0 5.5em}@media screen and (max-width: 500px){.search-autocomplete-container{font-size:80%;padding:0 3.2em 0 4.2em;display:flex;flex-direction:column}}.search-autocomplete-container .autocomplete-separator{display:none}@media screen and (max-width: 500px){.search-autocomplete-container .autocomplete-separator{display:block;border-bottom:2px solid #848484;margin:0 -2.4em 0 -3.3em}.search-autocomplete-container .autocomplete-separator.middle-separator{order:2}}.search-autocomplete-container .autocomplete-section .autocomplete-result-item.selected .autosuggestion-title,.search-autocomplete-container .autocomplete-section .autocomplete-result-item:hover .autosuggestion-title{color:#fc0}.search-autocomplete-container .autocomplete-section .autocomplete-result-item.selected .autosuggestion-title strong,.search-autocomplete-container .autocomplete-section .autocomplete-result-item:hover .autosuggestion-title strong{color:#fc0}.search-autocomplete-container .autocomplete-section{display:inline-block;vertical-align:top;width:49%;box-sizing:border-box;padding:0 0.5em 1.5em 0}.search-autocomplete-container .autocomplete-section .autocomplete-section-title{text-transform:uppercase;font-size:80%;color:#c2c2c2;margin:0.5em 0}@media screen and (max-width: 500px){.search-autocomplete-container .autocomplete-section{width:100%;max-height:calc(50%);overflow-y:scroll}}.search-autocomplete-container .autocomplete-section a{text-decoration:none}.search-autocomplete-container .autocomplete-section .autocomplete-results{list-style-type:none;margin:0;padding:0}.search-autocomplete-container .autocomplete-section .autocomplete-result-item{cursor:pointer;clear:both;margin:0 0 0.5em 0;line-height:1.5}.search-autocomplete-container .autocomplete-section .autocomplete-result-item p{margin:0}.search-autocomplete-container .autocomplete-section .autocomplete-result-item p label{padding:0}.search-autocomplete-container .autocomplete-section .autocomplete-result-item label{cursor:pointer}.search-autocomplete-container .autocomplete-section .autocomplete-result-item strong{font-weight:700}.search-autocomplete-container .autocomplete-section .first-level+.indented,.search-autocomplete-container .autocomplete-section .indented+.indented{margin-bottom:0.5em}.search-autocomplete-container .autocomplete-section .first-level+.indented{margin-top:-0.75em}.search-autocomplete-container .autocomplete-section .indented.last-child{margin-bottom:1em}.search-autocomplete-container .autocomplete-section .autocomplete-result-item .autosuggestion-title{display:inline-block;color:#c2c2c2}.search-autocomplete-container .autocomplete-section .autocomplete-result-item .autosuggestion-title strong{color:#fff}.search-autocomplete-container .autocomplete-product-section{float:right}.search-autocomplete-container .autocomplete-product-section .product-cover{width:60px;float:left;margin:0 1em 0 0;max-width:unset}.search-autocomplete-container .autocomplete-product-section .product-cover-root .liveaudio-corner{right:1em}.search-autocomplete-container .autocomplete-product-section label{display:block}.search-autocomplete-container .autocomplete-product-section .title-label{font-style:italic;font-size:inherit;margin-top:-0.3em}.search-autocomplete-container .autocomplete-product-section .title-label .autosuggestion-title{color:#fff}@media screen and (max-width: 500px){.search-autocomplete-container .autocomplete-product-section{float:left;order:1;padding-bottom:0}.search-autocomplete-container .autocomplete-product-section .product-cover{display:none}.search-autocomplete-container .autocomplete-product-section .title-label{margin-top:0}}.search-autocomplete-container .autocomplete-product-section .authors-date-label{color:#c2c2c2;font-size:0.75em}@media screen and (max-width: 500px){.search-autocomplete-container .autocomplete-product-section .authors-date-label .authors{display:none}}.search-autocomplete-container .autocomplete-product-section .authors-date-label .authors i{font-family:inherit;font-style:italic}.search-autocomplete-container .autocomplete-product-section .autocomplete-result-item{display:flex;align-items:center}.search-autocomplete-container .autocomplete-product-section .autocomplete-result-item.selected,.search-autocomplete-container .autocomplete-product-section .autocomplete-result-item:hover{border-left-color:#fc0}.search-autocomplete-container .autocomplete-product-section .autocomplete-result-item.selected .autosuggestion-title,.search-autocomplete-container .autocomplete-product-section .autocomplete-result-item:hover .autosuggestion-title{border-bottom-color:transparent}@media screen and (max-width: 500px){.search-autocomplete-container .autocomplete-product-section .autocomplete-result-item{padding-left:0em}.search-autocomplete-container .autocomplete-product-section .autocomplete-result-item:last-of-type{margin-bottom:0.2em}}.search-autocomplete-container .autocomplete-product-section .more-less-suggestions{margin-left:5.3em}@media screen and (max-width: 500px){.search-autocomplete-container .autocomplete-product-section .more-less-suggestions{margin-left:0}}.search-autocomplete-container .autocomplete-concepts-section{float:left}.search-autocomplete-container .autocomplete-concepts-section .concept-content-title-link{color:#989797;margin-left:0.5em}.search-autocomplete-container .autocomplete-concepts-section .concept-content-title-link a{text-decoration:none;cursor:pointer}.search-autocomplete-container .autocomplete-concepts-section .concept-content-title-link a:hover{text-decoration:underline}.search-autocomplete-container .autocomplete-concepts-section .concept-content-title-link a:visited{color:inherit}.search-autocomplete-container .autocomplete-concepts-section .concept-title{font-weight:300;font-size:inherit}.search-autocomplete-container .autocomplete-concepts-section .autosuggestion-title{margin-right:1em}@media screen and (max-width: 500px){.search-autocomplete-container .autocomplete-concepts-section{order:3;padding-top:0.5em}}.search-autocomplete-container .more-less-suggestions,.search-autocomplete-container .full-text-search-label{color:#989797;font-style:italic;cursor:pointer;user-select:none;display:inline-block;margin-top:5px}.search-autocomplete-container .more-less-suggestions.selected,.search-autocomplete-container .more-less-suggestions:hover,.search-autocomplete-container .full-text-search-label.selected,.search-autocomplete-container .full-text-search-label:hover{color:#fc0}@media screen and (max-width: 700px){.search-autocomplete-container .more-less-suggestions .description-label,.search-autocomplete-container .full-text-search-label .description-label{display:none}}@media screen and (max-width: 500px){.search-autocomplete-container .more-less-suggestions .description-label,.search-autocomplete-container .full-text-search-label .description-label{display:inline}}.search-autocomplete-container .item-staging-animation-enter{opacity:0;transform:translateX(-20px)}.search-autocomplete-container .item-staging-animation-enter.item-staging-animation-enter-active{opacity:1;transform:translateX(0px);transition:opacity .2s ease-in,transform .2s ease-in}.search-autocomplete-container .item-staging-animation-leave{opacity:1;transform:translateX(0px)}.search-autocomplete-container .item-staging-animation-leave.item-staging-animation-leave-active{opacity:0;transform:translateX(20px);transition:opacity .2s ease-in-out,transform .2s ease-in-out}.search-autocomplete-container .product-suggestions-container{height:100%;position:relative}.search-autocomplete-container .product-suggestions-container h4{margin-top:0;color:inherit;line-height:1.2;font-size:inherit;font-family:inherit}.search-autocomplete-container .product-suggestions-container .search-description-container{flex-grow:3;display:flex;justify-content:center;align-items:stretch;height:100%;box-sizing:border-box;padding-bottom:2em}.search-autocomplete-container .product-suggestions-container .search-description-container>div{flex-grow:1;flex-basis:50%}.search-autocomplete-container .product-suggestions-container .search-description-container a,.search-autocomplete-container .product-suggestions-container .search-description-container a:visited{color:inherit;text-decoration:underline}.search-autocomplete-container .product-suggestions-container .search-description-container .explanatory-text{padding:20px;padding-left:40px;font-size:3vh;align-self:center;opacity:1;transition:opacity .3s}.search-autocomplete-container .product-suggestions-container .search-description-container .explanatory-text .actual-text{padding-right:100px}@media screen and (max-width: 1000px){.search-autocomplete-container .product-suggestions-container .search-description-container .explanatory-text .actual-text{padding-right:0}}@media screen and (max-width: 900px){.search-autocomplete-container .product-suggestions-container .search-description-container .explanatory-text{font-size:2.5vh}.search-autocomplete-container .product-suggestions-container .search-description-container .explanatory-text .actual-text{padding-right:0}}@media screen and (max-width: 700px){.search-autocomplete-container .product-suggestions-container .search-description-container .explanatory-text{font-size:2vh;padding-left:20px}}@media screen and (max-width: 500px){.search-autocomplete-container .product-suggestions-container .search-description-container .explanatory-text{padding:0}}@media screen and (max-height: 400px){.search-autocomplete-container .product-suggestions-container .search-description-container .explanatory-text{font-size:12px}}.search-autocomplete-container .product-suggestions-container .book-cover{position:relative;left:0;top:0;background-size:contain;background-repeat:no-repeat;background-position:right center;transition:left 1s ease-in-out, background-position 1s ease-in-out}@media screen and (max-width: 650px){.search-autocomplete-container .product-suggestions-container .book-cover{display:none}}.search-autocomplete-container .product-suggestions-container .product-concepts-container{position:absolute;top:0;opacity:0;flex:1;transition:opacity .3s ease-in-out;max-width:50%}@media screen and (max-width: 500px){.search-autocomplete-container .product-suggestions-container .product-concepts-container{max-width:100%}}.search-autocomplete-container .product-suggestions-container .autocomplete-concepts-section{width:100%}.search-autocomplete-container .product-suggestions-container .product-concepts-container.delay-animation,.search-autocomplete-container .product-suggestions-container .explanatory-text.delay-animation{transition-delay:.5s}.search-autocomplete-container .product-suggestions-container.has-suggestions .book-cover{left:50%;background-position:right center}@media screen and (max-width: 700px){.search-autocomplete-container .product-suggestions-container.has-suggestions .book-cover{background-position:right top}}.search-autocomplete-container .product-suggestions-container.has-suggestions .product-concepts-container{opacity:1}.search-autocomplete-container .product-suggestions-container.has-suggestions .explanatory-text{opacity:0}.search-results-container{position:absolute;transition:transform 0.3s ease-in-out;transform:translateX(100%);left:0;right:0;bottom:0;background-color:#848484;padding:0 2.5em 0 4.8em}.search-results-container.shown{transform:translateX(0)}@media screen and (max-width: 500px){.search-results-container{padding:0 0.5em 0.5em 2.8em}}\n',""])},1195:function(e,t,o){var r=o(1196);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},1196:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".cc-search-filters-root{width:220px}.cc-search-filters-group-root .cc-search-filters-group-heading{font-weight:300;font-size:16px;padding:10px 0;border-bottom:solid 2px #369;height:41px}.cc-search-filters-group-root .cc-search-filters-group-heading.cc-search-filters-group-heading-category{border-bottom-color:#369}.cc-search-filters-group-root .cc-search-filters-group-heading.cc-search-filters-group-heading-price{border-bottom-color:#396}.cc-search-filters-group-root .cc-search-filters-group-heading.cc-search-filters-group-heading-product-type{border-bottom-color:#9f0000}.cc-search-filters-group-root .cc-search-filters-group-items-container{max-height:200px;overflow-y:auto}.cc-search-filters-group-root .cc-search-filters-group-item{cursor:pointer;user-select:none;padding:5px 0;display:flex;align-items:center;justify-content:space-between}.cc-search-filters-group-root .cc-search-filters-group-item div{display:flex;align-items:center}.cc-search-filters-group-root .cc-search-filters-group-item input{cursor:pointer;margin-right:0.5em;margin-left:0}.cc-search-filters-group-root .cc-search-filters-group-item:first-child{padding-top:10px}.cc-search-filters-group-root .cc-search-filters-group-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:160px}.cc-search-filters-group-root .cc-search-filters-group-count{margin-left:1em}\n",""])},1197:function(e,t,o){var r=o(1198);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},1198:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".cc-selected-search-filter-root{display:inline-block;padding-left:7px;margin-right:7px;font-size:13px;user-select:none;cursor:pointer;color:white;background-color:#369;border-radius:4px}.cc-selected-search-filter-root.cc-selected-search-filter-root-category{background-color:#369}.cc-selected-search-filter-root.cc-selected-search-filter-root-price{background-color:#396}.cc-selected-search-filter-root.cc-selected-search-filter-root-product{background-color:#9f0000}.cc-selected-search-filter-root .fa{display:inline-block;padding:5px 7px}\n",""])},1199:function(e,t,o){var r=o(1200);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},1200:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".cc-search-shell-root{display:flex;background-color:#fff;color:#222222}@media (max-width: 670px){.cc-search-shell-root .cc-search-shell-left-column{display:none}}.cc-search-shell-root .cc-search-shell-selected-filters-container{margin:0 0 14px 19px}.cc-search-shell-root .cc-search-results-count-label-description,.cc-search-shell-root .cc-search-shell-sort-container-label{font-weight:300}.cc-search-shell-root .cc-search-shell-results-toolbar{margin:0 0 0 19px;display:flex;justify-content:space-between;align-items:center;height:39px}.cc-search-shell-root .cc-search-shell-right-column{flex-grow:1;display:flex;flex-direction:column}.cc-search-shell-root .cc-search-shell-sort-container{user-select:none;display:flex;align-items:baseline}.cc-search-shell-root .cc-search-shell-sort-container select{margin-left:5px}.cc-search-shell-root .form-control{display:block;width:100%;height:35px;padding:6px 12px;font-size:15px;line-height:1.428571429;color:#555555;background-color:#fff;background-image:none;border:none;border-radius:6px;-webkit-box-shadow:none;box-shadow:none;transition:unset;cursor:pointer}.cc-search-shell-root .form-control:focus{border-color:unset;outline:0;-webkit-box-shadow:none;box-shadow:none}\n",""])},1201:function(e,t,o){var r=o(1202);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},1202:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,'.cc-search-results-root .cc-search-result-item{display:inline-flex;text-decoration:none;padding:0 0 19px 19px;width:33.33333%;vertical-align:top;cursor:pointer}.cc-search-results-root .cc-search-result-item .cc-search-result-item-price{margin-top:7px;font-size:90%;color:#3c3c3c;font-weight:400}.cc-search-results-root .cc-search-result-item .cc-search-result-item-date{margin-top:3px;font-size:80%;color:#3c3c3c}@media (max-width: 991px){.cc-search-results-root .cc-search-result-item{width:50%}}@media (max-width: 670px){.cc-search-results-root .cc-search-result-item{width:33.3333%}}@media (max-width: 650px){.cc-search-results-root .cc-search-result-item{width:50%}}@media (max-width: 450px){.cc-search-results-root .cc-search-result-item{display:inline-block;text-align:center;width:33.3333%}}@media (max-width: 400px){.cc-search-results-root .cc-search-result-item{width:50%}}.cc-search-results-root .cc-search-result-item .book-cover{width:100%}.cc-search-results-root .cc-search-result-item .cc-search-result-item-title{text-decoration:none;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;line-height:19px;max-height:38px;-webkit-line-clamp:2;-webkit-box-orient:vertical;hyphens:auto}.cc-search-results-root .cc-search-result-item .cc-search-result-item-cover{position:relative;border:solid thin #ddd;flex-basis:35%}.cc-search-results-root .cc-search-result-item .cc-search-result-item-details{flex-basis:65%;padding-left:9px;font-family:Lato, "Helvetica Neue", Helvetica, Arial, sans-serif;color:initial;font-weight:300;font-size:16px}.cc-search-results-root .cc-search-result-item .cc-search-result-item-original-price{margin-right:0.5em;position:relative;font-weight:300;font-size:90%}.cc-search-results-root .cc-search-result-item .cc-search-result-item-original-price:before{position:absolute;content:"";left:-0.15em;top:calc(50% - 1px);right:-0.15em;border-top:2px solid gray;transform:rotate(-5deg)}.cc-search-results-root .cc-search-results-button-container{display:flex;align-items:center;justify-content:center}.cc-search-results-root .cc-search-results-show-more{display:inline-block;user-select:none;cursor:pointer;background-color:gray;padding:5px 10px;margin-bottom:5px;color:white}.cc-search-results-root .cc-search-results-show-more:hover{background-color:darkgray}\n',""])},1280:function(e,t,o){"use strict";var r,n,s=o(357),i=o(358),a=o(411),c=o(408),l=o(617),u=o(456),p=o(365),h=o(466),d=o(368),m=o(376),g=o(467),f=o(386),S=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),y=function(e){function t(t){return e.call(this,t)||this}return S(t,e),t.prototype.shouldComponentUpdate=function(e){return!0},t.prototype.render=function(){var e=this,t=this.props.isMobileDisplay;return s.createElement("div",{className:i("search-tree-column",this.props.additionalClasses||"",{"contains-last-selected-tree-item":this.props.containsLastSelectedTreeItem,"is-loading":this.props.isLoading})},s.createElement("ul",null,!this.props.isLoading&&this.props.items.filter((function(e){return e.isSpecialOrHasResults()&&e.name!=u.a.PRODUCT_PAGE_KEY})).map((function(o,r){var n=o instanceof h.b,a=o.isLiveProduct()&&!t&&(n?o.hasNonProductPageResults():o.hasChildrenWithResults()),c=o==e.props.selectedItem,l=null==o.children,p=c&&l,m=e.expandWithWhitespaceIfNecessary(o.getDisplayedResultsCount()),S=o.name==u.a.PRODUCT_PAGE_KEY;return s.createElement("li",{"data-last-index":d.a.getLastIndex(o.name),className:i({"search-tree-item":!0,"product-tree-item":n,selected:c}),key:o.id+r},n&&s.createElement("span",{className:"cover-container",onClick:function(t){return e.props.onOpenProductPage&&e.props.onOpenProductPage(o,t.ctrlKey||t.metaKey)},"data-tip":"open product","data-place":e.props.placement==f.a.Dropdown?"right":"bottom","data-effect":"solid","data-class":"search-tree-toolip","data-delay-show":"150"},s.createElement(g.a,{placeholderImage:e.props.productPlaceholderImage,fullImage:o.coverPath,alt:o.name,isLiveaudio:o.isLiveaudio})),s.createElement("span",{className:i("search-tree-item-title-container",{"has-most-results":o.hasMostResults}),onClick:function(t){return e.handleListItemClick(t,o,t.ctrlKey||t.metaKey)},"data-tip":n?"open product":"view results","data-place":"bottom","data-effect":"solid","data-delay-show":"150","data-class":"search-tree-toolip"},!S&&s.createElement("span",{className:"element-index"},e.getElementIndex(o)),s.createElement("span",{className:i("title",{"product-page":S,"livebook-product":S&&o.isLivebook(),"livevideo-product":S&&o.isLivevideo()}),"data-results-count":m},n?d.a.getShortTitle(o.name):d.a.cleanBookElementTitle(o.name))),s.createElement("span",{className:"open-subtree-container"},a&&s.createElement("i",{className:i("fa open-subtree-icon",{"fa-chevron-circle-right":!p,"fa-spinner fa-spin":p}),"aria-hidden":"true",onClick:function(t){return e.handleOpenSubtreeIconClick(t,o)},"data-tip":"open tree","data-place":"bottom","data-effect":"solid","data-class":"search-tree-toolip","data-delay-show":"150"}),!a&&s.createElement("i",{className:"empty-subtree-icon fa fa-fw"}," ")))}))),!p.a.isTouch&&s.createElement(m,null))},t.prototype.getElementIndex=function(e){var t=d.a.extractBookElementIndex(e.name);return""!=t&&(t+=" "),e instanceof h.a?(e.name.startsWith("Chapter")||e.name.startsWith("Unit")||e.name.startsWith("Lesson"))&&!this.props.isMobileDisplay?"Ch "+t:e.name.startsWith("Appendix")&&!this.props.isMobileDisplay?(""==t&&(t=" "),"App "+t):t:t},t.prototype.handleListItemClick=function(e,t,o){var r=t.name==u.a.PRODUCT_PAGE_KEY;t instanceof h.b||r?this.props.onOpenProductPage&&this.props.onOpenProductPage(t,o):this.props.onShowResultsRequested&&this.props.onShowResultsRequested(t)},t.prototype.handleOpenSubtreeIconClick=function(e,t){e.preventDefault(),e.stopPropagation(),this.props.onOpenSubtreeRequested&&this.props.onOpenSubtreeRequested(t)},t.prototype.expandWithWhitespaceIfNecessary=function(e){return e>=10?e:" "+e+" "},t}(s.Component),v=o(618),b=o(28),w=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();!function(e){e[e.treeProduct=0]="treeProduct",e[e.treeProducts=1]="treeProducts"}(n||(n={}));var P=function(e){function t(t){var o=e.call(this,t)||this;return o.handleResizeStop=o.handleResizeStop.bind(o),o.handleResizeStart=o.handleResizeStart.bind(o),o.handleOpenSubtreeRequested=o.handleOpenSubtreeRequested.bind(o),o.handleShowResultsRequested=o.handleShowResultsRequested.bind(o),o.handleOpenProductPageRequested=o.handleOpenProductPageRequested.bind(o),o.handleKeyDown=o.handleKeyDown.bind(o),o.handleKeyPress=o.handleKeyPress.bind(o),o.state=o.constructStateFromProps(t,!0),o}return w(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.items!==e.items&&this.setState(this.constructStateFromProps(e))},t.prototype.shouldComponentUpdate=function(e,t){return!0},t.prototype.componentWillUpdate=function(e,t){this.props.searchStore.storeTreeStateToLocalStorage(t)},t.prototype.render=function(){var e=this;return s.createElement("div",{className:"search-tree",ref:function(t){return e.handleRootRefUpdate(t)}},this.generateColumnsAndConnections())},t.prototype.generateColumnsAndConnections=function(){var e=[],t=this.props.displayType===n.treeProducts||this.props.searchStore.state.placement==f.a.Dropdown,o=this.getLastSelectedTreeItem(),r=this.props.searchStore.state.isMobileDisplayMode;return r?(t?e.push(this.createProductsColumn(o,r)):this.existsAndShouldBeShown(this.state.selectedProductTreeResults)&&e.push(this.createElementsColumn(o,r)),e):(t&&(e.push(this.createProductsColumn(o,r)),this.existsAndShouldBeShown(this.state.selectedProductTreeResults)&&e.push(this.createLinksContainer("products-connector-container"))),this.existsAndShouldBeShown(this.state.selectedProductTreeResults)&&e.push(this.createElementsColumn(o,r)),this.existsAndShouldBeShown(this.state.selectedElementTreeResult)&&(e.push(this.createLinksContainer("element-connector-container")),e.push(s.createElement(y,{additionalClasses:"sub-elements-tree-column",key:"sub-elements-tree-column",items:this.state.selectedElementTreeResult.children||[],selectedItem:this.state.selectedSubElementTreeResult,containsLastSelectedTreeItem:this.state.selectedSubElementTreeResult==o,onOpenSubtreeRequested:this.handleOpenSubtreeRequested,onShowResultsRequested:this.handleShowResultsRequested,onOpenProductPage:this.handleOpenProductPageRequested,placement:this.props.searchStore.state.placement,isMobileDisplay:r}))),e)},t.prototype.createProductsColumn=function(e,t){return s.createElement(y,{additionalClasses:"products-tree-column",key:"products-tree-column",items:this.state.productTreeResults,selectedItem:this.state.selectedProductTreeResults,onOpenSubtreeRequested:this.handleOpenSubtreeRequested,onShowResultsRequested:this.handleShowResultsRequested,onOpenProductPage:this.handleOpenProductPageRequested,containsLastSelectedTreeItem:this.state.selectedProductTreeResults==e,productPlaceholderImage:this.props.productPlaceholderImage,placement:this.props.searchStore.state.placement,isMobileDisplay:t})},t.prototype.createElementsColumn=function(e,t){return s.createElement(y,{additionalClasses:"elements-tree-column",key:"elements-tree-column",isLoading:null==this.state.selectedProductTreeResults.children,items:this.state.selectedProductTreeResults.children||[],selectedItem:this.state.selectedElementTreeResult,containsLastSelectedTreeItem:this.state.selectedElementTreeResult==e,onOpenSubtreeRequested:this.handleOpenSubtreeRequested,onShowResultsRequested:this.handleShowResultsRequested,onOpenProductPage:this.handleOpenProductPageRequested,placement:this.props.searchStore.state.placement,isMobileDisplay:t})},t.prototype.createLinksContainer=function(e){var t=this;return void 0===e&&(e=""),s.createElement("div",{key:e,ref:function(e){return t.handleLinksContainerLoaded(e)},className:"links-container"},s.createElement("div",{className:"central-line"}))},t.prototype.componentDidMount=function(){this.componentHasBeenMounted=!0,l.a.registerResizeStartCallback(this.handleResizeStart),l.a.registerResizeEndCallback(this.handleResizeStop),this.props.searchStore.onLayoutRecalc(this.handleLayoutRecalc),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keypress",this.handleKeyPress)},t.prototype.componentWillUnmount=function(){this.componentHasBeenMounted=!1,l.a.registerResizeStartCallback(this.handleResizeStart),l.a.unregisterResizeEndCallback(this.handleResizeStop),this.props.searchStore.offLayoutRecalc(this.handleLayoutRecalc),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keypress",this.handleKeyPress),this.props.searchStore.storeTreeStateToLocalStorage(null)},t.prototype.handleOpenSubtreeRequested=function(e){this.updateSelectedTreeItem(e)},t.prototype.handleShowResultsRequested=function(e){this.props.requestShowResults&&this.props.requestShowResults(e)},t.prototype.handleOpenProductPageRequested=function(e,t){if(null!=e){var o=e.getRoot();null!=o&&this.props.searchStore.openLink(this.props.searchStore.sourceApp==b.b.marketplace?o.marketplaceLink||o.link:o.link||o.marketplaceLink,t)}},t.prototype.handleRootRefUpdate=function(e){var t=this;if(this.root=e,null==e)return this.parentContainer=null,void(null==this.parentContainer||p.a.isTouch||l.a.removeDragScrollEvents(this.parentContainer));null==this.parentContainer&&null!=e&&(this.parentContainer=null!=e?e.parentElement:null,p.a.isTouch||l.a.handleDragScroll(this.parentContainer),this.adjustSize()),setTimeout((function(){return t.scrollToLastSearchTreeColumn()}),5),setTimeout((function(){return t.root&&c.a.ensureInView(t.root.querySelector(".search-tree-column.contains-last-selected-tree-item .search-tree-item.selected"))}),5)},t.prototype.adjustSize=function(){if(null!=this.root)switch(this.props.searchStore.state.placement){case f.a.Modal:var e=document.querySelector(".search-modal-container > .search-toolbar-wrapper");null!=e&&e.offsetHeight>0&&(this.root.style.height="calc(100vh - "+e.offsetHeight+"px)");break;case f.a.Dropdown:var t=document.querySelector("#search-drop-down");if(null!=t){var o=t.querySelector(".search-toolbar-bottom-container");null!=o&&(this.root.style.height=t.offsetHeight-o.offsetHeight+"px")}}},t.prototype.scrollToLastSearchTreeColumn=function(){if(null!=this.root){var e=this.root.querySelector(".search-tree-column:last-of-type");null!=e&&c.a.scrollElementLeft(this.parentContainer,e.offsetLeft-e.offsetWidth)}},t.prototype.handleLinksContainerLoaded=function(e){null!=e&&(e.style.visibility="visible",this.adjustDescendentsContainer(e),this.adjustCentralLinePosition(e),this.adjustConnectedLines(e),this.adjustDashedLines(e))},t.prototype.adjustDescendentsContainer=function(e){var t=e.previousElementSibling,o=e.nextElementSibling,r=t.querySelector(".search-tree-item.selected");if(null!=r){var n=o.querySelectorAll(".search-tree-item");if(0!=n.length){r.querySelector(".search-tree-item-title-container");var s=0,i=r.querySelector(".open-subtree-container"),a=i.offsetTop+r.offsetTop+i.offsetHeight/2-c.a.getBottomPadding(i),l=n[0];if(1==n.length)s=a-c.a.getComputedLineHeight(l)/2-c.a.getTopPadding(l);else if(n.length>1){s=a-(n[n.length-1].offsetTop-l.offsetTop)/2-c.a.getComputedLineHeight(l)/2-c.a.getTopPadding(l)}o.style.paddingTop=Math.max(s,0)+"px"}}},t.prototype.adjustCentralLinePosition=function(e){var t=e.previousElementSibling,o=e.nextElementSibling;if(null!=t&&null!=o){var r=t.querySelector(".search-tree-item.selected");if(null!=r){var n=o.querySelectorAll(".search-tree-item");if(0!=n.length){var s=e.querySelector(".central-line");if(1==n.length)return e.style.height="0px",void(s.style.display="none");var i=Math.max(c.a.getHeight(t),c.a.getHeight(o));e.style.height=i+"px";var a=n[0],l=n[n.length-1],u=r.offsetTop+c.a.getFirstLineCenterVerticalOffset(r.querySelector(".search-tree-item-title-container"))<a.offsetTop+c.a.getFirstLineCenterVerticalOffset(a.querySelector(".search-tree-item-title-container"))?r:a,p=r.offsetTop+c.a.getFirstLineCenterVerticalOffset(r.querySelector(".search-tree-item-title-container"))>l.offsetTop+c.a.getFirstLineCenterVerticalOffset(l.querySelector(".search-tree-item-title-container"))?r:l,h=(u.querySelector(".search-tree-item-title-container"),p.querySelector(".search-tree-item-title-container"),c.a.getWidth(s),this.getSearchTreeItemTopOffset(u)),d=this.getSearchTreeItemTopOffset(p);s.style.top=h+"px",s.style.height=d-h+"px",s.style.display="block"}}}},t.prototype.adjustConnectedLines=function(e){var t=e.previousElementSibling,o=e.nextElementSibling;if(null!=t&&null!=o){var r=t.querySelector(".search-tree-item.selected");if(null!=r){var n=o.querySelectorAll(".search-tree-item");if(0!=n.length){c.a.removeDescendents(e,".connector");var s=r.querySelector(".open-subtree-container"),i=null!=s?t.offsetWidth-(s.offsetLeft+s.offsetWidth/2):t.offsetWidth-r.offsetWidth;i-=this.props.searchStore.state.isMobileDisplayMode?2:5;var a=this.createConnection(e,r,!0);if(a.style.right="initial",a.style.left="-"+i+"px",a.style.width=c.a.getWidth(a)+i+1+"px",1==n.length)this.createConnectionAllignedWith(e,n[0],a);else for(var l=0;l<n.length;l++)this.createConnection(e,n[l])}}}},t.prototype.adjustDashedLines=function(e){var t=e.nextElementSibling;if(null!=t){var o=t.querySelectorAll(".search-tree-item");if(0!=o.length){c.a.removeDescendents(e,".dashed-line");for(var r=e.querySelectorAll(".connector.connector-right"),n=0;n<o.length-1;n++){var s=o[n],i=o[n+1],a=parseInt(s.getAttribute("data-last-index")),l=parseInt(i.getAttribute("data-last-index"));if(!Number.isNaN(a)&&!Number.isNaN(l)&&a+1!=l){var u=r[n],p=r[n+1],h=document.createElement("div");h.classList.add("dashed-line"),h.style.top=(p.offsetTop+u.offsetTop)/2-11+"px",e.appendChild(h)}}}}},t.prototype.createConnection=function(e,t,o){void 0===o&&(o=!1);var r=document.createElement("div");if(r.classList.add("connector"),r.classList.add(o?"connector-left":"connector-right"),r.style.right="0px",o){var n=t.querySelector(".open-subtree-container");r.style.top=c.a.getVerticalCenterOffset(t)-c.a.getBottomPadding(n)/2+"px"}else r.style.top=this.getSearchTreeItemTopOffset(t)+"px";return e.appendChild(r),r},t.prototype.getSearchTreeItemTopOffset=function(e){var t=e.querySelector(".search-tree-item-title-container");return e.offsetTop+t.offsetTop+c.a.getComputedLineHeight(t)/2},t.prototype.createConnectionAllignedWith=function(e,t,o){this.createConnection(e,t).style.top=o.style.top},t.prototype.existsAndShouldBeShown=function(e){return null!=e&&e.hasChildrenWithResults()},t.prototype.constructStateFromProps=function(e,t){var o=this,r=(e.items||[]).map((function(e){return u.a.convertToShellProductTreeResults(e)})),s=r[0],i="",a="";if(null!=this.props.searchStore.state.currentProduct){var c=this.props.searchStore.state.currentProduct.externalId,l=r.find((function(e){return e.productId==c}));null!=l&&(s=l)}if(null!=this.props.searchStore.localStorageSearchTreeState&&t){var p=this.props.searchStore.localStorageSearchTreeState,h=p.selectedProductTreeResults&&p.selectedProductTreeResults.productId;if(i=p.selectedElementTreeResult&&p.selectedElementTreeResult.elementTitle,a=p.selectedSubElementTreeResult&&p.selectedSubElementTreeResult.subElementTitle,h){var d=r.find((function(e){return e.productId==h}));null!=d&&(s=d)}this.props.searchStore.localStorageSearchTreeState=null}var m="",g="",f=null;if(null!=this.props.searchStore.localStorageResultsSearchTreeItem){var S=this.props.searchStore.localStorageResultsSearchTreeItem;f=r.find((function(e){return e.productId==S.productId})),S.elementTitle?m=S.elementTitle:S.subElementTitle&&(g=S.subElementTitle),this.props.searchStore.localStorageResultsSearchTreeItem=null}return this.fetchProductAdditionalInfoIfNecessary(s).then((function(e){if((o.componentHasBeenMounted||null==o.state.selectedElementTreeResult)&&(o.props.displayType!=n.treeProducts||i||a||m||g)){var r=null,c=o.state.selectedProductTreeResults;if(null!=c&&(r=i?c.children.find((function(e){return e.elementTitle==i})):c.getChildWithMostResults()),null!=r){var l=null;a&&(l=r.children.find((function(e){return e.subElementTitle==a}))),setTimeout((function(){o.updateState({selectedElementTreeResult:r,selectedSubElementTreeResult:l})}),200)}if(t&&(m||g)){var u=s.findDescendantWithTitle(m||g);null!=u&&setTimeout((function(){o.props.requestShowResults(u)}),200)}}})),!t||null==f||m||g||setTimeout((function(){o.props.requestShowResults(f)}),200),{productTreeResults:r,displayedProductTreeResults:r,productsListDisplayState:v.a.ContainsLessThanMax,selectedProductTreeResults:s,selectedElementTreeResult:null,selectedSubElementTreeResult:null,selectedSubSubElementTreeResult:null}},t.prototype.fetchProductAdditionalInfoIfNecessary=function(e){var t=this;return null!=this.getFullProductTreeResultsPromise&&this.getFullProductTreeResultsPromise.cancel(),null==e||e.children?Promise.resolve(!0):null!=e.productSearchResults&&e.productSearchResults.isSpecialProduct?(e.children=[],Promise.resolve(!0)):new Promise((function(o,r){t.getFullProductTreeResultsPromise=t.props.getFullProductTreeResults(e),t.getFullProductTreeResultsPromise.then((function(e){t.getFullProductTreeResultsPromise=null,t.componentHasBeenMounted&&t.forceUpdate(),o(!0)})).catch((function(r){t.getFullProductTreeResultsPromise=null,t.props.requestTemporaryNotification("Couldn't load TOC from: "+e.productTitle),t.componentHasBeenMounted&&t.forceUpdate(),o(!1)}))}))},t.prototype.handleResizeStop=function(){this.componentHasBeenMounted&&this.forceUpdate()},t.prototype.handleResizeStart=function(){if(null!=this.root)for(var e=this.root.querySelectorAll(".links-container"),t=0;t<e.length;t++)e[t].style.visibility="hidden"},t.prototype.handleKeyDown=function(e){if(!this.props.searchStore.isSearchMenuHidden){var t=this.getLastSelectedTreeItem();if(null!=t){var o=null,r=this.props.searchStore.state.isMobileDisplayMode;return 38==e.keyCode?o=this.getPreviousTreeItem(t):40==e.keyCode?o=this.getNextTreeItem(t):39!=e.keyCode||r?37!=e.keyCode||r||(o=t.parent):o=t.children&&t.getFirstChildWithResults(),null!=o&&this.updateSelectedTreeItem(o),38==e.keyCode||40==e.keyCode?(e.preventDefault(),!1):void 0}}},t.prototype.handleKeyPress=function(e){if(!this.props.searchStore.isSearchMenuHidden){var t=this.getLastSelectedTreeItem();null!=t&&"Enter"==e.key&&this.props.requestShowResults&&this.props.requestShowResults(t)}},t.prototype.getLastSelectedTreeItem=function(){var e=this.state;return e.selectedSubSubElementTreeResult||e.selectedSubElementTreeResult||e.selectedElementTreeResult||e.selectedProductTreeResults},t.prototype.updateSelectedTreeItem=function(e){this.state;e instanceof h.d?this.updateState({selectedSubSubElementTreeResult:e}):e instanceof h.c?this.updateState({selectedSubElementTreeResult:e,selectedSubSubElementTreeResult:null}):e instanceof h.a?this.updateState({selectedElementTreeResult:e,selectedSubElementTreeResult:null,selectedSubSubElementTreeResult:null}):e instanceof h.b&&(this.updateState({selectedProductTreeResults:e,selectedElementTreeResult:null,selectedSubElementTreeResult:null,selectedSubSubElementTreeResult:null}),this.fetchProductAdditionalInfoIfNecessary(e))},t.prototype.updateState=function(e){this.setState(Object.assign({},this.state,e))},t.prototype.getPreviousTreeItem=function(e){if(null==e||!(e instanceof h.b)&&null==e.parent)return null;var t=e instanceof h.b?this.state.productTreeResults:e.parent.children.filter((function(e){return e.hasResults()})),o=t.indexOf(e);return-1==o?null:o-1>=0?t[o-1]:t[t.length-1]},t.prototype.getNextTreeItem=function(e){if(null==e||!(e instanceof h.b)&&null==e.parent)return null;var t=e instanceof h.b?this.state.productTreeResults:e.parent.children.filter((function(e){return e.hasResults()})),o=t.indexOf(e);return-1==o?null:o+1<t.length?t[o+1]:t[0]},t.prototype.handleLayoutRecalc=function(){this.componentHasBeenMounted&&this.adjustSize()},t}(s.Component),k=(o(849),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),C=function(e){function t(t){var o=e.call(this,t)||this;return o.handleKeyDown=o.handleKeyDown.bind(o),o.handleKeyPress=o.handleKeyPress.bind(o),o.handleResize=o.handleResize.bind(o),o.handleSearchStoreChange=o.handleSearchStoreChange.bind(o),o.handleLayoutRecalc=o.handleLayoutRecalc.bind(o),o.handleLinkClick=o.handleLinkClick.bind(o),o.handleWholeItemClick=o.handleWholeItemClick.bind(o),o.state={selectedSearchResult:null},o}return k(t,e),t.prototype.shouldComponentUpdate=function(e,t){return this.state.selectedSearchResult!=t.selectedSearchResult},t.prototype.render=function(){var e=this,t=this.props.store.state,o=t.currentSearchTreeItem;null!=o&&(this.lastResultsItem=o);var r=this.state.selectedSearchResult;return this.isDisplayingResults=t.isShowingResults&&null!=o,null==o&&(o=this.lastResultsItem),s.createElement("div",{title:"open result",className:i("results-list-component-container",{shown:this.isDisplayingResults}),ref:function(t){return e.handleRootRefUpdate(t)}},null!=o&&s.createElement("ul",{className:"results-list-container"},o.results.map((function(t,n){return s.createElement("li",{className:i("result-item",{selected:t==r}),key:t.id,onClick:e.handleWholeItemClick},e.generateBreadcrumbs(t,o),s.createElement("a",{className:"result-item-text-link",href:t.link,onClick:e.handleLinkClick,dangerouslySetInnerHTML:{__html:t.text}}))}))))},t.prototype.getResultTypeLabel=function(e){var t="";switch((e.productType||"").toLowerCase()){case"livebook":t="livebook";break;case"livevideo":t="livevideo";break;case"marketplace":default:t="product"}return this.props.store.isInMarketplace()&&"product"==t?null:this.props.store.isInLivebook()&&"livebook"==t?null:this.props.store.isInLivevideo()&&"livevideo"==t?null:s.createElement("span",{key:"label-"+e.id,className:t+"-label"},t)},t.prototype.handleLinkClick=function(e){return this.props.store.openLink(e.target.href),e.preventDefault(),!1},t.prototype.handleWholeItemClick=function(e){var t=e.target.querySelector("a");null!=t&&this.props.store.openLink(t.href)},t.prototype.generateBreadcrumbs=function(e,t){var o=[],r=this.props.store.state.isMobileDisplayMode;if(t instanceof h.b){var n=r?"100%":this.getMaxWidth(1+(e.indexTerm?1:0)+(e.subElementTitle?1:0)+(e.subSubElementTitle?1:0));o=[e.indexTerm&&s.createElement("span",{className:"result-item-book-element-link index-link",dangerouslySetInnerHTML:{__html:e.indexTerm},style:{maxWidth:n},key:"0"}),e.elementTitle&&s.createElement("span",{className:"result-item-book-element-link",style:{maxWidth:n},title:e.elementTitle,key:"1"},d.a.cleanBookElementTitle(e.elementTitle)),e.subElementTitle&&s.createElement("span",{className:"result-item-book-element-link",style:{maxWidth:n},title:e.subElementTitle,key:"2"},e.subElementTitle),e.subSubElementTitle&&s.createElement("span",{className:"result-item-book-element-link",style:{maxWidth:n},title:e.subSubElementTitle,key:"3"},e.subSubElementTitle)]}else if(t instanceof h.a){n=r?"100%":this.getMaxWidth((e.indexTerm?1:0)+(e.subElementTitle?1:0)+(e.subSubElementTitle?1:0));o=[e.indexTerm&&s.createElement("span",{className:"result-item-book-element-link index-link",dangerouslySetInnerHTML:{__html:e.indexTerm},style:{maxWidth:n},key:"0"}),e.subElementTitle&&s.createElement("span",{className:"result-item-book-element-link",style:{maxWidth:n},title:e.subElementTitle,key:"1"},e.subElementTitle),e.subSubElementTitle&&s.createElement("span",{className:"result-item-book-element-link",style:{maxWidth:n},title:e.subSubElementTitle,key:"2"},e.subSubElementTitle)]}else if(t instanceof h.c){n=r?"100%":this.getMaxWidth((e.indexTerm?1:0)+(e.subSubElementTitle?1:0));o=[e.indexTerm&&s.createElement("span",{className:"result-item-book-element-link index-link",dangerouslySetInnerHTML:{__html:e.indexTerm},style:{maxWidth:n},key:"0"}),e.subSubElementTitle&&s.createElement("span",{className:"result-item-book-element-link",style:{maxWidth:n},title:e.subSubElementTitle,key:"2"},e.subSubElementTitle)]}else t instanceof h.d&&(o=[e.indexTerm&&s.createElement("span",{className:"result-item-book-element-link index-link",dangerouslySetInnerHTML:{__html:e.indexTerm},style:{maxWidth:"100%"},key:"0"})]);r&&o.length>0&&(o=[o[o.length-1]]);var i=this.getResultTypeLabel(e);return null!=i&&o.unshift(i),o},t.prototype.getMaxWidth=function(e){var t="100%";return 2==e?t="calc(50% - 1em - 25px)":3==e?t="calc(33% - 1em - 18px)":4==e&&(t="calc(25% - 1em - 15px)"),t},t.prototype.handleRootRefUpdate=function(e){var t=this;this.root=e,setTimeout((function(){t.adjustResultsListSize(),t.scrollToSelectedLink()}),20)},t.prototype.componentDidMount=function(){this.isComponentMounted=!0,document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keypress",this.handleKeyPress),l.a.registerResizeEndCallback(this.handleResize),this.props.store.onLayoutRecalc(this.handleLayoutRecalc),this.props.store.onPropertyChanged(this.handleSearchStoreChange)},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1,document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keypress",this.handleKeyPress),l.a.unregisterResizeEndCallback(this.handleResize),this.props.store.offLayoutRecalc(this.handleLayoutRecalc),this.props.store.offPropertyChanged(this.handleSearchStoreChange)},t.prototype.handleSearchStoreChange=function(e,t){e.currentSearchTreeItem!==t.currentSearchTreeItem&&this.isComponentMounted&&this.forceUpdate()},t.prototype.handleResize=function(){this.adjustResultsListSize()},t.prototype.handleKeyPress=function(e){this.isComponentMounted&&this.isDisplayingResults&&!this.props.store.isSearchMenuHidden&&("Enter"==e.key&&this.props.store.state.currentSearchTreeItem&&null!=this.state.selectedSearchResult&&this.props.store.state.currentSearchTreeItem.results.indexOf(this.state.selectedSearchResult)>=0&&this.props.store.openLink(this.state.selectedSearchResult.link))},t.prototype.handleKeyDown=function(e){if(this.isComponentMounted&&this.isDisplayingResults&&!this.props.store.isSearchMenuHidden)return 38==e.keyCode?(this.handleKeyUpArrow(),e.preventDefault(),!1):40==e.keyCode?(this.handleKeyDownArrow(),e.preventDefault(),!1):void 0},t.prototype.close=function(){this.props.store.setCurrentSearchTreeItem(null)},t.prototype.handleKeyDownArrow=function(){var e=this.props.store.state.currentSearchTreeItem;if(null!=e){var t=this.state.selectedSearchResult,o=e.results,r=o.indexOf(t);null==t||r<0?this.setState({selectedSearchResult:o[0]}):this.setState({selectedSearchResult:r+1<o.length?o[r+1]:o[0]})}},t.prototype.handleKeyUpArrow=function(){var e=this.props.store.state.currentSearchTreeItem;if(null!=e){var t=this.state.selectedSearchResult,o=e.results;if(null!=t){var r=o.indexOf(t);r<0||this.setState({selectedSearchResult:r-1>=0?o[r-1]:o[o.length-1]})}else this.setState({selectedSearchResult:o[o.length-1]})}},t.prototype.adjustResultsListSize=function(){if(null!=this.root){var e=this.root.parentElement;if(null!=e&&null!=(e=e.parentElement))switch(this.props.store.state.placement){case f.a.Modal:var t=e.querySelector(".search-toolbar-wrapper");null!=t&&(this.root.style.height="calc(100vh - "+t.offsetHeight+"px)");break;case f.a.Dropdown:var o=document.querySelector("#search-drop-down");if(null!=o){var r=o.querySelector(".search-toolbar-bottom-container");null!=r&&(this.root.style.height=o.offsetHeight-r.offsetHeight+"px")}}}},t.prototype.scrollToSelectedLink=function(){null!=this.root&&this.isDisplayingResults&&c.a.ensureInView(this.root.querySelector(".result-item.selected"),this.root.querySelector(".results-list-container"))},t.prototype.handleLayoutRecalc=function(){this.isComponentMounted&&this.adjustResultsListSize()},t}(s.Component),T=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),x=function(e){function t(t){var o=e.call(this,t)||this;return o.handlePossibleSearchStoreUpdate=o.handlePossibleSearchStoreUpdate.bind(o),o.handleNotificationRequested=o.handleNotificationRequested.bind(o),o.handleShowResultsRequested=o.handleShowResultsRequested.bind(o),o.handleLayoutRecalc=o.handleLayoutRecalc.bind(o),o.handleKeyDown=o.handleKeyDown.bind(o),o.state={currentSearchTreeItem:null},o}return T(t,e),t.prototype.shouldComponentUpdate=function(e,t){return this.shouldUpdateOccur(this.props.store.state,e.store.state)},t.prototype.handlePossibleSearchStoreUpdate=function(e,t){this.shouldUpdateOccur(e,t)&&this.forceUpdate()},t.prototype.shouldUpdateOccur=function(e,t){return(e.isInLibrary!==t.isInLibrary||e.items!==t.items||e.isWaitingForResults!==t.isWaitingForResults||e.currentSearchTreeItem!=t.currentSearchTreeItem||e.isShowingResults!=t.isShowingResults||e.currentSearchTreeItem!==t.currentSearchTreeItem||e.isMobileDisplayMode!==t.isMobileDisplayMode||e.isTabletDisplayMode!==t.isTabletDisplayMode)&&this.isComponentMounted},t.prototype.componentDidMount=function(){this.isComponentMounted=!0,this.props.store.onPropertyChanged(this.handlePossibleSearchStoreUpdate),this.props.store.onLayoutRecalc(this.handleLayoutRecalc),document.addEventListener("keydown",this.handleKeyDown)},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1,this.props.store.offPropertyChanged(this.handlePossibleSearchStoreUpdate),this.props.store.offLayoutRecalc(this.handleLayoutRecalc),document.removeEventListener("keydown",this.handleKeyDown)},t.prototype.render=function(){var e=this,t=this.props.store.state;return this.isDisplayingTreeResults=t.isShowingResults&&null==t.currentSearchTreeItem,s.createElement("div",{ref:function(t){return e.handleRootUpdate(t)},className:i("search-results-container",{shown:t.isShowingResults})},s.createElement("div",{className:"search-wrapper",style:{display:this.isDisplayingTreeResults?"block":"none"}},s.createElement("div",{className:"search-container"},s.createElement("div",{className:"search-results-content-container"},this.generateSearchResultsContent(this.isDisplayingTreeResults)),s.createElement("div",{className:"search-notifications-container",ref:function(t){return e.notificationsContainer=t}}))),s.createElement(C,{store:this.props.store}))},t.prototype.handleRootUpdate=function(e){this.root=e,this.syncHeightAndPosition()},t.prototype.syncHeightAndPosition=function(){if(null!=this.root){var e=this.root.parentElement;if(null!=e)switch(this.props.store.state.placement){case f.a.Modal:var t=e.querySelector(".search-toolbar-wrapper");null!=t&&(this.root.style.height="calc(100vh - "+t.offsetHeight+"px)",this.root.style.top=t.offsetHeight+"px");break;case f.a.Dropdown:var o=document.querySelector("#search-drop-down");if(null!=o){var r=o.querySelector(".search-toolbar-bottom-container");null!=r&&(this.root.style.height=o.offsetHeight-r.offsetHeight+"px",this.root.style.top=r.offsetHeight+"px")}}}},t.prototype.generateSearchResultsContent=function(e){var t=this.props.store.state;return t.isWaitingForResults?s.createElement(a.a,null):t.errorMessage?s.createElement("div",{className:"search-message-container search-error-container"},t.errorMessage):t.items?0===t.items.length?s.createElement("div",{className:"search-message-container"},"Search query yielded no results."):s.createElement(P,{displayType:null==t.currentProduct||t.isInLibrary?n.treeProducts:n.treeProduct,key:"search-tree",searchStore:this.props.store,items:t.items,allCategories:t.allCategories,getFullProductTreeResults:this.props.store.getFullProductTreeResults,requestTemporaryNotification:this.handleNotificationRequested,requestShowResults:this.handleShowResultsRequested,openLinksInNewTab:t.openLinksInNewTab,defaultShowItemsWithoutResults:this.props.store.state.defaultShowTreeItemsWithoutResults,query:this.props.store.state.query,productPlaceholderImage:this.props.store.coverPlaceholder}):s.createElement("div",null)},t.prototype.isDisplayingSearchTree=function(){var e=this.props.store.state;return!(e.isWaitingForResults||e.errorMessage||!e.items||0===e.items.length||null!=e.currentSearchTreeItem)},t.prototype.hasSearchResults=function(){var e=this.props.store.state;return e.items&&e.items.length>0},t.prototype.handleNotificationRequested=function(e){e?this.showNotification(e):this.hideNotification()},t.prototype.handleShowResultsRequested=function(e){this.props.store.setCurrentSearchTreeItem(e)},t.prototype.showNotification=function(e){var t=this;this.notificationsContainer&&(this.notificationsContainer.textContent=e,this.notificationsContainer.style.display="block",setTimeout((function(){return t.hideNotification()}),2e3))},t.prototype.hideNotification=function(){this.notificationsContainer&&(this.notificationsContainer.style.display="none")},t.prototype.handleKeyDown=function(e){this.props.store.isSearchMenuHidden||27!=e.keyCode&&8!=e.keyCode||this.props.store.goBack()},t.prototype.handleLayoutRecalc=function(){this.isComponentMounted&&this.syncHeightAndPosition()},t}(s.Component),L=(o(1193),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),R=function(e){function t(t){var o=e.call(this,t)||this;return o.handleSearchInProductToggle=o.handleSearchInProductToggle.bind(o),o}return L(t,e),t.prototype.render=function(){var e=this,t=this.props.store.state;return s.createElement("div",{className:"search-location-toggle "+(this.props.additionalClass||"")},s.createElement("label",{className:i("search-location-toggle-item",{selected:!t.isInLibrary}),onClick:function(){return e.handleSearchInProductToggle(!1)}},s.createElement("span",null,"search this book")),s.createElement("label",{className:i("search-location-toggle-item",{selected:t.isInLibrary}),onClick:function(){return e.handleSearchInProductToggle(!0)}},s.createElement("span",null,"search our library")))},t.prototype.handleSearchInProductToggle=function(e){if(this.isDisplayingResults()){var t=this.props.store.state.query;return this.props.store.setIsInLibraryAndClearSearch(e),void(""!=t&&this.props.store.setTypingFinished(!0))}this.props.store.setIsInLibrary(e)},t.prototype.isDisplayingResults=function(){var e=this.props.store.state;return!!e.isShowingResults&&(!e.isWaitingForResults||""!=e.errorMessage||null!=e.items&&e.items.length>0)},t}(s.Component),I=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),E=function(e){function t(t){var o=e.call(this,t)||this;return o.state={currentNumberOfDots:0},o.moveToNextNumberOfDots=o.moveToNextNumberOfDots.bind(o),o}return I(t,e),t.prototype.render=function(){for(var e="",t=0;t<this.state.currentNumberOfDots;t++)e+=".";return s.createElement("span",null,e)},t.prototype.componentDidMount=function(){this.intervalId=setInterval(this.moveToNextNumberOfDots,350)},t.prototype.componentWillUnmount=function(){clearInterval(this.intervalId)},t.prototype.moveToNextNumberOfDots=function(){this.setState({currentNumberOfDots:(this.state.currentNumberOfDots+1)%4})},t}(s.Component),M=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),D=function(e){function t(t){var o=e.call(this,t)||this;return o.handleBackClick=o.handleBackClick.bind(o),o}return M(t,e),t.prototype.render=function(){var e=this.props.store.state,t=this.generateSearchInfoMessage(),o=null!=e.currentProduct&&e.placement==f.a.Modal?s.createElement(R,{store:this.props.store,additionalClass:"search-location-toggle-small"}):null;return s.createElement("div",{className:i("search-toolbar-bottom-container",{"is-empty-toolbar-bottom-container":null==t&&null==o})},s.createElement("div",{className:i("search-toolbar-message",{"is-in-product":null!=e.currentProduct})},t),o)},t.prototype.generateSearchInfoMessage=function(){var e=this.props.store.state,t=e.isShowingResults;return e.placement==f.a.Dropdown?null:t&&null!=e.currentSearchTreeItem?s.createElement("span",{key:"breadcrumb-key"}," ",e.currentSearchTreeItem.results&&e.currentSearchTreeItem.results.length>0?e.currentSearchTreeItem.results.length+" results ":""," for  ",s.createElement("span",{className:"search-query-label"},e.query)," in ",this.generateTitleBreadCrumbs(e.currentSearchTreeItem)):null==e.currentProduct||e.isInLibrary||e.placement!=f.a.Modal?e.isWaitingForResults?s.createElement("span",null,"searching for ",s.createElement("span",{className:"search-query-label"},e.query)," ",s.createElement(E,null)):t?s.createElement("span",{key:"these-products"},"found ",s.createElement("span",{className:"search-query-label"},"‘",e.query,"’")," in these products "):e.query&&!e.hasAutocompleteProductsInfo?s.createElement("span",null,"searching for suggestions ",s.createElement(E,null)):null:s.createElement("span",{key:"product-key",title:e.currentProduct.title}," in ",s.createElement("em",null," ",e.currentProduct.title))},t.prototype.generateTitleBreadCrumbs=function(e){var t=[],o=e.getRoot();return t.push(s.createElement("span",{key:"in-key"},"in ")),t.push(this.generateBreadCrumbForSearchTreeItem(o)),o!==e&&(t.push(" - "),t.push(this.generateBreadCrumbForSearchTreeItem(e))),t},t.prototype.generateFullTitleBreadCrumbs=function(e){var t=[];return e instanceof h.a?null!=e.parent&&(t.push(this.generateBreadCrumbForSearchTreeItem(e.parent)),t.push(" – ")):(e instanceof h.c||e instanceof h.d)&&null!=e.parent&&(t=this.generateFullTitleBreadCrumbs(e.parent)).push(" – "),t.push(this.generateBreadCrumbForSearchTreeItem(e)),t},t.prototype.generateBreadCrumbForSearchTreeItem=function(e){return e instanceof h.b?s.createElement("a",{key:e.id,className:"product-title-breadcrumb",href:e.link},d.a.getShortTitle(e.name)):e instanceof h.a?s.createElement("a",{key:e.id,className:"element-title-breadcrumb",href:e.link},e.name):e instanceof h.c?s.createElement("a",{key:e.id,className:"sub-element-title-breadcrumb",href:e.link},e.name):e instanceof h.d?s.createElement("a",{key:e.id,className:"sub-sub-element-title-breadcrumb",href:e.link},e.name):void 0},t.prototype.canSearchDeeper=function(){var e=this.props.store.state;return e.isShowingResults&&null!=e.items&&e.items.length>0&&!e.isLastSearchDeep},t.prototype.handleBackClick=function(){this.props.store.goBack()},t}(s.Component),O=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),A=function(e){function t(t){var o=e.call(this,t)||this;return o.handleSearchInputChange=o.handleSearchInputChange.bind(o),o.handleSearchInputKeyPress=o.handleSearchInputKeyPress.bind(o),o.handleDocumentKeyPress=o.handleDocumentKeyPress.bind(o),o.handleInputKeyDown=o.handleInputKeyDown.bind(o),o.handleDocumentKeyDown=o.handleDocumentKeyDown.bind(o),o.handleSearchMenuClose=o.handleSearchMenuClose.bind(o),o.handleClearSearch=o.handleClearSearch.bind(o),o.handleResizeStart=o.handleResizeStart.bind(o),o.handleResizeEnd=o.handleResizeEnd.bind(o),o.handleStartSearch=o.handleStartSearch.bind(o),o.handleSearchBackButtonClick=o.handleSearchBackButtonClick.bind(o),o.handleFocus=o.handleFocus.bind(o),o.handlePossibleSearchStoreUpdate=o.handlePossibleSearchStoreUpdate.bind(o),o.handleSuggestionSelected=o.handleSuggestionSelected.bind(o),o.handlePossibleAutocompletStoreUpdate=o.handlePossibleAutocompletStoreUpdate.bind(o),o.handlePossibleSearchStoreUpdate=o.handlePossibleSearchStoreUpdate.bind(o),o.handleLayoutRecalc=o.handleLayoutRecalc.bind(o),o.handleDeepSearchClick=o.handleDeepSearchClick.bind(o),o}return O(t,e),t.prototype.render=function(){var e=this,t=this.props.store.state,o=t.query;return s.createElement("div",{className:"search-toolbar-wrapper"},s.createElement("div",{className:"search-toolbar",ref:function(t){return e.handleRootInitialized(t)}},s.createElement("a",{href:"javascript:void(0)",className:"search-button search-toolbar-button",onClick:this.handleSearchBackButtonClick,onTouchStart:this.handleSearchBackButtonClick},s.createElement("i",{className:i("fa fa-fw",{"fa-arrow-left":t.isShowingResults,"fa-search":!t.isShowingResults})})),s.createElement("input",{className:i("search-input",{"has-characters":""!=o,"autocomplete-suggestion-not-selected":this.isAutocompleteSuggestionNotSelected()}),placeholder:u.a.getSearchPlaceholderText(this.props.store),value:o,autoComplete:"off",autoCorrect:"off",onChange:this.handleSearchInputChange,onKeyPress:this.handleSearchInputKeyPress,onKeyDown:this.handleInputKeyDown,onFocus:this.handleFocus,spellCheck:!1}),s.createElement("span",{className:"search-input-autocompleted",onClick:function(){return e.focusInputAfterTimeout()}}),s.createElement("span",{className:i("search-input-clear",{"clear-input-shown":""!=o}),onClick:this.handleClearSearch},s.createElement("i",{className:"fa fa-times-circle","aria-hidden":"true"})),null!=t.currentProduct&&t.placement==f.a.Modal&&s.createElement(R,{store:this.props.store,additionalClass:"search-location-toggle-medium-large"}),s.createElement("i",{className:"search-toolbar-button close-button fa fa-times",title:"close search",onClick:this.handleSearchMenuClose})),s.createElement(D,{store:this.props.store,onSearchClick:this.handleStartSearch}))},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.componentDidMount=function(){this.isComponentMounted=!0,document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("keypress",this.handleDocumentKeyPress),l.a.registerResizeStartCallback(this.handleResizeStart),l.a.registerResizeEndCallback(this.handleResizeEnd),this.props.store.onPropertyChanged(this.handlePossibleSearchStoreUpdate),this.props.store.autocompleteStore.onPropertyChanged(this.handlePossibleAutocompletStoreUpdate),this.props.store.onLayoutRecalc(this.handleLayoutRecalc),this.focusInputAfterTimeout()},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1,document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("keypress",this.handleDocumentKeyPress),l.a.unregisterResizeStartCallback(this.handleResizeStart),l.a.unregisterResizeEndCallback(this.handleResizeEnd),this.props.store.offLayoutRecalc(this.handleLayoutRecalc),this.props.store.offPropertyChanged(this.handlePossibleSearchStoreUpdate),this.props.store.autocompleteStore.offPropertyChanged(this.handlePossibleAutocompletStoreUpdate)},t.prototype.isAutocompleteSuggestionNotSelected=function(){var e=this.props.store.autocompleteStore.state;return null==e.selectedSuggestion&&!e.isMoreLessConceptsSelected&&!e.isMoreLessProductsSelected},t.prototype.handleRootInitialized=function(e){if(this.root=e,null!=this.root&&!p.a.isTouch){this.positionSuggestion();var t=this.props.store.autocompleteStore.state;null!=t.selectedSuggestion||t.isMoreLessConceptsSelected||t.isMoreLessProductsSelected||this.props.store.state.isShowingResults||this.focusInputAfterTimeout()}},t.prototype.positionSuggestion=function(){if(null!=this.root){var e=this.props.store.autocompleteStore,t=this.props.store.state.query,o=this.root.querySelector(".search-input"),r=this.root.querySelector(".search-input-autocompleted"),n=e.state.autocompleteSuggestions.getFirstMatchingConceptExcess(t);if(!t||!n||this.props.store.state.isShowingResults)return r.textContent="",void(r.style.display="none");if(null!=o){window.getComputedStyle(o);r.innerHTML=n.replace(/^\s/g,"&nbsp;");var s=c.a.getFontString(o),i=t.endsWith(" ")?3:0,a=o.offsetLeft+c.a.getTextWidth(t,s)+i;r.style.left=a+"px",r.style.top=o.offsetTop+"px",r.style.maxWidth=o.offsetWidth-o.offsetLeft-c.a.getRightPadding(o)-a+"px",r.style.display="inline-block"}}},t.prototype.getFullFontString=function(e){return e.font?e.font:e.fontStyle+" "+e.fontVariant+" "+e.fontWeight+" "+e.fontStretch+" "+e.fontSize+" "+e.lineHeight+" "+e.fontFamily},t.prototype.handlePossibleAutocompletStoreUpdate=function(e,t){(e.selectedSuggestion!==t.selectedSuggestion||e.autocompleteSuggestions!==t.autocompleteSuggestions||e.isMoreLessConceptsSelected!==t.isMoreLessConceptsSelected||e.isMoreLessProductsSelected!==t.isMoreLessProductsSelected)&&this.isComponentMounted&&this.forceUpdate()},t.prototype.handlePossibleSearchStoreUpdate=function(e,t){(e.query!==t.query||e.isInLibrary!==t.isInLibrary||e.isMobileDisplayMode!==t.isMobileDisplayMode||e.isTabletDisplayMode!==t.isTabletDisplayMode||e.selectedSearchCategories!==t.selectedSearchCategories||e.currentProduct!==t.currentProduct||e.isShowingResults!==t.isShowingResults||e.currentSearchTreeItem!==t.currentSearchTreeItem||e.isLastSearchDeep!==t.isLastSearchDeep||e.items!==t.items||e.hasAutocompleteProductsInfo!==t.hasAutocompleteProductsInfo)&&this.isComponentMounted&&this.forceUpdate()},t.prototype.handleSearchInputChange=function(e){var t=this;e.currentTarget.value!==this.props.store.state.query&&(clearTimeout(this.typingTimeoutId),this.props.store.setIsTypingQuery(e.currentTarget.value),this.typingTimeoutId=setTimeout((function(){return t.props.store.setTypingFinished()}),250))},t.prototype.handleSearchInputKeyPress=function(e){"Enter"==e.key&&(clearTimeout(this.typingTimeoutId),e.preventDefault(),e.stopPropagation(),this.handleStartSearch(),p.a.isTouch&&this.blurInput())},t.prototype.handleDocumentKeyPress=function(e){if(!this.props.store.state.isShowingResults&&!this.props.store.isSearchMenuHidden&&"Enter"==e.key){var t=this.props.store.autocompleteStore;if(t.state.isMoreLessConceptsSelected)return void t.toggleConceptsMoreLessDisplay(!0);if(t.state.isMoreLessProductsSelected)return void t.toggleProductsMoreLessDisplay(!0);var o=this.getSuggestedQuery();o&&this.props.store.selectSuggestionAndStartSearch(o)}},t.prototype.handleResizeStart=function(){if(null!=this.root){var e=this.root.querySelector(".search-input-autocompleted");null!=e&&(e.style.display="none")}},t.prototype.handleResizeEnd=function(){this.positionSuggestion()},t.prototype.handleSearchMenuClose=function(){this.props.store.closeMenu()},t.prototype.handleSearchBackButtonClick=function(){var e=this;this.isStartSearchDisabled||(this.props.store.state.isShowingResults?this.props.store.goBack():this.handleStartSearch(),this.isStartSearchDisabled=!0,setTimeout((function(){return e.isStartSearchDisabled=!1}),1e3))},t.prototype.handleFocus=function(e){this.isDisplayingResults()?this.props.store.clearSearchKeepQuery(!0):(this.props.store.autocompleteStore.show(),e.currentTarget.selectionStart<e.currentTarget.value.length&&(e.currentTarget.selectionStart=e.currentTarget.value.length,e.currentTarget.selectionEnd=e.currentTarget.value.length))},t.prototype.handleStartSearch=function(e){void 0===e&&(e=!1),this.blurInputAfterTimeout(),clearTimeout(this.typingTimeoutId),this.props.store.startSearch(e)},t.prototype.focusInputAfterTimeout=function(){var e=this;setTimeout((function(){if(e.root){var t=e.root.querySelector(".search-input");t&&t.focus()}}),150)},t.prototype.handleSuggestionSelected=function(e){this.props.store.selectSuggestionAndStartSearch(e)},t.prototype.handleInputKeyDown=function(e){if(!this.props.store.state.isShowingResults){var t=27==e.keyCode,o=39==e.keyCode,r=37==e.keyCode,n=9==e.keyCode;if((o||t||r||n)&&e.stopPropagation(),t)this.props.store.clearAutosuggestionsAndHide();else if(o||n){var s=this.props.store.state.query,i=this.props.store.autocompleteStore.state.autocompleteSuggestions.getFirstMatchingConceptExcess(s);i&&this.props.store.setQuery(s+i)}}},t.prototype.handleDocumentKeyDown=function(e){if(!this.props.store.state.isShowingResults&&!this.props.store.isSearchMenuHidden&&!(null==this.root||this.root.offsetHeight<=0)){var t=37==e.keyCode,o=38==e.keyCode,r=39==e.keyCode,n=40==e.keyCode;return o?(this.props.store.autocompleteStore.selectPreviousSuggestion()&&this.blurInput(),e.preventDefault(),!1):n?(this.props.store.autocompleteStore.selectNextSuggestion()&&this.blurInput(),e.preventDefault(),!1):void((r||t)&&this.props.store.autocompleteStore.selectAlternativeTypeSuggestionOnSameLevel())}},t.prototype.blurInputAfterTimeout=function(){var e=this;setTimeout((function(){return e.blurInput()}),160)},t.prototype.blurInput=function(){if(null!=this.root){var e=this.root.querySelector(".search-input");null!=e&&e.blur()}},t.prototype.handleDeepSearchClick=function(){var e=this;this.isStartSearchDisabled||(this.handleStartSearch(!0),this.isStartSearchDisabled=!0,setTimeout((function(){return e.isStartSearchDisabled=!1}),1e3))},t.prototype.getSuggestedQuery=function(){return this.props.store.autocompleteStore.state.selectedSuggestion?this.props.store.autocompleteStore.state.selectedSuggestion.title:""},t.prototype.isDisplayingResults=function(){var e=this.props.store.state;return!!e.isShowingResults&&(!e.isWaitingForResults||""!=e.errorMessage||null!=e.items&&e.items.length>0)},t.prototype.handleLayoutRecalc=function(){this.isComponentMounted&&this.positionSuggestion()},t.prototype.handleClearSearch=function(){this.props.store.clearSearch()},t}(s.Component),N=o(594),F=o(127),_=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),q=function(e){function t(t){var o=e.call(this,t)||this;return o.handleMoreLessClick=o.handleMoreLessClick.bind(o),o.handleSuggestionClicked=o.handleSuggestionClicked.bind(o),o.handleChange=o.handleChange.bind(o),o.handleSearchStoreChange=o.handleSearchStoreChange.bind(o),o}return _(t,e),t.prototype.shouldComponentUpdate=function(e,t){return!1},t.prototype.render=function(){var e=this;if(!this.hasConceptsSuggestions()){var t=this.props.store.parentStore.state,o=t.query;return""==o?null:t.hasAutocompleteProductsInfo?s.createElement("div",{className:"autocomplete-section autocomplete-concepts-section"},s.createElement("span",{onClick:function(){return e.props.store.parentStore.startSearch()},className:i("full-text-search-label",{selected:this.props.store.state.isFullTextSearchSelected})}," search for  ",s.createElement("strong",null,o))):null}var r=this.props.store.state,n=r.displayedAutocompleteSuggestions.conceptSuggestions;return s.createElement("div",{className:"autocomplete-section autocomplete-concepts-section",ref:function(t){return e.handleRootRefUpdate(t)}},s.createElement("div",{className:"autocomplete-section-title"},"suggested concepts"),s.createElement("div",{className:"autocomplete-results"},s.createElement(N,{transitionName:"item-staging-animation",transitionEnterTimeout:100,transitionLeaveTimeout:100},n.map((function(t,o){return s.createElement(W,{key:t.title+o,isSelected:t==r.selectedSuggestion,conceptSuggestion:t,onSuggestionSelected:e.handleSuggestionClicked})})))),s.createElement("span",{className:i({"more-less-suggestions":!0,selected:this.props.store.state.isMoreLessConceptsSelected}),onClick:this.handleMoreLessClick},this.getMoreLessText()))},t.prototype.handleRootRefUpdate=function(e){null!=e&&c.a.ensureInView(e.querySelector(".autocomplete-result-item.selected, .more-less-suggestions.selected"))},t.prototype.componentDidMount=function(){this.isComponentMounted=!0,this.props.store.onPropertyChanged(this.handleChange),this.props.store.parentStore&&this.props.store.parentStore.onPropertyChanged(this.handleSearchStoreChange)},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1,this.props.store.offPropertyChanged(this.handleChange),this.props.store.parentStore&&this.props.store.parentStore.offPropertyChanged(this.handleSearchStoreChange)},t.prototype.handleChange=function(e,t){(e.displayedAutocompleteSuggestions.conceptSuggestions!==t.displayedAutocompleteSuggestions.conceptSuggestions||e.selectedSuggestion!==t.selectedSuggestion||e.conceptsSuggestionsListDisplayState!==t.conceptsSuggestionsListDisplayState||e.isMoreLessConceptsSelected!==t.isMoreLessConceptsSelected)&&this.isComponentMounted&&this.forceUpdate()},t.prototype.handleSearchStoreChange=function(e,t){(e.query!=t.query||e.hasAutocompleteProductsInfo!=t.hasAutocompleteProductsInfo)&&this.isComponentMounted&&this.forceUpdate()},t.prototype.handleMoreLessClick=function(){this.props.store.toggleConceptsMoreLessDisplay()},t.prototype.handleSuggestionClicked=function(e,t){this.props.store.parentStore.selectSuggestionAndStartSearch(e,t)},t.prototype.hasConceptsSuggestions=function(){return this.props.store.state.autocompleteSuggestions.conceptSuggestions.length>0},t.prototype.getMoreLessText=function(){switch(this.props.store.state.conceptsSuggestionsListDisplayState){case v.a.CanShowLess:return"fewer";case v.a.CanShowMore:return"more concepts "+String.fromCharCode(8230);default:return""}},t}(s.Component),W=function(e){function t(t){return e.call(this,t)||this}return _(t,e),t.prototype.shouldComponentUpdate=function(e){return!0},t.prototype.render=function(){var e=this,t=this.props.conceptSuggestion,o=t.getLevel(),r=t.isLastChildAndWithoutChildren();return s.createElement("div",{className:i({"autocomplete-result-item":!0,selected:this.props.isSelected,"first-level":0==o,indented:o>0,"last-child":r}),onClick:function(){return e.props.onSuggestionSelected&&e.props.onSuggestionSelected(e.props.conceptSuggestion,t.link)}},s.createElement("label",{className:"concept-title"},s.createElement("span",{dangerouslySetInnerHTML:{__html:this.getTitleIndendation(o)}}),s.createElement("a",{onClick:function(t){return e.handleMainConceptLinkClick(t)},href:t.link||"javascript:void(0)",className:i("autosuggestion-title",{"no-link-concept":!t.link}),dangerouslySetInnerHTML:{__html:this.props.conceptSuggestion.titleHtml}}),this.generateLinksFromSecondOnward(t.links)))},t.prototype.handleMainConceptLinkClick=function(e){return e.preventDefault(),e.nativeEvent.preventDefault(),!1},t.prototype.getTitleIndendation=function(e){for(var t="",o=0;o<e;o++)t+="&emsp;&emsp;";return t},t.prototype.generateLinksFromSecondOnward=function(e){var t=this;return e&&0!=e.length?e.slice(1,e.length).map((function(e,o){var r=o+2;return s.createElement("a",{href:e.link||"javascript:void(0)",key:e.link+o,className:"concept-content-title-link",onClick:function(o){return t.handleLinkClick(o,e.link)}},r,s.createElement("sup",null,F.a.getOrdinalExtension(r)))})):null},t.prototype.handleLinkClick=function(e,t){e.preventDefault(),e.stopPropagation(),e.nativeEvent.preventDefault(),this.props.onSuggestionSelected&&this.props.onSuggestionSelected(this.props.conceptSuggestion,t)},t}(s.Component),U=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),B=function(e){function t(t){var o=e.call(this,t)||this;return o.handleMoreLessProductsClick=o.handleMoreLessProductsClick.bind(o),o.handleSuggestionClicked=o.handleSuggestionClicked.bind(o),o.handleChange=o.handleChange.bind(o),o}return U(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this;if(!this.hasProductsSuggestions())return null;var t=this.props.store.state,o=t.displayedAutocompleteSuggestions.productSuggestions;return s.createElement("div",{className:"autocomplete-section autocomplete-product-section",ref:function(t){return e.handleRootUpdate(t)}},this.props.showColumnTitle&&s.createElement("div",{className:"autocomplete-section-title"},"suggested books/videos"),s.createElement("ul",{className:"autocomplete-results"},s.createElement(N,{transitionName:"item-staging-animation",transitionEnterTimeout:200,transitionLeaveTimeout:200},o.map((function(o){return s.createElement(z,{key:o.title,productSuggestion:o,isSelected:o==t.selectedSuggestion,onSuggestionSelected:e.handleSuggestionClicked,openSuggestionWithoutSearch:e.props.openProductSuggestionsWithoutSearch,coverPlaceholder:e.props.store.parentStore.coverPlaceholder})})))),s.createElement("span",{className:i({"more-less-suggestions":!0,selected:this.props.store.state.isMoreLessProductsSelected}),onClick:this.handleMoreLessProductsClick},this.getMoreLessText()))},t.prototype.handleRootUpdate=function(e){null!=e&&c.a.ensureInView(e.querySelector(".autocomplete-result-item.selected, .more-less-suggestions.selected"))},t.prototype.componentDidMount=function(){this.props.store.onPropertyChanged(this.handleChange)},t.prototype.componentWillUnmount=function(){this.props.store.offPropertyChanged(this.handleChange)},t.prototype.handleChange=function(e,t){(e.displayedAutocompleteSuggestions.productSuggestions!=t.displayedAutocompleteSuggestions.productSuggestions||e.productsSuggestionsListDisplayState!==t.productsSuggestionsListDisplayState||e.selectedSuggestion!==t.selectedSuggestion||e.isMoreLessProductsSelected!==t.isMoreLessProductsSelected)&&this.forceUpdate()},t.prototype.handleMoreLessProductsClick=function(){this.props.store.toggleProductsMoreLessDisplay()},t.prototype.handleSuggestionClicked=function(e,t){this.props.store.parentStore.selectSuggestionAndStartSearch(e,"",t)},t.prototype.hasProductsSuggestions=function(){return this.props.store.state.autocompleteSuggestions.productSuggestions.length>0},t.prototype.getMoreLessText=function(){switch(this.props.store.state.productsSuggestionsListDisplayState){case v.a.CanShowLess:return"fewer";case v.a.CanShowMore:return s.createElement(s.Fragment,null,"more ",s.createElement("span",{className:"description-label"},"books and videos")," …");default:return""}},t}(s.Component),z=function(e){function t(t){return e.call(this,t)||this}return U(t,e),t.prototype.render=function(){var e=this,t=this.props.productSuggestion;return s.createElement("li",{key:t.title,title:"immediately go to "+t.title,className:i("autocomplete-result-item",{selected:this.props.isSelected}),onClick:function(t){return e.props.onSuggestionSelected&&e.props.onSuggestionSelected(e.props.productSuggestion,t.ctrlKey||t.metaKey)}},s.createElement(g.a,{className:"product-cover",fullImage:t.coverPath,placeholderImage:this.props.coverPlaceholder,isLiveaudio:t.isLiveaudio}),s.createElement("p",null,s.createElement("label",{className:"title-label"},s.createElement("span",{className:"autosuggestion-title",dangerouslySetInnerHTML:{__html:d.a.getShortTitle(t.title)}})),s.createElement("label",{className:"authors-date-label"},s.createElement("span",{className:"authors",dangerouslySetInnerHTML:{__html:t.authors+(t.isSpecial?"":", ")}}),!t.isSpecial&&s.createElement("span",{className:"date"},t.dateDescription))))},t}(s.Component),j=o(451),H=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),K=function(e){function t(t){var o=e.call(this,t)||this;return o.handleSearchStoreChanged=o.handleSearchStoreChanged.bind(o),o.handleAutocompleteStoreChanged=o.handleAutocompleteStoreChanged.bind(o),o}return H(t,e),t.prototype.shouldComponentUpdate=function(e,t){return!1},t.prototype.render=function(){var e=this,t=this.props.searchStore.state.currentProduct;if(null==t||!this.props.searchStore.autocompleteStore.state.isShown)return null;var o=!this.props.searchStore.autocompleteStore.state.displayedAutocompleteSuggestions.isEmpty(),r=null!=this.root&&this.root.classList.contains("has-suggestions"),n=this.getIsCurrentlyDelayed(".cover-container"),a=this.getIsCurrentlyDelayed(".search-info-container");return!r&&o?(n=!0,a=!1):r&&!o&&(n=!1,a=!0),s.createElement("div",{ref:function(t){return e.handleRootRefUpdate(t)},className:i("product-suggestions-container clearfix",{"has-suggestions":o||""!=this.props.searchStore.state.query})},s.createElement("div",{className:"search-description-container"},s.createElement(g.a,{placeholderImage:this.props.searchStore.coverPlaceholder,imageDisplayType:j.a.Background,fullImage:t.coverPath,className:"book-cover",alt:"cover"}),s.createElement("div",{className:i("explanatory-text",{"delay-animation":a})},s.createElement("div",{className:"actual-text"},s.createElement("h4",null,"At Manning, you can search ",s.createElement("em",null,"inside")," our ",t.isLivevideo?"videos":"books"),s.createElement("p",null,"Our search displays results directly from the ",t.isLivevideo?"video":"book","'s text. Enter a query to see every instance of your search term in ",s.createElement("em",null,t.title),"."),this.generateVisitMessage(t,this.props.searchStore.sourceApp)))),s.createElement("div",{className:i("product-concepts-container",{"delay-animation":n})},s.createElement(q,{store:this.props.searchStore.autocompleteStore})))},t.prototype.handleRootRefUpdate=function(e){this.root=e},t.prototype.componentDidMount=function(){this.isComponentMounted=!0,this.props.searchStore.onPropertyChanged(this.handleSearchStoreChanged),this.props.searchStore.autocompleteStore.onPropertyChanged(this.handleAutocompleteStoreChanged)},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1,this.props.searchStore.offPropertyChanged(this.handleSearchStoreChanged),this.props.searchStore.autocompleteStore.offPropertyChanged(this.handleAutocompleteStoreChanged)},t.prototype.handleSearchStoreChanged=function(e,t){e.currentProduct!==t.currentProduct&&this.isComponentMounted&&this.forceUpdate()},t.prototype.handleAutocompleteStoreChanged=function(e,t){(e.displayedAutocompleteSuggestions.conceptSuggestions!==t.displayedAutocompleteSuggestions.conceptSuggestions||e.isShown!==t.isShown)&&this.isComponentMounted&&this.forceUpdate()},t.prototype.getIsCurrentlyDelayed=function(e){if(null==this.root)return!1;var t=this.root.querySelector(e);return null!=t&&t.classList.contains("delay-animation")},t.prototype.generateVisitMessage=function(e,t){if(t==b.b.marketplace){if(e.isLivebook)return s.createElement("p",null,"Visit ",s.createElement("a",{href:"https://livebook.manning.com"},"livebook")," to see even more!");if(e.isLivevideo)return s.createElement("p",null,"Visit ",s.createElement("a",{href:"https://livevideo.manning.com"},"livevideo")," to see even more!")}return""},t}(s.Component),V=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Q=function(e){function t(t){var o=e.call(this,t)||this;return o.handleSuggestionSelected=o.handleSuggestionSelected.bind(o),o.handlePossibleSearchStoreChange=o.handlePossibleSearchStoreChange.bind(o),o.handlePossibleAutocompleteStoreChange=o.handlePossibleAutocompleteStoreChange.bind(o),o.handleLayoutRecalc=o.handleLayoutRecalc.bind(o),o}return V(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this,t=this.props.store,o=this.props.store.autocompleteStore,r=t.state,n=!r.dontAutocompleteConcepts;return s.createElement("div",{className:"search-autocomplete-container",ref:function(t){return e.handleRootUpdate(t)}},r.isInLibrary||r.placement==f.a.Dropdown?s.createElement(s.Fragment,null,r.isMobileDisplayMode&&o.hasAtLeastOneTypeOfAutocompletes()&&s.createElement("div",{className:"autocomplete-separator top-separator"}),n&&s.createElement(q,{store:o}),r.isMobileDisplayMode&&o.hasBothProductsAndConcepts()&&n&&s.createElement("div",{className:"autocomplete-separator middle-separator"}),s.createElement(B,{store:o,showColumnTitle:n,openProductSuggestionsWithoutSearch:r.openLinkedSuggestionWithoutSearch})):s.createElement(K,{searchStore:this.props.store}))},t.prototype.handleRootUpdate=function(e){if(this.root=e,null!=this.root){var t=this.root.parentElement;if(null!=t)switch(this.props.store.state.placement){case f.a.Modal:var o=t.querySelector(".search-toolbar-wrapper");null!=o&&(this.root.style.height="calc(100vh - "+o.offsetHeight+"px)");break;case f.a.Dropdown:var r=document.querySelector("#search-drop-down");if(null!=r){var n=r.querySelector(".search-toolbar-bottom-container");null!=n&&(this.root.style.height=r.offsetHeight-n.offsetHeight+"px")}}}},t.prototype.componentDidMount=function(){this.isComponentMounted=!0,this.props.store.onPropertyChanged(this.handlePossibleSearchStoreChange),this.props.store.autocompleteStore.onPropertyChanged(this.handlePossibleAutocompleteStoreChange),this.props.store.onLayoutRecalc(this.handleLayoutRecalc)},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1,this.props.store.offPropertyChanged(this.handlePossibleSearchStoreChange),this.props.store.autocompleteStore.offPropertyChanged(this.handlePossibleAutocompleteStoreChange),this.props.store.offLayoutRecalc(this.handleLayoutRecalc)},t.prototype.handlePossibleSearchStoreChange=function(e,t){(e.selectedSearchCategories!==t.selectedSearchCategories||e.isSearchAllSelected!==t.isSearchAllSelected||e.isInLibrary!==t.isInLibrary||e.currentProduct!==t.currentProduct||e.isMobileDisplayMode!==t.isMobileDisplayMode||e.placement!==t.placement)&&this.isComponentMounted&&this.forceUpdate()},t.prototype.handlePossibleAutocompleteStoreChange=function(e,t){(e.autocompleteSuggestions!==t.autocompleteSuggestions||e.isShown!==t.isShown)&&this.isComponentMounted&&this.forceUpdate()},t.prototype.handleSuggestionSelected=function(e){this.props.store.selectSuggestionAndStartSearch(e)},t.prototype.handleLayoutRecalc=function(){this.isComponentMounted&&this.handleRootUpdate(this.root)},t}(s.Component),Y=(o(722),o(723),o(416),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),$=function(e){function t(t){return e.call(this,t)||this}return Y(t,e),t.prototype.render=function(){var e=this;return s.createElement("div",{className:"cc-search-filters-group-root"},s.createElement("div",{className:i("cc-search-filters-group-heading","cc-search-filters-group-heading-"+(this.props.categoryTitle||"").replace(/\s+/,"-"))},this.props.categoryTitle),s.createElement("div",{className:"cc-search-filters-group-items-container"},this.props.searchFilters.map((function(t){return s.createElement("div",{key:t.label,className:"cc-search-filters-group-item",onClick:function(o){return e.handleSearchFilterClick(t)}},s.createElement("div",null,s.createElement("input",{type:"checkbox",checked:e.isSelected(t),onChange:function(e){}}),s.createElement("span",{className:"cc-search-filters-group-label"},t.label)),s.createElement("span",{className:"cc-search-filters-group-count"},t.resultCount))}))))},t.prototype.shouldComponentUpdate=function(e,t){return this.props.categoryTitle!=e.categoryTitle||this.props.searchFilters!=e.searchFilters||this.props.selectedSearchFilters!=e.selectedSearchFilters},t.prototype.handleSearchFilterClick=function(e){this.props.onSelectionChange&&this.props.onSelectionChange(e,!this.isSelected(e))},t.prototype.isSelected=function(e){return null!=this.props.selectedSearchFilters&&0!=this.props.selectedSearchFilters.length&&null!=e&&null!=this.props.selectedSearchFilters.find((function(t){return t.label==e.label}))},t}(s.Component),X=(o(1195),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),G=function(e){function t(t){var o=e.call(this,t)||this;return o.handleSelectionChange=o.handleSelectionChange.bind(o),o}return X(t,e),t.prototype.render=function(){var e=null!=this.props.categoryFilters&&this.props.categoryFilters.length>0,t=null!=this.props.priceFilters&&this.props.priceFilters.length>0,o=null!=this.props.productTypeFilters&&this.props.productTypeFilters.length>0;return e||t||o?s.createElement("div",{className:"cc-search-filters-root"},e&&s.createElement($,{categoryTitle:"category",onSelectionChange:this.handleSelectionChange,searchFilters:this.props.categoryFilters,selectedSearchFilters:this.props.selectedSearchFilters}),t&&s.createElement($,{categoryTitle:"price",onSelectionChange:this.handleSelectionChange,searchFilters:this.props.priceFilters,selectedSearchFilters:this.props.selectedSearchFilters}),o&&s.createElement($,{categoryTitle:"product type",onSelectionChange:this.handleSelectionChange,searchFilters:this.props.productTypeFilters,selectedSearchFilters:this.props.selectedSearchFilters})):null},t.prototype.handleSelectionChange=function(e,t){this.props.onSearchFilterSelectionChange&&this.props.onSearchFilterSelectionChange(e,t)},t}(s.Component),J=(o(1197),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),Z=function(e){function t(t){return e.call(this,t)||this}return J(t,e),t.prototype.render=function(){var e=this;return s.createElement("div",{className:"cc-selected-search-filter-root cc-selected-search-filter-root-"+(this.props.searchFilter.type||"").replace(/\s+/,"-"),onClick:function(t){return e.props.onClose&&e.props.onClose(e.props.searchFilter)}},s.createElement("span",{className:"cc-selected-search-filter-label"},this.props.searchFilter.label),s.createElement("i",{className:"fa fa-times"}))},t}(s.Component),ee=(o(1199),o(1201),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),te=function(e){function t(t){return e.call(this,t)||this}return ee(t,e),t.prototype.render=function(){var e=this.props.product,t=this.props.query?e.marketplaceLink+"?query="+this.props.query:e.marketplaceLink;return s.createElement("a",{className:"cc-search-result-item",key:e.externalId,href:t},s.createElement("div",{className:"cc-search-result-item-cover"},s.createElement(g.a,{placeholderImage:this.props.coverPlaceholder,imageDisplayType:j.a.Image,fullImage:e.coverPath,className:"book-cover",alt:e.title})),s.createElement("div",{className:"cc-search-result-item-details"},s.createElement("div",{className:"cc-search-result-item-title",title:e.title},d.a.getShortTitle(e.title)),e.price>0?s.createElement("div",{className:"cc-search-result-item-price"},e.priceWithoutDiscount>e.price?s.createElement("span",{className:"cc-search-result-item-original-price"},"$",F.a.formatMoney(e.priceWithoutDiscount)):null,"$",F.a.formatMoney(e.price)):null,s.createElement("div",{className:"cc-search-result-item-date"},e.dateDescription)))},t}(s.Component),oe=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),re=function(e){function t(t){var o=e.call(this,t)||this;return o.state={isShowingAllResults:!1},o.handleShowMoreClick=o.handleShowMoreClick.bind(o),o}return oe(t,e),t.prototype.render=function(){var e=this,t=this.props.products;if(null==t||0==t.length)return null;var o=!this.state.isShowingAllResults&&t.length>24,r=this.state.isShowingAllResults?t:t.slice(0,24);return s.createElement("div",{className:"cc-search-results-root"},s.createElement("div",{className:"cc-search-results-items-container"},r.map((function(t){return s.createElement(te,{key:t.id,product:t,coverPlaceholder:e.props.coverPlaceholder,query:e.props.query})}))),s.createElement("div",{className:"cc-search-results-button-container"},o&&s.createElement("div",{onClick:this.handleShowMoreClick,className:"cc-search-results-show-more"},"show more")))},t.prototype.componentWillReceiveProps=function(e){this.props.products!=e.products&&this.setState({isShowingAllResults:!1})},t.prototype.handleShowMoreClick=function(e){this.setState({isShowingAllResults:!0})},t}(s.Component),ne=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),se=function(e){function t(t){var o=e.call(this,t)||this;return o.handleSearchFilterSelectionChange=o.handleSearchFilterSelectionChange.bind(o),o.handleSortChange=o.handleSortChange.bind(o),o.props.store.onPropertyChanged((function(e,t){return o.handlePossibleSearchStoreUpdate(e,t)})),o}return ne(t,e),t.prototype.render=function(){var e=this;if(!this.props.store.state.hasAutocompleteProductsInfo)return this.renderLoadingSpinner();var t=this.props.store.autocompleteStore.state.autocompleteSuggestions.displayedProductSuggestions;return null==t||0==t.length&&this.props.store.state.query&&this.props.store.autocompleteStore?this.props.store.state.isTyping?this.renderLoadingSpinner():this.props.store.autocompleteStore.setIsDoneFetchingProducts?s.createElement("div",null,"No results found for query: ",s.createElement("strong",null,"'",this.props.store.state.query,"'"),". Try a different query or visit our ",s.createElement("a",{href:"https://www.manning.com/catalog"},"catalog"),"."):this.renderLoadingSpinner():s.createElement("div",{className:"cc-search-shell-root"},s.createElement("div",{className:"cc-search-shell-left-column"},s.createElement(G,{categoryFilters:this.props.store.state.availableCategorySearchFilters,priceFilters:this.props.store.state.availablePriceSearchFilters,productTypeFilters:this.props.store.state.availableProductTypeSearchFilers,selectedSearchFilters:this.props.store.state.selectedSearchFilters,onSearchFilterSelectionChange:this.handleSearchFilterSelectionChange})),s.createElement("div",{className:"cc-search-shell-right-column"},s.createElement("div",{className:"cc-search-shell-results-toolbar"},t.length>0?s.createElement("div",{className:"cc-search-results-count-container"},s.createElement("span",{className:"cc-search-results-count-label"},t.length)," ",s.createElement("span",{className:"cc-search-results-count-label-description"},"product",t.length>1?"s":""," found")):s.createElement("div",null),s.createElement("label",{className:"cc-search-shell-sort-container"},s.createElement("span",{className:"cc-search-shell-sort-container-label"},"sort: "),s.createElement("select",{onChange:this.handleSortChange,value:this.props.store.state.sortOrder,className:"form-control"},s.createElement("option",{value:f.b.BestMatch},"best match"),s.createElement("option",{value:f.b.PriceFromLowest},"price: lowest first"),s.createElement("option",{value:f.b.PriceFromHighest},"price: highest first"),s.createElement("option",{value:f.b.NewestFirst},"newest first")))),null!=this.props.store.state.selectedSearchFilters&&this.props.store.state.selectedSearchFilters.length>0?s.createElement("div",{className:"cc-search-shell-selected-filters-container"},this.props.store.state.selectedSearchFilters.map((function(t){return s.createElement(Z,{key:t.label,searchFilter:t,onClose:e.handleSearchFilterSelectionChange})}))):null,s.createElement(re,{products:t,coverPlaceholder:this.props.store.coverPlaceholder,query:this.props.store.state.query})))},t.prototype.renderLoadingSpinner=function(){return s.createElement("div",{style:{textAlign:"center"}},s.createElement("i",{className:"fa fa-circle-notch fa-spin fa-3x fa-fw"}))},t.prototype.handleSearchFilterSelectionChange=function(e,t){void 0===t&&(t=!1),this.props.store.changeSearchFilterSelection(e,t)},t.prototype.handlePossibleSearchStoreUpdate=function(e,t){e.selectedSearchFilters==t.selectedSearchFilters&&e.availableCategorySearchFilters==t.availableCategorySearchFilters&&e.availablePriceSearchFilters==t.availablePriceSearchFilters&&e.availableProductTypeSearchFilers==t.availableProductTypeSearchFilers&&e.sortOrder==t.sortOrder&&e.hasAutocompleteProductsInfo==t.hasAutocompleteProductsInfo&&e.isTyping==t.isTyping||this.forceUpdate()},t.prototype.handleSortChange=function(e){this.props.store.changeSortOrder(parseInt(e.currentTarget.value))},t}(s.Component),ie=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),ae=function(e){function t(t){var o=e.call(this,t)||this;return o.props.store.onPropertyChanged((function(e,t){return o.handlePossibleSearchStoreUpdate(e,t)})),o.props.store.autocompleteStore.onPropertyChanged((function(e,t){return o.handlePossibleAutocompleteStoreUpdate(e,t)})),o.handleSearchClick=o.handleSearchClick.bind(o),o}return ie(t,e),t.prototype.render=function(){return s.createElement("div",{className:"search-modal-container"},this.props.store.state.placement==f.a.MainFlow?s.createElement(se,{store:this.props.store}):s.createElement(s.Fragment,null,this.props.store.state.placement==f.a.Dropdown?s.createElement(D,{store:this.props.store,onSearchClick:this.handleSearchClick}):s.createElement(A,{store:this.props.store}),this.props.store.state.query&&!this.props.store.state.hasAutocompleteProductsInfo&&this.props.store.state.placement==f.a.Dropdown?s.createElement("span",{className:"search-searching-suggestions-label"},"searching for suggestions ",s.createElement(E,null)):null,s.createElement(Q,{store:this.props.store}),s.createElement(x,{store:this.props.store})))},t.prototype.handlePossibleSearchStoreUpdate=function(e,t){(e.query!==t.query||e.selectedSearchCategories!==t.selectedSearchCategories||e.isSearchAllSelected!==t.isSearchAllSelected||e.isInLibrary!==t.isInLibrary||e.currentProduct!==t.currentProduct||e.currentSearchTreeItem!==t.currentSearchTreeItem||e.items!==t.items||e.hasAutocompleteProductsInfo!=t.hasAutocompleteProductsInfo||e.isWaitingForResults!=t.isWaitingForResults||e.placement!=t.placement)&&this.isComponentMounted&&this.forceUpdate()},t.prototype.handlePossibleAutocompleteStoreUpdate=function(e,t){(e.selectedSuggestion!==t.selectedSuggestion||e.autocompleteSuggestions!==t.autocompleteSuggestions)&&this.isComponentMounted&&this.forceUpdate()},t.prototype.componentDidMount=function(){this.isComponentMounted=!0},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1},t.prototype.handleSearchClick=function(e){var t=this;this.isStartSearchDisabled||(this.props.store.startSearch(e),this.isStartSearchDisabled=!0,setTimeout((function(){return t.isStartSearchDisabled=!1}),1e3))},t}(s.Component);t.a=ae},365:function(e,t,o){"use strict";var r=function(){function e(){this.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0;try{this.supportsCssClipPath=window&&window.CSS&&window.CSS.supports&&window.CSS.supports("clip-path","polygon(50% 0%, 0% 100%, 100% 100%)")}catch(e){this.supportsCssClipPath=!1}}return e.prototype.isRunningInLivebook=function(){return-1!==document.location.hostname.indexOf("livebook")||-1!==document.title.toLowerCase().indexOf("livebook")},e.prototype.isRunningInLivevideo=function(){return-1!==document.location.hostname.indexOf("livevideo")||-1!==document.title.toLowerCase().indexOf("livevideo")},e.prototype.isRunningInMarketplace=function(){return!this.isRunningInLivebook()&&!this.isRunningInLivevideo()},e.prototype.isMobileWidth=function(){return window.innerWidth<500},e}();t.a=new r},368:function(e,t,o){"use strict";var r=function(){function e(){this.numberedBookItemIndexRegExp=/^(?:(?:(?:(?:Chapter)|(?:Part)|(?:Lesson)|(?:Section)|(?:Unit)) ))?((?:\d+\.?)+)/,this.appendixIndexRegExp=/^(Appendix )?[A-Z]\.(\d+\.?)*/,this.isOnDevice=!1}return e.prototype.cleanBookTitle=function(e){return e?(e||"").trim().replace(/,?\s+(second|third|fourth|fifth|sixth|seventh|eight|nineth)\s+edition/i,""):e},e.prototype.adaptLinkFormat=function(e){return e=e||"",this.isOnDevice?e.indexOf("#!")>=0?e:e.indexOf("/book")>=0?e.replace("/book","/#!/book"):e:e.replace("#!","").replace("//book","/book")},e.prototype.getShortTitle=function(e){if(!e)return e;var t=(e=e.replace(/,?\s+second\s+edition/i,", 2nd ed.").replace(/,?\s+third\s+edition/i,", 3rd ed.").replace(/,?\s+fourth\s+edition/i,", 4th ed.").replace(/,?\s+fifth\s+edition/i,", 5th ed.").replace(/,?\s+sixth\s+edition/i,", 6th ed.").replace(/,?\s+seventh\s+edition/i,", 7th ed.").replace(/,?\s+eight\s+edition/i,", 8th ed.").replace(/,?\s+nineth\s+edition/i,", 9th ed.")).indexOf(":");return-1==t?e:e.substring(0,t)},e.prototype.getElementLink=function(e){if(!e)return e;var t=(e=this.adaptLinkFormat(e)).match("(chapter-[0-9]+)|(part-[0-9]+)|(appendix(-[a-z])?)");return null==t||0==t.length?e:e.substring(0,t.index+t[0].length)},e.prototype.getSectionLink=function(e,t){if(!e)return e;e=this.adaptLinkFormat(e);var o=this.getElementLink(e);if(o==e)return e;var r=this.extractBookElementIndex(t).trim()||"";return""==r?e:(r.endsWith(".")&&(r=r.substring(0,r.length-1)),o+"/section-"+r.replace(/\./g,"-"))},e.prototype.extractBookElementIndex=function(e){var t=new RegExp(this.appendixIndexRegExp).exec(e),o=new RegExp(this.numberedBookItemIndexRegExp).exec(e);return t?(t[0]||"").replace("Appendix ",""):o&&o.length>1?o[1]:""},e.prototype.splitIntoShortNameAndContent=function(e){var t=new RegExp(this.appendixIndexRegExp).exec(e),o=new RegExp(this.numberedBookItemIndexRegExp).exec(e);if(t)return{shortName:r=(t[0]||"").replace("Appendix ",""),content:n=e.replace("Appendix","").replace(r,"")};if(o&&o.length>1){var r=o[1],n=e.replace("Chapter","").replace("Lesson","").replace(r,"");return-1!=e.indexOf("Chapter")&&(r="Chapter "+r),{shortName:r,content:n}}return null},e.prototype.extractSegmentedBookElementIndex=function(e){var t=this.extractBookElementIndex(e);return t?t.split(".").filter((function(e){return e.trim()})):[]},e.prototype.compareBookItemIndexes=function(e,t){for(var o=this.extractSegmentedBookElementIndex(e),r=this.extractSegmentedBookElementIndex(t),n=Math.max(o.length,r.length),s=0;s<n;s++){var i=o[s],a=r[s];if(!i)return-1;if(!a)return 1;var c=parseInt(i),l=parseInt(a);if(Number.isNaN(c)&&!Number.isNaN(l))return 1;if(!Number.isNaN(c)&&Number.isNaN(l))return-1;if(Number.isNaN(c)&&Number.isNaN(l)){if(i===a)continue;return i<a?-1:1}if(c!==l)return c<l?-1:1}return 0},e.prototype.getLastIndex=function(e){var t=this.extractBookElementIndex(e);if(!t)return t;var o=t.match(/(\d+)\.?$/);return null==o?"":o[1]||o[0]},e.prototype.cleanBookElementTitle=function(e,t){if(void 0===t&&(t=!0),!e)return e;var o=this.extractBookElementIndex(e);return e=e.trim().replace(/^(Chapter|Part|Section|Appendix|Unit|Module)/,""),t&&(e=e.replace(o,"").trim()),(e=e.replace(/^\.\s*/,"")).trim()},e.prototype.adjustCoverPath=function(e,t,o){return e?(-1!=e.indexOf("images")&&-1!=e.indexOf("manning.com")&&(-1!=e.indexOf("manning.com/book/")?e=e.replace("manning.com/book/","manning.com/"+t+"/"+o+"/resize/book/"):-1!=e.indexOf("manning.com/video/")&&(e=e.replace("manning.com/video/","manning.com/"+t+"/"+o+"/resize/video/"))),e):e},e}();t.a=new r},386:function(e,t,o){"use strict";var r,n=o(394),s=o(1191),i=o.n(s),a=o(466),c=o(28),l=o(416),u=o(618),p=function(){function e(e,t){this.parentStore=e,this.changeEmitter=new n,this.state=t?this.getStateFromLocalStorage():this.constructEmptyState()}return e.prototype.empty=function(e){void 0===e&&(e=!1);var t=this.state.isShown,o=this.constructEmptyState();o.isShown=!e&&t&&null!=this.parentStore.state.currentProduct,o.isDoneFetchingProducts=!1,this.updateState(o)},e.prototype.show=function(){this.state.isShown||this.updateState({isShown:!0})},e.prototype.hide=function(){this.state.isShown&&this.updateState({isShown:!1})},e.prototype.removeSelectedSuggestion=function(){this.updateState({selectedSuggestion:null})},e.prototype.setNewSuggestions=function(e){var t=this.constructEmptyState();t.isShown=!0,t.autocompleteSuggestions=e,t.displayedAutocompleteSuggestions=new l.c(e.productSuggestions.slice(0,this.getMaxNumberOfDisplayedProducts()),e.conceptSuggestions.slice(0,10),e.displayedProductSuggestions.slice(0,this.getMaxNumberOfDisplayedProducts())),t.productsSuggestionsListDisplayState=this.determineListState(t.displayedAutocompleteSuggestions.productSuggestions,t.autocompleteSuggestions.productSuggestions,this.getMaxNumberOfDisplayedProducts()),t.conceptsSuggestionsListDisplayState=this.determineListState(t.displayedAutocompleteSuggestions.conceptSuggestions,t.autocompleteSuggestions.conceptSuggestions,10),t.isDoneFetchingProducts=!0,this.updateState(t)},e.prototype.getMaxNumberOfDisplayedProducts=function(){return(this.parentStore.state.placement==v.Dropdown?6:5)*(this.parentStore.state.isMobileDisplayMode?2:1)},e.prototype.setNewSuggestion=function(e,t){this.updateState({selectedSuggestion:e},t)},e.prototype.setIsDoneFetchingProducts=function(e){this.updateState({isDoneFetchingProducts:e})},e.prototype.selectPreviousSuggestion=function(e){void 0===e&&(e=!1);var t=this.state.selectedSuggestion,o=e?[]:this.state.displayedAutocompleteSuggestions.conceptSuggestions,r=this.state.displayedAutocompleteSuggestions.productSuggestions,n=o.concat(r),s=null;if(null==t)if(this.state.isMoreLessConceptsSelected)s=o[o.length-1];else{if(!this.state.isMoreLessProductsSelected)return!1;s=r[r.length-1]}else{var i=n.indexOf(t)-1;if(i<0)return this.updateState({selectedSuggestion:null,isMoreLessConceptsSelected:!1,isMoreLessProductsSelected:!1}),!0;s=n[i]}return t instanceof l.b&&s instanceof l.a&&this.state.conceptsSuggestionsListDisplayState!==u.a.ContainsLessThanMax?(this.updateState({selectedSuggestion:null,isMoreLessConceptsSelected:!0}),!0):(this.updateState({selectedSuggestion:s,isMoreLessConceptsSelected:!1,isMoreLessProductsSelected:!1}),!0)},e.prototype.selectNextSuggestion=function(e){void 0===e&&(e=!1);var t=this.state.selectedSuggestion,o=e?[]:this.state.displayedAutocompleteSuggestions.conceptSuggestions,r=this.state.displayedAutocompleteSuggestions.productSuggestions,n=o.concat(r),s=n.indexOf(t)+1;if(s>=n.length)return this.updateState({selectedSuggestion:null,isMoreLessConceptsSelected:t instanceof l.a&&this.state.conceptsSuggestionsListDisplayState!==u.a.ContainsLessThanMax,isMoreLessProductsSelected:t instanceof l.b&&this.state.productsSuggestionsListDisplayState!==u.a.ContainsLessThanMax}),!0;var i=n[s];return t instanceof l.a&&i instanceof l.b&&this.state.conceptsSuggestionsListDisplayState!==u.a.ContainsLessThanMax?(this.updateState({selectedSuggestion:null,isMoreLessConceptsSelected:!0}),!0):(null==t&&(this.state.isMoreLessConceptsSelected?i=r[0]:this.state.isMoreLessProductsSelected&&(i=null)),this.updateState({selectedSuggestion:i,isMoreLessConceptsSelected:!1,isMoreLessProductsSelected:!1}),!0)},e.prototype.selectAlternativeTypeSuggestionOnSameLevel=function(){var e=this.state.selectedSuggestion;if(null!=e){var t=this.state.displayedAutocompleteSuggestions.conceptSuggestions,o=this.state.displayedAutocompleteSuggestions.productSuggestions,r=null;e instanceof l.a?r=o[0]:e instanceof l.b&&(r=t[0]),null!=r&&this.updateState({selectedSuggestion:r,isMoreLessConceptsSelected:!1,isMoreLessProductsSelected:!1})}else this.state.isMoreLessConceptsSelected?this.updateState({isMoreLessConceptsSelected:!1,isMoreLessProductsSelected:!0}):this.state.isMoreLessProductsSelected&&this.updateState({isMoreLessConceptsSelected:!0,isMoreLessProductsSelected:!1})},e.prototype.toggleConceptsMoreLessDisplay=function(e){void 0===e&&(e=!1);var t={};switch(this.state.conceptsSuggestionsListDisplayState){case u.a.CanShowLess:t.conceptsSuggestionsListDisplayState=u.a.CanShowMore;break;case u.a.CanShowMore:t.conceptsSuggestionsListDisplayState=u.a.CanShowLess}t.conceptsSuggestionsListDisplayState!==this.state.conceptsSuggestionsListDisplayState&&(t.displayedAutocompleteSuggestions=new l.c(this.state.displayedAutocompleteSuggestions.productSuggestions,this.getDisplayedItems(this.state.autocompleteSuggestions.conceptSuggestions,10,t.conceptsSuggestionsListDisplayState),this.state.displayedAutocompleteSuggestions.displayedProductSuggestions),t.conceptsSuggestionsListDisplayState==u.a.CanShowLess&&e&&(t.selectedSuggestion=this.state.autocompleteSuggestions.conceptSuggestions[this.state.displayedAutocompleteSuggestions.conceptSuggestions.length],null!=t.selectedSuggestion&&(t.isMoreLessConceptsSelected=!1)),this.updateState(t))},e.prototype.toggleProductsMoreLessDisplay=function(e){void 0===e&&(e=!1);var t={};switch(this.state.productsSuggestionsListDisplayState){case u.a.CanShowLess:t.productsSuggestionsListDisplayState=u.a.CanShowMore;break;case u.a.CanShowMore:t.productsSuggestionsListDisplayState=u.a.CanShowLess}t.productsSuggestionsListDisplayState!==this.state.productsSuggestionsListDisplayState&&(t.displayedAutocompleteSuggestions=new l.c(this.getDisplayedItems(this.state.autocompleteSuggestions.productSuggestions,this.getMaxNumberOfDisplayedProducts(),t.productsSuggestionsListDisplayState),this.state.displayedAutocompleteSuggestions.conceptSuggestions,this.state.autocompleteSuggestions.displayedProductSuggestions),t.productsSuggestionsListDisplayState==u.a.CanShowLess&&e&&(t.selectedSuggestion=this.state.autocompleteSuggestions.productSuggestions[this.state.displayedAutocompleteSuggestions.productSuggestions.length],null!=t.selectedSuggestion&&(t.isMoreLessProductsSelected=!1)),this.updateState(t))},e.prototype.hasAtLeastOneTypeOfAutocompletes=function(){return null!=this.state.autocompleteSuggestions&&(null!=this.state.autocompleteSuggestions.conceptSuggestions&&this.state.autocompleteSuggestions.conceptSuggestions.length>0||null!=this.state.autocompleteSuggestions.productSuggestions&&this.state.autocompleteSuggestions.productSuggestions.length>0)},e.prototype.hasBothProductsAndConcepts=function(){return null!=this.state.autocompleteSuggestions&&null!=this.state.autocompleteSuggestions.conceptSuggestions&&this.state.autocompleteSuggestions.conceptSuggestions.length>0&&null!=this.state.autocompleteSuggestions.productSuggestions&&this.state.autocompleteSuggestions.productSuggestions.length>0},e.prototype.constructEmptyState=function(){var e=l.c.createEmpty();return{isShown:!1,autocompleteSuggestions:e,displayedAutocompleteSuggestions:e,selectedSuggestion:null,conceptsSuggestionsListDisplayState:u.a.ContainsLessThanMax,productsSuggestionsListDisplayState:u.a.ContainsLessThanMax,isMoreLessConceptsSelected:!1,isMoreLessProductsSelected:!1,isFullTextSearchSelected:!1,isDoneFetchingProducts:!1}},e.prototype.updateState=function(e,t){void 0===t&&(t=!0);var o=this.state;this.state=Object.assign({},this.state,e),t&&this.triggerChange(o,this.state)},e.prototype.determineListState=function(e,t,o){return e.length<t.length?u.a.CanShowMore:e.length>o?u.a.CanShowLess:u.a.ContainsLessThanMax},e.prototype.getDisplayedItems=function(e,t,o){switch(o){case u.a.CanShowMore:return e.slice(0,t);case u.a.CanShowLess:case u.a.ContainsLessThanMax:default:return e}},e.prototype.onPropertyChanged=function(e){this.changeEmitter.addListener("change",e)},e.prototype.offPropertyChanged=function(e){this.changeEmitter.removeListener("change",e)},e.prototype.triggerChange=function(e,t){this.changeEmitter.emit("change",e,t)},e.prototype.storeStateToLocalStorage=function(){try{null!=window.localStorage&&window.localStorage.setItem("search-autocomplete-store-state",JSON.stringify(this.state,(function(e,t){return"parentConcept"==e?null:t})))}catch(e){console.log("Error storing autocomplete store to local storage")}},e.prototype.getStateFromLocalStorage=function(){var e=this.constructEmptyState();try{if(null==window.localStorage)return e;var t=window.localStorage.getItem("search-autocomplete-store-state");if(!t)return e;var o=JSON.parse(t);return o.autocompleteSuggestions=l.c.convert(o.autocompleteSuggestions),o.displayedAutocompleteSuggestions=l.c.findAllMatching(o.autocompleteSuggestions,o.displayedAutocompleteSuggestions),o.selectedSuggestion=l.c.findMatching(o.autocompleteSuggestions,o.selectedSuggestion),o}catch(t){return window.localStorage.removeItem("search-autocomplete-store-state"),console.log("Error constructing state from local storage"),e}},e}(),h=o(617),d=o(456),m=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),g=function(){function e(e,t,o){this.type=e,this.label=t,this.resultCount=o}return e.groupSearchFiltersByType=function(e){if(!e||!e.length)return[];for(var t=[],o={},r=0,n=e;r<n.length;r++){var s=n[r];o[s.type]||(o[s.type]=[]),o[s.type].push(s)}for(var i in o)t.push(o[i]);return t},e}(),f=function(e){function t(t,o){return void 0===o&&(o=0),e.call(this,"category",t,o)||this}return m(t,e),t.prototype.matchesProduct=function(e){return!!(e&&e.tags&&e.tags.length)&&-1!=e.tags.indexOf(this.label)},t}(g),S=function(e){function t(t,o,r,n){void 0===n&&(n=0);var s=e.call(this,"price",t,n)||this;return s.lowerBound=o,s.upperBound=r,s}return m(t,e),t.prototype.isWithinBounds=function(e){return e>=this.lowerBound&&e<this.upperBound},t.prototype.matchesProduct=function(e){return!!e&&this.isWithinBounds(e.price)},t.createPriceSearchFilters=function(){return[new t("$0 - $20",0,20),new t("$20 - $30",20,30),new t("$30 - $40",30,40),new t("$40 - $60",40,60),new t("$60 - $100",60,100),new t("$100 - $250",100,250)]},t}(g),y=function(e){function t(t,o){return void 0===o&&(o=0),e.call(this,"product",t,o)||this}return m(t,e),t.createBookProductTypeSearchFilter=function(){return new t("book")},t.createVideoProductTypeSearchFilter=function(){return new t("liveVideo")},t.createBundleTypeSearchFilter=function(){return new t("bundle")},t.prototype.matchesProduct=function(e){return!!e&&("book"==this.label?!e.isLivevideo&&!e.isBundle:"liveVideo"==this.label?e.isLivevideo:"bundle"==this.label&&e.isBundle)},t}(g);o.d(t,"a",(function(){return v})),o.d(t,"b",(function(){return b}));var v,b,w=function(){return(w=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};!function(e){e[e.MainFlow=0]="MainFlow",e[e.Modal=1]="Modal",e[e.Dropdown=2]="Dropdown"}(v||(v={})),function(e){e[e.BestMatch=0]="BestMatch",e[e.PriceFromLowest=1]="PriceFromLowest",e[e.PriceFromHighest=2]="PriceFromHighest",e[e.NewestFirst=3]="NewestFirst"}(b||(b={}));var P=function(){function e(t,o,r,s,i,a,c,l){this.searchCategories=["Java",".NET","Web","Data","Mobile","Enterprise"],this.coverPlaceholder="assets/images/cover.png",this.bookshelfImage="assets/images/bookshelf.png",this.bookImage="assets/images/book.png",this.localStorageResultsSearchTreeItem=null,this.localStorageSearchTreeState=null,this.changeEmitter=new n,this.searchProvider=r,this.sourceApp=t,this.deploymentType=o,this.getFullProductTreeResults=this.getFullProductTreeResults.bind(this),this.openSuggestion=s,this.onCloseMenu=i,this.onSearchMade=a,this.autocompleteStore=new p(this,l),this.state=l?e.getStateFromLocalStorage():e.createInitialState(c),this.handleResizeEnd=this.handleResizeEnd.bind(this),h.a.registerResizeEndCallback(this.handleResizeEnd)}return e.prototype.changeSortOrder=function(e){this.updateState({sortOrder:e}),this.autocompleteStore.setNewSuggestions(new l.c(this.autocompleteStore.state.autocompleteSuggestions.productSuggestions,this.autocompleteStore.state.autocompleteSuggestions.conceptSuggestions,this.getDisplayedProductSuggestions(this.autocompleteStore.state.autocompleteSuggestions.productSuggestions)))},e.prototype.changeSearchFilterSelection=function(e,t){var o=null!=this.state.selectedSearchFilters&&this.state.selectedSearchFilters.find((function(t){return t.label==e.label})),r=[],n=!1;t?o||(r=this.state.selectedSearchFilters.concat([e]),n=!0):o&&(r=this.state.selectedSearchFilters.filter((function(t){return t.label!=e.label})),n=!0),n&&(this.updateState(w({selectedSearchFilters:r},this.getDerivedFiltersAndCategories(this.autocompleteStore.state.autocompleteSuggestions.productSuggestions,r))),this.autocompleteStore.setNewSuggestions(new l.c(this.autocompleteStore.state.autocompleteSuggestions.productSuggestions,this.autocompleteStore.state.autocompleteSuggestions.conceptSuggestions,this.getDisplayedProductSuggestions(this.autocompleteStore.state.autocompleteSuggestions.productSuggestions))))},e.prototype.hidrateLocalStorageState=function(){var e=this;this.localStorageResultsSearchTreeItem=this.getResultsSearchTreeItemFromLocalStorage(),this.localStorageSearchTreeState=this.getSearchTreeStateFromLocalStorage(),this.state.currentProduct&&this.state.currentProduct.externalId?this.setIsInLibraryAndProduct(this.state.isInLibrary,this.state.currentProduct.externalId,(function(){e.state.items?e.startSearch(e.state.isLastSearchDeep):e.state.items=[]})):this.state.items?this.startSearch(this.state.isLastSearchDeep):this.state.items=[]},e.prototype.handleResizeEnd=function(){this.updateScreenSize(e.areScreenDimensionsSmall(),e.areScreenDimensionsMedium())},e.createInitialState=function(e){return{isInLibrary:null==e||void 0===e.isInLibrary||e.isInLibrary,currentProduct:null==e||void 0===e.currentProduct?null:e.currentProduct,currentSearchTreeItem:null==e||void 0===e.currentSearchTreeItem?null:e.currentSearchTreeItem,isTyping:null!=e&&void 0!==e.isTyping&&e.isTyping,query:null==e||void 0===e.query?"":e.query,openLinkedSuggestionWithoutSearch:null==e||void 0===e.openLinkedSuggestionWithoutSearch||e.openLinkedSuggestionWithoutSearch,isSearchAllSelected:null==e||void 0===e.isSearchAllSelected||e.isSearchAllSelected,selectedSearchCategories:null==e||void 0===e.selectedSearchCategories?[]:e.selectedSearchCategories,isShowingResults:null!=e&&void 0!==e.isShowingResults&&e.isShowingResults,items:null==e||void 0===e.items?null:e.items,isWaitingForResults:null!=e&&void 0!==e.isWaitingForResults&&e.isWaitingForResults,errorMessage:null==e||void 0===e.errorMessage?"":e.errorMessage,allCategories:null==e||void 0===e.allCategories?[]:e.allCategories,openLinksInNewTab:null!=e&&void 0!==e.openLinksInNewTab&&e.openLinksInNewTab,defaultShowTreeItemsWithoutResults:null!=e&&void 0!==e.defaultShowTreeItemsWithoutResults&&e.defaultShowTreeItemsWithoutResults,isMobileDisplayMode:null==e||void 0===e.isMobileDisplayMode?this.areScreenDimensionsSmall():e.isMobileDisplayMode,isTabletDisplayMode:null==e||void 0===e.isTabletDisplayMode?this.areScreenDimensionsMedium():e.isTabletDisplayMode,placement:null==e||void 0===e.placement?v.Modal:e.placement,dontAutocompleteConcepts:null!=e&&void 0!==e.dontAutocompleteConcepts&&e.dontAutocompleteConcepts,sortOrder:b.BestMatch,selectedSearchFilters:[],availableCategorySearchFilters:[],availablePriceSearchFilters:[],availableProductTypeSearchFilers:[]}},e.prototype.getCurrentProductResultTypes=function(e){var t=this.state.items;if(null==t||0==t.length)return"";for(var o=!1,r=!1,n=!1,s=0,i=this.state.items;s<i.length;s++){var a=i[s];if(a.productInfo.isLivebook?o=!0:a.productInfo.isLivevideo?r=!0:n=!0,o&&r)break}return(o||n)&&r?e?"books/videos":"books and videos":r?"videos":"books"},e.prototype.generateSearchMadeQuery=function(e){var t=e||this.state.query;return t+=null!=this.state.currentProduct?"--"+this.state.currentProduct.externalId+"--":"",t+=this.state.selectedSearchCategories.join("--")},e.prototype.updateState=function(e,t){void 0===t&&(t=!0);var o=this.state;this.state=Object.assign({},this.state,e),t&&this.triggerChange(o,this.state)},e.prototype.isInDemoApp=function(){return this.sourceApp==c.b.demo},e.prototype.isInLivevideo=function(){return this.sourceApp==c.b.livevideo},e.prototype.isInLivebook=function(){return this.sourceApp==c.b.livebook},e.prototype.isInMarketplace=function(){return this.sourceApp==c.b.marketplace},e.prototype.enterShowingResultsState=function(){this.state.isShowingResults||this.updateState({isShowingResults:!0})},e.prototype.leaveShowingResultsState=function(){var e=this;this.state.isShowingResults&&(this.updateState({isShowingResults:!1}),setTimeout((function(){return e.setTypingFinished(!0)}),100))},e.prototype.openLink=function(e,t){this.openSuggestion(null,e,t)},e.prototype.setIsInLibrary=function(e){this.state.isInLibrary!=e&&(this.autocompleteStore.empty(),this.updateState({isInLibrary:e}),""!=this.state.query&&this.setTypingFinished(!0))},e.prototype.setIsInLibraryAndClearSearch=function(e){this.state.isInLibrary!=e&&(this.autocompleteStore.empty(),this.updateState({items:null,isWaitingForResults:!1,currentSearchTreeItem:null,isShowingResults:!1,isInLibrary:e,errorMessage:null,isLastSearchDeep:!1,allCategories:[]}))},e.prototype.setCurrentSearchTreeItem=function(e){this.state.currentSearchTreeItem!==e&&this.updateState({currentSearchTreeItem:e})},e.prototype.updatePlacement=function(e){this.state.placement!==e&&this.updateState({placement:e})},e.prototype.setIsInLibraryAndProduct=function(e,t,o){var r=this;this.state.isInLibrary!==e||null==this.state.currentProduct&&null!=t||null!=this.state.currentProduct&&this.state.currentProduct.externalId!==t?(this.autocompleteStore.empty(),t?this.searchProvider.getProductInfo(t).then((function(t){r.updateState({isInLibrary:e,currentProduct:t}),e||null==t||r.autocompleteStore.show(),o&&o()})).catch((function(e){console.log("Error when fetching product info: ",e),o&&o()})):(this.updateState({isInLibrary:e,currentProduct:null}),o&&o()),""!=this.state.query&&this.setTypingFinished(!0)):o&&o()},e.prototype.setIsTypingQuery=function(e){if(void 0===e&&(e=""),!this.state.isTyping||this.state.query!=e){if(this.autocompleteSuggestionsPromise&&this.autocompleteSuggestionsPromise.cancel(),""==e)return void this.clearSearch(!0);this.autocompleteStore.removeSelectedSuggestion(),this.updateState({isTyping:!0,query:e})}},e.prototype.setTypingFinished=function(e){var t=this;if(void 0===e&&(e=!1),this.state.isTyping||e){this.autocompleteStore.removeSelectedSuggestion(),this.updateState({isTyping:!1}),this.autocompleteSuggestionsPromise&&this.autocompleteSuggestionsPromise.cancel();var o=this.state.placement==v.Dropdown,r=null!=this.state.currentProduct&&!this.state.isInLibrary;this.autocompleteStore.setIsDoneFetchingProducts(!1),this.autocompleteSuggestionsPromise=new i.a((function(e,n){r&&!o||(t.searchProvider.autocompleteProducts(t.state.query).then((function(e){t.state.hasAutocompleteProductsInfo||t.updateState({hasAutocompleteProductsInfo:!0}),t.autocompleteStore.setNewSuggestions(new l.c(e,t.autocompleteStore.state.autocompleteSuggestions.conceptSuggestions,t.getDisplayedProductSuggestions(e))),t.deriveFiltersAndCategories(e)})).catch((function(e){console.log("Error getting product autocompletions",e)})),t.state.query&&t.searchProvider.fullTextAutocompleteProducts(t.state.query).then((function(e){t.state.hasAutocompleteProductsInfo||t.updateState({hasAutocompleteProductsInfo:!0});var o=t.mergeAutocompleteProducts(t.autocompleteStore.state.autocompleteSuggestions.productSuggestions,e);t.autocompleteStore.setNewSuggestions(new l.c(o,t.autocompleteStore.state.autocompleteSuggestions.conceptSuggestions,t.getDisplayedProductSuggestions(o)))}))),t.state.dontAutocompleteConcepts||t.searchProvider.autocompleteConcepts(t.state.query,!o&&r?t.state.currentProduct.externalId:void 0,!o&&r?t.state.currentProduct.isLivebook:void 0,!o&&r?t.state.currentProduct.isLivevideo:void 0).then((function(e){e&&e.length&&e.forEach((function(e){return e.highlightQueryMatch(t.state.query)})),t.autocompleteStore.setNewSuggestions(new l.c(t.autocompleteStore.state.autocompleteSuggestions.productSuggestions,e,t.autocompleteStore.state.autocompleteSuggestions.displayedProductSuggestions))})).catch((function(e){console.log("Error getting concept autocompletions",e)}))}))}},e.prototype.setQuery=function(e){if(this.state.query!=e){if(""==e)return void this.clearSearch();this.updateState({query:e})}},e.prototype.clearAutosuggestionsAndHide=function(){this.autocompleteStore.empty(!0)},e.prototype.clearSearchAndProduct=function(){this.updateState({query:"",items:null,isWaitingForResults:!1,currentSearchTreeItem:null,isShowingResults:!1,isInLibrary:!0,currentProduct:null,errorMessage:null,isLastSearchDeep:!1,allCategories:[]}),this.autocompleteStore.empty()},e.prototype.clearSearchKeepQuery=function(e){var t=this;this.autocompleteStore.empty(),this.updateState({items:null,isWaitingForResults:!1,currentSearchTreeItem:null,isShowingResults:!1,isInLibrary:e?this.state.isInLibrary:null==this.state.currentProduct,errorMessage:null,isLastSearchDeep:!1,allCategories:[]}),setTimeout((function(){return t.setTypingFinished(!0)}),100)},e.prototype.forceLayoutRecalc=function(){this.triggerChange(this.state,this.state)},e.prototype.clearSearch=function(e){this.autocompleteStore.empty(),this.updateState({query:"",items:null,isWaitingForResults:!1,currentSearchTreeItem:null,isShowingResults:!1,isInLibrary:e?this.state.isInLibrary:null==this.state.currentProduct,errorMessage:null,allCategories:[],isLastSearchDeep:!1,availableCategorySearchFilters:[],availablePriceSearchFilters:[],availableProductTypeSearchFilers:[]})},e.prototype.clearSearchResults=function(){this.updateState({items:null,isWaitingForResults:!1,currentSearchTreeItem:null,errorMessage:null,isLastSearchDeep:!1,allCategories:[]})},e.prototype.selectSuggestionAndStartSearch=function(e,t,o){var r=this;e=this.getSuggestion(e);var n=this.shouldOpenSuggestionWithoutSearch(e);setTimeout((function(){r.onSuggestionSelected&&r.onSuggestionSelected(e)}),5),n?this.openSuggestion(e,t,o):(this.autocompleteStore.setNewSuggestion(e),setTimeout((function(){return r.startSearch()}),100))},e.prototype.closeMenu=function(){this.onCloseMenu&&this.onCloseMenu()},e.prototype.shouldOpenSuggestionWithoutSearch=function(e){return"string"!=typeof e&&(e instanceof l.b?null!=this.openSuggestion&&this.state.openLinkedSuggestionWithoutSearch:e instanceof l.a&&!(null==this.openSuggestion||!this.state.openLinkedSuggestionWithoutSearch||!e.link))},e.prototype.selectSuggestion=function(e){this.autocompleteStore.setNewSuggestion(this.getSuggestion(e))},e.prototype.getSuggestion=function(e){return"string"==typeof e?this.autocompleteStore.state.autocompleteSuggestions.getSuggestion(e):e},e.prototype.getFullProductTreeResults=function(e){var t=this;return new i.a((function(o,r){t.searchProvider.getFullProductTreeResults(e).then((function(e){t.sourceApp==c.b.livebook&&e.children&&e.children.length>1&&(e.children=e.children.filter((function(e){return e.name!=d.a.PRODUCT_PAGE_KEY}))),o(e)})).catch((function(e){return r(e)}))}))},e.prototype.startSearch=function(e,t){var o=this;void 0===e&&(e=!1);var r=((null!=this.autocompleteStore.state.selectedSuggestion?this.autocompleteStore.state.selectedSuggestion.title:this.state.query)||"").trim();if(this.autocompleteSuggestionsPromise&&this.autocompleteSuggestionsPromise.cancel(),!this.shouldPerformSearchCallback||this.shouldPerformSearchCallback()){if(r){var n=this.state.placement==v.Modal,s=this.getCurrentProductId(),i=[this.searchProvider.search(r,n?s:"",this.state.selectedSearchCategories.join(";"),"",e)];!n&&s&&i.push(this.searchProvider.search(r,s,this.state.selectedSearchCategories.join(";"),"",e)),Promise.all(i).then((function(n){var s=n[0];if(n.length>1&&n[1].length)for(var i=n[1][0],a=0,c=s;a<c.length;a++){var l=c[a];if(l.productId==i.productId){l.results=i.results,l.score=i.score;break}}o.updateState({items:s,query:r,isWaitingForResults:!1,isLastSearchDeep:e,errorMessage:""}),t&&setTimeout((function(){t&&t(!0)}),100)})).catch((function(e){o.updateState({items:null,query:r,isWaitingForResults:!1,allCategories:o.state.allCategories||[],isLastSearchDeep:!1,errorMessage:e}),t&&setTimeout((function(){t&&t(!1)}),100)})),this.updateState({allCategories:this.state.allCategories||[],isShowingResults:!0,items:null,query:r,isWaitingForResults:!0,errorMessage:""}),setTimeout((function(){o.onSearchMade&&o.onSearchMade(o.state.query,o.state.isInLibrary,null!=o.state.currentProduct?o.state.currentProduct.externalId:"",e)}),50)}}else t&&t(!1)},e.prototype.getCurrentProductId=function(){return null==this.state.currentProduct?"":this.state.isInLibrary?"":this.state.currentProduct.externalId},e.prototype.updateScreenSize=function(e,t){this.state.isMobileDisplayMode==e&&this.state.isTabletDisplayMode==t||this.updateState({isMobileDisplayMode:e,isTabletDisplayMode:t})},e.prototype.changeCategorySelection=function(e,t){if("All"==e)this.updateState({isSearchAllSelected:t,selectedSearchCategories:t?[]:this.state.selectedSearchCategories});else{var o=this.state.selectedSearchCategories.concat([]),r=o.indexOf(e);if(r>-1!=t)if(t){var n=!1,s=o.concat([e]);s.length==this.searchCategories.length&&(s=[],n=!0),this.updateState({selectedSearchCategories:s,isSearchAllSelected:n})}else o.splice(r,1),this.updateState({selectedSearchCategories:o,isSearchAllSelected:0==o.length})}},e.prototype.goBack=function(){null!=this.state.currentSearchTreeItem?this.setCurrentSearchTreeItem(null):this.leaveShowingResultsState()},e.prototype.mergeAutocompleteProducts=function(e,t){if(null==t||0==t.length)return e;if(null==e||0==e.length)return t;for(var o=(this.state.query||"").toLowerCase(),r=[],n={},s=0,i=e;s<i.length;s++){(-1!=(p=i[s]).title.toLowerCase().indexOf(o)||d.a.containsQueryWord(p.title.toLowerCase(),o)||p.authors&&p.authors.toLowerCase&&-1!=p.authors.toLowerCase().indexOf(o))&&(r.push(p),n[p.externalId]=!0)}for(var a=0,c=t=t.slice(0,3);a<c.length;a++){n[(p=c[a]).externalId]||(r.push(p),n[p.externalId]=!0)}for(var l=0,u=e;l<u.length;l++){var p;n[(p=u[l]).externalId]||(r.push(p),n[p.externalId]=!0)}return r},e.areScreenDimensionsMedium=function(){return window.innerWidth<=700},e.areScreenDimensionsSmall=function(){return window.innerWidth<=500},e.prototype.onPropertyChanged=function(e){this.changeEmitter.addListener("change",e)},e.prototype.offPropertyChanged=function(e){this.changeEmitter.removeListener("change",e)},e.prototype.triggerChange=function(e,t){this.changeEmitter.emit("change",e,t)},e.prototype.onLayoutRecalc=function(e){this.changeEmitter.addListener("layout",e)},e.prototype.offLayoutRecalc=function(e){this.changeEmitter.removeListener("layout",e)},e.prototype.triggerLayoutRecalc=function(){this.changeEmitter.emit("layout")},e.prototype.initialAutocompleteProducts=function(){var e=this;this.searchProvider.autocompleteProducts("").then((function(){e.updateState({hasAutocompleteProductsInfo:!0})}))},e.prototype.storeStateToLocalStorage=function(){try{if(this.autocompleteStore.storeStateToLocalStorage(),null!=window.localStorage&&(window.localStorage.setItem("search-store-state",JSON.stringify(this.state,(function(e,t){return"parent"==e?null:"currentProduct"==e&&null!=t?{externalId:t.externalId}:"currentSearchTreeItem"==e?null:"items"==e?t&&t.length?[]:null:t}))),null!=this.state.currentSearchTreeItem)){var e=this.state.currentSearchTreeItem,t=null;e instanceof a.b?t={productTitle:e.productTitle,productId:e.productId}:e instanceof a.a?t={elementTitle:e.elementTitle,productId:e.parent.productId}:e instanceof a.c?t={subElementTitle:e.subElementTitle,productId:e.parent.parent.productId}:e instanceof a.d&&(t={subSubElementTitle:e.subSubElementTitle,productId:e.parent.parent.parent.productId}),null!=t&&window.localStorage.setItem("search-tree-results-item-data",JSON.stringify(t))}}catch(e){console.log("Error storing autocomplete store to local storage")}},e.getStateFromLocalStorage=function(){var e=this.createInitialState();try{if(null==window.localStorage)return e;var t=window.localStorage.getItem("search-store-state");return t?JSON.parse(t):e}catch(t){return window.localStorage.removeItem("search-store-state"),console.log("Error constructing state from local storage"),e}},e.prototype.getResultsSearchTreeItemFromLocalStorage=function(){var e=null;try{if(null==window.localStorage)return null;var t=window.localStorage.getItem("search-tree-results-item-data");t&&(e=JSON.parse(t))}catch(e){console.log("Error getting results search tree item from local storage")}return e},e.prototype.storeTreeStateToLocalStorage=function(e){try{if(!window.localStorage||!window.localStorage.removeItem)return;null==e?window.localStorage.removeItem("search-tree-data"):window.localStorage.setItem("search-tree-data",JSON.stringify({selectedProductTreeResults:null!=e.selectedProductTreeResults?{productTitle:e.selectedProductTreeResults.productTitle,productId:e.selectedProductTreeResults.productId}:void 0,selectedElementTreeResult:null!=e.selectedElementTreeResult?{elementTitle:e.selectedElementTreeResult.elementTitle,productId:e.selectedProductTreeResults.productId}:void 0,selectedSubElementTreeResult:null!=e.selectedSubElementTreeResult?{subElementTitle:e.selectedSubElementTreeResult.subElementTitle,productId:e.selectedProductTreeResults.productId}:void 0,selectedSubSubElementTreeResult:null!=e.selectedSubSubElementTreeResult?{subSubElementTitle:e.selectedSubSubElementTreeResult.subSubElementTitle,productId:e.selectedProductTreeResults.productId}:void 0}))}catch(e){console.log("Error when storing tree state to local storage")}},e.prototype.getSearchTreeStateFromLocalStorage=function(){if(!window.localStorage||!window.localStorage.getItem)return null;try{var e=window.localStorage.getItem("search-tree-data");return e?JSON.parse(e):null}catch(e){return console.log("Error getting tree state from local storage"),null}},e.prototype.deriveFiltersAndCategories=function(e,t){this.updateState(this.getDerivedFiltersAndCategories(e,this.state.selectedSearchFilters),t)},e.prototype.getDerivedFiltersAndCategories=function(e,t){return{availableCategorySearchFilters:this.getAvailableCategorySearchFilters(e,t),availablePriceSearchFilters:this.getAvailablePriceSearchFilters(e,t),availableProductTypeSearchFilers:this.getAvailableProductTypeSearchFilters(e,t)}},e.prototype.getAvailableCategorySearchFilters=function(e,t){if(!e||0==e.length)return[];var o=t&&t[0];null==o||o instanceof f||(e=e.filter((function(e){return o.matchesProduct(e)})));for(var r={},n=0,s=e;n<s.length;n++){var i=s[n];if(i.tags&&i.tags.length)for(var a=0,c=i.tags;a<c.length;a++){r[u=c[a]]||(r[u]=0),r[u]++}}var l=[];for(var u in r)l.push(new f(u,r[u]));return 1==l.length?[]:l.sort((function(e,t){return t.resultCount-e.resultCount}))},e.prototype.getAvailablePriceSearchFilters=function(e,t){if(!e||0==e.length)return[];var o=t&&t[0];null==o||o instanceof S||(e=e.filter((function(e){return o.matchesProduct(e)})));for(var r=S.createPriceSearchFilters(),n=0,s=e;n<s.length;n++)for(var i=s[n],a=0,c=r;a<c.length;a++){var l=c[a];if(l.isWithinBounds(i.price)){l.resultCount++;break}}return 1==r.length?[]:r.filter((function(e){return e.resultCount>0}))},e.prototype.getAvailableProductTypeSearchFilters=function(e,t){if(!e||0==e.length)return[];var o=t&&t[0];null==o||o instanceof y||(e=e.filter((function(e){return o.matchesProduct(e)})));for(var r=y.createBookProductTypeSearchFilter(),n=y.createVideoProductTypeSearchFilter(),s=y.createBundleTypeSearchFilter(),i=0,a=e;i<a.length;i++){var c=a[i];c.isBundle?s.resultCount++:c.isLivevideo?n.resultCount++:r.resultCount++}var l=[];return r.resultCount>0&&l.push(r),n.resultCount>0&&l.push(n),s.resultCount>0&&l.push(s),1==l.length?[]:l.sort((function(e,t){return t.resultCount-e.resultCount}))},e.prototype.getDisplayedProductSuggestions=function(e){if(null==this.state.selectedSearchFilters||0==this.state.selectedSearchFilters.length)return this.sortBySortOrder(e);for(var t=e.concat([]),o=0,r=g.groupSearchFiltersByType(this.state.selectedSearchFilters);o<r.length;o++){for(var n={},s=[],i=0,a=r[o];i<a.length;i++)for(var c=a[i],l=0,u=t;l<u.length;l++){var p=u[l];c.matchesProduct(p)&&!n[p.id]&&(n[p.id]=!0,s.push(p))}t=s}return this.sortBySortOrder(t)},e.prototype.sortBySortOrder=function(e){switch(this.state.sortOrder){case b.NewestFirst:return e.sort((function(e,t){return t.date.getTime()-e.date.getTime()}));case b.PriceFromHighest:return e.sort((function(e,t){return t.price-e.price}));case b.PriceFromLowest:return e.sort((function(e,t){return e.price-t.price}));case b.BestMatch:default:return e}},e}();t.c=P},408:function(e,t,o){"use strict";var r=function(){function e(){}return e.prototype.triggerEvent=function(e,t){if("createEvent"in document){var o=document.createEvent("HTMLEvents");o.initEvent(t,!1,!0),e.dispatchEvent(o)}else e.fireEvent("on"+t)},e.prototype.triggerTextAreaChange=function(e){e.dispatchEvent(new Event("input",{bubbles:!0}))},e.prototype.closest=function(e,t){var o,r;for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(o=e,!0)}));e;){if((r=e.parentElement)&&r[o](t))return r;e=r}return null},e.prototype.removeClassFromElements=function(e,t){for(var o=0;o<e.length;o++)this.removeClassFromElement(e[o],t)},e.prototype.removeClassFromElement=function(e,t){e&&e.classList.remove(t)},e.prototype.addClassToElements=function(e,t){for(var o=0;o<e.length;o++)this.addClassToElement(e[o],t)},e.prototype.addClassToElement=function(e,t){e&&e.classList.add(t)},e.prototype.ensureInView=function(e,t){if(null!=e){t||(t=this.getScrollParent(e));var o=t.scrollTop,r=o+t.clientHeight,n=e.offsetTop,s=n+e.clientHeight;n<o?t.scrollTop-=o-n:s>r&&(t.scrollTop+=s-r+10)}},e.prototype.getScrollParent=function(e,t){var o=window.getComputedStyle(e),r="absolute"===o.position,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===o.position)return document.body;for(var s=e;s=s.parentElement;)if(o=window.getComputedStyle(s),(!r||"static"!==o.position)&&n.test(o.overflow+o.overflowY+o.overflowX))return s;return document.body},e.prototype.getDistanceFromTopOfThePage=function(e){for(var t=0,o=0;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,o+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:o}},e.prototype.getDistanceFromLeftEdgeOfThePage=function(e){if(!e)return 0;var t=e.getBoundingClientRect();return null!=t?t.left:0},e.prototype.getElementPosition=function(e){return{top:e.offsetTop,left:e.offsetLeft}},e.prototype.getElementOuterHeight=function(e){var t=e.offsetHeight,o=getComputedStyle(e);return t+=parseInt(o.marginTop)+parseInt(o.marginBottom)},e.prototype.getOffsetTopFromAncestor=function(e,t){for(var o=0;null!=e&&e!==t;)o+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return o},e.prototype.getBottomPadding=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.paddingBottom);return Number.isNaN(o)?0:o},e.prototype.getTopPadding=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.paddingTop);return Number.isNaN(o)?0:o},e.prototype.getRightPadding=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.paddingRight);return Number.isNaN(o)?0:o},e.prototype.getComputedMarginTop=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.marginTop);return Number.isNaN(o)?0:o},e.prototype.getStyledMarginTop=function(e){if(null==e)return 0;var t=parseFloat(e.style.marginTop);return Number.isNaN(t)?0:t},e.prototype.getVerticalCenterOffset=function(e){return null==e?0:e.offsetTop+e.offsetHeight/2},e.prototype.getFirstLineCenterVerticalOffset=function(e){return null==e?0:e.offsetTop+this.getLineHeight(e)/2},e.prototype.getComputedLineHeight=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.lineHeight);return Number.isNaN(o)?0:o},e.prototype.getLineHeight=function(e){if(null==e)return 0;var t,o=e.cloneNode();o.innerHTML="<br>",e.appendChild(o);var r=o.offsetHeight;o.innerHTML="<br><br>";var n=o.offsetHeight;return e.removeChild(o),t=n-r,Math.max(t,0)},e.prototype.getWidth=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.width);return Number.isNaN(o)?0:o},e.prototype.getHeight=function(e){if(null==e)return 0;var t=window.getComputedStyle(e);if(null==t)return 0;var o=parseFloat(t.height);return Number.isNaN(o)?0:o},e.prototype.getFontString=function(e){var t=window.getComputedStyle(e);return null==t?"":t.font?t.font:t.fontSize+" "+t.fontFamily},e.prototype.getTextWidth=function(e,t){var o=(this.canvas||(this.canvas=document.createElement("canvas"))).getContext("2d");return o.font=t,Math.floor(o.measureText(e).width)},e.prototype.removeDescendents=function(e,t){if(e&&e.children.length)for(var o=e.querySelectorAll(t),r=0;r<o.length;r++){var n=o[r];n.parentElement.removeChild(n)}},e.prototype.scrollElementTop=function(e,t,o,r){void 0===o&&(o=700),void 0===r&&(r=function(){}),this.scrollElementProperty(e,t,o,"scrollTop",r)},e.prototype.scrollElementLeft=function(e,t,o,r){void 0===o&&(o=700),void 0===r&&(r=function(){}),this.scrollElementProperty(e,t,o,"scrollLeft",r)},e.prototype.scrollElementProperty=function(e,t,o,r,n){var s=this;if(void 0===o&&(o=700),void 0===n&&(n=function(){}),e&&(t=Math.round(t),!((o=Math.round(o))<0)))if(0!==o){var i=Date.now(),a=i+o,c=e[r],l=t-c,u=e[r],p=function(){if(e[r]==u){var t=Date.now(),o=function(e,t,o){if(o<=e)return 0;if(o>=t)return 1;var r=(o-e)/(t-e);return r*r*(3-2*r)}(i,a,t),h=Math.round(c+l*o);e[r]=h,t>=a?n&&n():e[r]!==u||e[r]===h?(u=e[r],s.requestAnimationFrame(p)):n&&n()}else n&&n()};this.requestAnimationFrame(p)}else e[r]=t},e.prototype.requestAnimationFrame=function(e){window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,16)},e}();t.a=new r},411:function(e,t,o){"use strict";var r,n=o(357),s=(o(553),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(){return n.createElement("div",{className:"loading-results-container"},n.createElement("i",{className:"loading-icon fa fa-circle-notch fa-circle-o-notch fa-spin fa-3x fa-fw"}))},t}(n.Component);t.a=i},416:function(e,t,o){"use strict";o.d(t,"b",(function(){return a})),o.d(t,"a",(function(){return c}));var r,n=o(368),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=function(e,t){this.title=e,this.link=t},a=function(e){function t(t,o,r,n,s,i,a,c,l,u,p,h,d,m,g,f,S){var y=e.call(this,r,"")||this;return y.externalId=t,y.slug=o,y.authors=n,y.dateDescription=s,y.date=S,y.coverPath=i,y.isLivebook=a,y.isLivevideo=c,y.link=l,y.marketplaceLink=u||l,y.isLiveaudio=p,y.isBundle=h,y.id=d,y.price=m,y.priceWithoutDiscount=g,y.tags=f,y.isBundle&&!y.externalId&&(y.externalId="b-"+y.id),y}return s(t,e),t.fromProductInfo=function(e){var o=new t(e.externalId,e.slug,e.title,e.authors,e.dateDescription,n.a.adjustCoverPath(e.coverPath,165,220),e.isLivebook,e.isLivevideo,e.link,e.marketplaceLink,e.isLiveaudio,e.isBundle,e.id,e.price,e.priceWithoutDiscount,e.tags,e.date);return o.isSpecial=e.isSpecialProduct,o},t.fromPlainObjects=function(e){return e.map((function(e){return new t(e.externalId,e.slug,e.title,e.authors,e.date,e.coverPath,e.isLivebook,e.isLivevideo,e.link,e.marketplaceLink,e.isLiveaudio,e.isBundle,e.id,e.price,e.priceWithoutDiscount,e.tags,e.date)}))},t.findAll=function(e,t){var o=t.map((function(e){return e.externalId}));return e.filter((function(e){return o.indexOf(e.externalId)>=0}))},t}(i),c=function(e){function t(t,o,r){var n=e.call(this,t,"")||this;n.titleHtml=n.title,n.childConcepts=r||[],n.links=o||[],null!=n.links&&n.links.length>0&&(n.link=n.links[0].link),!n.link&&n.childConcepts.length>0&&(n.link=n.getMostGeneralChildConceptLink());for(var s=0,i=n.childConcepts;s<i.length;s++){i[s].parentConcept=n}return n}return s(t,e),t.prototype.getLevel=function(){for(var e=this.parentConcept,t=0;null!=e;)t++,e=e.parentConcept;return t},t.prototype.isLastChildAndWithoutChildren=function(){return null!=this.parentConcept&&null!=this.parentConcept.childConcepts&&(!(null!=this.childConcepts&&this.childConcepts.length>0)&&this==this.parentConcept.childConcepts[this.parentConcept.childConcepts.length-1])},t.prototype.directlyContainsQuery=function(e){return-1!=this.title.toLowerCase().indexOf(e)},t.prototype.startsWithQuery=function(e){return 0==this.title.toLowerCase().indexOf(e)},t.prototype.getQueryExcess=function(e){var t=(e||"").toLowerCase(),o=this.title.toLowerCase().indexOf(t);return 0!=o?"":this.title.substring(o+e.length)},t.prototype.containsQuery=function(e){if(!e)return!1;var t=(e||"").toLowerCase();if(this.directlyContainsQuery(t))return!0;if(null!=this.childConcepts)for(var o=0,r=this.childConcepts;o<r.length;o++){if(r[o].containsQuery(e))return!0}return!1},t.prototype.ancestorDirectlyContainsQuery=function(e){if(!e)return!1;var t=(e||"").toLowerCase();if(-1!=this.title.toLowerCase().indexOf(t))return!0;for(var o=this.parentConcept;null!=o;){if(o.directlyContainsQuery(t))return!0;o=o.parentConcept}return!1},t.prototype.highlightQueryMatch=function(e){if(e){var t=this.title.toLowerCase().indexOf(e.toLowerCase());if(t>-1){var o=this.title.substring(0,t),r=this.title.substring(t,t+e.length),n=this.title.substring(t+e.length,this.title.length);this.titleHtml=o+"<strong>"+r+"</strong>"+n}if(null!=this.childConcepts)for(var s=0,i=this.childConcepts;s<i.length;s++){i[s].highlightQueryMatch(e)}}},t.prototype.getAllDescendants=function(){var e=[];if(null!=this.childConcepts)for(var t=0,o=this.childConcepts;t<o.length;t++){var r=o[t];e.push(r);for(var n=0,s=r.getAllDescendants();n<s.length;n++){var i=s[n];e.push(i)}}return e},t.flatten=function(e){for(var t=[],o=0,r=e;o<r.length;o++){var n=r[o];t.push(n);for(var s=0,i=n.getAllDescendants();s<i.length;s++){var a=i[s];t.push(a)}}return t},t.fromRawData=function(e){return null==e||0==e.length?[]:e.map((function(e){return t.itemFromRawData(e)}))},t.itemFromRawData=function(e){return new t(e.term,e.locations||[],t.fromRawData(e.children))},t.prototype.getMostGeneralChildConceptLink=function(){var e=this.childConcepts;if(null==e||0==e.length)return"";if(1==e.length)return e[0].link;for(var t=0,o=e;t<o.length;t++){var r=o[t],n=(r.title||"").toLowerCase();if("overview"==n||"description"==n)return r.link}return e[0].link},t.fromPlainObjects=function(e){return e.map((function(e){return t.fromPlainObject(e)}))},t.fromPlainObject=function(e){return new t(e.title,e.links,t.fromPlainObjects(e.childConcepts))},t.findAll=function(e,t){var o=t.map((function(e){return e.title})),r=t.map((function(e){return e.link}));return e.filter((function(e){return o.indexOf(e.title)>=0&&r.indexOf(e.link)>=0}))},t}(i),l=function(){function e(e,t,o){this.productSuggestions=e,this.conceptSuggestions=t,this.displayedProductSuggestions=o}return e.prototype.getSuggestion=function(e){var t=this.productSuggestions.find((function(t){return t.title==e}));return t||this.conceptSuggestions.find((function(t){return t.title==e}))},e.prototype.getNextSuggestion=function(e){var t=this.conceptSuggestions.concat(this.productSuggestions);if(null==e)return t[0];var o=t.indexOf(e)+1;return o<t.length?t[o]:null},e.prototype.getPreviousSuggestion=function(e){var t=this.conceptSuggestions.concat(this.productSuggestions);if(null==e)return t[t.length-1];var o=t.indexOf(e)-1;return o>=0?t[o]:null},e.prototype.getFirstMatchingConceptExcess=function(e){if(this.isEmpty()||!e)return"";for(var t,o=e.toLowerCase(),r=0,n=this.conceptSuggestions;r<n.length;r++){var s=n[r];if(s.startsWithQuery(o)){t=s;break}}return t?t.getQueryExcess(e):""},e.createEmpty=function(){return new e([],[],[])},e.prototype.isEmpty=function(){return!(null!=this.conceptSuggestions&&0!=this.conceptSuggestions.length||null!=this.productSuggestions&&0!=this.productSuggestions.length)},e.convert=function(t){return new e(a.fromPlainObjects(t.productSuggestions),c.flatten(c.fromPlainObjects(t.conceptSuggestions)),a.fromPlainObjects(t.displayedProductSuggestions))},e.findAllMatching=function(t,o){return new e(a.findAll(t.productSuggestions,o.productSuggestions),c.findAll(t.conceptSuggestions,o.conceptSuggestions),a.findAll(t.displayedProductSuggestions,o.displayedProductSuggestions))},e.findMatching=function(e,t){return t?t.externalId?e.productSuggestions.find((function(e){return e.externalId==t.externalId})):e.conceptSuggestions.find((function(e){return e.title==t.title&&e.link==t.link})):null},e}();t.c=l},451:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var r,n,s=o(357),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});!function(e){e[e.Image=0]="Image",e[e.Background=1]="Background"}(n||(n={}));var a={},c=function(e){function t(t){var o=e.call(this,t)||this;return o.initiateImageLoadingIfNecessary(),o}return i(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.fullImage!==e.fullImage&&this.initiateImageLoadingIfNecessary()},t.prototype.shouldComponentUpdate=function(e,t){return this.props.fullImage!==e.fullImage||this.props.placeholderImage!==e.placeholderImage||this.props.className!==e.className||this.props.alt!==e.alt},t.prototype.render=function(){return this.props.imageDisplayType==n.Background?s.createElement("div",{className:this.props.className,style:{backgroundImage:"url("+(a[this.props.fullImage]?this.props.fullImage:this.props.placeholderImage)+")"},title:this.props.alt}):s.createElement("img",{className:this.props.className,src:a[this.props.fullImage]?this.props.fullImage:this.props.placeholderImage,alt:this.props.alt,title:this.props.alt})},t.prototype.componentDidMount=function(){this.isComponentMounted=!0},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1},t.prototype.initiateImageLoadingIfNecessary=function(){var e=this;if(!a[this.props.fullImage]){var t=this.props.fullImage,o=new Image;o.onload=function(){a[t]=!0,t==e.props.fullImage&&e.isComponentMounted&&e.forceUpdate()},o.src=t}},t}(s.Component);t.b=c},456:function(e,t,o){"use strict";var r,n=o(573),s=function(e,t,o){this.productId=e,this.productManningId=t,this.productTitle=o,this.results=[],this.score=0},i=o(847),a=o(848);!function(e){e[e.library=0]="library",e[e.product=1]="product"}(r||(r={}));var c=o(368),l=o(466),u=o(127),p=o(416),h=o(646),d=function(){function e(){this.PRODUCT_PAGE_KEY="Product page",this.INTRO_KEY="Intro",this.librarySearchResultsSources=[],this.productSearchResultsSources=[r.product,r.library],this.numberedIndexRegExp=/(\d+\.?)+/,this.appendixIndexRegExp=/[A-Z]\.(\d+\.?)*/}return e.prototype.assignDotdToProductInfos=function(e,t){if(null!=t)for(var o=0,r=e;o<r.length;o++){var n=r[o];if(t[n.id])for(var s=0,i=t[n.id].productOfferings;s<i.length;s++){var a=i[s];"EBOOK"!=a.productType&&"LIVEVIDEO"!=a.productType||(n.price=a.discountedPrice,n.priceWithoutDiscount=a.price)}}},e.prototype.getMatchingProductSuggestions=function(e,t){return this.getMatchingProducts(e,t).map((function(e){return p.b.fromProductInfo(e)}))},e.prototype.getMatchingProducts=function(e,t,o){if(void 0===o&&(o=.4),null==t||0==t.length)return[];if(""==e||0==e.length)return[];var r=new h(t,{includeScore:!0,shouldSort:!0,threshold:o,maxPatternLength:32,tokenize:e.length>=3,keys:[{name:"cleanTitle",weight:.5},{name:"authors",weight:.05},{name:"description",weight:.05},{name:"tagsText",weight:.01},{name:"isbn",weight:.05},{name:"productTypeDescription",weight:.05}]}).search(e);r.forEach((function(t){var o=t.item;if(null!=o){var r=o.cleanTitle||o.title||"";if(r){var n=u.a.getWords(r.toLowerCase()),s=u.a.getWords(e.toLowerCase());if(1==s.length)n.indexOf(e.toLowerCase())>=0&&(t.score*=1==e.length?.001:.6);else{var i=s.filter((function(e){return n.indexOf(e)>=0})),a=i.length;i.length>0&&(t.score*=.8/a),a>=s.length&&(t.score*=.1)}o.authors&&o.authors.toLowerCase&&e.length>3&&-1!=o.authors.toLowerCase().indexOf(e)&&(t.score*=.5)}}})),r=r.filter((function(e){return e.score<o}));var n=new Date;return r.forEach((function(t){var o=t.item,r=u.a.monthDiff(o.date,n);r>0&&(t.score+=r/(e.length<3?4e4:4e3))})),r.sort((function(e,t){return e.score-t.score})),r.map((function(e){return e.item}))},e.prototype.getAbsoluteLivebookLink=function(e,t){return this.getAbsolutePath(e.client.livebook,c.a.adaptLinkFormat(t))},e.prototype.getAbsoluteLivevideoLink=function(e,t){return this.getAbsolutePath(e.client.livevideo,t)},e.prototype.getSearchPlaceholderText=function(e){var t=e.state.isInLibrary,o=e.state.currentProduct,r=e.state.selectedSearchCategories,n=e.state.isSearchAllSelected;return e.state.isMobileDisplayMode?"search":t?n?"search everything":0==r.length?"select a category":1==r.length?"search within "+r[0]:2==r.length?"search within "+r[0]+" & "+r[1]:"search within "+r.length+" categories":null!=o?"search inside":"search"},e.prototype.getDefaultSearchResultsSourceType=function(e){return e?r.library:r.product},e.prototype.getSearchResultsSources=function(e){return e?this.librarySearchResultsSources:this.productSearchResultsSources},e.prototype.getSelectableSearchResultsSources=function(e,t){var o=this;return void 0===t&&(t=!1),this.getSearchResultsSources(e).map((function(e){return o.getSearchResultsSourceString(e,t)}))},e.prototype.getSearchResultsSourceString=function(e,t){switch(void 0===t&&(t=!1),e){case r.library:return"Everything";case r.product:return t?"This course":"This book";default:return"Everything"}},e.prototype.getSearchResultsSourceType=function(e){switch(e){case"This video":case"This book":return r.product;case"Everything":default:return r.library}},e.prototype.convertToShellProductSearchResults=function(e){for(var t={},o=[],r={},n=0,i=e;n<i.length;n++){var a=i[n],c=a.elementTitle||a.text,l=a.productId+a.elementTitle+a.text;if(!c||!r[l]){if(r[l]=!0,!t[a.productId]){var u=new s(a.productId,a.productManningId,a.productTitle);t[a.productId]=u,o.push(u)}var p=t[a.productId];p.results.push(a);var h=parseFloat(a.score);a.score=Number.isNaN(h)?0:h,p.score+=h}}return o},e.prototype.convertToProductSearchResults=function(e,t,o,r){for(var n=this.convertToShellProductSearchResults(e),s=[],i=0,a=n;i<a.length;i++){for(var c=a[i],l=0,u=t;l<u.length;l++){var p=u[l];if(c.productManningId==p.id||c.productId==p.externalId){c.productInfo=p,c.productTitle||(c.productTitle=p.title);break}}c.productInfo||s.push(c)}for(var h=0,d=s;h<d.length;h++){c=d[h];var m=n.indexOf(c);m>=0&&n.splice(m,1)}return this.sortProductSearchResults(n,o),this.insertSpecialResultsIfNecessary(n,o,r),this.updateProductSearchResultsLocations(n,r),n},e.prototype.containsQueryWord=function(e,t){var o=u.a.getWords((e||"").toLowerCase()),r=u.a.getWords((t||"").toLowerCase());return null!=o.find((function(e){return r.indexOf(e)>=0}))},e.prototype.sortProductSearchResults=function(e,t){var o=this;void 0===t&&(t=""),t=(t||"").toLowerCase(),e.sort((function(e,r){var n=c.a.getShortTitle(e.productTitle.toLowerCase()),s=c.a.getShortTitle(r.productTitle.toLowerCase());if(t){var i=o.containsQueryWord(n,t),a=o.containsQueryWord(s,t);if(i&&!a)return-1;if(!i&&a)return 1;var l=n.indexOf(t)>=0,u=s.indexOf(t)>=0;return l&&!u?-1:!l&&u?1:r.score-e.score}return r.score-e.score}));var r=e.findIndex((function(e){return e.productInfo.isLivevideo}));if(r>2){var n=e[r];e.splice(r,1),e.splice(2,0,n)}},e.prototype.convertToShellProductTreeResults=function(e){return l.b.constructShell(e)},e.prototype.convertToFullProductTreeResults=function(e,t){for(var o=this.getTitleSearchResultsMap("elementTitle",e.results,this.PRODUCT_PAGE_KEY),r=null,n=0,s=0,i=t;s<i.length;s++){var u=i[s],p=o[u.title],h=new l.a(u.title,c.a.extractBookElementIndex(u.title),u.link,p);if(u.children&&p&&p.length>0){if(u.children.length>0)"Intro"!=u.children[0].title&&u.children.unshift(new a.a("intro",this.INTRO_KEY,"",[]));for(var d=null,m=0,g=0,f=u.children;g<f.length;g++){var S=f[g],y=this.getSearchResultsInTitle(S.title!=this.INTRO_KEY?S.title:"","subElementTitle",p),v=new l.c(S.title,c.a.extractBookElementIndex(S.title),S.link,y);if(S.children&&y.length>0){for(var b=null,w=0,P=0,k=S.children;P<k.length;P++){var C=k[P],T=new l.d(C.title,c.a.extractBookElementIndex(C.title),C.link,this.getSearchResultsInTitle(C.title,"subSubElementTitle",y));v.addSubSubElementTreeResult(T);var x=T.getDisplayedResultsCount();x>w&&(w=x,b=T)}null!=b&&(b.hasMostResults=!0)}h.addSubElementTreeResult(v);var L=v.getDisplayedResultsCount();L>m&&(m=L,d=v)}null!=d&&(d.hasMostResults=!0)}e.addElementTreeResult(h);var R=h.getDisplayedResultsCount();R>n&&(n=R,r=h)}return null!=r&&(r.hasMostResults=!0),this.sortProductPageResultsSoonerAndInsertProductPageResult(e),e},e.prototype.sortProductPageResultsSoonerAndInsertProductPageResult=function(e){var t=this;try{var o=(e.children||[]).find((function(e){return e.name==t.PRODUCT_PAGE_KEY}));null!=o&&o.results&&o.results.sort((function(e,t){return e.productType==t.productType?t.score-e.score:"marketplaceProduct"==e.productType?-1:"marketplaceProduct"==t.productType?1:t.score-e.score}))}catch(e){console.log(e)}},e.prototype.getTitleSearchResultsMap=function(e,t,o){void 0===o&&(o="");for(var r={},n=0,s=t;n<s.length;n++){var i=s[n],a=i[e]||o;a&&(r[a]||(r[a]=[]),r[a].push(i))}return r},e.prototype.getSearchResultsInTitle=function(e,t,o){return o?o.filter((function(o){return o[t]===e})):[]},e.prototype.convertLivebookTocToTocItems=function(e,t){var o=[];if(e.parts)for(var r=0,n=e.parts;r<n.length;r++){var s=n[r];if(s.chapters)for(var i=0,a=s.chapters;i<a.length;i++){var c=a[i];o.push(this.convertLiveBookElementToTocItem(c,t))}}if(e.backMatter)for(var l=0,u=e.backMatter;l<u.length;l++){var p=u[l];0===(p.title||"").indexOf("Appendix")&&o.push(this.convertLiveBookElementToTocItem(p,t))}if(e.frontMatter)for(var h=0,d=e.frontMatter;h<d.length;h++){var m=d[h];0===(m.title||"").indexOf("Appendix")&&o.push(this.convertLiveBookElementToTocItem(m,t))}return o},e.prototype.convertLiveVideoTocToTocItems=function(e,t){if(!e||!e.length)return e;for(var o=0,r=e;o<r.length;o++){var n=r[o];this.convertLiveVideoTocItem(n,null,t)}return e.sort((function(e,t){return e.unitIndex-t.unitIndex})),e},e.prototype.convertLiveVideoTocItem=function(e,t,o){if(e.children){e.link=this.updateTocRelativeLinkPath(e.link,o),e.children.sort((function(e,t){return(e.unitIndex||e.moduleIndex)-(t.unitIndex||t.moduleIndex)}));for(var r=0,n=e.children;r<n.length;r++){var s=n[r];this.convertLiveVideoTocItem(s,e,o),s.link=this.updateTocRelativeLinkPath(s.link,o)}}},e.prototype.updateTocRelativeLinkPath=function(e,t){return e?e.startsWith("http")?e:t+e:t},e.prototype.upgradeProductInfoPaths=function(e,t){var o=this;return null==e||0==e.length?e:(e.forEach((function(e){return o.upgradeProductInfoPath(e,t)})),e)},e.prototype.upgradeProductInfoPath=function(e,t){if(null!=e){var o=e.isLivebook,r=e.isLivevideo,n=e.isBundle;e.coverPath&&!e.coverPath.startsWith("http")&&(e.coverPath=this.getAbsolutePath(t.images.marketplace,e.coverPath)),e.description&&(e.description=e.description.replace(/\.\.\/books\//gi,t.client.marketplace+"/books/")),(!e.link||0!=e.link.indexOf("http")&&0!=e.link.indexOf("file://"))&&(o?(e.link=c.a.isOnDevice?"#!/book/"+e.slug:this.getAbsolutePath(t.client.livebook,"/book/"+e.slug),e.marketplaceLink=this.getAbsolutePath(t.client.marketplace,"books/"+e.slug),e.livebookLink=e.link):r?(e.link=this.getAbsolutePath(t.client.livevideo,"course/"+e.externalId),e.marketplaceLink=this.getAbsolutePath(t.client.marketplace,"livevideo/"+e.slug),e.livevideoLink=e.link):n?(e.link=this.getAbsolutePath(t.client.marketplace,"bundles/"+e.slug),e.marketplaceLink=e.link):(e.link=this.getAbsolutePath(t.client.marketplace,"books/"+e.slug),e.marketplaceLink=e.link))}},e.prototype.updateProductSearchResultsLocations=function(e,t){for(var o=0,r=e;o<r.length;o++){var n=r[o],s=n.productInfo,i=s.isLivebook,a=s.isLivevideo;s.link&&s.link.startsWith("http")||c.a.isOnDevice&&i||(s.link=this.getAbsolutePath(t.client.marketplace,"/"+(a?"livevideo":"books")+"/"+s.slug));for(var l=0,u=n.results;l<u.length;l++){var p=u[l];if(p.link&&(p.link=c.a.adaptLinkFormat(p.link),!p.link.startsWith("http")&&!p.link.startsWith("file://"))){var h=p.link||"",d=0==h.indexOf("books/")||0==h.indexOf("livevideo/");-1!=h.indexOf("#!/book=")&&(h=h.replace("#!/book=","/book/")),-1!=h.indexOf("/book=")&&(h=h.replace("/book=","/book/")),-1!=h.indexOf("book/search-")&&(h=h.replace("book/search-","book/")),i&&!d?c.a.isOnDevice?p.link=h:p.link=this.getAbsolutePath(t.client.livebook,h):p.link=a&&!d?this.getAbsolutePath(t.client.livevideo,h):this.getAbsolutePath(t.client.marketplace,h)}}}},e.prototype.getAbsolutePath=function(e,t){var o=e;return o.endsWith("/")||t.startsWith("/")||(o+="/"),o+t},e.prototype.convertLiveBookElementToTocItem=function(e,t){return e.link=this.updateTocRelativeLinkPath(e.link,t),new a.a(e.id,e.title,e.link,this.convertLivebookSectionsToTocItems(e.sections,t))},e.prototype.convertLivebookSectionsToTocItems=function(e,t){var o=this;return e?e.map((function(e){return e.link=o.updateTocRelativeLinkPath(e.link,t),new a.a(e.id,e.title,e.link,o.convertLivebookSubSectionsToTocItems(e.subsections,t))})):[]},e.prototype.convertLivebookSubSectionsToTocItems=function(e,t){var o=this;return e?e.map((function(e){return e.link=o.updateTocRelativeLinkPath(e.link,t),new a.a(e.id,e.title,e.link,[])})):[]},e.prototype.insertSpecialResultsIfNecessary=function(e,t,o){var r=[];this.isSpecialSearch(t,"meap")&&r.push(i.a.createSpecialMeapProduct()),(this.isSpecialSearch(t,"book")||this.isSpecialSearch(t,"live"))&&r.push(i.a.createSpecialLivebookProduct()),(this.isSpecialSearch(t,"video")||this.isSpecialSearch(t,"live"))&&r.push(i.a.createSpecialLivevideoProduct()),(this.isSpecialSearch(t,"manning")||this.isSpecialSearch(t,"home")||this.isSpecialSearch(t,"site"))&&r.push(i.a.createSpecialManningSiteProduct()),this.isSpecialSearch(t,"forum")&&r.push(i.a.createSpecialForumProduct()),this.isSpecialSearch(t,"contact")&&r.push(i.a.createSpecialContactProduct()),this.isSpecialSearch(t,"support")&&r.push(i.a.createSpecialSupportProduct()),this.isSpecialSearch(t,"news")&&r.push(i.a.createSpecialNewsletterProduct()),(this.isSpecialSearch(t,"free")||this.isSpecialSearch(t,"content"))&&r.push(i.a.createSpecialFreeContentProduct()),this.isSpecialSearch(t,"catalog")&&r.push(i.a.createSpecialCatalogProduct()),(this.isSpecialSearch(t,"deal")||this.isSpecialSearch(t,"day"))&&r.push(i.a.createSpecialDealOfTheDayProduct()),this.isSpecialSearch(t,"token")&&r.push(i.a.createSpecialTokenProduct());for(var s=0,a=r;s<a.length;s++){var c=a[s];e.unshift(this.createSpecialProductResults(c,n.a.createSpecialResult(c.title,c.link,c.description)))}},e.prototype.createSpecialProductResults=function(e,t){var o=new s(e.title,e.title,e.title);return o.productInfo=e,o.isSpecialProduct=!0,o.toc=null,o.score=5e4,o.results=[t],o},e.prototype.isSpecialSearch=function(e,t){return-1!==(e=e||"").toLowerCase().indexOf(t)},e}();t.a=new d},466:function(e,t,o){"use strict";o.d(t,"b",(function(){return u})),o.d(t,"a",(function(){return p})),o.d(t,"c",(function(){return h})),o.d(t,"d",(function(){return d}));var r,n=o(573),s=o(368),i=o(456),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});function c(e){var t=!1,o=!1;if(null!=e&&e.length>0)for(var r=0,s=e;r<s.length;r++){var i=s[r];if(t=t||n.a.isIndexResult(i),o=o||n.a.isTocRangeResult(i),t&&o)break}return{containsIndexResult:t,containsTocRangeResult:o}}var l=function(){function e(){}return e.prototype.isSpecialOrHasResults=function(){return!!(this instanceof u&&null!=this.productSearchResults&&this.productSearchResults.isSpecialProduct)||this.hasResults()},e.prototype.hasResults=function(){return null!=this.results&&this.results.length>0},e.prototype.hasNonProductPageResults=function(){return this.hasResults()&&null!=this.results.find((function(e){return!!(e.elementTitle||e.subElementTitle||e.subSubElementTitle)}))},e.prototype.hasChildrenWithResults=function(){return null!=this.getFirstChildWithResults()},e.prototype.getChildWithMostResults=function(){if(null==this.children||0==this.children.length)return null;for(var e=null,t=0,o=this.children;t<o.length;t++){var r=o[t];null==e&&(e=r),null!=r.results&&r.results.length>e.results.length&&(e=r)}return null!=e&&e.hasResults()?e:null},e.prototype.getFirstChildWithResults=function(){if(null==this.children||0==this.children.length)return null;for(var e=0,t=this.children;e<t.length;e++){var o=t[e];if(o.hasResults())return o}return null},e.prototype.getRoot=function(){for(var e=this;null!=e.parent;)e=e.parent;return e},e.prototype.isLiveProduct=function(){var e=this.getRoot();return null!=e&&(e instanceof u&&(null!=e.productSearchResults&&(null!=e.productSearchResults.productInfo&&(e.productSearchResults.productInfo.isLivevideo||e.productSearchResults.productInfo.isLivebook))))},e.prototype.isLivevideo=function(){var e=this.getRoot();return null!=e&&(e instanceof u&&(null!=e.productSearchResults&&(null!=e.productSearchResults.productInfo&&e.productSearchResults.productInfo.isLivevideo)))},e.prototype.isLivebook=function(){var e=this.getRoot();return null!=e&&(e instanceof u&&(null!=e.productSearchResults&&(null!=e.productSearchResults.productInfo&&e.productSearchResults.productInfo.isLivebook)))},e.prototype.isProductPageElement=function(){return this instanceof p&&this.name==i.a.PRODUCT_PAGE_KEY},e.prototype.getDisplayedResultsCount=function(){return null!=this.results?this.results.length:0},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.constructShell=function(e){var o=new t;if(o.id=e.productId,o.productId=e.productId,o.productTitle=e.productTitle,o.productSearchResults=e,o.name=e.productTitle,o.results=e.results,o.link=e.productInfo&&e.productInfo.link,o.marketplaceLink=e.productInfo&&e.productInfo.marketplaceLink,o.coverPath=s.a.adjustCoverPath(e.productInfo.coverPath,120,150),o.isLiveaudio=e.productInfo&&e.productInfo.isLiveaudio,o.results&&o.results.length){var r=c(o.results);o.containsIndexResult=r.containsIndexResult,o.containsTocRangeResult=r.containsTocRangeResult}return o},t.prototype.addElementTreeResult=function(e){this.children||(this.children=[]),this.children.push(e),e.parent=this},t.prototype.findDescendantWithTitle=function(e){if(!e)return null;for(var t=0,o=this.children;t<o.length;t++){var r=o[t],n=r.elementTitle==e?r:r.findDescendantWithTitle(e);if(n)return n}return null},t}(l),p=function(e){function t(t,o,r,n){var s=e.call(this)||this;return s.name=t,s.index=o,s.id=t,s.elementTitle=t,s.link=r,s.children=[],s.results=n||[],s}return a(t,e),t.prototype.addSubElementTreeResult=function(e){e.containsIndexResult&&(this.containsIndexResult=!0),e.containsTocRangeResult&&(this.containsTocRangeResult=!0),e.parent=this,this.children.push(e)},t.prototype.findDescendantWithTitle=function(e){if(!e)return null;for(var t=0,o=this.children;t<o.length;t++){var r=o[t],n=r.subElementTitle==e?r:r.findDescendantWithTitle(e);if(n)return n}return null},t}(l),h=function(e){function t(t,o,r,n){var s=e.call(this)||this;if(s.name=t,s.index=o,s.id=t,s.subElementTitle=t,s.link=r,s.children=[],s.results=n||[],n&&n.length){var i=c(n);s.containsIndexResult=i.containsIndexResult,s.containsTocRangeResult=i.containsTocRangeResult}return s}return a(t,e),t.prototype.addSubSubElementTreeResult=function(e){e.containsIndexResult&&(this.containsIndexResult=!0),e.containsTocRangeResult&&(this.containsTocRangeResult=!0),e.parent=this},t.prototype.findDescendantWithTitle=function(e){if(!e)return null;for(var t=0,o=this.children;t<o.length;t++){var r=o[t],n=r.subSubElementTitle==e?r:null;if(n)return n}return null},t}(l),d=function(e){function t(t,o,r,n){var s=e.call(this)||this;if(s.name=t,s.id=t,s.index=o,s.subSubElementTitle=t,s.link=r,s.children=[],s.results=n||[],n&&n.length){var i=c(n);s.containsIndexResult=i.containsIndexResult,s.containsTocRangeResult=i.containsTocRangeResult}return s}return a(t,e),t}(l)},467:function(e,t,o){"use strict";var r,n=o(357),s=o(451),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.render=function(){var e=n.createElement(s.b,{placeholderImage:this.props.placeholderImage,imageDisplayType:this.props.imageDisplayType,fullImage:this.props.fullImage,className:this.props.className,alt:this.props.alt});return this.props.isLiveaudio?n.createElement("div",{className:"product-cover-root"},e,n.createElement("div",{className:"liveaudio-corner",dangerouslySetInnerHTML:{__html:'<svg xmlns="http://www.w3.org/2000/svg" \n                        viewBox="0 0 1792 1792">\n                           <path d="M 1792,0 V 1792 H 0 Z" style="fill:#ffcc00" /><path style="fill:#000000"d="m 1225.7239,1040.0538 v 463.2689 q 0,11.0707 -8.0902,19.1609 -8.0902,8.0902 -19.1609,8.0902 -11.0708,0 -19.161,-8.0902 L 1037.5209,1380.6927 H 925.9617 q -11.07076,0 -19.16093,-8.0902 -8.09018,-8.0902 -8.09018,-19.161 v -163.5066 q 0,-11.0708 8.09018,-19.161 8.09017,-8.0901 19.16093,-8.0901 h 111.5592 l 141.7909,-141.791 q 8.0902,-8.0901 19.161,-8.0901 11.0707,0 19.1609,8.0901 8.0902,8.0902 8.0902,19.161 z m 163.5067,231.6344 q 0,32.3607 -18.0965,60.2505 -18.0964,27.8898 -47.9023,39.8122 -4.258,2.129 -10.645,2.129 -11.0708,0 -19.1609,-7.8773 -8.0902,-7.8773 -8.0902,-19.3738 0,-8.9418 5.1096,-15.1159 5.1096,-6.1741 12.3481,-10.645 7.2386,-4.4708 14.4772,-9.7933 7.2386,-5.3225 12.3482,-15.3288 5.1095,-10.0062 5.1095,-24.0576 0,-14.0514 -5.1095,-24.0576 -5.1096,-10.0063 -12.3482,-15.3288 -7.2386,-5.3225 -14.4772,-9.7933 -7.2385,-4.4709 -12.3481,-10.645 -5.1096,-6.1741 -5.1096,-15.1159 0,-11.4965 8.0902,-19.3738 8.0901,-7.8773 19.1609,-7.8773 6.387,0 10.645,2.129 29.8059,11.4966 47.9023,39.5993 18.0965,28.1027 18.0965,60.4634 z m 109.0044,0 q 0,65.1472 -36.1929,120.2881 -36.1929,55.1409 -95.8047,80.2631 -5.5353,2.129 -10.6449,2.129 -11.4966,0 -19.5868,-8.0902 -8.0901,-8.0902 -8.0901,-19.161 0,-16.6061 16.6061,-25.1221 23.8447,-12.3481 32.3607,-18.7351 31.5091,-22.9931 49.1797,-57.6957 17.6707,-34.7026 17.6707,-73.8761 0,-39.1735 -17.6707,-73.8761 -17.6706,-34.7025 -49.1797,-57.6957 -8.516,-6.387 -32.3607,-18.7351 -16.6061,-8.516 -16.6061,-25.1221 0,-11.0708 8.0901,-19.161 8.0902,-8.0901 19.161,-8.0901 5.5354,0 11.0707,2.1289 59.6118,25.1222 95.8047,80.2631 36.1929,55.1409 36.1929,120.2881 z m 109.0045,0 q 0,97.9337 -54.0765,179.8999 -54.0764,81.9663 -143.9199,120.7139 -5.5354,2.129 -11.0708,2.129 -11.0707,0 -19.1609,-8.0901 -8.0902,-8.0902 -8.0902,-19.161 0,-15.3287 16.6062,-25.1221 2.9806,-1.7032 9.5804,-4.4709 6.5999,-2.7677 9.5805,-4.4709 19.5867,-10.6449 34.9155,-21.7157 52.3732,-38.7477 81.7533,-96.6563 29.3801,-57.9086 29.3801,-123.0558 0,-65.1472 -29.3801,-123.0558 -29.3801,-57.9086 -81.7533,-96.6563 -15.3288,-11.0707 -34.9155,-21.7157 -2.9806,-1.7032 -9.5805,-4.4709 -6.5998,-2.7677 -9.5804,-4.4709 -16.6062,-9.7933 -16.6062,-25.12205 0,-11.07076 8.0902,-19.16093 8.0902,-8.09018 19.1609,-8.09018 5.5354,0 11.0708,2.129 89.8435,38.74766 143.9199,120.71386 54.0765,81.9662 54.0765,179.8999 z"/>\n                        </svg>'}})):e},t}(n.Component);t.a=a},553:function(e,t,o){var r=o(554);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)},554:function(e,t,o){(e.exports=o(97)(!1)).push([e.i,".loading-results-container{min-height:100%;width:100%;text-align:center;display:flex;justify-content:center;align-items:center}.loading-results-container .loading-icon{font-size:60px}\n",""])},573:function(e,t,o){"use strict";var r=o(368),n=function(){function e(){}return e.isIndexResult=function(e){return!!e&&!!e.indexTerm},e.isTocRangeResult=function(e){if(!e)return!1;var t=e.text.replace("<strong class='search-result'>","").replace("</strong>","");return t==e.elementTitle||(e.elementTitle||"").indexOf(t)>=0||t==e.subElementTitle||(e.subElementTitle||"").indexOf(t)>=0||t==e.subSubElementTitle||(e.subSubElementTitle||"").indexOf(t)>=0},e.getElementLink=function(e){return null!=e&&e.elementTitle?r.a.getElementLink(e.link):""},e.getSubElementLink=function(e){return null!=e&&e.subElementTitle?r.a.getSectionLink(e.link,e.subElementTitle):""},e.getSubSubElementLink=function(e){return null!=e&&e.subSubElementTitle?r.a.getSectionLink(e.link,e.subSubElementTitle):""},e.createSpecialResult=function(e,t,o){return{id:e,score:.8,productId:e,productManningId:e,productType:"",productTitle:e,elementTitle:"",subElementTitle:"",subSubElementTitle:"",elementLink:"",subElementLink:"",subSubElementLink:"",link:t,priority:"",text:o,tags:""}},e}();t.a=n},617:function(e,t,o){"use strict";var r=o(394),n=function(){function e(){this.windowResizeStopEmitter=new r,this.handleWindowResize()}return e.prototype.registerResizeStartCallback=function(e){this.windowResizeStopEmitter.addListener("resizestart",e)},e.prototype.unregisterResizeStartCallback=function(e){this.windowResizeStopEmitter.removeListener("resizestart",e)},e.prototype.registerResizeEndCallback=function(e){this.windowResizeStopEmitter.addListener("resizestop",e)},e.prototype.unregisterResizeEndCallback=function(e){this.windowResizeStopEmitter.removeListener("resizestop",e)},e.prototype.handleWindowResize=function(){var e=this;window.addEventListener("resize",(function(){clearTimeout(e.resizeEndTimeout),e.windowResizeStopEmitter.emit("resizestart"),e.resizeEndTimeout=setTimeout((function(){e.windowResizeStopEmitter.emit("resizestop")}),200)}))},e.prototype.handleContainerScroll=function(e){var t=e.currentTarget,o=e.wheelDelta||-e.detail,r=parseFloat(window.getComputedStyle(t).height),n=t.scrollTop+r-t.scrollHeight>=0,s=t.scrollTop<=0;if(o<0&&n||o>0&&s){var i=e.deltaX||e.wheelDeltaX,a=e.deltaY||e.wheelDeltaY;if(null!=i&&null!=a&&Math.abs(i)>Math.abs(a))return;e.preventDefault()}else;},e.prototype.handleDragScroll=function(e){var t=!1,o=0,r=0;if(!e.hasDragEvents){var n=function(n){t&&(Math.abs(r-n.pageX)>=Math.abs(o-n.pageY)?e.scrollLeft+=.1*(r-n.pageX):e.scrollTop+=.1*(o-n.pageY))},s=function(){t=!1,e.removeEventListener("mousemove",n)},i=function(s){t=!0,o=s.pageY,r=s.pageX,e.addEventListener("mousemove",n)};e.addEventListener("mousedown",i),e.addEventListener("mouseup",s),e.addEventListener("mouseleave",s),e.hasDragEvents=!0,e.mousedownHandler=i,e.mouseupleaveHandler=s}},e.prototype.removeDragScrollEvents=function(e){e&&e.hasDragEvents&&(e.mousedownHandler&&e.removeEventListener("mousedown",e.mousedownHandler),e.mouseupleaveHandler&&(e.removeEventListener("mouseup",e.mouseupleaveHandler),e.removeEventListener("mouseleave",e.mouseupleaveHandler)),e.hasDragEvents=!1,delete e.hasDragEvents)},e}();t.a=new n},618:function(e,t,o){"use strict";var r;o.d(t,"a",(function(){return r})),function(e){e[e.ContainsLessThanMax=0]="ContainsLessThanMax",e[e.CanShowMore=1]="CanShowMore",e[e.CanShowLess=2]="CanShowLess"}(r||(r={}))},661:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var r=new(function(){function e(){}return e.prototype.getProductToc=function(e,t,o,r){return o?this.getLivebookToc(e,t):r?this.getLivevideoToc(e,t):Promise.resolve({})},e.prototype.getLivebookToc=function(e,t){return new Promise((function(o,r){e.ajax(e.getAbsoluteLivebookAwsUrl(t+"/tocAndIndex.json"),(function(e){return o(e.toc)}),(function(e){return r(e)}))}))},e.prototype.getLivevideoToc=function(e,t){return new Promise((function(o,r){e.ajax(e.getAbsoluteBackendLivevideoUrl("course/getToc"),(function(e){return o(e)}),(function(e){return r(e)}),{id:t},!0)}))},e}())},722:function(e,t,o){"use strict";var r=o(416),n=o(456),s=o(848),i=function(){function e(e){this.provider=e}return e.prototype.search=function(e,t,o,r,s){var i=this;return new Promise((function(a,c){i.provider.search(e,t,o,r,s).then((function(t){a(n.a.convertToProductSearchResults(t.results,t.products,e,i.provider.config))})).catch((function(e){c(e)}))}))},e.prototype.fullTextAutocompleteProducts=function(e){var t=this;return new Promise((function(o,s){t.provider.fullTextAutocompleteProducts(e).then((function(s){var i=n.a.convertToProductSearchResults(s.results,s.products,e,t.provider.config);o(i.map((function(e){return r.b.fromProductInfo(e.productInfo)})))})).catch((function(e){return s(e)}))}))},e.prototype.getFullProductTreeResults=function(e){var t=this;return new Promise((function(o,r){var i=e.productSearchResults;t.provider.getProductToc(i.productId,i.productInfo.isLivebook,i.productInfo.isLivevideo).then((function(t){if(t){var i=t.frontMatter||t.parts||t.backMatter?n.a.convertLivebookTocToTocItems(t,"http://livebook-test.com/"):n.a.convertLiveVideoTocToTocItems(t,"http://livevideo-test.com/");i.unshift(new s.a(e.id,n.a.PRODUCT_PAGE_KEY,e.link,[])),o(n.a.convertToFullProductTreeResults(e,i))}else r("Couldn't load product TOC")})).catch((function(e){r("Couldn't load product TOC")}))}))},e.prototype.getDotd=function(){return this.provider.getDotd()},e.prototype.autocompleteProducts=function(e){return this.provider.autocompleteProducts(e)},e.prototype.autocompleteConcepts=function(e,t,o,r){return this.provider.autocompleteConcepts(e,t,o,r)},e.prototype.getProductInfo=function(e){return this.provider.getProductInfo(e)},e}();t.a=i},723:function(e,t,o){"use strict";var r=o(134),n=o(847),s=o(416),i=o(28),a=o(456),c=o(573),l=o(661),u=function(){function e(e,t,o){void 0===o&&(o={}),this.config=i.c.getConfig(e,t),this.webUtils=new r.a(this.config),this.additionalParams=o}return e.prototype.getProductInfo=function(e){var t=this;return new Promise((function(o,r){t.getProductInfos().then((function(t){o(t.find((function(t){return t.externalId==e})))})).catch((function(e){return r(e)}))}))},e.prototype.getDotd=function(){var e=this;return new Promise((function(t,o){e.webUtils.ajax(e.webUtils.getAbsoluteBackendUrl("/search/todaysDealsAndProducts"),(function(e){if(e){for(var r in e)return void t(e[r]);t(null)}else o("Data cannot be null")}),(function(e){return o(e)}),{})}))},e.prototype.search=function(e,t,o,r,n){var s=this;return new Promise((function(i,a){Promise.all([s.getProductInfos(),s.getSearchResults(e,t,o,r,n),t?Promise.resolve([]):s.getProductsAsSearchResults(e)]).then((function(e){var t=e[0],o=(e[1].results||[]).concat(e[2]),r=s.findUniqueProductIdsInResults(o);i({results:o,products:t.filter((function(e){return r.productIdMap[e.externalId]||r.productManningIdMap[e.id]}))})})).catch((function(e){return a(e)}))}))},e.prototype.getSearchResults=function(e,t,o,r,n){var s=this;return new Promise((function(i,a){s.webUtils.isOnline()||null==s.additionalParams||null==s.additionalParams.getSearchResultsFallback?s.webUtils.ajax(s.webUtils.getAbsoluteBackendUrl("/api/search/search"),(function(e){return i(e)}),(function(e){return a(e)}),{query:e,product:t,categories:o,boostedProductType:r,isDeep:n}):s.additionalParams.getSearchResultsFallback(e,t).then((function(e){return i(e)})).catch((function(e){return a(e)}))}))},e.prototype.getShallowSearchResults=function(e){var t=this;return new Promise((function(o,r){t.webUtils.isOnline()||null==t.additionalParams||null==t.additionalParams.getSearchResultsFallback?t.webUtils.ajax(t.webUtils.getAbsoluteBackendUrl("/api/search/shallowSearch"),(function(e){return o(e)}),(function(e){return r(e)}),{query:e}):t.additionalParams.getSearchResultsFallback(e).then((function(e){return o(e)})).catch((function(e){return r(e)}))}))},e.prototype.autocompleteProducts=function(e){var t=this;return e=(e||"").trim(),new Promise((function(o,r){t.getProductInfos().then((function(t){o(a.a.getMatchingProductSuggestions(e,t))})).catch((function(e){return r(e)}))}))},e.prototype.getProductsAsSearchResults=function(e){var t=this;return e=(e||"").trim(),new Promise((function(o,r){t.getProductInfos().then((function(r){o(t.getMatchingSearchResults(e,r))}))}))},e.prototype.getMatchingSearchResults=function(e,t){return a.a.getMatchingProducts(e,t,.3).slice(0,10).map((function(e){var t=new c.a;return t.id="product-"+e.id,t.elementLink="",t.elementTitle="",t.indexTerm="",t.link=e.marketplaceLink,t.productId=e.externalId,t.productManningId=e.id,t.productTitle=e.title,t.productType="marketplaceProduct",t.score=50,t.subElementLink="",t.subElementTitle="",t.subSubElementLink="",t.subSubElementTitle="",t.tags="",t.text=e.title,t}))},e.prototype.autocompleteConcepts=function(e,t,o,r){return(e||"").trim().length<1?Promise.resolve([]):null==t||""==t.trim()?this.autocompleteLibraryConcepts(e):this.autocompleteProductConcepts(e,t,o,r)},e.prototype.fullTextAutocompleteProducts=function(e){var t=this;return new Promise((function(o,r){Promise.all([t.getProductInfos(),t.getShallowSearchResults(e)]).then((function(e){var r=e[0],n=t.findUniqueProductIdsInResults(e[1].results);o({results:e[1].results,products:r.filter((function(e){return n.productIdMap[e.externalId]||n.productManningIdMap[e.id]}))})})).catch((function(e){return r(e)}))}))},e.prototype.getProductToc=function(e,t,o){var r=this;return t&&!this.webUtils.isOnline()&&null!=this.additionalParams&&null!=this.additionalParams.getLivebookTocFallback?new Promise((function(t,o){r.additionalParams.getLivebookTocFallback(e).then((function(e){return t(e)})).catch((function(e){return o(e)}))})):l.a.getProductToc(this.webUtils,e,t,o)},e.prototype.autocompleteLibraryConcepts=function(e){var t=this;return this.webUtils.isOnline()?new Promise((function(o,r){t.webUtils.ajax(t.webUtils.getAbsoluteBackendUrl("/api/search/autocompleteConcepts"),(function(e){e&&e.length?o(t.cleanConcepts(e).map((function(e){return new s.a(e)}))):o([])}),(function(e){return r(e)}),{query:e})})):Promise.resolve([])},e.prototype.cleanConcepts=function(e){for(var t={},o=!1,r=0,n=e;r<n.length;r++){var s=n[r];"__proto__"==(s=(s||"").replace(/(\.\s*;)|(;\s*\.)/g,"").trim())&&(o=!0),t[s]=!0}var i=[];for(var a in o&&i.push("__proto__"),t)!0===t[a]&&i.push(a);return i},e.prototype.autocompleteProductConcepts=function(e,t,o,r){var n=this;return new Promise((function(s,i){n.getProductConcepts(t,o,r).then((function(t){var o=e.split(" "),r=t.filter((function(t){if(t.containsQuery(e)||t.ancestorDirectlyContainsQuery(e))return!0;for(var r=0,n=o;r<n.length;r++){var s=n[r];if(t.containsQuery(s)||t.ancestorDirectlyContainsQuery(s))return!0}})).slice(0,30);r.length>0?s(r):n.autocompleteLibraryConcepts(e).then((function(e){return s(e)})).catch((function(e){return i(e)}))})).catch((function(e){return i(e)}))}))},e.prototype.getProductConcepts=function(e,t,o){if(this.currentProduct==e&&null!=this.productConcepts)return this.productConcepts;var r=Promise.resolve([]);return t?r=this.getLivebookConcepts(e):o&&(r=this.getLivevideoConcepts(e)),this.productConcepts=r,this.currentProduct=e,this.productConcepts},e.prototype.getProductInfos=function(){var e=this;return null!=this.productInfosPromise?this.productInfosPromise:this.productInfosPromise=new Promise((function(t,o){e.webUtils.isOnline()||null==e.additionalParams||null==e.additionalParams.getProductInfosFallback?e.webUtils.ajax(e.webUtils.getAbsoluteBackendUrl("/api/search/productsAutocompleteInfo"),(function(o){if(o&&o.length){if(null!=e.additionalParams&&null!=e.additionalParams.onProductInfosArrived)try{e.additionalParams.onProductInfosArrived(o)}catch(e){console.log("Error:"+e)}var r=e.convertRawServerDataToProductInfos(o);e.getDotd().then((function(e){e&&a.a.assignDotdToProductInfos(r,e),t(r)})).catch((function(e){t(r)}))}else t([])}),(function(t){o(t),delete e.productInfosPromise})):e.additionalParams.getProductInfosFallback().then((function(o){return t(e.convertRawServerDataToProductInfos(o))})).catch((function(e){return o(e)}))}))},e.prototype.convertRawServerDataToProductInfos=function(e){var t=n.a.convertRawProducts(e);return t.push(n.a.createSpecialLivebookProduct()),t.push(n.a.createSpecialLivevideoProduct()),t.push(n.a.createSpecialMeapProduct()),a.a.upgradeProductInfoPaths(t,this.config)},e.prototype.getLivebookConcepts=function(e){var t=this;return new Promise((function(o,r){t.webUtils.isOnline()||null==t.additionalParams||null==t.additionalParams.getLivebookConceptsFallback?t.webUtils.ajax(t.webUtils.getAbsoluteLivebookAwsUrl(e+"/concepts.json"),(function(e){return o(t.updateLivebookConceptLinks(s.a.flatten(s.a.fromRawData(e))))}),(function(e){return r(e)})):t.additionalParams.getLivebookConceptsFallback(e).then((function(e){return o(t.updateLivebookConceptLinks(s.a.flatten(s.a.fromRawData(e))))})).catch((function(e){return r(e)}))}))},e.prototype.updateLivebookConceptLinks=function(e){if(null==e||0==e.length)return e;for(var t=0,o=e;t<o.length;t++){var r=o[t];if(r.link=a.a.getAbsoluteLivebookLink(this.config,r.link),null!=r.links&&r.link.length>0)for(var n=0,s=r.links;n<s.length;n++){var i=s[n];i.link=a.a.getAbsoluteLivebookLink(this.config,i.link)}}return e},e.prototype.getLivevideoConcepts=function(e){var t=this;return new Promise((function(o,r){l.a.getLivevideoToc(t.webUtils,e).then((function(e){for(var r=[],n=0,s=e;n<s.length;n++){var i=s[n];t.processLiveVideoTocItemToCreateConceptSuggestions(i,r)}o(r)})).catch((function(e){return r(e)}))}))},e.prototype.processLiveVideoTocItemToCreateConceptSuggestions=function(e,t){if(null!=e&&(t.push(new s.a(e.title,[{link:a.a.getAbsoluteLivevideoLink(this.config,e.link)}])),null!=e.children))for(var o=0,r=e.children;o<r.length;o++){var n=r[o];this.processLiveVideoTocItemToCreateConceptSuggestions(n,t)}},e.prototype.findUniqueProductIdsInResults=function(e){for(var t={},o={},r=0,n=e;r<n.length;r++){var s=n[r];t[s.productManningId]=!0,o[s.productId]=!0}return{productManningIdMap:t,productIdMap:o}},e}();t.a=u},847:function(e,t,o){"use strict";var r=o(127),n=o(368),s=function(){function e(){}return e.convertRawProducts=function(e){var t=this;return e&&0!==e.length?e.map((function(e){var o=e.publishedDate||e.expectedPublishDate||e.lastSignificantDate,s=o?new Date(o):null,i="";e.livebook?i="livebook":e.isLiveVideo?i="livevideo":-1!=(e.authors||e.authorshipDisplay||"").indexOf("chapters selected")&&(i="free");var a=null!=e.tags&&e.tags.length?e.tags.map((function(e){return e.name?e.name:e})):[],c=e.externalId;return e.isBundle&&!c&&(c="bundle-"+e.id),{id:e.id,externalId:c,title:e.title,cleanTitle:n.a.cleanBookTitle(e.title),slug:e.slug,isbn:e.isbn,authors:e.authors||e.authorshipDisplay,link:"",coverPath:e.coverPath||e.imageUrl,description:(e.subtitle||"")+" "+(e.aboutProductDescription||e.description||""),dateDescription:r.a.getDateAsString(s),date:s,tags:a,tagsText:a.join(", "),isLivebook:!!e.livebook,isLivevideo:!!e.isLiveVideo,productTypeDescription:i,isLiveaudio:!!e.hasAudio||!!e.isLiveaudio,isBundle:!!e.isBundle,price:t.getRawProductPrice(e),priceWithoutDiscount:t.getRawProductPriceWithoutDiscount(e)}})):[]},e.getRawProductPrice=function(e){return e.isBundle?e.price:e.isLiveVideo?this.getVideoPrice(e):this.getEbookPrice(e)},e.getRawProductPriceWithoutDiscount=function(e){return this.getRawProductPrice(e)},e.getEbookPrice=function(e){if(!e||!e.productOfferings||!e.productOfferings)return 0;var t=e.productOfferings.find((function(e){return"EBOOK"==e.productType}));return null!=t?t.price:0},e.getVideoPrice=function(e){if(!e||!e.productOfferings||!e.productOfferings)return 0;var t=e.productOfferings.find((function(e){return"LIVEVIDEO"==e.productType}));return null!=t?t.price:0},e.createSpecialMeapProduct=function(){return this.createSpecialProduct("MEAP","Manning Publications","A book can take a year or more to write, so how do you learn that hot new technology today? The answer is MEAP, the Manning Early Access Program. In MEAP, you read a book chapter-by-chapter while it's being written and get the final eBook as soon as it's finished. If you pre-order the pBook, you'll get it long before it's available in stores.",this.getManningBaseUrl()+"/meap-catalog",this.getManningBaseUrl()+"/meap-catalog")},e.createSpecialLivevideoProduct=function(){return this.createSpecialProduct("liveVideo","Manning Publications","Manning video courses are crafted to serve you as excellent learning tools. They link to the video from its text, they help you learn with exercises, and they support executable code for many languages.","https://livevideo.manning.com","https://www.manning.com/livevideo-program")},e.createSpecialLivebookProduct=function(){return this.createSpecialProduct("liveBook","Manning Publications","liveBooks are enhanced books. They add narration, interactive exercises, code execution, and other features to eBooks.","https://livebook.manning.com","https://www.manning.com/livebook-program#section-what-is-livebook")},e.createSpecialManningSiteProduct=function(){return this.createSpecialProduct("Manning Home Site","Manning Publications","Manning is an independent publisher of computer books and video courses for software developers, engineers, architects, system administrators, managers and all who are professionally involved with the computer business. We also publish for students and young programmers, including occasionally for children. We are an entirely virtual organization based on Shelter Island, New York, with many staff working from far-flung places like Manila and Zagreb.","https://www.manning.com/","https://www.manning.com/",!1)},e.createSpecialForumProduct=function(){return this.createSpecialProduct("Forum","Manning Publications","The Manning forums are a place for readers and technologists to engage in discussions about our books and the subjects they cover.","https://forums.manning.com/forums/list.page","https://forums.manning.com/forums/list.page",!1)},e.createSpecialSupportProduct=function(){return this.createSpecialProduct("Support","Manning Publications","Do you have a question or problem with the site? Need help? The Manning FAQs provides answers to frequently asked questions. And if all else fails, you can always contact Manning support and we'll be happy to respond.",this.getManningBaseUrl()+"/support",this.getManningBaseUrl()+"/support",!1)},e.createSpecialNewsletterProduct=function(){return this.createSpecialProduct("Newsletter","Manning Publications","Subscribe to our newsletter",this.getManningBaseUrl()+"/mail-preferences",this.getManningBaseUrl()+"/mail-preferences",!1)},e.createSpecialContactProduct=function(){return this.createSpecialProduct("Contact","Manning Publications","Contact us: Manning Publications Co. 20 Baldwin Road; PO Box 761; Shelter Island, NY  11964",this.getManningBaseUrl()+"/contact",this.getManningBaseUrl()+"/contact",!1)},e.createSpecialFreeContentProduct=function(){return this.createSpecialProduct("Free content center","Manning Publications","Manning Free Content Center","http://freecontent.manning.com/","http://freecontent.manning.com/",!1)},e.createSpecialCatalogProduct=function(){return this.createSpecialProduct("Catalog","Manning Publications","The catalog shows all our books and videos in one place",this.getManningBaseUrl()+"/catalog",this.getManningBaseUrl()+"/catalog",!1)},e.createSpecialDealOfTheDayProduct=function(){return this.createSpecialProduct("Deal of the Day","Manning Publications","Deal of the Day",this.getManningBaseUrl()+"/dotd",this.getManningBaseUrl()+"/dotd",!1)},e.createSpecialTokenProduct=function(){return this.createSpecialProduct("tokens","Use tokens to unlock pieces of book content.","Use tokens to unlock pieces of book content.",this.getManningBaseUrl()+"/token",this.getManningBaseUrl()+"/token")},e.createSpecialProduct=function(t,o,n,s,i,a){void 0===a&&(a=!0);var c=new e;return c.title=t,c.authors=o,c.coverPath=a?"https://s3-us-west-2.amazonaws.com/live-platforms-common-resources/resources/"+t+".jpg":"",c.description=n,c.externalId=t,c.link=s,c.marketplaceLink=i,c.slug="",c.tags=[],c.date=new Date,c.dateDescription=r.a.getDateAsString(new Date),c.isSpecialProduct=!0,c},e.getManningBaseUrl=function(){try{var e=document.location.href;if(e.indexOf("www-qa.")>=0||e.indexOf("livebook-qa.")>=0||e.indexOf("livevideo-qa.")>=0)return"https://www-qa.manning.com"}catch(e){}return"https://www.manning.com"},e}();t.a=s},848:function(e,t,o){"use strict";var r=function(e,t,o,r){this.id=e,this.title=t,this.link=o,this.children=r};t.a=r},849:function(e,t,o){var r=o(1192);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(98)(r,n);r.locals&&(e.exports=r.locals)}}]);
//# sourceMappingURL=vbook-ui~searchModule.chunk.js.map?b14d6b6c1c0922b95d26